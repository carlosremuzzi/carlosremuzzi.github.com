{"version":3,"sources":["scripts/app.js"],"names":["angular","module","PlantillaController","UtilFormly","Message","Storage","$stateParams","$location","$log","$mdSidenav","DataService","restUrl","Panel","ArrayUtil","backUrl","Documento","inicializarPlantilla","vm","id_plantilla","implicados","items","newItem","newTemplate","data","nombre","get","then","respuesta","datos","abreviacion","form_model","fromJson","plantilla_valor","transformGet","plantilla","i","length","type","existe_datosGenerales","existe_certificacionComprometido","actualizarPagina","total","existe_documento","togglePalette","ev","log","toggle","vistaPrevia","form_previo","dataToView","isObject","clearModel","vista_previa","guardarPlantilla","xplantilla_valor","copy","k","indexOf","toJson","_usuario_creacion","cuenta","id","generarAbreviacion","isDefined","Error","resp","sub_arr","max_num","pun","abc","xabc","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","rows","count","split","num","row","id_plantilla_formly","post","show","tipoMensaje","mensaje","path","_usuario_modificacion","put","error","push","elements","j","fieldGroup","getConfigItem","startCallback","index","item","notvisualize","init_index","endCallback","to_index","mover","to_index_l","val","element","to_item_fg","to_item_fg_num_cols","to_data_fg","dropCallback","template","drop_layout","init_index_l","tipo","mensajeError","insert","validation","name","message","startLayoutCallback","index_l","item_fg","data_fg","endLayoutCallback","dropLayoutCallback","elementAttributes","funcionAgregar","openEditItem","$mdOpenMenu","event","ik","init","opciones","templateOptions","options","value","Array","prototype","apply","this","arguments","splice","template_cite","to","tipoMembrete","url_img","editItem","i_l","xdata","xitem","isUndefined","shift","unshift","concat","removeItem","cancelEditItem","model","openMenu","config","clickOutsideToClose","escapeToClose","controller","PanelItemController","templateUrl","$scope","$mdPanel","mdPanelRef","xeditItem","closePanel","xremoveItem","xcancelEditItem","close","destroy","vmp","input_valid","validaciones","titulos","datosGenerales","inputt","editorTexto","documentosRelacionados","titulo","subtitulo","parrafo","lista","layout","vacio","input","radio","select","select_multiple","textarea","checkbox","datepicker","slider","switch","chips","cajachica","certificacionComprometido","listaContactos","pattern","verPdf","sizeObj","formu_prueba","$error","showPdf","recursiveShowError","getUser","idPlantilla","$inject","DocumentoController","Modal","ExpirationTime","iniciar","enviarEjecutandose","id_documento","getSession","cargarPlantilla","sw_enviado","verificarZonaHoraria","load","initAutoSave","guardar","resultado","setSession","sw_rechazado","estado","disableForm","form_actual","flujo","via_actual","para","via","offset","es_zona_horaria_bolivia","doc","Date","getTimezoneOffset","abrirDialogError","copearDocumento","confirm","model_actual","contacto","pl","nombre_plantilla","observaciones","verificar","valido","first_name","last_name","sw_es_respuesta","documento_padre","sw_grupo","grupo","docs_grupo","verDocumento","id_doc","showPdfId","agregarFlujo","documento","enviar","key","arr","id_usuario","reverse","transformarModel","arch","sw_location","sw","enviado","es_respuesta","save","removeSession","guardarDocumento","formu","toUpperCase","enviarMultiple","DialogErrorController","$mdDialog","vmd","cerrar","cancel","volverAtras","firmar","DialogFirmadorController","Util","DemofiService","verificarTokenConectado","iniciando","listTokens","response","iniciado","demofi_ejecutandose","tokens","token_conectado","autenticar","mostrar_progress","autenticando","login","pin","respLogin","finalizado","boton_autenticar_habilitado","autenticado","listCertificates","respCert","certificados","certificado_seleccionado","undefined","verificarServidor","cancelar","html","pdf","flag_html","show_pdf","esDispositivoMovil","loadCanvas","pdf_buffer","verObservaciones","observacion","idDocumento","RolController","DialogRolController","$timeout","obtenerMenus","id_rol","menus","rol_menus","fid_menu","id_menu","checked","registrarRol","datosEnviar","rol","descripcion","peso","menus_nuevos","existe","_fecha_creacion","_fecha_modificacion","hide","click","estados","usuario","url","fields","dialogController","MenuController","VistaPdfController","$sce","datos_enviar","cite","respuestaPdf","esDocumentoExterno","verHtml","mostrarPdf","showPdfx","PlantillasController","nuevaPlantilla","irPlantilla","pEvento","pIdentificador","estadoSw","permission","create","update","delete","buttons","tooltip","icon","onclick","buttonAgregar","MonitoreoController","charColors","$window","$filter","chart","graficos","cod","labelChart","tipoChart","grafico","mes","fecha_actual","getMonth","meses","docsContables","tipoInformePago","anio","getFullYear","limite_inferior","anios","aniosContables","limite_superior","limite_inferior_contable","anioContable","usuarios","gestiones","gestionActual","gestion","reiniciarChart","busqueda","ordenInverso","ordenarPor","consultarPresupuesto","consultarDocumentosUsuarioEstados","fechaInicial","fechaFinal","consultarDocumentosPendientes","consultarComprometido","consultarPagado","consultarReporteContable","labels","datasets","label","backgroundColor","bg","amarillo","borderColor","bo","borderWidth","verde","azul","reiniciar","page","page_cant","page_text","page_tot","refrescarChart","headers","title","mostrar","map","comprometido","parseFloat","replace","inicial","modificado","numero","isNaN","pagado","saldo","vigente","tipoInforme","datosConsulta","documentos","generarNombre","cabeceraPresupuesto","cabecera","filasPresupuesto","filas","nuevo","mostrarOcultar","columna","pendientes","nombres","apellidos","ENVIADO","RECHAZADO","DERIVADO","monto","generarPDF","presupuesto","orientation","DialogPDFController","url_get","global","relacionado","no_relacionado","actualizar","paginar","acc","Math","ceil","date","y","m","ImpresionController","verProgreso","showProgressAll","impresionMultiple","evento","DialogImpresionMultiple","obtenerDocumento","warning","documentoAImprimir","queryExtra","multiple","FirmarController","$q","FirmaticService","Loading","obtenerNumeroSeleccionados","cantidad","habilitarBotonFirma","firmarDocumentos","obtenerDocumentos","obtenidos","noObtenidos","promesas","Promise","resolve","arrayBufferToBase64","base64","errorObtener","all","reject","guardarDocumentosFirmados","guardado","noGuardado","nombreDocumento","docDic","respGuardado","firmarDocumentos2","configLoad","documentosParaFirmar","verificarSeleccionados","control","seleccionados","firmados","guardados","verificarEstado","respEstado","activo","cambiar","respDocumentos","firmarPdf","respuestaFirma","status","files","respGuardados","success","selected","firmado","buffer","defer","binary","bytes","Uint8Array","len","byteLength","String","fromCharCode","btoa","promise","formData","respCertificados","filtrarCertificadosValidos","yaFirmo","validarFirmador","firmante","ci","firmarAsincrono","indice","alias","firmarDocumento","firmadorValido","docs","cont","nombreArchivo","solicitudFirma","codigo_archivo","pdf_base64","sign","nombre_archivo","documentoFirmado","validos","esFirmaBolivia","esValido","yafirmo","habilitarSeleccion","estadoOpciones","v","t","obtenerSeleccionados","EnCursoController","DocumentosController","Datetime","irDocumento","nuevoDocumento","DialogEscojerPlantilla","iniciarDialog","urlBase","plantillas_disponibles","plantilla_seleccionada","elegir","es_jefe","key_item","opcion","NUEVO","CERRADO","DEFAULT","ContactosController","DialogContactoController","registrarContacto","otroEditar","tipo_entidad","otro_tipo","id_contacto","respContacto","obtenerTiposEntidad","respTipos","tiposEntidad","otro","habilitarOtro","departamentos","departamento","order","AprobacionController","respuestaDocumento","fecha","format","pRespuesta","isMobile","dc","isString","es_derivar","es_para","accion","usuario_proveido","aprobar","text","sw_crear","mensajeLoad","usuario_derivar","_usuario_seleccionado","derivar","_plantilla_seleccionada","observar","observado_por","destino","openSelect","currentTarget","next","children","show_select","crear","p","alert","VirtualController","usuariosVirtuales","cargo","seleccionar","console","UsuariosController","Syncronizar","DialogUsuarioController","$mdConstant","roles","rolesEnviar","flagEditar","rolesAsignados","usuario_rol","forEach","itemGlobal","indiceGlobal","valor","unidades","registrarUsuario","oficinas","id_oficina","fid_unidad","contrasena","numero_documento","email","ProfileController","SideNavFactory","getColor","userColor","getName","user","getEmail","getInitial","firstName","getData","datetimeLiteral","getEsJefe","abrirEditar","swEditarCuenta","ca","nombre_usuario","editarCuenta","usuario_enviar","apellido_paterno","swPut","contrasena_nueva","contrasena_confirm","verificarContrasena","user_set","username","apellido_materno","date_joined","setUser","editarConfiguracion","conf_enviar","id_conf_notificacion","cancelarEditar","LoginController","$auth","BreadcrumbFactory","activate","addClass","removeClass","localStorage","getItem","password","menu","max","it","setMenu","getMenu","route","getMenuOption","setParent","setCurrent","$sidenav","find","parent","prev","fadeOut","DialogRecuperarController","recuperar","iniciarSesion","ruta","setItem","codigo","location","href","err","irAVerificar","destroySession","abrirDialog","CiteController","sc","$watch","newValue","style","height","abrirSelector","mostrarContacto","cerrarSelector","buscarContacto","tempContactos","contactos","contador","vector","buscarObj","EncabezadoController","iniciarController","xu","u","xde","xpara","xvia","fd","form_nuevo","on","stopPropagation","usuarios_check","usuarios_jefes","newUser","el","moverUsuario","dir","nom","show_para","show_via","show_de","buscar_para","buscar_via","buscar_de","show_doc","closeSelectDoc","buscar_doc","xdocs","documentosAnular","DatosGeneralesController","push_gral","push_jefe","ConCopiaArchivoController","cadena","str","res","CajaChicaController","monto_total","calcularTotal","buscarPartidas","texto","isFloat","toFixed","toFloat","string","test","obtenerSaldo","showALert","cargarPartidas","ids_comprometidos","id_comprometido","pago_multiple","hasOwnProperty","buscar","doc_seleccionado","partida","Object","keys","buscarDocumentos","addRow","button","par_seleccionado","deleteRow","time","icons","info","icono","archivos","elegirPdf","onLoadModel","afiles","f","filetype","limpiarPdf","redondear","x","a","round","pow","archivo","cabeceras","Content-Type","urlFirma","urlFirmatic","axios","respFirma","errorFirma","errorEstado","service","$http","$compile","openModal","solicitudes","size","w","h","outerHeight","screenY","outerWidth","screenX","open","url_demofi","req","callRequest","pinToken","aliasParaFirmar","dataSend","logout","VerificarController","datosDocumento","respPost","token","esMovil","irInicio","currentNavItem","selectedIndex","min","previous","MainController","UtilFormlyFactory","parse","templates","o","$submitted","$setTouched","elem","new_model","clearElem","filterDates","lista_templates","lista_valores","form","fg","clase","parseInt","className","changeElement","field","disabled","grow","messages","required","idx","([a-zA-Zñáéíóú]+ ?)+","\\d+","([a-zA-Z0-9ñáéíóú]+ ?)+","^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$","^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$","listToForm","nro_columnas","columnas","nro_filas","formulario","layout-gt-sm","layout-align-gt-sm","placeholder","deshabilitar","todoMayuscula","onkeyup","onKeyup","validacion","obj","load_templates","factory","labelProp","valueProp","vertical","showItem","step","discrete","secondaryPlaceholder","deleteButtonLabel","deleteHint","mTop","mBot","labelw","labelRef","de","ref","encabezado","ccArchivo","labelCite","labelFecha","numeracionPagina","tipoHoja","labelx","num-cols","layout-align","UtilFactory","$injector","nano","l","toType","toString","call","match","toLowerCase","isJson","truncate","substring","stripHTML","getParams","args","first","defaultValue","second","position","print","css","popup","document","write","tmpl_print","body","focus","fullscreen","$document","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","documentElement","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","filterFields","filter","searchField","addPropertiesFormly","formly","extend","parseSave","getId","getFkData","fieldsData","e","serialize","json","join","serializeToJson","limpiar","submenu","pages","lengthOptions","formatDate","filterItem","isDate","formatTime","getKeys","types","idCanvasContainer","renderPage","viewport","getViewport","scale","canvas","createElement","ctx","getContext","renderContext","canvasContext","width","querySelector","appendChild","render","renderPages","pdfDoc","numPages","getPage","PDFJS","workerSrc","disableWorker","getDocument","StorageFactory","appName","existUser","existSession","removeUser","getToken","$local","set","remove","exist","$session","sessionStorage","RouteValidatorFactory","$rootScope","$on","onStateChangeStart","toState","toParams","fromState","existeUsuario","rutaPermitida","preventDefault","tienePermiso","stopAutoSave","ruta_destino","submenu_rutas","plantillas","/plantillas","/plantilla/:idPlantilla","/usuario","/elegir","/rol","/menu","/documentos","/documento/:idDocumento","aprobacion","/aprobacion","progreso","/progreso","impresion","/impresion","en_curso","/en_curso","/firmar","monitoreo","/monitoreo","/contactos","PanelFactory","newPanelPosition","relativeTo","addPanelPosition","xPosition","ALIGN_END","yPosition","BELOW","absolute","center","default_template","settings","attachTo","PanelController","panelClass","locals","openFrom","focusOnOpen","targetEvent","FormlyConfigFactory","formlyConfig","setType","ModalFactory","DialogController","add","column","done","answer","$alert","htmlContent","ariaLabel","ok","$confirm","textContent","MessageFactory","$mdToast","msg","timeout","typeIcon","EXITO","ERROR","ADVERTENCIA","INFORMACION","messageDefault","titleDefault","typeClass","ToastController","hideDelay","LoadingFactory","dataLocal","tiposDic","HttpInterceptorFactory","request","flag","base64Encode","cur","byteNum","digits","result","charCodeAt","charAt","ExpirationTimeFactory","$interval","fac","interval","getExpirationTime","autoSaveInterval","getPayload","tiempo","stopInterval","funcionGuardar","isFunction","refreshToken","sw_inactive","setToken","DocumentoFactory","new_url","absUrl","sw_url","abrirDialogPDF","firmas","navigator","userAgent","showProgress","setAttrs","DialogProgreso","fecha_mos","dateLiteral","hora_mos","bg_color","ArrayUtilFactory","regex","RegExp","fromIndex","toIndex","arr2","attrib","sw_obj","DatetimeFactory","pDate","separator","getDate","dateMonth","getPrevDateMonth","day","month","year","convert","isValid","getTime","isLessThan","milliseconds","isLessThanDays","subtractDays","isGreaterThan","isGreaterThanDays","addDays","days","diff","date2","date1","setFormatDate","now","timeLiteral","txt","floor","hours","minutes","getSeconds","d","standar","monthLiteral","dayslong","getDay","months","getHours","getMinutes","last","daysBetweenTwoDates","weeks","hoursBetweenTwoDates","isYesterday","minutesBetweenTwoDates","seconds","secondsBetweenTwoDates","betweenTwoDates","s","abs","parseDate","parseDateDjango","AuthInterceptor","interceptor","requestError","when","responseError","rejection","$httpProvider","interceptors","VisorImagenesController","FileUploader","DialogImagenController","eliminarImagen","pArchivo","imagenes","imagenesEliminar","mostrarImagen","component","controllerAs","bindings","ancho","alto","eliminar","linkTooltipController","createTooltip","new_html","directive","scope","restrict","link","elm","attrs","$td","append","$card","mouseover","mouseout","root","define","amd","$","SimpleModule","simpleHotkeys","simpleUploader","exports","require","jQuery","simple","hotkeys","uploader","AlignmentButton","BlockquoteButton","BoldButton","Button","Clipboard","CodeButton","CodePopover","ColorButton","FontScaleButton","Formatter","HrButton","ImageButton","ImagePopover","IndentButton","Indentation","InputManager","ItalicButton","Keystroke","LinkButton","LinkPopover","ListButton","OrderListButton","OutdentButton","Popover","Selection","Simditor","StrikethroughButton","TableButton","TitleButton","Toolbar","UnderlineButton","UndoManager","child","ctor","constructor","hasProp","__super__","slice","superClass","pluginName","_range","_startNodes","_endNodes","_containerNode","_nodes","_blockNodes","_rootNodes","_init","editor","_module","_selection","getSelection","_this","reset","getRangeAt","clear","removeAllRanges","_error","range","ffOrIE","addRange","util","browser","firefox","msie","inputManager","focused","rangeCount","startNodes","startContainer","parentsUntil","endNodes","collapsed","endContainer","containerNode","commonAncestorContainer","nodes","is","each","node","$endNode","$node","$nodes","endIndex","sharedIndex","startIndex","eq","contents","merge","unique","blockNodes","isBlockNode","rootNodes","$parent","rangeAtEndOf","afterLastNode","beforeLastNode","endNode","endNodeLength","lastNodeIsBr","getNodeLength","endOffset","contains","addBack","n","$lastChild","beforeLastbr","isLastNode","nodeType","nodeValue","rangeAtStartOf","startNode","startOffset","insertNode","setRangeAfter","setEndAfter","collapse","setRangeBefore","setEndBefore","setRangeAtStartOf","setEnd","setRangeAtEndOf","$lastNode","lastChild","lastChildLength","lastText","nodeLength","isEmptyNode","phBr","deleteRangeContents","atEndOfBody","atStartOfBody","endRange","startRange","cloneRange","empty","setStart","deleteContents","breakBlockEl","$el","setStartBefore","before","extractContents","endCaret","startCaret","_selectionSaved","restore","createRange","opts","allowedTags","allowedAttributes","allowedStyles","_allowedTags","_allowedAttributes","img","code","_allowedStyles","h1","h2","h3","h4","decorate","trigger","undecorate","clone","autolink","$link","findLinkNode","lastIndex","linkNodes","re","replaceEls","subStr","uri","$parentNode","closest","exec","createTextNode","replaceWith","blockNode","len1","ref1","cleanNode","insertBefore","recursive","$blockEls","$childImg","$p","attr","isDecoration","textNode","isDecoratedNode","blockEl","unwrap","hasClass","tagName","makeArray","attributes","removeAttr","_cleanNodeStyles","tr","pair","styleStr","styles","trim","clearHtml","lineBreak","container","beautify","$contents","uselessP","invalid","_modifierKeys","_arrowKeys","selectAllKey","submitKey","throttledValueChanged","throttle","params","setTimeout","throttledSelectionChanged","triggerEvent","clipboard","pasting","_selectionTimer","clearTimeout","selection","$rootBlocks","lastCaretPosition","formatter","formatted","insertAfter","support","onselectionchange","proxy","_onKeyDown","_onKeyPress","_onKeyUp","_onMouseUp","_onFocus","_onBlur","_onDrop","_onInput","modify","os","mac","$children","firstBlock","lastBlock","$blockEl","undoManager","caretPosition","triggerHandler","sync","currentState","caret","respondTo","keystroke","which","metaKey","oninput","appendTo","_keystrokeHandlers","_initKeystrokeHandlers","handler","aliases","base","keyNameMap","Node","ELEMENT_NODE","titleEnterHandler","safari","$br","shiftKey","webkit","$prevBlockEl","$rootBlock","isWebkit","$cloneNode","listEl","newBlockEl","newListEl","nextAll","after","breakNode","setStartAfter","$closestBlock","$childList","$newLi","$prevChildList","$prevNode","$textNode","isFF","nodeName","$newNode","codeStr","$firstChild","_index","_capacity","_startPosition","_endPosition","redoShortcut","undoShortcut","_stack","win","undo","redo","throttledPushState","_pushUndoState","src","resetCaretPosition","startPosition","_getPosition","endPosition","start","state","hidePopover","innerHTML","_getNodeOffset","merging","isNumeric","TEXT_NODE","prevNode","previousSibling","_getNodeByPosition","childNodes","end","warn","version","appVersion","linux","unix","mobile","chrome","edge","ie","ref2","ref3","ref4","ua","mozilla","reflow","offsetHeight","isMac","ctrlKey","dataURLtoBlob","dataURL","BlobBuilder","arrayBuffer","bb","blobArray","byteString","hasArrayBufferViewSupport","hasBlobConstructor","intArray","mimeString","supportBlob","window","Blob","Boolean","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","atob","ArrayBuffer","decodeURIComponent","getBlob","func","wait","rtn","throttled","timeoutID","delta","formatHTML","cursor","indentString","lastMatch","level","repeatString","inArray","isStartTag","isEndTag","toolbar","toolbarFloat","toolbarHidden","toolbarFloatOffset","_tpl","wrapper","floatInitialized","initToolbarFloat","toolbarHeight","isArray","_render","list","left","placeholderEl","bottomEdge","scrollTop","topEdge","top","prependTo","findButton","addButton","btn","tabIndent","codeButton","active","indent","isBackward","$blockNodes","$endNodes","$startNodes","include","r","outdentBlock","indentBlock","$nextTd","$nextTr","$parentLi","$pre","$tr","marginLeft","indentText","indentWidth","selectNode","$prevTd","$prevTr","outdentText","pasteImage","cleanPaste","_pasteBin","_processPasteByClipboardApi","_getPasteContent","pasteContent","_processPasteContent","_pasteInBlockEl","_pastePlainText","imageFile","pasteItem","uploadOpt","originalEvent","clipboardData","getAsFile","upload","callback","ul","$img","blob","insertPosition","lastLine","len2","len3","len4","line","lines","q","pop","connect","defaultImage","uploadOpts","setValue","_placeholder","execCommand","results","blur","getValue","cloneBody","emptyP","firstP","lastP","popover","off","removeData","i18n","zh-CN","blockquote","bold","color","coloredText","hr","image","externalImage","uploadImage","uploadFailed","uploadError","imageUrl","imageSize","imageAlt","restoreImageSize","uploading","outdent","italic","linkText","linkUrl","linkTarget","openLinkInCurrentWindow","openLinkInNewWindow","removeLink","ol","strikethrough","table","insertRowAbove","insertRowBelow","deleteColumn","insertColumnLeft","insertColumnRight","deleteTable","normalText","underline","alignment","alignCenter","alignLeft","alignRight","selectLanguage","fontScale","fontScaleXLarge","fontScaleLarge","fontScaleNormal","fontScaleSmall","fontScaleXSmall","paintRow","paintCell","dissolveRow","dissolveCell","addBorder","removeBorder","listDisc","listCircle","listSquare","listDecimal","listDecimal0","listUpperRoman","listLowerRoman","listUpperAlpha","listLowerAlpha","listGreek","toggleList","en-US","alignJustify","_t","menuWrapper","menuItem","htmlTag","disableTag","needFocus","shortcut","tag","exceed","noFocus","param","toggleClass","siblings","right","command","editorActive","setActive","setDisabled","mousedown","_status","iconClassOf","setIcon","renderMenu","$menuBtnEl","$menuItemEl","menuEl","data-param","_disableStatus","_activeStatus","target","_initLabelWidth","$fields","_labelWidth","$field","$label","$target","refresh","editorOffset","maxLeft","targetH","targetOffset","$rootNodes","replaceAll","sizeMap","x-large","large","small","x-small","$scales","$span","fontSize","queryCommandState","hex","rgb","getComputedStyle","getPropertyValue","_convertRgbToHex","selectNodeContents","rgbToHex","g","b","componentToHex","c","$list","anotherType","li","$li","OrderListStyleButton","createMenu","editMenu","$ol","clearCache","nodeCache","pre","_checkMode","cloneContents","inlineMode","$code","lang","wrapInner","_inlineCommand","_blockCommand","resultNodes","$option","langs","codeLanguages","selectEl","$newBlock","txtNode","one","urlEl","textEl","tpl","unlinkEl","selectTarget","imageButton","$masks","mask","$mask","file","_initUploader","$uploadItem","$input","createInput","uploadProgress","accept","inline","createImage","readImageFile","loadImage","srcEl","prop","loaded","percent","img_path","parseJSON","file_path","xhr","statusText","responseText","positionMask","imgOffset","wrapperOffset","Image","onload","data-image-size","onerror","widthEl","heightEl","altEl","_loadImage","_resizeImg","inputEl","_restoreImg","alt","$uploadBtn","onlySetVal","indentation","$hr","$nextBlock","td","col","th","_initShortcuts","$container","_tdNav","direction","$anotherTr","action","anotherTag","parentTag","_nextRow","_prevRow","initResize","$table","$colgroup","$resizeHandle","$wrapper","cant_td","max_td","$trr","$col","refreshTableWidth","class","contenteditable","pageX","$handle","$leftCol","$leftTd","$rightCol","$rightTd","minWidth","startHandleLeft","startLeftWidth","startRightWidth","startX","tableWidth","deltaX","leftWidth","rightWidth","wrap","createTable","$trs","prevAll","colNum","rowNum","$tbody","cols","tam","_changeCellTag","cell","$cell","$newTr","insertRow","cellTag","prepend","deleteCol","$newTd","noOtherCol","noOtherRow","insertCol","$newCol","$block","text-align","align","photo","visible","getVisible","setVisible","SidenavDirective","SidenavController","random","debounce","timer","context","buildDelayedToggler","navID","debug","toggleLeft","send","bindToController","slideUp","$this","slideToggle","SelectDateController","initDays","initMonths","initYears","ngModel","years","yearIni","yearEnd","oldValue","ngDisabled","ngRequired","ngLabel","PaletteFormlyController","addItem","elementos","expanded","acmeNavbar","NavbarController","profile","getFirstName","MenuCardController","titleTable","constant","simditorConfig","locale","content","iElm","iAttrs","contentEditable","changed","DocumentoIdentidadController","fecha_nacimiento","persona","complemento","nro_documento","tipo_documento","isDisabled","search","loading","tipos","onlyCi","CrudTableController","$state","getFields","seleccionando","existeSeleccionado","estadoModificado","seleccionarTodos","prevent","getItems","openDialog","dataGrid","saveAll","dataSave","promises","savePromise","edit","deleteItem","eventSave","query","onlyFields","estadoChecks","busqueda_estado","searchPro","tipo_busqueda","campo_seleccionado","check_fechas","fecha_inicio","fecha_final","setHours","filterItems","xfield","arrindex","object","fkeys","addOptionSelected","optionSelected","setFormly","setHeaders","editable","permissions","condiciones","fks","array","orderItem","pos","PdfController","showFilter","removeFilter","$dirty","$setPristine","buttonEvent","bookmark","limit","sw_cite","current","read","limitOptions","rowSelection","multiSelect","autoSelect","decapitate","largeEditDialog","boundaryLinks","limitSelect","pageSelect","idShow","informacionBienes","rojo","celeste","lila","naranja","options_default","scales","yAxes","ticks","beginAtZero","xAxes","autoSkip","legend","boxWidth","tooltips","mode","bar","xchart","Chart","helper","FileReader","CanvasRenderingContext2D","extension","pUrl","lastIndexOf","$eval","ngMostrarThumb","drawImage","isFile","File","isImage","onLoadFile","onLoadImage","ngThumb","reader","readAsDataURL","CargadorArchivosController","fotosEliminar","queue","formatos","permitidos","filters","fn","clickUp","esImagen","anchoMiniatura","altoMiniatura","soloImagenes","maxArchivosPermitidos","getParent","getCurrent","BreadcrumbController","msgError","putWithFiles","patch","postWithFiles","method","responseType","fileURL","URL","createObjectURL","trustAsResourceUrl","parseError","detail","non_field_errors","xcad","campo","error500","error404","error403","error401","errorConnection","option","ThemeConfig","$mdThemingProvider","theme","primaryPalette","accentPalette","runBlock","PageNoLogin","RouteValidator","MyFormlyConfig","paths","exitFullScreen","$toasts","keyCode","addEventListener","mozFullScreen","run","routerConfig","$stateProvider","$urlRouterProvider","otherwise","moment","$logProvider","$authProvider","authUrl","$mdDateLocaleProvider","$mdAriaProvider","debugEnabled","disableWarnings","loginUrl","tokenName","tokenPrefix","storageType","dateString","toDate","NaN","defaults","$templateCache"],"mappings":"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","file":"../../scripts/app-f27eedfa14.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('app', [\n      'ngSanitize',\n      'ui.router',\n      'ngMaterial',\n      'md.data.table',\n      'formlyMaterial',\n      'satellizer',\n      'dndLists',\n      'angularFileUpload',\n      'leaflet-directive',\n      'rzModule',\n      'angular-timeline',\n      'naif.base64',\n      'angular-bind-html-compile',\n      'ngCsv'\n    ]);\n\n})();\n\n(function() {\r\n\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app')\r\n    .controller('PlantillaController', PlantillaController);\r\n\r\n  /** @ngInject */\r\n  function PlantillaController( UtilFormly, Message, Storage, $stateParams, $location, $log, $mdSidenav, DataService, restUrl, Panel, ArrayUtil, backUrl,  Documento) {\r\n    var vm = this;\r\n\r\n    var init_index = null; // indice del item que inicia el efecto dnd\r\n    var to_index = null; // indice al que apunta el efecto dnd\r\n\r\n    var init_index_l = null; // indice del item que inicia el efecto dnd y esta dentro de un layout\r\n    var to_index_l = null; // indice al que apunta el efecto dnd y apunta a una posicion dentro de un layout\r\n    var drop_layout = false; // true: indica si se dropeo dentro de un layout, para que dropCallback no se active\r\n    var item_fg = null; // Objeto de referencia para fieldGroup del layout que inicia el efecto dnd\r\n    var data_fg = null; // Objeto de referencia limpio(que tiene la estructura minima de los templates) para fieldGroup del layout que inicia el efecto dnd\r\n    var to_item_fg = null; // Objeto de referencia para fieldGroup del layout al que se esta dropeando\r\n    var to_data_fg = null; // Objeto de referencia limpio(que tiene la estructura minima de los templates) para fieldGroup del layout al que se esta dropeando\r\n    var to_item_fg_num_cols = null; // Numero de columnas que puede soportar el layout al que se esta dropeando\r\n\r\n    var cuenta = Storage.getUser();\r\n    vm.id_plantilla = $stateParams.idPlantilla;\r\n    vm.form_model = {};\r\n    vm.items = [];\r\n    vm.data = [];\r\n    vm.existe_documento = false;\r\n    vm.existe_datosGenerales = false;\r\n    vm.existe_certificacionComprometido = false;\r\n    vm.url_img = null;\r\n\r\n    //cargamos funciones\r\n    vm.funcionAgregar = funcionAgregar;\r\n    vm.editItem = editItem;\r\n    vm.removeItem = removeItem;\r\n    vm.openEditItem = openEditItem;\r\n    vm.cancelEditItem = cancelEditItem;\r\n    vm.dropCallback = dropCallback;\r\n    vm.endCallback = endCallback;\r\n    vm.startCallback = startCallback;\r\n    vm.dropLayoutCallback = dropLayoutCallback;\r\n    vm.endLayoutCallback = endLayoutCallback;\r\n    vm.startLayoutCallback = startLayoutCallback;\r\n    vm.guardarPlantilla = guardarPlantilla;\r\n    vm.vistaPrevia = vistaPrevia;\r\n    vm.verPdf = verPdf;\r\n    vm.openMenu = openMenu;\r\n    vm.togglePalette = togglePalette;\r\n\r\n    inicializarPlantilla();\r\n    function inicializarPlantilla() {\r\n        if ( vm.id_plantilla == 0 ) {\r\n            // Nuevo\r\n            vm.implicados = [];\r\n            vm.items = [ newItem(UtilFormly.newTemplate('cite')) ];\r\n            vm.data = [  UtilFormly.newTemplate('cite') ];\r\n            vm.nombre = \"Nueva plantilla\";\r\n        } else {\r\n            DataService.get(restUrl + 'plantillasFormly/plantilla_formly/' + vm.id_plantilla)\r\n            .then(function (respuesta) {\r\n                vm.nombre = respuesta.datos.nombre;\r\n                vm.abreviacion = respuesta.datos.abreviacion;\r\n                vm.form_model = angular.fromJson(respuesta.datos.plantilla_valor);\r\n                vm.items = transformGet(angular.fromJson(respuesta.datos.plantilla));\r\n                vm.data = angular.fromJson(respuesta.datos.plantilla);\r\n                for (var i = 0; i < vm.data.length; i++) {\r\n                    if( vm.data[i].type=='datosGenerales' ) vm.existe_datosGenerales = true;\r\n                    if( vm.data[i].type=='certificacionComprometido' ) vm.existe_certificacionComprometido = true;\r\n                }\r\n                actualizarPagina(vm.data[0]);\r\n                return DataService.get(restUrl + 'plantillasFormly/documento/?abreviacion='+vm.abreviacion)\r\n            })\r\n            .then(function (respuesta) {\r\n                if(respuesta.datos.total>0){\r\n                    vm.existe_documento = true;\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    function togglePalette(ev) {\r\n        $log.log(\"evento toggle-> \",ev);\r\n        $mdSidenav('right').toggle();\r\n    }\r\n\r\n    function vistaPrevia() {\r\n        vm.form_previo = UtilFormly.dataToView(vm.data);\r\n        // console.log(vm.form_previo);\r\n        if (angular.isObject(vm.form_model)) vm.form_model = UtilFormly.clearModel(vm.data, vm.form_model);\r\n        vm.vista_previa = true;\r\n    }\r\n\r\n    function guardarPlantilla() {\r\n        var xplantilla_valor = angular.copy(vm.form_model);\r\n        var abreviacion;\r\n        if(vm.nombre){\r\n            for (var k in xplantilla_valor) {\r\n                if(k.indexOf(\"editorTexto\")===-1 &&  k.indexOf(\"textarea\")===-1){\r\n                    delete xplantilla_valor[k];\r\n                }else if(xplantilla_valor[k]==''){\r\n                    delete xplantilla_valor[k];\r\n                }\r\n            }\r\n\r\n            var plantilla = {\r\n                nombre: vm.nombre,\r\n                plantilla: angular.toJson(vm.data),\r\n                plantilla_valor: angular.toJson(xplantilla_valor),\r\n                _usuario_creacion: cuenta.id\r\n            };\r\n\r\n            abreviacion = (vm.existe_documento)? vm.abreviacion : Documento.generarAbreviacion(vm.nombre);\r\n\r\n            DataService.get(restUrl+\"plantillasFormly/plantilla_formly/abreviacion/\"+abreviacion)\r\n            .then(function (respuesta) {\r\n                // console.log(respuesta);\r\n                if(respuesta && angular.isDefined(respuesta.datos))\r\n                    return respuesta.datos;\r\n                else\r\n                    throw new Error('sin respuesta');\r\n            })\r\n            .then(function (resp) {\r\n                var abc = ['', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z' ];\r\n                var xabc = { 'A':1, 'B':2, 'C':3, 'D':4, 'E':5, 'F':6, 'G':7, 'H':8, 'I':9, 'J':10, 'K':11, 'L':12, 'M':13, 'N':14, 'O':15, 'P':16, 'Q':17, 'R':18, 'S':19, 'T':20, 'U':21, 'V':22, 'W':23, 'X':24, 'Y':25, 'Z':26 };\r\n\r\n                var sub_arr, max_num, pun;\r\n                max_num=-1;\r\n                pun = false\r\n                if(resp.rows.count){\r\n                    sub_arr = resp.rows.rows[0].abreviacion.split('-');\r\n                    max_num = xabc[sub_arr[1]];\r\n                    for (var i = 0; i < resp.rows.rows.length; i++) {\r\n                        sub_arr = resp.rows.rows[i].abreviacion.split('-');\r\n                        resp.rows.rows[i].num = sub_arr[1];\r\n                        if( xabc[sub_arr[1]] > max_num )\r\n                            max_num = xabc[sub_arr[1]];\r\n                        if( resp.rows.rows[i].abreviacion==vm.abreviacion )\r\n                            pun = true;\r\n\r\n                    }\r\n                    max_num++;\r\n                    abreviacion+='-'+abc[max_num];\r\n                }\r\n\r\n                if( vm.id_plantilla>0 && resp.row.rows[0] && resp.row.rows[0].id_plantilla_formly==vm.id_plantilla ){\r\n                    abreviacion = vm.abreviacion;\r\n                }\r\n                if( vm.id_plantilla>0 && pun){\r\n                    abreviacion = vm.abreviacion;\r\n                }\r\n                if( vm.id_plantilla==0 && max_num==-1 && resp.row.count==1 )\r\n                    abreviacion += '-A';\r\n                plantilla.abreviacion = abreviacion;\r\n\r\n                if (vm.id_plantilla == 0) {\r\n                    //nuevo\r\n                    plantilla._usuario_creacion = cuenta.id;\r\n                    DataService.post(restUrl + \"plantillasFormly/plantilla_formly\", plantilla)\r\n                    .then(function (respuesta) {\r\n                        Message.show(respuesta.tipoMensaje, respuesta.mensaje);\r\n                        $location.path('plantillas');\r\n                    });\r\n                }else {\r\n                    //editando\r\n                    plantilla._usuario_modificacion = cuenta.id;\r\n                    DataService.put(restUrl + \"plantillasFormly/plantilla_formly/\" + vm.id_plantilla, plantilla)\r\n                    .then(function (respuesta) {\r\n                        Message.show(respuesta.tipoMensaje, respuesta.mensaje);\r\n                        $location.path('plantillas');\r\n                    });\r\n                }\r\n            })\r\n\r\n        }else {\r\n            Message.error('Debe llenar nombre y abreviacion');\r\n        }\r\n\r\n    }\r\n\r\n    function transformGet(data) {\r\n        var items = [];\r\n        for (var i = 0; i < data.length; i++) {\r\n            if( data[i].type!==\"layout\" ){\r\n                items.push(newItem(data[i]));\r\n            }else {\r\n                var elements = [];\r\n                for (var j = 0; j < data[i].fieldGroup.length; j++) {\r\n                    elements.push(newItem( UtilFormly.getConfigItem(data[i].fieldGroup[j]) ));\r\n                }\r\n                data[i].fieldGroup = elements;\r\n                items.push(newItem(data[i]));\r\n            }\r\n        }\r\n        return items;\r\n    }\r\n\r\n    /**\r\n        El orden en que se activan las funciones es diferente y para cada uno se construyo un camino\r\n        CG: Contenedor General\r\n        draguear: levantar\r\n        dropear: dejar, poner, añadir\r\n        * En los movimientos Drag And Drop (dnd)\r\n            1.- cuando se jala de la paleta se puede activar dropCallback o bien dropLayoutCallback solo uno\r\n            2.- Si se draguea del CG se activa startCallback y se puede dropear al CG o a un Layout. una vez que se termine de dropear automaticamente se activa endCallback\r\n            3.- Si se draguea de un Layout se activa startLayoutCallback y se puede dropear al CG, al mismo layout o a otr layout, una vezque se termine de dropear automaticamente se activa endLayoutCallback\r\n        * si se añade elementos con el boton + de la paleta, este solo añadira al CG\r\n    */\r\n\r\n    // cargamos los templates\r\n    // for (var i = 0; i < vm.data.length; i++) {\r\n    //   var item = newItem();\r\n    //   item.val.element.push(UtilFormly.getConfigItem(vm.data[i]));\r\n    //   vm.items.push(item);\r\n    // }\r\n\r\n\r\n    /**\r\n      Funcion que guardara los datos de un elemento que se empieza a mover con dnd\r\n      @param {Integer} index Indice del item que se clickeo para drag\r\n      @param {Objeto} item Objeto item que tiene la forma de newItem\r\n    */\r\n    function startCallback(index, item){\r\n        // console.log(\"startCallback-\"+index);\r\n        // console.log(item);\r\n        item.notvisualize = true;\r\n        init_index = index;\r\n    }\r\n    /**\r\n      Funcion que se encarga de mover los items\r\n    */\r\n    function endCallback(){\r\n        // console.log(\"endCallback\");\r\n        if( to_index!==null ){\r\n            // console.log(\"moviendo a el contenedor general\");\r\n            if( init_index < to_index ) to_index--;\r\n            ArrayUtil.mover( vm.items, init_index, to_index );\r\n            ArrayUtil.mover( vm.data, init_index, to_index );\r\n            delete vm.items[to_index].notvisualize;\r\n            init_index = null;\r\n            to_index = null;\r\n        }else {\r\n            if( to_index_l!==null ){\r\n                // console.log(\"moviendo a layout\");\r\n                // console.log(to_item_fg);\r\n                // console.log(to_data_fg);\r\n                if( vm.items[init_index].val.element[0].type!==\"layout\" ){\r\n                    if( to_item_fg.length < to_item_fg_num_cols ){\r\n                        if( to_item_fg.length==0 ) to_index_l = 0;\r\n                        ArrayUtil.mover( vm.items, init_index, to_index_l, to_item_fg );\r\n                        ArrayUtil.mover( vm.data, init_index, to_index_l, to_data_fg );\r\n                        delete to_item_fg[to_index_l].notvisualize;\r\n                    }else {\r\n                        delete vm.items[init_index].notvisualize;\r\n                        Message.error(\"No puede añadir mas elementos\");\r\n                    }\r\n                }else {\r\n                    delete vm.items[init_index].notvisualize;\r\n                    Message.error(\"No puede añadir contenedores dentro de contenedores\");\r\n                }\r\n            }else {\r\n                delete vm.items[init_index].notvisualize;\r\n            }\r\n            init_index = null;\r\n            to_index_l = null;\r\n        }\r\n    }\r\n\r\n    /**\r\n      Funcion que se ejecuta cuando se dropea un elemento a la lista general\r\n      @param {Integer} index Indice del item que se clickeo para drag\r\n      @param {Objeto} template Objeto que es el template del item que se movio\r\n    */\r\n    function dropCallback(index, template) {\r\n        if(!drop_layout){\r\n            \r\n            if( init_index==null && init_index_l==null ){\r\n                // si se esta jalando desde la paleta\r\n                var tipo = template;\r\n                try {\r\n                    var mensajeError = \"La plantilla solo puede tener un elemento \";\r\n                  if (vm.existe_datosGenerales && tipo == 'datosGenerales') {\r\n                    throw Error(mensajeError + tipo)\r\n                  }\r\n                  if (vm.existe_certificacionComprometido && tipo == 'certificacionComprometido') {\r\n                    throw Error(mensajeError + tipo)\r\n                  }\r\n        \r\n                  if (tipo == 'datosGenerales') vm.existe_datosGenerales = true;\r\n                  if (tipo == 'certificacionComprometido') vm.existe_certificacionComprometido = true;\r\n                  template = UtilFormly.newTemplate(tipo);\r\n                  var item = newItem(template);\r\n                  if( vm.data.length==0 ) index = 0;\r\n                  ArrayUtil.insert( vm.items, index, item );\r\n                  ArrayUtil.insert( vm.data, index, UtilFormly.getConfigItem(template) );\r\n                  delete vm.data[index].validation;\r\n                } catch (error) {\r\n                  if (error.name == 'Error') Message.error(error.message);\r\n                }\r\n\r\n            }else {\r\n                // console.log(\"guardando index--\"+index);\r\n                to_index = index;\r\n            }\r\n        } else {\r\n            drop_layout = false;\r\n        }\r\n    }\r\n\r\n    /**\r\n      Funcion que guardara los datos de un elemento que se empieza a mover con dnd\r\n      @param {Integer} index Indice del item que se clickeo para drag\r\n      @param {Objeto} item Objeto item que tiene la forma de newItem\r\n      @param {Integer} index_l Indice del layout que se clickeo para drag\r\n    */\r\n    function startLayoutCallback(index, item, index_l){\r\n        // console.log(\"startLayoutCallback--\"+index+\"--\"+index_l);\r\n        // console.log(item);\r\n        item.notvisualize = true;\r\n        init_index_l = index;\r\n        item_fg = vm.items[index_l].val.element[0].fieldGroup;\r\n        data_fg = vm.data[index_l].fieldGroup;\r\n        // console.log(item_fg);\r\n        // console.log(data_fg);\r\n    }\r\n    /**\r\n      Funcion que guardara los datos de un elemento que se empieza a mover con dnd\r\n    */\r\n    function endLayoutCallback(){\r\n        if( to_index_l!==null ){\r\n            if( to_item_fg===item_fg ){\r\n                // console.log(\"moviendo de layout a si mismo\");\r\n                if( init_index_l < to_index_l ) to_index_l--;\r\n                ArrayUtil.mover( item_fg, init_index_l, to_index_l );\r\n                ArrayUtil.mover( data_fg, init_index_l, to_index_l );\r\n                delete item_fg[to_index_l].notvisualize;\r\n            }else {\r\n                // console.log(\"moviendo de layout a layout\");\r\n                if( to_item_fg.length==0 ) to_index_l = 0;\r\n                ArrayUtil.mover( item_fg, init_index_l, to_index_l, to_item_fg );\r\n                ArrayUtil.mover( data_fg, init_index_l, to_index_l, to_data_fg );\r\n                delete to_item_fg[to_index_l].notvisualize;\r\n            }\r\n            init_index_l = null;\r\n            to_index_l = null;\r\n        }else {\r\n            if( to_index!==null ){\r\n                // console.log(\"moviendo a afuera de layout\");\r\n                ArrayUtil.mover( item_fg, init_index_l, to_index, vm.items );\r\n                ArrayUtil.mover( data_fg, init_index_l, to_index, vm.data );\r\n                delete vm.items[to_index].notvisualize;\r\n            }else {\r\n                delete item_fg[init_index_l].notvisualize;\r\n            }\r\n            init_index_l = null;\r\n            to_index = null;\r\n        }\r\n    }\r\n\r\n    /**\r\n      Funcion que se ejecuta cuando se dropea un elemento a la lista\r\n      @param {Integer} index Indice del item que se clickeo para drag\r\n      @param {Objeto} template Objeto que es el template del item que se movio\r\n      @param {Integer} index_l Indice del layout al que se esta dropeando\r\n    */\r\n    function dropLayoutCallback(index, template, index_l){\r\n        // console.log(\"dropLayoutCallback--\"+index);\r\n        // console.log(template);\r\n        // console.log(index_l);\r\n        drop_layout = true;\r\n        to_item_fg = vm.items[index_l].val.element[0].fieldGroup;\r\n        to_data_fg = vm.data[index_l].fieldGroup;\r\n        to_item_fg_num_cols = vm.items[index_l].val.element[0].elementAttributes['num-cols'];\r\n        if( init_index_l == null && init_index == null ){\r\n            // si se esta jalando desde la paleta\r\n            var tipo = template;\r\n            template = UtilFormly.newTemplate(tipo);\r\n            var item = newItem(template);\r\n            if( tipo!=\"layout\" ){\r\n                if( to_item_fg.length < to_item_fg_num_cols ){\r\n                    if(to_item_fg.length==0) index = 0;\r\n                    ArrayUtil.insert( to_item_fg , index, item );\r\n                    ArrayUtil.insert( to_data_fg, index, UtilFormly.getConfigItem(template) );\r\n                    delete to_data_fg[index].validation;\r\n                }else {\r\n                    Message.error(\"No puede añadir mas elementos\");\r\n                }\r\n            }else {\r\n                Message.error(\"No puede añadir contenedores dentro de contenedores\");\r\n            }\r\n        }else {\r\n            to_index_l = index;\r\n        }\r\n    }\r\n\r\n    /**\r\n      Funcion que se dispara al añadir un elemento desde la paleta\r\n      @param {String} tipo Tipo de template que se quiere añadir\r\n    */\r\n    function funcionAgregar(tipo) {\r\n        try {\r\n            if (vm.existe_datosGenerales && tipo == 'datosGenerales') {\r\n                throw Error(\"La plantilla solo puede tener un elemento \" + tipo)\r\n            }\r\n            if (vm.existe_certificacionComprometido && tipo == 'certificacionComprometido') {\r\n                throw Error(\"La plantilla solo puede tener un elemento \" + tipo)\r\n            }\r\n            \r\n            if(tipo=='datosGenerales') vm.existe_datosGenerales = true;\r\n            if(tipo=='certificacionComprometido') vm.existe_certificacionComprometido = true;\r\n            var template = UtilFormly.newTemplate(tipo);\r\n            var item = newItem(template);\r\n            vm.items.push( item );\r\n            vm.data.push( UtilFormly.getConfigItem(template) );\r\n            delete vm.data[vm.data.length-1].validation;\r\n        } catch (error) {            \r\n            if (error.name == 'Error') Message.error(error.message);\r\n        }\r\n    }\r\n\r\n    /**\r\n      Funcion que abre un panel para poder editar\r\n      Si es un elemento radio o select modifica sus funciones al añadir o borrar elementos de los chips que son sus opciones\r\n      @param {Objeto} item Objeto item que tiene la forma de newItem\r\n      @param {Servicio} mdOpenMenu Servicio de angular material para abrir el menu\r\n      @param {Evento} event Evento del servicio mdOpenMenu\r\n    */\r\n\r\n    function openEditItem(item, $mdOpenMenu, event){\r\n        var ik;\r\n        if(angular.isDefined($mdOpenMenu)) $mdOpenMenu(event);\r\n        item.init = UtilFormly.getConfigItem(item.val.element[0]);\r\n        if(item.val.element[0].type == \"radio\" || item.val.element[0].type == \"select\"){\r\n            item.val.element[0].opciones = [];\r\n            for (ik in item.val.element[0].templateOptions.options) {\r\n                item.val.element[0].opciones.push(item.val.element[0].templateOptions.options[ik].value);\r\n            }\r\n            item.val.element[0].opciones.push = function() {\r\n                Array.prototype.push.apply(this, arguments); // eslint-disable-line angular/controller-as-vm\r\n                item.val.element[0].templateOptions.options.push({\r\n                    value: arguments[0],\r\n                    id: arguments[0]\r\n                });\r\n            };\r\n            item.val.element[0].opciones.splice = function() {\r\n                Array.prototype.splice.apply(this, arguments); // eslint-disable-line angular/controller-as-vm\r\n                item.val.element[0].templateOptions.options.splice(arguments[0],arguments[1]);\r\n            };\r\n        }\r\n        if(item.val.element[0].type == \"lista\"){\r\n            item.val.element[0].opciones = [];\r\n            for (ik in item.val.element[0].templateOptions.options) {\r\n                item.val.element[0].opciones.push(item.val.element[0].templateOptions.options[ik]);\r\n            }\r\n            item.val.element[0].opciones.push = function() {\r\n                Array.prototype.push.apply(this, arguments); // eslint-disable-line angular/controller-as-vm\r\n                item.val.element[0].templateOptions.options.push( arguments[0] );\r\n            };\r\n            item.val.element[0].opciones.splice = function() {\r\n                Array.prototype.splice.apply(this, arguments); // eslint-disable-line angular/controller-as-vm\r\n                item.val.element[0].templateOptions.options.splice(arguments[0],arguments[1]);\r\n            };\r\n        }\r\n    }\r\n\r\n    function actualizarPagina(template_cite) {\r\n        var to = template_cite.templateOptions;\r\n        switch (to.tipoMembrete) {\r\n            case 'sin membrete':\r\n                vm.url_img = null;\r\n            break;\r\n            case 'externo':\r\n                vm.url_img = backUrl+'public/membrete.png';\r\n            break;\r\n            default:\r\n                vm.url_img = null;\r\n            break;\r\n        }\r\n    }\r\n\r\n    /**\r\n      Funcion que actualizara la configuracion del template de un item\r\n      @param {Objeto} item Objeto item que tiene la forma de newItem\r\n      @param {Integer} i Indice del item que se clickeo para drag\r\n      @param {Integer} i_l Indice del item que se clickeo para drag\r\n    */\r\n    function editItem(item, i, i_l){\r\n        var xdata, xitem;\r\n        // console.log(item);\r\n        if(angular.isUndefined(i_l)){\r\n            // Si se esta editando elemento del contenedor gral\r\n            xdata = vm.items.splice(i, vm.data.length);\r\n            xdata.shift();\r\n\r\n            xitem = newItem();\r\n            xitem.val.element.push(UtilFormly.getConfigItem(item.val.element[0]));\r\n            xdata.unshift(xitem);\r\n            vm.items = vm.items.concat(xdata);\r\n\r\n            vm.data[i] = UtilFormly.getConfigItem(item.val.element[0]);\r\n            if(vm.data[i].type==\"layout\"){\r\n                // console.log(\"entra a actualizarse\");\r\n                var elements = [];\r\n                for (var j = 0; j < vm.data[i].fieldGroup.length; j++) {\r\n                    elements.push(UtilFormly.getConfigItem(vm.data[i].fieldGroup[j].val.element[0]));\r\n                    delete elements[elements.length-1].validation;\r\n                }\r\n                vm.data[i].fieldGroup = elements;\r\n            }\r\n            delete vm.data[i].validation;\r\n            if(vm.data[i].type==\"cite\") actualizarPagina(vm.data[i]);\r\n        }else {\r\n            // si se esta editando elemento dentro de un layout\r\n            xdata = vm.items[i_l].val.element[0].fieldGroup.splice(i, vm.data[i_l].fieldGroup.length);\r\n            xdata.shift();\r\n\r\n            xitem = newItem();\r\n            xitem.val.element.push(UtilFormly.getConfigItem(item.val.element[0]));\r\n            xdata.unshift(xitem);\r\n            vm.items[i_l].val.element[0].fieldGroup = vm.items[i_l].val.element[0].fieldGroup.concat(xdata);\r\n\r\n            vm.data[i_l].fieldGroup[i] = UtilFormly.getConfigItem(item.val.element[0]);\r\n            delete vm.data[i_l].fieldGroup[i].validation;\r\n            if(vm.data[i_l].fieldGroup[i].type==\"cite\") actualizarPagina(vm.data[i_l].fieldGroup[i]);\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n    Funcioon que elimina un item en la posicion\r\n    @param {Objeto} item Objeto item que tiene la forma de newItem\r\n    @param {Integer} i Indice del item que se clickeo para eliminar\r\n    @param {Integer} i_l Indice del layout en que se encuentra un item\r\n    */\r\n    function removeItem(item, i, i_l){\r\n        if(angular.isUndefined(i_l)){\r\n            // Si se esta eliminando elemento del contenedor gral\r\n            if( vm.data[i].type=='datosGenerales' )\r\n                vm.existe_datosGenerales = false;\r\n            if( vm.data[i].type=='certificacionComprometido' )\r\n                vm.existe_certificacionComprometido = false;\r\n            vm.items.splice(i, 1);\r\n            vm.data.splice(i, 1);\r\n        }else {\r\n            // si se esta eliminando elemento dentro de un layout\r\n            if( vm.data[i_l].fieldGroup[i].type=='datosGenerales' )\r\n                vm.existe_datosGenerales = false;\r\n            if (vm.data[i].type == 'certificacionComprometido')\r\n                vm.existe_certificacionComprometido = false;\r\n            vm.items[i_l].val.element[0].fieldGroup.splice(i, 1);\r\n            vm.data[i_l].fieldGroup.splice(i, 1);\r\n        }\r\n    }\r\n\r\n    /**\r\n        Funcion que no actualizara la configuracion del template de un item\r\n        @param {Objeto} item Objeto item que tiene la forma de newItem\r\n    */\r\n    function cancelEditItem(item){\r\n        item.val.element.shift();\r\n        item.val.element.push(item.init);\r\n    }\r\n\r\n    /**\r\n        Funcion que retorna un nuevo objeto con forma de item, si se manda template lo crea junto a el\r\n        @param {Objeto} template Objeto template formly\r\n    */\r\n    function newItem(template) {\r\n        return { val:{ element: (template)? [template] : [] , model:{} }, init: {} };\r\n    }\r\n\r\n    function openMenu(item, event, index, index_l) {\r\n        var data = {\r\n            item: item,\r\n            index: index,\r\n            index_l: index_l\r\n        }\r\n\r\n        var config = {\r\n            event: event,\r\n            data: data,\r\n            clickOutsideToClose: false,\r\n            escapeToClose:false,\r\n            controller: ['$scope', '$mdPanel', 'data', 'mdPanelRef',PanelItemController],\r\n            templateUrl: 'app/modules/plantillasFormly/plantillas/plantilla/item.panel.html'\r\n        };\r\n        Panel.show(config);\r\n    }\r\n\r\n    function PanelItemController($scope, $mdPanel, data, mdPanelRef) {\r\n        var vmp = $scope;\r\n        vmp.item = data.item;\r\n        vmp.input_valid = null;\r\n        vmp.validaciones = null;\r\n        vmp.titulos = {\r\n            datosGenerales: 'Datos generales',\r\n            inputt: 'Asunto',\r\n            editorTexto: 'Editor de texto',\r\n            documentosRelacionados: 'Documentos relacionados',\r\n            titulo: 'Título',\r\n            subtitulo: 'Subtítulo',\r\n            parrafo: 'Párrafo',\r\n            lista: 'Lista',\r\n            layout: 'Contenedor',\r\n            vacio: 'Espacio',\r\n            input: 'Campo de texto ',\r\n            radio: 'Selección radio',\r\n            select: 'Selección simple',\r\n            select_multiple: 'Selección multiple',\r\n            textarea: 'Area de texto',\r\n            checkbox: 'Checkbox',\r\n            datepicker: 'Calendario',\r\n            slider: 'Deslizador',\r\n            switch: 'Interruptor',\r\n            chips: 'Palabras clave',\r\n            cajachica: 'Caja chica',\r\n            certificacionComprometido: 'Certificación comprometido',\r\n            listaContactos: 'Lista de contactos'\r\n        };\r\n\r\n        //cargamos funciones\r\n        vmp.xeditItem = xeditItem;\r\n        vmp.xremoveItem = xremoveItem;\r\n        vmp.xcancelEditItem = xcancelEditItem;\r\n\r\n        //iniciamos la edicion\r\n        vm.openEditItem(vmp.item);\r\n        vmp.validaciones = [\r\n            { name: \"Ninguno\", pattern: \"\" },\r\n            { name: \"Solo texto\", pattern: \"([a-zA-Zñáéíóú]+ ?)+\" },\r\n            { name: \"Solo números\", pattern: \"\\\\d+\" },\r\n            { name: \"Texto y números\", pattern: \"([a-zA-Z0-9ñáéíóú]+ ?)+\" },\r\n            { name: \"Hora 24hrs\", pattern: '^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$' },\r\n            { name: \"Email\", pattern: '^(([^<>()\\\\[\\\\]\\\\\\\\.,;:\\\\s@\"]+(\\\\.[^<>()\\\\[\\\\]\\\\\\\\.,;:\\\\s@\"]+)*)|(\".+\"))@((\\\\[[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}])|(([a-zA-Z\\\\-0-9]+\\\\.)+[a-zA-Z]{2,}))$' }\r\n        ];\r\n\r\n        // console.log(data);\r\n        function xeditItem() {\r\n            vm.editItem(data.item, data.index, data.index_l);\r\n            closePanel();\r\n        }\r\n        function xremoveItem() {\r\n            vm.removeItem(data.item, data.index, data.index_l);\r\n            closePanel();\r\n        }\r\n        function xcancelEditItem() {\r\n            // console.log($mdPanel);\r\n            // console.log(mdPanelRef);\r\n            vm.cancelEditItem(data.item);\r\n            closePanel();\r\n        }\r\n        function closePanel() {\r\n            mdPanelRef && mdPanelRef.close().then(function() { mdPanelRef.destroy(); });\r\n        }\r\n    }\r\n\r\n    function verPdf(){\r\n        if( UtilFormly.sizeObj(vm.formu_prueba.$error)==0 ){\r\n            Documento.showPdf(angular.toJson(vm.data), angular.toJson(vm.form_model), 'prueba');\r\n        }else {\r\n            UtilFormly.recursiveShowError(vm.formu_prueba.$error);\r\n        }\r\n    }\r\n\r\n  }\r\n})();\r\n\n(function() {\n  'use strict';\n\n  angular\n    .module('app')\n    .controller('DocumentoController', DocumentoController);\n\n  /** @ngInject */\n  function DocumentoController(DataService, restUrl, Modal, Message, UtilFormly, Storage, $stateParams, $location, backUrl, Panel, Documento, ExpirationTime) {\n    var vm = this;\n    var cuenta = Storage.getUser();\n\n    vm.id_documento = $stateParams.idDocumento;\n    vm.load = false;\n    vm.model_actual = {};\n    vm.form_actual = [];\n    vm.doc = {};\n    vm.sw_enviado = true;\n    vm.sw_rechazado = false;\n    vm.url_img = null;\n\n    // cargamos funciones\n    vm.cargarPlantilla = cargarPlantilla;\n    vm.guardarDocumento = guardarDocumento;\n    vm.enviarMultiple = enviarMultiple;\n    vm.vistaPrevia = vistaPrevia;\n    vm.firmar = firmar;\n    vm.volverAtras = volverAtras;\n    vm.verObservaciones = verObservaciones;\n    vm.verDocumento = verDocumento;\n    vm.copearDocumento = copearDocumento;\n\n    iniciar();\n\n    function iniciar() {\n      vm.enviarEjecutandose=0;\n        if (vm.id_documento==0) {\n            // console.log(Storage.getSession('pl'));\n            if(Storage.getSession(\"pl\")!=null){\n                cargarPlantilla(Storage.getSession(\"pl\"));\n                vm.sw_enviado = false;\n                verificarZonaHoraria();\n                vm.load = true;\n                ExpirationTime.initAutoSave(guardar, false);\n                Message.show('INFORMACION', 'No olvide guardar sus cambios cada 40 minutos, de lo contrario se perderán.');\n            } else $location.path('documentos');\n        }else {\n            // console.log(restUrl + 'plantillasFormly/documento/'+vm.id_documento);\n            DataService.get(restUrl + 'plantillasFormly/documento/'+vm.id_documento)\n            .then(function (resultado) {\n                Storage.setSession('pl', resultado.datos);\n                if(resultado.datos._usuario_creacion!=cuenta.id)\n                    $location.path('documentos');\n                cargarPlantilla(resultado.datos, true);\n                vm.sw_rechazado = (resultado.datos.estado==\"RECHAZADO\")? true : false;\n                vm.sw_enviado = ( resultado.datos.estado!=\"NUEVO\" && !vm.sw_rechazado)? true : false;\n                // deshabilitamos todos los campos para\n                UtilFormly.disableForm(vm.form_actual, vm.sw_enviado);\n                if(vm.sw_enviado){\n                    var flujo = {\n                        via_actual: resultado.datos.via_actual,\n                        para: angular.fromJson(resultado.datos.para),\n                        via: angular.fromJson(resultado.datos.via)\n                    };\n                    Storage.setSession('flujo_doc',flujo);\n                }\n                ExpirationTime.initAutoSave(guardar, vm.sw_enviado);\n                Message.show('INFORMACION', 'No olvide guardar sus cambios cada 40 minutos, de lo contrario se perderán.');\n                verificarZonaHoraria();\n                vm.load = true;\n            });\n        }\n    }\n    function verificarZonaHoraria() {\n      var es_zona_horaria_bolivia = true, offset;\n      var data = angular.fromJson(vm.doc.plantilla);\n      for (var i = 0; i < data.length; i++) {\n        if (data[i].type==\"layout\") {\n            for (var j = 0; j < data[i].fieldGroup.length; j++) {\n              if (vm.form_actual[i].fieldGroup[j].type=='datepicker'){\n                offset = new Date().getTimezoneOffset();\n                es_zona_horaria_bolivia = (offset==240);\n              }\n            }\n        } else {\n          if (vm.form_actual[i].type=='datepicker'){\n            offset = new Date().getTimezoneOffset();\n            es_zona_horaria_bolivia = (offset==240);\n          }\n        }\n        if (!es_zona_horaria_bolivia) break;\n      }\n\n      if (!es_zona_horaria_bolivia && !vm.sw_enviado) abrirDialogError('timeZone');\n    }\n\n    function copearDocumento() {\n        Modal.confirm('¿Esta seguro de que quiere crear otro documento igual a este?', function () {\n            var model = angular.copy(vm.model_actual);\n            delete model['cite-0'];\n            \n            if (model['listaContactos-0'] && model['listaContactos-0'].contacto) {\n                delete model['listaContactos-0'].contacto;\n            }\n            \n            var pl = {\n                nombre: vm.doc.nombre_plantilla,\n                nombre_plantilla: vm.doc.nombre_plantilla,\n                abreviacion: vm.doc.abreviacion,\n                plantilla: vm.doc.plantilla,\n                plantilla_valor: angular.toJson(model),\n                observaciones: null\n            };\n            \n            \n            var verificar = {\n              nombre: pl.nombre,\n              abreviacion: pl.abreviacion,\n              plantilla: pl.plantilla\n            };\n            \n            DataService.post(restUrl + 'plantillasFormly/plantilla_formly/verificar', verificar)\n            .then(function respuesta (respuesta) {\n              if(respuesta.datos.valido === true) {\n                Storage.setSession('pl',pl);\n                $location.path('documento/0');\n              }\n              else {\n                Message.show('ERROR', 'La plantilla ya no existe o no se encuetra activa. El documento no se puede duplicar.');\n              }\n            });\n        });\n    }\n\n    function cargarPlantilla(pl, model) {\n\n        vm.model_actual = (pl.plantilla_valor==null)? {} : angular.fromJson(pl.plantilla_valor);\n        if(model)\n            vm.form_actual = UtilFormly.dataToView(angular.fromJson(pl.plantilla), vm.model_actual);\n        else\n            vm.form_actual = UtilFormly.dataToView(angular.fromJson(pl.plantilla));\n\n        actualizarPagina(vm.form_actual[0]);\n\n        vm.doc.nombre = (model)? pl.nombre : pl.nombre+' - '+cuenta.first_name+' '+cuenta.last_name;\n        vm.doc.nombre_plantilla = (model)? pl.nombre_plantilla : pl.nombre;\n        vm.doc.abreviacion = pl.abreviacion;\n        vm.doc.plantilla = pl.plantilla;\n        vm.doc.observaciones = (model)? pl.observaciones : null;\n        vm.sw_es_respuesta = pl.documento_padre || false;\n        if(vm.sw_es_respuesta) {\n            vm.doc.documento_padre = pl.documento_padre;\n        }\n\n        vm.sw_grupo = pl.grupo || false;\n        if(vm.sw_grupo) {\n            // obtener documentos de grupo\n            DataService.get(restUrl + 'plantillasFormly/documento/?fields=id_documento,nombre,nombre_plantilla&estado=DERIVADO,CERRADO,APROBADO&sort=_fecha_creacion&grupo='+pl.grupo)\n            .then(function (resultado) {\n                vm.docs_grupo = resultado.datos.resultado;\n            });\n        }\n\n    }\n\n    function verDocumento(id_doc) { Documento.showPdfId(id_doc, false); }\n\n    function actualizarPagina(template_cite) {\n        var to = template_cite.templateOptions || 'sin membrete';\n        switch (to.tipoMembrete) {\n            case 'sin membrete':\n                vm.url_img = null;\n            break;\n            case 'externo':\n                vm.url_img = backUrl+'public/membrete.png';\n            break;\n        }\n    }\n\n    function agregarFlujo(documento, enviar) {\n        if(enviar){\n            var k, key, arr, i;\n            k = key = \"para\";\n            documento[k] = angular.toJson([vm.model_actual[\"datosGenerales-0\"][key].id_usuario]);\n\n            k = key = \"via\";\n            arr = vm.model_actual[\"datosGenerales-0\"][key] || [];\n            documento[k] = [];\n            for (i = 0; i < arr.length; i++) {\n                documento[k].push(arr[i].id_usuario);\n            }\n            documento[k] = angular.toJson(documento[k].reverse());\n\n            k = key = \"de\";\n            arr = vm.model_actual[\"datosGenerales-0\"][key];\n            documento[k] = [];\n            for (i = 0; i < arr.length; i++) {\n                documento[k].push(arr[i].id_usuario);\n            }\n            documento[k] = angular.toJson(documento[k]);\n\n            k = \"referencia\" ; key = \"ref\";\n            documento[k] = vm.model_actual[\"datosGenerales-0\"][key];\n        }\n    }\n    function transformarModel(model) {\n        // archivos\n        var i = 0, arch;\n        while (i!=-1) {\n            arch = model['archivo-'+i];\n            if(angular.isUndefined(arch)) break;\n            if(angular.isUndefined(arch.length)){\n                model['archivo-'+i] = [arch];\n            }\n            i++;\n        }\n        return angular.toJson(model);\n    }\n\n    function guardar(enviar, sw_location){\n      if(vm.enviarEjecutandose > 1) {\n        return;\n      }\n      var documento = {\n          nombre: vm.doc.nombre,\n          nombre_plantilla: vm.doc.nombre_plantilla,\n          abreviacion: vm.doc.abreviacion,\n          plantilla: vm.doc.plantilla,\n          plantilla_valor: transformarModel(angular.copy(vm.model_actual))\n      };\n\n      if(vm.sw_es_respuesta) {\n        documento.documento_padre = vm.doc.documento_padre;\n      }\n\n      if (!vm.sw_enviado) agregarFlujo(documento, enviar);\n      // console.log(documento);\n      if ( vm.id_documento==0 ) {\n          documento._usuario_creacion = cuenta.id;\n      }else {\n          documento._usuario_modificacion = cuenta.id;\n          documento.id = vm.id_documento;\n      }\n      documento.sw = {\n          enviar: enviar,\n          enviado: vm.sw_enviado,\n          es_respuesta: vm.sw_es_respuesta\n      };\n\n      DataService.save( restUrl+'plantillasFormly/documento/', documento)\n      .then(function (respuesta) {\n          if(!sw_location){\n              Message.show(respuesta.tipoMensaje, respuesta.mensaje);\n              $location.path('documentos');\n              Storage.removeSession('pl');\n          }else if(vm.id_documento==0) $location.path('documento/'+respuesta.datos.id_documento);\n          vm.enviarEjecutandose=0;\n      });\n    }\n\n    function guardarDocumento(enviar) {\n      vm.enviarEjecutandose += 1;\n        // Valida si es para enviar.\n        if(enviar){\n          if( UtilFormly.sizeObj(vm.formu.$error)==0 ){\n              guardar(enviar);\n          }else {\n            UtilFormly.recursiveShowError(vm.formu.$error);\n            Message.show(\"ERROR\", 'Debe llenar todos los campos marcados con rojo porque son requeridos'.toUpperCase());\n            abrirDialogError('formu');\n            vm.enviarEjecutandose=0;\n          }\n        }\n        else{\n          guardar();\n\n        }\n\n    }\n    \n    function enviarMultiple() {\n        if (vm.enviarEjecutandose > 1) {\n          return;\n        }\n        var documento = {\n          nombre: vm.doc.nombre,\n          nombre_plantilla: vm.doc.nombre_plantilla,\n          abreviacion: vm.doc.abreviacion,\n          plantilla: vm.doc.plantilla,\n          plantilla_valor: transformarModel(angular.copy(vm.model_actual))\n        };\n\n        if (vm.sw_es_respuesta) {\n          documento.documento_padre = vm.doc.documento_padre;\n        }\n\n        if (!vm.sw_enviado) agregarFlujo(documento, true);\n        // console.log(documento);\n        if (vm.id_documento == 0) {\n          documento._usuario_creacion = cuenta.id;\n        } else {\n          documento._usuario_modificacion = cuenta.id;\n          documento.id = vm.id_documento;\n        }\n        documento.sw = {\n          enviar: true,\n          enviado: vm.sw_enviado,\n          es_respuesta: vm.sw_es_respuesta\n        };\n\n        DataService.save(restUrl + 'plantillasFormly/documento/', documento)\n        .then(function (respuesta) {\n            // if (!sw_location) {\n            //     Message.show(respuesta.tipoMensaje, respuesta.mensaje);\n            //     $location.path('documentos');\n            //     Storage.removeSession('pl');\n            // } else \n            if (vm.id_documento == 0) $location.path('documento/' + respuesta.datos.id_documento);\n            vm.enviarEjecutandose = 0;\n        });\n    }\n\n\n    function abrirDialogError(tipo){\n      var config = {\n        data: tipo,\n        templateUrl: 'app/modules/plantillasFormly/documentos/documento/dialogError.html',\n        controller: ['data', '$scope', '$mdDialog', DialogErrorController]\n      }\n      Modal.show(config);\n    }\n\n    function DialogErrorController(data, $scope, $mdDialog){\n      var vmd = $scope;\n      vmd.data={tipo:data};\n\n      vmd.cerrar= function(){\n        $mdDialog.cancel();\n      }\n    }\n\n    function volverAtras() {\n        $location.path('documentos');\n    }\n\n    function vistaPrevia(){\n        if( UtilFormly.sizeObj(vm.formu.$error)==0 ){\n            Documento.showPdf(vm.doc.plantilla, angular.toJson(vm.model_actual), vm.doc.nombre);\n        }else {\n            Message.show('INFORMACION', 'Antes de visualizar el documento debe llenar todos los campos requeridos.');\n            UtilFormly.recursiveShowError(vm.formu.$error);\n        }\n    }\n\n    function firmar(){\n        var config = {\n            data: \"\", //datosEnviar,\n            templateUrl: 'app/modules/firmador/modules.firmador.html',\n            controller: ['data', '$scope', '$mdDialog', 'Util', 'DemofiService', DialogFirmadorController]\n        }\n        Modal.show(config);\n    }\n\n    function DialogFirmadorController(data, $scope, $mdDialog, Util, DemofiService){\n        var vmd = $scope;\n        vmd.data={};\n\n        //valores para firma digital\n        vmd.iniciado = false;\n        vmd.pin = undefined;\n        vmd.tokens = [];\n        vmd.certificados = [];\n          //this.$scope.firmados = 0;\n        vmd.iniciado = false;\n        vmd.iniciando = false;\n        vmd.certificado_seleccionado = undefined;\n          //this.$scope.solicitudes = data.solicitudes;\n        vmd.autenticado = false;\n        vmd.autenticando = false;\n          //this.$scope.firmando = false;\n        vmd.demofi_ejecutandose = false;\n        vmd.token_conectado = false;\n        vmd.boton_autenticar_habilitado = false;\n        vmd.mostrar_progress = false;\n\n\n        vmd.data.html=data.html;\n        vmd.data.pdf=data.pdf;\n        vmd.data.flag_html=true;\n        vmd.data.show_pdf=!data.esDispositivoMovil;\n        if (data.esDispositivoMovil) {\n            Util.loadCanvas(data.pdf_buffer, '#canvasContainer');\n        }\n\n        //funciones\n\n        /*vmd.cerrar = function (){ $mdDialog.cancel(); }\n        vmd.verHtml = function(){ vmd.data.flag_html=true; }\n        vmd.verPdf = function(){ vmd.data.flag_html=false; }*/\n\n\n        vmd.verificarTokenConectado = verificarTokenConectado;\n        vmd.autenticar = autenticar;\n        vmd.cancelar = cancelar;\n        vmd.verificarServidor = verificarServidor;\n\n        verificarTokenConectado();\n\n        function verificarTokenConectado() {\n            if (vmd.iniciando === false) {\n                vmd.iniciando = true;\n                DemofiService.listTokens()\n                .then( function (response) {\n                    // this.$log.log('verificarTokenConectado-then', response)\n                    vmd.iniciando = false;\n                    vmd.iniciado = true;\n                    vmd.demofi_ejecutandose = true;\n                    vmd.tokens = response.datos;\n                    vmd.token_conectado = response.datos.length > 0;\n                })\n                .catch( function () {\n                    // this.$log.log('verificarTokenConectado-catch', error)\n                    vmd.iniciando = false;\n                    vmd.iniciado = true;\n                    vmd.token_conectado = false;\n                    vmd.demofi_ejecutandose = false;\n                });\n\n                /*vmd.iniciando = false;\n                vmd.iniciado = true;\n                vmd.demofi_ejecutandose = true;\n                vmd.tokens = [\"FT ePass2003Auto\"]; //{\"datos\":[\"FT ePass2003Auto\"],\"finalizado\":true,\"mensaje\":\"Tokens detectados\"};\n                vmd.token_conectado = true; //response.datos.length > 0; */\n            }\n        }\n\n        function autenticar() {\n            vmd.mostrar_progress = true;\n            vmd.autenticando = true;\n            //this.cancelInterval();\n            //this.Loading.show('Cargando', true);\n            DemofiService.login(vmd.pin)\n            .then(function (respLogin) {\n                //this.$log.log(respLogin);\n                vmd.mostrar_progress = false;\n                vmd.autenticando = false;\n                if (respLogin.finalizado === true) {\n                    vmd.boton_autenticar_habilitado = false;\n                    // Obtener certificados\n                    vmd.autenticado = true;\n                    // Una ves autenticado actualizamos la lista de certificados\n                    DemofiService.listCertificates()\n                    .then(function (respCert) {\n                        vmd.certificados = respCert.datos;\n                        if (vmd.certificados[0]) {\n                            vmd.certificado_seleccionado = vmd.certificados[0];\n                        }\n                    });\n                }\n            })\n            .catch( function () {\n                // this.$log.log(error);\n                vmd.mostrar_progress = false;\n                vmd.autenticando = false;\n                vmd.pin = undefined;\n                vmd.autenticado = false;\n                vmd.boton_autenticar_habilitado = true;\n                //this.Message.warning(error.mensaje);\n                //this.initInterval();\n            });\n        }\n\n        function verificarServidor() {\n            DemofiService.verificarServidor();\n        }\n\n        function cancelar() {\n            $mdDialog.cancel();\n        }\n    }\n\n\n    function verObservaciones(event) {\n        var data = {\n            observacion: vm.doc.observaciones || 'El documento esta mal'\n        }\n        var config = {\n            event: event,\n            data: data,\n            controller: ['$scope', 'data', 'mdPanelRef',PanelItemController],\n            templateUrl: 'app/modules/plantillasFormly/documentos/documento/observacion.panel.html'\n        };\n        Panel.show(config);\n    }\n\n    function PanelItemController($scope, data, mdPanelRef) {\n        var vmp = $scope;\n        vmp.observacion = data.observacion;\n\n        //cargamos funciones\n        vmp.closePanel = closePanel;\n\n        function closePanel() {\n            mdPanelRef && mdPanelRef.close().then(function() { mdPanelRef.destroy(); });\n        }\n    }\n\n\n  }\n})();\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app')\r\n    .controller('RolController', RolController);\r\n\r\n  /** @ngInject */\r\n  function RolController(restUrl, Storage) {\r\n    var vm = this;\r\n\r\n    var cuenta=Storage.getUser();\r\n    vm.usuario = cuenta.id;\r\n\r\n    //config para crudTable\r\n    vm.url = restUrl+'seguridad/rol/';\r\n    vm.fields = ['id_rol','nombre','descripcion','peso','estado','_fecha_creacion','_fecha_modificacion'];\r\n    vm.titulo = \"Roles\";\r\n    vm.dialogController = ['data', 'Message', '$scope', '$mdDialog', 'DataService', 'restUrl', '$timeout', DialogRolController];\r\n    vm.template = 'app/modules/seguridad/rol/dialog.rol.html';\r\n\r\n    function DialogRolController(data, Message, $scope, $mdDialog, DataService, restUrl, $timeout) {\r\n        var vmd = $scope;\r\n\r\n        vmd.cerrar = cerrar;\r\n        vmd.registrarRol = registrarRol;\r\n        vmd.data = data;\r\n        vmd.estados = [{id:\"ACTIVO\", name: \"ACTIVO\"},{id:\"INACTIVO\", name: \"INACTIVO\"}];\r\n\r\n        // console.log(data);\r\n\r\n        if (!vmd.data.id_rol) vmd.data._fecha_creacion = new Date();\r\n        vmd.data._fecha_modificacion = new Date();\r\n        obtenerMenus();\r\n        function obtenerMenus() {\r\n            if(vmd.data.id_rol){\r\n                DataService.get(restUrl+\"seguridad/menu?limit=1000&estado=ACTIVO\")\r\n                .then(function(respuesta){\r\n                    vmd.menus = respuesta.datos.resultado;\r\n                    // console.log(\"id_rol->\"+vmd.data.id_rol);\r\n                    return DataService.get(restUrl+\"seguridad/rol/\"+vmd.data.id_rol+\"/menu\");\r\n                })\r\n                .then(function(respuesta){\r\n                    vmd.rol_menus = respuesta.datos;\r\n                    // console.log(vmd.rol_menus);\r\n                    for (var i = 0; i < vmd.rol_menus.length; i++) {\r\n                        for (var j = 0; j < vmd.menus.length; j++) {\r\n                            if(vmd.rol_menus[i].fid_menu == vmd.menus[j].id_menu){\r\n                                vmd.menus[j].checked = (vmd.rol_menus[i].estado == 'ACTIVO')? true : false;\r\n                                j = vmd.menus.length;\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n\r\n            }else {\r\n                DataService.get(restUrl+\"seguridad/menu?limit=1000&estado=ACTIVO\")\r\n                .then(function(respuesta){\r\n                    vmd.menus = respuesta.datos.resultado;\r\n                })\r\n            }\r\n\r\n        }\r\n\r\n        function registrarRol() {\r\n            var datosEnviar = {\r\n                rol: {\r\n                    id_rol: vmd.data.id_rol,\r\n                    nombre: vmd.data.nombre,\r\n                    descripcion: vmd.data.descripcion,\r\n                    peso: vmd.data.peso,\r\n                    estado: vmd.data.estado\r\n                },\r\n                menus: []\r\n            };\r\n            // console.log(datosEnviar);\r\n            if (vmd.data.id_rol) {\r\n                datosEnviar.rol._usuario_modificacion = cuenta.id;\r\n                datosEnviar.menus_nuevos = [];\r\n                for (var i = 0; i < vmd.menus.length; i++) {\r\n                    var existe = false;\r\n                    for (var j = 0; j < vmd.rol_menus.length; j++) {\r\n                        if(vmd.menus[i].id_menu == vmd.rol_menus[j].fid_menu)\r\n                        {\r\n                            // console.log(vmd.rol_menus[j]);\r\n                            vmd.rol_menus[j].estado = (vmd.menus[i].checked)? 'ACTIVO' : 'INACTIVO';\r\n                            vmd.rol_menus[j]._usuario_modificacion = cuenta.id;\r\n                            delete vmd.rol_menus[j]._fecha_creacion;\r\n                            delete vmd.rol_menus[j]._fecha_modificacion;\r\n                            datosEnviar.menus.push(angular.fromJson(angular.toJson(vmd.rol_menus[j])));\r\n                            existe = true;\r\n                            j = vmd.rol_menus.length;\r\n                        }\r\n                    }\r\n                    if(!existe && vmd.menus[i].checked){\r\n                        datosEnviar.menus_nuevos.push(vmd.menus[i].id_menu);\r\n                    }\r\n                }\r\n\r\n                DataService.put(restUrl+\"seguridad/rol/\"+vmd.data.id_rol+\"/menu\", datosEnviar)\r\n                .then(function (respuesta) {\r\n                    Message.show(respuesta.tipoMensaje,respuesta.mensaje);\r\n                    $mdDialog.hide();\r\n                    $timeout(function () {\r\n                        angular.element('#btn-refresh-crudtable').click();\r\n                    }, 500);\r\n                });\r\n            }else{\r\n                datosEnviar.rol._usuario_creacion = cuenta.id;\r\n\r\n                for (i = 0; i < vmd.menus.length; i++) {\r\n                    if(vmd.menus[i].checked){\r\n                        datosEnviar.menus.push(vmd.menus[i].id_menu);\r\n                    }\r\n                }\r\n                DataService.post(restUrl+\"seguridad/rol/0/menu\", datosEnviar)\r\n                .then(function (respuesta) {\r\n                    Message.show(respuesta.tipoMensaje,respuesta.mensaje);\r\n                    $mdDialog.hide();\r\n                    $timeout(function () {\r\n                        angular.element('#btn-refresh-crudtable').click();\r\n                    }, 500);\r\n                });\r\n            }\r\n\r\n        }\r\n        function cerrar() {\r\n            $mdDialog.cancel();\r\n        }\r\n\r\n    }\r\n\r\n  }\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app')\r\n    .controller('MenuController', MenuController);\r\n\r\n    /** @ngInject */\r\n    function MenuController(Storage, restUrl) {\r\n\r\n        var vm=this;\r\n\r\n        vm.url = restUrl + 'seguridad/menu/';\r\n        vm.fields = [\r\n            'id_menu', \r\n            'fid_menu_padre',\r\n            'nombre', \r\n            'descripcion', \r\n            'orden', \r\n            'ruta', \r\n            'icono', \r\n            'estado',\r\n            '_fecha_creacion',\r\n            '_fecha_modificacion'\r\n        ];\r\n        \r\n        vm.titulo = \"Menús\";\r\n\r\n        var cuenta=Storage.getUser();\r\n        vm.usuario = cuenta.id;\r\n        \r\n    }\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app')\r\n    .controller('VistaPdfController', VistaPdfController);\r\n\r\n  /** @ngInject */\r\n  function VistaPdfController($scope, DataService, restUrl, Storage, $sce, $location, Documento, Util) {\r\n      var vm = this;\r\n      var datos_enviar = Storage.getSession('datos_enviar');\r\n\r\n      if(datos_enviar==null) $location.path('/documentos');\r\n      else {\r\n          DataService.pdf(restUrl+'plantillasFormly/documentoPDF/',{cite: datos_enviar.nombre})\r\n          .then(function (respuestaPdf) {\r\n            if(!respuestaPdf) return;\r\n              datos_enviar.pdf = respuestaPdf.url;\r\n              datos_enviar.pdf_buffer = respuestaPdf.data;\r\n\r\n            //   if(angular.isUndefined(respuestaPdf)) $location.path('/documentos');\r\n              vm.html=datos_enviar.html;\r\n              vm.pdf=datos_enviar.pdf;\r\n              vm.flag_html=true;\r\n              if (datos_enviar.esDocumentoExterno) vm.flag_html=false;\r\n              vm.show_pdf=!datos_enviar.esDispositivoMovil;\r\n               if (datos_enviar.esDispositivoMovil) {\r\n                Util.loadCanvas(datos_enviar.pdf_buffer, '#canvasContainer');\r\n            }\r\n              //funciones\r\n              vm.verHtml = function(){ vm.flag_html=true; }\r\n              vm.verPdf = function(){ vm.flag_html=false; }\r\n              vm.load = true;\r\n          })\r\n      }\r\n\r\n      $scope.mostrarPdf = function (id, sw){ if(sw) Documento.showPdfx(id); else Documento.showPdfId(id, false); } // eslint-disable-line angular/controller-as\r\n  }\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app')\r\n    .controller('PlantillasController', PlantillasController);\r\n\r\n  /** @ngInject */\r\n\r\n  function PlantillasController(restUrl, Storage, $location) {\r\n    var vm = this;\r\n    vm.titulo = \"Bandeja de plantillas\";\r\n    vm.url = restUrl + \"plantillasFormly/plantilla_formly/\";\r\n    var cuenta = Storage.getUser();\r\n    vm.usuario=cuenta.id;\r\n    vm.estadoSw=true;\r\n    vm.permission ={\r\n      create:false,\r\n      update:false,\r\n      delete:true\r\n    };\r\n    vm.fields = [\r\n      \"id_plantilla_formly\",\r\n      \"nombre\",\r\n      \"abreviacion\",\r\n      \"estado\",\r\n      \"_fecha_creacion\",\r\n      \"_fecha_modificacion\"\r\n    ];\r\n\r\n    vm.buttons = [\r\n      {\r\n        tooltip: 'Editar',\r\n        icon: 'checked',\r\n        onclick: irPlantilla\r\n      }\r\n    ];\r\n    vm.buttonAgregar = {\r\n        tooltip: 'Añadir',\r\n        icon: 'add',\r\n        onclick: nuevaPlantilla\r\n    };\r\n    function nuevaPlantilla(event) { irPlantilla(event, 0); }\r\n\r\n    function irPlantilla(pEvento, pIdentificador){\r\n      $location.path('plantilla/' + pIdentificador);\r\n    }\r\n\r\n  }\r\n})();\r\n\n(function () {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app')\r\n    .controller('MonitoreoController', MonitoreoController);\r\n\r\n  /** @ngInject */\r\n  function MonitoreoController(charColors, DataService, restUrl, Modal, $window, $filter, Documento) {\r\n    var vm = this,\r\n      fecha_actual = new Date(),\r\n      limite_inferior = 1990,\r\n      limite_inferior_contable = 2018,\r\n      limite_superior = 2130;\r\n      \r\n\r\n    iniciar();\r\n    reiniciarChart();\r\n    vm.refrescarChart = refrescarChart;\r\n    vm.reiniciarChart = reiniciarChart;\r\n    vm.paginar = paginar;\r\n    vm.mostrarOcultar = mostrarOcultar;\r\n    vm.generarPDF = generarPDF;\r\n    var date = new Date(),\r\n      y = date.getFullYear(),\r\n      m = date.getMonth();\r\n    vm.fechaInicial = new Date(y, m, 1);\r\n    vm.fechaFinal = new Date();\r\n    vm.cabeceraPresupuesto = cabeceraPresupuesto;\r\n    vm.generarNombre = generarNombre;\r\n    vm.filasPresupuesto = filasPresupuesto;\r\n    vm.consultarComprometido = consultarComprometido;\r\n    vm.consultarPagado = consultarPagado;\r\n    vm.vistaPrevia = vistaPrevia;\r\n    vm.busqueda = {};\r\n\r\n    function iniciar() {\r\n      vm.chart = {};\r\n\r\n      vm.graficos = [\r\n        { cod: 0, nombre: 'Cantidad de documentos por mes', labelChart: '# Visitas por día', tipoChart: 'line' },\r\n        // { cod: 1, nombre: 'Usuarios que más documentos ven', labelChart: 'Usuarios más concurrentes', tipoChart: 'bar' },\r\n        // { cod: 2, nombre: 'Documentos más vistos', labelChart: 'Documentos más vistos', tipoChart: 'bar' },\r\n        // { cod: 3, nombre: 'Documentos más vistos por usuario', labelChart: 'Documentos más visitados', tipoChart: 'bar' },\r\n        { cod: 4, nombre: 'Presupuesto', labelChart: 'Presupuesto', tipoChart: 'presupuesto' },\r\n        { cod: 5, nombre: 'Documentos por estado y usuario', labelChart: 'estados', tipoChart: 'estados' },\r\n        { cod: 6, nombre: 'Documentos pendientes por usuario', labelChart: 'pendientes', tipoChart: 'pendientes' },\r\n        { cod: 7, nombre: 'Comprometido', labelChart: 'Comprometido', tipoChart: 'comprometido' },\r\n        { cod: 8, nombre: 'Pagado', labelChart: 'Pagado', tipoChart: 'pagado' },\r\n        { cod: 9, nombre: 'Reporte contable', labelChart: 'Reporte contable', tipoChart: 'reporteContable' }\r\n      ];\r\n      vm.grafico = vm.graficos[0];\r\n      vm.mes = fecha_actual.getMonth();\r\n      vm.meses = [\"Enero\", \"Febrero\", \"Marzo\", \"Abril\", \"Mayo\", \"Junio\", \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"];\r\n      vm.docsContables = ['IPBS', 'IPV', 'IPSPCL-A'];\r\n      vm.tipoInformePago = 1;\r\n      vm.anio = fecha_actual.getFullYear() - limite_inferior;\r\n      vm.anios = [];\r\n      vm.aniosContables = [];\r\n      for (var i = limite_inferior - 1; i < limite_superior; i++) vm.anios.push(i + 1);\r\n      for (var j = limite_inferior_contable - 1; j < fecha_actual.getFullYear(); j++) vm.aniosContables.push(j + 1);\r\n      \r\n      vm.anioContable = vm.aniosContables.length -1;\r\n      DataService.get(restUrl + 'seguridad/usuario/?fields=id_usuario,usuario,nombres,apellidos&order=nombres&estado=ACTIVO')\r\n        .then(function (respuesta) {\r\n          vm.usuarios = respuesta.datos.resultado;\r\n          vm.usuario = vm.usuarios[0].id_usuario;\r\n        })\r\n\r\n      DataService.get(restUrl + 'presupuesto/gestiones')\r\n        .then(function (respuesta) {\r\n          vm.gestiones = respuesta.datos;\r\n          vm.gestionActual = vm.anio + limite_inferior;\r\n          vm.gestion = 0;\r\n        })\r\n    }\r\n\r\n    function reiniciarChart() {\r\n      vm.busqueda = {};\r\n      vm.ordenInverso = false;\r\n      vm.chart.tipo = vm.grafico.tipoChart;\r\n      vm.gestion = 0;\r\n      if (vm.chart.tipo === 'presupuesto') {\r\n        vm.ordenarPor = 'descripcion';\r\n        consultarPresupuesto(vm.gestionActual - vm.gestion);\r\n      } else if (vm.chart.tipo === 'estados') {\r\n        vm.ordenarPor = 'nombres';\r\n        consultarDocumentosUsuarioEstados(vm.fechaInicial, vm.fechaFinal);\r\n      } else if (vm.chart.tipo === 'pendientes') {\r\n        vm.ordenarPor = 'nombres';\r\n        consultarDocumentosPendientes();\r\n      } else if (vm.chart.tipo === 'comprometido') {\r\n        vm.ordenarPor = 'descripcion';\r\n        consultarComprometido(vm.gestionActual - vm.gestion);\r\n      } else if (vm.chart.tipo === 'pagado') {\r\n        vm.ordenarPor = 'descripcion';\r\n        consultarPagado(vm.gestionActual - vm.gestion);\r\n      } else if (vm.chart.tipo === 'reporteContable') {\r\n        vm.ordenarPor = '-cite';\r\n        consultarReporteContable(vm.tipoInformePago, vm.anioContable);\r\n\r\n      } else {\r\n        vm.chart.datos = {\r\n          labels: [],\r\n          datasets: [\r\n            {\r\n              label: vm.grafico.labelChart + ' total.',\r\n              data: [],\r\n              backgroundColor: charColors.bg.amarillo,\r\n              borderColor: charColors.bo.amarillo,\r\n              borderWidth: 1\r\n            },\r\n            {\r\n              label: vm.grafico.labelChart + ' con relación.',\r\n              data: [],\r\n              backgroundColor: charColors.bg.verde,\r\n              borderColor: charColors.bo.verde,\r\n              borderWidth: 1\r\n            },\r\n            {\r\n              label: vm.grafico.labelChart + ' sin relación.',\r\n              data: [],\r\n              backgroundColor: charColors.bg.azul,\r\n              borderColor: charColors.bo.azul,\r\n              borderWidth: 1\r\n            }\r\n          ]\r\n        };\r\n        vm.chart.reiniciar = !vm.chart.reiniciar;\r\n        vm.page = 1;\r\n        vm.page_cant = 20;\r\n        vm.page_text = '' + ((vm.page - 1) * vm.page_cant + 1) + '-' + (vm.page * vm.page_cant);\r\n        vm.page_tot = 1;\r\n        refrescarChart();\r\n      }\r\n    }\r\n\r\n    function consultarPresupuesto(gestion) {\r\n      DataService.get(restUrl + 'presupuesto/saldos?gestion=' + gestion)\r\n      .then(function (respuesta) {\r\n        vm.headers = [\r\n          { name: 'numero', title: 'Número', mostrar: true },\r\n          { name: 'descripcion', title: 'Descripción', mostrar: true },\r\n          { name: 'inicial', title: 'Inicial', mostrar: true },\r\n          { name: 'comprometido', title: 'Comprometido', mostrar: true },\r\n          { name: 'pagado', title: 'Pagado', mostrar: true },\r\n          { name: 'modificado', title: 'Modificado', mostrar: true },\r\n          { name: 'vigente', title: 'Vigente', mostrar: true },\r\n          { name: 'saldo', title: 'Saldo', mostrar: true }\r\n        ];\r\n        vm.items = [];\r\n        respuesta.datos.map(function (item) {\r\n          vm.items.push({\r\n            comprometido: $filter('number')(parseFloat(item.comprometido), 2).replace(/,/g, \"\").replace(\".\", \",\"),\r\n            descripcion: item.descripcion == null ? '-' : item.descripcion,\r\n            inicial: $filter('number')(parseFloat(item.inicial), 2).replace(/,/g, \"\").replace(\".\", \",\"),\r\n            modificado: $filter('number')(parseFloat(item.modificado), 2).replace(/,/g, \"\").replace(\".\", \",\"),\r\n            numero: !isNaN(item.numero) ? $filter('number')(parseFloat(item.numero), 2).replace(/,/g, \"\").replace(\".\", \",\") : item.numero,\r\n            pagado: $filter('number')(parseFloat(item.pagado), 2).replace(/,/g, \"\").replace(\".\", \",\"),\r\n            saldo: $filter('number')(parseFloat(item.saldo), 2).replace(/,/g, \"\").replace(\".\", \",\"),\r\n            vigente: $filter('number')(parseFloat(item.vigente), 2).replace(/,/g, \"\").replace(\".\", \",\")\r\n          })\r\n        });\r\n      })\r\n    }\r\n\r\n    function consultarReporteContable(tipoInforme, gestion) {\r\n      var datosConsulta = {\r\n        tipoInforme: vm.docsContables[tipoInforme],\r\n        gestion: vm.aniosContables[gestion]\r\n      };\r\n      \r\n      DataService.post(restUrl + 'reportes/contables', datosConsulta)\r\n      .then(function (respuesta) {\r\n        vm.headers = [\r\n          { name: 'cite', title: 'Cite', mostrar: true },\r\n          { name: 'detalle', title: 'Detalle', mostrar: true },\r\n          { name: 'c31', title: 'C-31', mostrar: true },\r\n          { name: 'importe', title: 'Importe', mostrar: true }\r\n        ];\r\n        vm.items = respuesta.datos.documentos;\r\n      });\r\n    }\r\n\r\n    function generarNombre() {\r\n      var nombre = 'reporte_' + vm.docsContables[vm.tipoInformePago];\r\n      return nombre;\r\n    }\r\n\r\n    function cabeceraPresupuesto() {\r\n      var cabecera = [];\r\n      for (var i = 0; i < vm.headers.length; i++) {\r\n        if (vm.headers[i].mostrar) cabecera.push(vm.headers[i].title);\r\n      }\r\n      return cabecera;\r\n    }\r\n\r\n    function filasPresupuesto() {\r\n      vm.filas = [];\r\n      vm.items.map(function (item) {\r\n        var nuevo = {};\r\n        for (var i = 0; i < vm.headers.length; i++) {\r\n          if (vm.headers[i].mostrar) {\r\n            if (!isNaN(item[vm.headers[i].name])) {\r\n              nuevo[vm.headers[i].name] = $filter('number')(item[vm.headers[i].name], 2);\r\n            } else {\r\n              nuevo[vm.headers[i].name] = item[vm.headers[i].name];\r\n            }\r\n          }\r\n        }\r\n        vm.filas.push(nuevo);\r\n      });\r\n      return vm.filas;\r\n    }\r\n\r\n    function mostrarOcultar(columna) {\r\n      for (var i = 0; i < vm.headers.length; i++) {\r\n        if (vm.headers[i].name === columna) return vm.headers[i].mostrar;\r\n      }\r\n      return true;\r\n    }\r\n\r\n    function consultarDocumentosUsuarioEstados(fechaInicial, fechaFinal) {\r\n      DataService.get(restUrl + 'monitoreo/estados?fechaInicial=' + fechaInicial + '&&fechaFinal=' + fechaFinal)\r\n      .then(function (respuesta) {\r\n        vm.estados = respuesta.datos;\r\n      })\r\n    }\r\n\r\n    function consultarDocumentosPendientes() {\r\n      DataService.get(restUrl + 'monitoreo/pendientes')\r\n      .then(function (respuesta) {\r\n        vm.pendientes = [];\r\n        respuesta.datos[0].map(function (item) {\r\n          vm.pendientes.push({\r\n            nombres: item.nombres,\r\n            apellidos: item.apellidos,\r\n            ENVIADO: item.ENVIADO,\r\n            RECHAZADO: item.RECHAZADO,\r\n            DERIVADO: item.DERIVADO,\r\n            total: (item.ENVIADO + item.RECHAZADO + item.DERIVADO)\r\n          })\r\n        });\r\n      });\r\n    }\r\n\r\n    function consultarComprometido(gestion) {\r\n      DataService.get(restUrl + 'presupuesto/comprometido?gestion=' + gestion)\r\n        .then(function (respuesta) {\r\n          vm.comprometido = [];\r\n          respuesta.datos.map(function (item) {\r\n            vm.comprometido.push({\r\n              _fecha_creacion: $filter('date')(item._fecha_creacion, \"dd/MM/yyyy\"),\r\n              cite: item.cite,\r\n              descripcion: item.descripcion == null ? '-' : item.descripcion,\r\n              id_documento: item.id_documento,\r\n              monto: $filter('number')(parseFloat(item.monto), 2).replace(/,/g, \"\").replace(\".\", \",\"),\r\n              numero: item.numero\r\n            })\r\n          });\r\n        })\r\n    }\r\n\r\n    function consultarPagado(gestion) {\r\n        DataService.get(restUrl + 'presupuesto/pagado?gestion=' + gestion)\r\n        .then(function (respuesta) {\r\n            vm.pagado = [];\r\n            respuesta.datos.map(function (item) {\r\n            vm.pagado.push({\r\n                _fecha_creacion: $filter('date')(item._fecha_creacion, \"dd/MM/yyyy\"),\r\n                cite: item.cite,\r\n                descripcion: item.descripcion == null ? '-' : item.descripcion,\r\n                id_documento: item.id_documento,\r\n                monto: $filter('number')(parseFloat(item.monto), 2).replace(/,/g, \"\").replace(\".\", \",\"),\r\n                numero: item.numero\r\n            })\r\n            });\r\n        })\r\n    }\r\n\r\n    function vistaPrevia(pIdentificador) {\r\n      Documento.showPdfId(pIdentificador);\r\n    }\r\n\r\n    function generarPDF() {\r\n      var presupuesto = {};\r\n      presupuesto.cabecera = cabeceraPresupuesto();\r\n      presupuesto.filas = filasPresupuesto();\r\n      presupuesto.gestion = vm.anio + limite_inferior;\r\n      var datosEnviar = {\r\n        doc: {}\r\n      };\r\n      datosEnviar.esDispositivoMovil = angular.isDefined($window.orientation);\r\n      DataService.pdf(restUrl + 'presupuesto/pdf', presupuesto)\r\n        .then(function (respuesta) {\r\n          datosEnviar.pdf = respuesta.url;\r\n          datosEnviar.pdf_buffer = respuesta.data;\r\n          var config = {\r\n            data: datosEnviar,\r\n            templateUrl: 'app/modules/plantillasFormly/monitoreo/dialogPresupuestoPDF.html',\r\n            controller: ['data', '$scope', '$mdDialog', 'Util', DialogPDFController]\r\n          }\r\n          Modal.show(config);\r\n        })\r\n    }\r\n\r\n    function DialogPDFController(data, $scope, $mdDialog, Util) {\r\n      var vmd = $scope;\r\n      vmd.data = {};\r\n      vmd.data.html = data.html;\r\n      vmd.data.pdf = data.pdf;\r\n      vmd.data.flag_html = false;\r\n      vmd.data.show_pdf = !data.esDispositivoMovil;\r\n      if (data.esDispositivoMovil) {\r\n        Util.loadCanvas(data.pdf_buffer, '#canvasContainer');\r\n      }\r\n\r\n      //funciones\r\n      /*vmd.mostrarPdf = function (id, sw){ \r\n          if(sw) showPdfx(id); \r\n          else showPdfId(id, \r\n          false); \r\n      }*/\r\n      vmd.cerrar = function () {\r\n        $mdDialog.cancel();\r\n      }\r\n      vmd.verHtml = function () {\r\n        vmd.data.flag_html = true;\r\n      }\r\n      vmd.verPdf = function () {\r\n        vmd.data.flag_html = false;\r\n      }\r\n    }\r\n\r\n    function refrescarChart() {\r\n      vm.busqueda = {};\r\n      vm.ordenInverso = false;\r\n      if (vm.chart.tipo === 'presupuesto') {\r\n        vm.ordenarPor = 'descripcion';\r\n        consultarPresupuesto(vm.gestionActual - vm.gestion);\r\n      } else if (vm.chart.tipo === 'estados') {\r\n        vm.ordenarPor = 'nombres';\r\n        consultarDocumentosUsuarioEstados(vm.fechaInicial, vm.fechaFinal);\r\n      } else if (vm.chart.tipo === 'pendientes') {\r\n        vm.ordenarPor = 'nombres';\r\n        consultarDocumentosPendientes();\r\n      } else if (vm.chart.tipo === 'comprometido') {\r\n        vm.ordenarPor = 'descripcion';\r\n        consultarComprometido(vm.gestionActual - vm.gestion);\r\n      } else if (vm.chart.tipo === 'pagado') {\r\n        vm.ordenarPor = 'descripcion';\r\n        consultarPagado(vm.gestionActual - vm.gestion);\r\n      } else if (vm.chart.tipo === 'reporteContable') {\r\n        vm.ordenarPor = 'cite';\r\n        consultarReporteContable(vm.tipoInformePago, vm.anioContable);\r\n      } else {\r\n        var anio = vm.anio + limite_inferior,\r\n          mes = vm.mes + 1;\r\n        \r\n        var url_get = [\r\n          restUrl + 'monitoreo/global/?anio=' + anio + '&mes=' + mes,\r\n          restUrl + 'monitoreo/usuario/?anio=' + anio + '&mes=' + mes + '&page=' + vm.page,\r\n          restUrl + 'monitoreo/documento/?anio=' + anio + '&mes=' + mes + '&page=' + vm.page,\r\n          restUrl + 'monitoreo/' + vm.usuario + '/documento/?anio=' + anio + '&mes=' + mes\r\n        ];\r\n        DataService.get(url_get[vm.grafico.cod])\r\n        .then(function (respuesta) {\r\n          vm.chart.datos.labels = respuesta.datos.nombres;\r\n          vm.chart.datos.datasets[0].data = respuesta.datos.global;\r\n          vm.chart.datos.datasets[1].data = respuesta.datos.relacionado;\r\n          vm.chart.datos.datasets[2].data = respuesta.datos.no_relacionado;\r\n          vm.chart.actualizar = !vm.chart.actualizar;\r\n          vm.page_tot = respuesta.datos.total;\r\n        });\r\n      }\r\n    }\r\n\r\n    function paginar(acc) {\r\n      if (acc == 'aa')\r\n        vm.page = 1;\r\n      if (acc == 'a')\r\n        vm.page--;\r\n      if (acc == 's')\r\n        vm.page++;\r\n      if (acc == 'ss')\r\n        vm.page = Math.ceil(vm.page_tot / vm.page_cant);\r\n      vm.page_text = '' + ((vm.page - 1) * vm.page_cant + 1) + '-' + (((vm.page * vm.page_cant) > vm.page_tot) ? vm.page_tot : vm.page * vm.page_cant);\r\n      refrescarChart();\r\n    }\r\n\r\n  }\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app')\r\n    .controller('ImpresionController', ImpresionController);\r\n\r\n  /** @ngInject */\r\n  function ImpresionController(restUrl, Storage, Documento, Modal) {\r\n    var vm = this;\r\n    vm.titulo = \"Imprimir documentos\";\r\n    vm.url = restUrl + \"plantillasFormly/documento/\";\r\n    var cuenta = Storage.getUser();\r\n    vm.usuario = cuenta.id;\r\n\r\n    vm.queryExtra = {\r\n        estado: 'APROBADO,CERRADO,DERIVADO'\r\n    };\r\n\r\n    vm.permission = {\r\n        create: false,\r\n        update: false,\r\n        delete: false\r\n    };\r\n\r\n    vm.fields = [\r\n      \"id_documento\",\r\n      \"nombre\",\r\n      \"nombre_plantilla\",\r\n      \"fecha\",\r\n      \"impreso\",\r\n      \"_usuario_modificacion\",\r\n      \"_fecha_creacion\",\r\n      \"_fecha_modificacion\"\r\n    ];\r\n\r\n    vm.buttons = [\r\n      {\r\n        tooltip: 'Ver',\r\n        icon: 'remove_red_eye',\r\n        onclick: vistaPrevia\r\n      },\r\n      {\r\n        tooltip: 'Ver Historial',\r\n        icon: 'timeline',\r\n        onclick: verProgreso\r\n      }\r\n    ];\r\n    vm.multiple = {\r\n      tooltip: 'Impresion multiple',\r\n      icon: 'print',\r\n      onclick: impresionMultiple\r\n    };\r\n\r\n    function verProgreso(pEvento, pIdentificador) {\r\n      Documento.showProgressAll(pEvento, pIdentificador);\r\n    }\r\n\r\n    function vistaPrevia(pEvento, pIdentificador){\r\n      Documento.showPdfId(pIdentificador);\r\n    }\r\n\r\n    function impresionMultiple(evento) {\r\n      var config = {\r\n        event: evento,\r\n        templateUrl: 'app/modules/plantillasFormly/impresion/multiple.dialog.html',\r\n        controller: ['$scope', '$mdDialog', 'DataService', 'Message', 'restUrl', DialogImpresionMultiple]\r\n      };\r\n      Modal.show(config);      \r\n    }\r\n\r\n    function DialogImpresionMultiple($scope, $mdDialog, DataService, Message, restUrl) {\r\n      var vmd = $scope;\r\n      vmd.obtenerDocumento = obtenerDocumento;\r\n      vmd.cancel = cancel;\r\n\r\n      /**\r\n       * Función que obtiene el buffer de todos los documentos de un grupo multiple\r\n       */\r\n      function obtenerDocumento() {\r\n        if (angular.isUndefined(vmd.cite) || vmd.cite==\"\") {\r\n          Message.warning('Debe escribir un número de cite');\r\n          return;\r\n        }\r\n        \r\n        DataService.pdf(restUrl + 'plantillasFormly/multiple', { cite: vmd.cite })\r\n        .then(function (respuestaPdf) {\r\n          if (respuestaPdf){            \r\n            vmd.documentoAImprimir = respuestaPdf;\r\n          }\r\n        })\r\n        .catch(function () {\r\n          // console.log('Error en la obtencion del documento a imprimir', error);\r\n          return;\r\n        });\r\n        \r\n      }\r\n\r\n      /**\r\n       * Funcion que permite cancelar el modal\r\n       */\r\n      function cancel() {\r\n        \r\n        $mdDialog.cancel();\r\n        \r\n      }\r\n      \r\n    }\r\n\r\n  }\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n  .module('app')\r\n  .controller('FirmarController', FirmarController);\r\n\r\n  /** @ngInject */\r\n  function FirmarController(restUrl, Storage, Documento, Modal, $q, DataService, FirmaticService, $window, Message, Loading, $timeout) {\r\n\r\n    var vm = this;\r\n    var cuenta = Storage.getUser();\r\n    vm.cuenta = cuenta;\r\n    vm.usuario = cuenta.id;\r\n    vm.titulo = \"Documentos para firma digital\";\r\n    vm.url = restUrl + 'documento/firmar';\r\n    vm.firmarDocumentos = firmarDocumentos;\r\n    vm.items = {};\r\n    vm.habilitarSeleccion = true;\r\n\r\n    vm.permission = {\r\n      create: false,\r\n      update: false,\r\n      delete: false\r\n    };\r\n\r\n    vm.fields = [\r\n      \"id_documento\",\r\n      \"nombre\",\r\n      \"nombre_plantilla\",\r\n      \"estado\",\r\n      \"fecha\",\r\n      \"_fecha_creacion\",\r\n      \"_fecha_modificacion\"\r\n    ];\r\n\r\n    vm.estadoOpciones = [\r\n      { v:'cerra', t:'CERRADO'}\r\n    ];\r\n\r\n    vm.buttons = [\r\n      {\r\n        tooltip: 'Ver',\r\n        icon: 'remove_red_eye',\r\n        onclick: vistaPrevia\r\n      },\r\n      {\r\n        tooltip: 'Ver Historial',\r\n        icon: 'timeline',\r\n        onclick: verProgreso\r\n      }\r\n    ];\r\n    vm.habilitarBotonFirma = false;\r\n    vm.obtenerSeleccionados=obtenerNumeroSeleccionados;\r\n    \r\n    /**\r\n     * Funcion que obtiene el número de documentos seleccionados.\r\n     * @param {Integer} cantidad Informacion respecto a la cantidad de documentos seleccionados.\r\n     */\r\n    function obtenerNumeroSeleccionados(cantidad) {\r\n      vm.habilitarBotonFirma = cantidad;\r\n    }\r\n\r\n    /**\r\n     * Funcion que permite carga la vista previa de un documento.\r\n     * @param {Function} pEvento Funcion de control del evento(click)\r\n     * @param {Integer} pIdentificador Identificador del documento.\r\n     */\r\n    function vistaPrevia(pEvento, pIdentificador){\r\n      Documento.showPdfId(pIdentificador);\r\n    }\r\n\r\n    /**\r\n     * Funcion que permite la carga del progreso del documento seleccionado\r\n     * @param {Function} pEvento Funcion de control del evento(click)\r\n     * @param {Integer} pIdentificador Identificador del documento\r\n     */\r\n    function verProgreso(pEvento, pIdentificador) {\r\n      Documento.showProgressAll(pEvento, pIdentificador);\r\n    }\r\n\r\n    /**\r\n     * Funcion que inicia el modal para la firma de documentos.\r\n     */\r\n    function firmarDocumentos() {\r\n      var config = {\r\n        data: {\r\n          data: vm.items.data,\r\n          cuenta: vm.cuenta\r\n        },\r\n        clickOutsideToClose: false,\r\n        templateUrl: 'app/modules/firmador/modules.firmador.html',\r\n        controller: ['data', '$scope', '$mdDialog', 'Util', 'DemofiService', 'DataService', '$window', 'Message','$timeout', 'Storage', DialogFirmadorController]\r\n      };\r\n      Modal.show(config);\r\n\r\n    }\r\n\r\n    vm.verificarSeleccionados = verificarSeleccionados;\r\n    vm.arrayBufferToBase64 = arrayBufferToBase64;\r\n    vm.obtenerDocumentos = obtenerDocumentos;\r\n    vm.firmarDocumentos2 = firmarDocumentos2;\r\n    vm.guardarDocumentosFirmados = guardarDocumentosFirmados;\r\n    vm.docDic = {};\r\n    function obtenerDocumentos(lista) {      \r\n      var respuesta = {\r\n        obtenidos: [],\r\n        noObtenidos: []\r\n      };\r\n      var promesas = lista.map(function (item) {\r\n        return new Promise(function (resolve) {\r\n          return DataService.pdf(restUrl + 'documento/firmar', {\r\n              cite: item.nombre,\r\n              id_documento: item.id_documento\r\n            })\r\n            .then(function (respuestaPdf) {\r\n              if (!respuestaPdf || !respuestaPdf.data) throw Error('No se pudo obtener el documento');\r\n              return arrayBufferToBase64(respuestaPdf.data);\r\n            })\r\n            .then(function (base64) {\r\n              respuesta.obtenidos.push({\r\n                base64: 'data:application/pdf;base64,' + base64,\r\n                name: item.id_documento + '.pdf'\r\n              });\r\n              \r\n              return resolve();\r\n            })\r\n            .catch(function (errorObtener) {\r\n              // console.log('Error al obtener el base 64');\r\n              respuesta.noObtenidos.push({\r\n                documento: item.nombre,\r\n                error: errorObtener\r\n              });\r\n              return resolve();\r\n\r\n            });\r\n\r\n        });\r\n\r\n      });\r\n      return Promise.all(promesas)\r\n        .then(function () {\r\n          return Promise.resolve(respuesta);\r\n        })\r\n        .catch(function (error) {\r\n          // console.log('Error al ejecutar las promesas', error);\r\n          return Promise.reject(error);\r\n        });\r\n    }\r\n    function guardarDocumentosFirmados(lista) {\r\n      var respuesta = {\r\n        total: lista.length || 0,\r\n        guardado: [],\r\n        noGuardado: []\r\n      };\r\n      var promesas = lista.map(function(item) {\r\n        return new Promise(function (resolve) {\r\n          var nombreDocumento = item.name          \r\n          if (angular.isUndefined(vm.docDic[nombreDocumento])){\r\n            respuesta.noGuardado.push(nombreDocumento.replace('.pdf', ''));\r\n            return resolve();\r\n          }\r\n          return DataService.post(restUrl + 'documento/firmado/', {\r\n            base64: item.base64,\r\n            id_documento: vm.docDic[nombreDocumento]\r\n          })\r\n          .then(function (respGuardado) {\r\n            if(respGuardado.tipoMensaje !== 'EXITO') throw Error(respGuardado.mensaje);\r\n            respuesta.guardado.push(nombreDocumento);\r\n            return resolve();\r\n          })\r\n          .catch(function () {\r\n            respuesta.noGuardado.push(item.name);\r\n            return resolve();\r\n          });\r\n        });\r\n      });\r\n\r\n\r\n      return Promise.all(promesas)\r\n      .then(function () {\r\n        return Promise.resolve(respuesta);\r\n      })\r\n      .catch(function(error){\r\n        // console.log('Error al ejecutar las promesas de guardado', error);\r\n        \r\n        return Promise.reject(error);\r\n      })\r\n    }\r\n\r\n    function firmarDocumentos2() {\r\n      var configLoad = {\r\n        data:{\r\n          mensaje: 'Verificando firmador...',\r\n          tipo: 'info'\r\n        }\r\n      };\r\n      Loading.show(configLoad);\r\n      var documentosParaFirmar = vm.verificarSeleccionados(vm.items.data);\r\n      var control = {\r\n        seleccionados: documentosParaFirmar.length,\r\n        obtenidos: 0,\r\n        firmados: 0,\r\n        guardados: 0\r\n      };\r\n\r\n      FirmaticService.verificarEstado()\r\n      .then(function (respEstado) {\r\n        if(respEstado.activo === false) throw Error(respEstado.mensaje);\r\n        Loading.cambiar({\r\n          mensaje: 'Obteniendo documentos ...',\r\n          tipo: 'warning'\r\n        })\r\n        return obtenerDocumentos(documentosParaFirmar);\r\n      })\r\n      .then(function (respDocumentos) {\r\n        if(!respDocumentos) throw Error('No se pudieron obtener documentos.');\r\n        if(!respDocumentos.obtenidos.length === 0) throw Error('No se obtuvieron documentos firmar');\r\n        control.obtenidos = respDocumentos.obtenidos.length || 0;\r\n        Loading.cambiar({\r\n          mensaje: 'Firmando documentos ...',\r\n          tipo: 'info'\r\n        })\r\n        return FirmaticService.firmarPdf(respDocumentos.obtenidos, cuenta.doc);\r\n      })\r\n      .then(function (respuestaFirma) {\r\n        \r\n        if (!respuestaFirma || respuestaFirma.status !== 200) {\r\n          throw Error(\"No se pudo firmar el documento, revise que el firmador se encuentra en ejecución.\");\r\n        }\r\n        Loading.cambiar({\r\n          mensaje: 'Guardando documentos firmados ...',\r\n          tipo: 'success'\r\n        });\r\n        control.firmados = respuestaFirma.data.files.length || 0;\r\n        return guardarDocumentosFirmados(respuestaFirma.data.files);\r\n      })\r\n      .then(function (respGuardados) {\r\n        if(respGuardados.guardado.length === 0 && control.seleccionados.length > 0 ) throw Error('No se guardo ningun documento.');\r\n        control.guardados = respGuardados.guardado.length || 0;\r\n        \r\n        if(control.seleccionados === control.guardados) {\r\n          Message.success(control.seleccionados+' documentos firmados y guardados correctamente.');\r\n        }\r\n        else {\r\n          \r\n          Message.show('INFORMACION','De '+control.seleccionados+' se firmaron '+control.firmados+' y se guardaron '+control.guardados);\r\n        }\r\n        \r\n        Loading.cerrar();\r\n        $timeout(function () {\r\n          angular.element('#btn-refresh-crudtable').click();\r\n        });\r\n      })\r\n      .catch(function (error) {\r\n        Message.error(error.message);\r\n        Loading.cerrar();\r\n      });\r\n\r\n    }\r\n\r\n    function verificarSeleccionados(documentos) {\r\n      var respuesta = []\r\n      vm.docDic = {};\r\n      documentos.map(function (documento) {\r\n        if (documento.selected != null && documento.selected) {\r\n          documento.firmado = false;\r\n          respuesta.push(documento);\r\n          vm.docDic[documento.id_documento+'.pdf'] = documento.id_documento;\r\n        }\r\n      });\r\n\r\n      return respuesta;\r\n    }\r\n    /**\r\n     * Funcion que transforma un buffer en base64\r\n     * @param {Buffer} buffer buffer de un archivo\r\n     */\r\n    function arrayBufferToBase64(buffer) {\r\n      var defer = $q.defer();\r\n      var binary = '';\r\n      var bytes = new Uint8Array(buffer);\r\n      var len = bytes.byteLength;\r\n      for (var i = 0; i < len; i++) {\r\n        binary += String.fromCharCode(bytes[i]);\r\n      }\r\n      defer.resolve($window.btoa(binary));\r\n      return defer.promise;\r\n    }\r\n\r\n    /**\r\n     * Funcion controlador para el modal que permite la firma de documentos.\r\n     * @param {*} data \r\n     * @param {*} $scope \r\n     * @param {*} $mdDialog \r\n     * @param {*} Util \r\n     * @param {*} DemofiService \r\n     * @param {*} DataService \r\n     * @param {*} $window \r\n     * @param {*} Message \r\n     * @param {*} $timeout \r\n     * @param {*} Storage \r\n     */\r\n    function DialogFirmadorController(data, $scope, $mdDialog, Util, DemofiService, DataService, $window, Message, $timeout, Storage) {\r\n      var vmd = $scope;\r\n      vmd.documentos = data.data;\r\n      vmd.cuenta= data.cuenta;\r\n      vmd.Storage = Storage;\r\n      vmd.documentosParaFirmar = [];\r\n      vmd.formData = {};\r\n      vmd.formData.pin = undefined;\r\n      vmd.tokens = [];\r\n      vmd.certificados = [];\r\n      vmd.firmados = 0;\r\n      vmd.iniciado = false;\r\n      vmd.iniciando = false;\r\n      vmd.certificado_seleccionado = undefined;\r\n      vmd.autenticado = false;\r\n      vmd.autenticando = false;\r\n      //this.$scope.firmando = false;\r\n      vmd.demofi_ejecutandose = false;\r\n      vmd.token_conectado = false;\r\n      vmd.boton_autenticar_habilitado = false;\r\n      vmd.mostrar_progress = false;\r\n\r\n      vmd.verificarTokenConectado = verificarTokenConectado;\r\n      vmd.autenticar = autenticar;\r\n      vmd.cancelar = cancelar;\r\n      vmd.verificarServidor = verificarServidor;\r\n      vmd.firmar = firmar;\r\n      vmd.validarFirmador = validarFirmador;\r\n      vmd.yafirmo = false;\r\n      vmd.filtrarCertificadosValidos = filtrarCertificadosValidos;\r\n\r\n      verificarTokenConectado();\r\n      verificarSeleccionados();\r\n\r\n      /**\r\n       * Funcion que verifica si existe algun token conectado al equipo del firmante.\r\n       */\r\n      function verificarTokenConectado() {\r\n        if (vmd.iniciando === false) {\r\n          vmd.iniciando = true;\r\n          DemofiService.listTokens()\r\n          .then( function (response) {\r\n            vmd.iniciando = false;\r\n            vmd.iniciado = true;\r\n            vmd.demofi_ejecutandose = true;\r\n            vmd.tokens = response.datos;\r\n            vmd.token_conectado = response.datos.length > 0;\r\n          })\r\n          .catch( function () {\r\n            vmd.iniciando = false;\r\n            vmd.iniciado = false;\r\n            vmd.token_conectado = true;\r\n            vmd.demofi_ejecutandose = false;\r\n            vmd.cancelar();\r\n          });\r\n\r\n        }\r\n      }\r\n\r\n      /**\r\n       * Funcion que permite la autenticacion del firmandor, mediante el demofi\r\n       */\r\n      function autenticar() {\r\n        vmd.mostrar_progress = true;\r\n        vmd.autenticando = true;\r\n        DemofiService.login(vmd.formData.pin)\r\n        .then(function (respLogin) {\r\n          vmd.mostrar_progress = false;\r\n          vmd.autenticando = false;\r\n          if(!respLogin.finalizado || respLogin.finalizado== false) {\r\n            throw Error('Error al autenticarse');\r\n          }\r\n          Message.success('Acceso al token exitoso.');\r\n          vmd.boton_autenticar_habilitado = false;\r\n          vmd.autenticado = true;\r\n          return DemofiService.listCertificates();\r\n        })\r\n        .then(function (respCertificados) {\r\n          if(!respCertificados.datos) throw Error('Error al obtener los certificados del token.');\r\n          vmd.certificados = respCertificados.datos;\r\n          vmd.certificados = vmd.filtrarCertificadosValidos(respCertificados.datos);\r\n          if(vmd.certificados.length === 0) throw Error('No se encontraron certificados válidos.');\r\n          if(vmd.certificados.length === 1 ) {\r\n            $timeout(function(){ vmd.formData.certificado_seleccionado = vmd.certificados[0];});\r\n          }\r\n          Message.success('Certificados obtenidos correctamente.');\r\n\r\n        })\r\n        .catch( function (error) {\r\n          vmd.mostrar_progress = false;\r\n          vmd.autenticando = false;\r\n          vmd.pin = undefined;\r\n          vmd.autenticado = false;\r\n          vmd.boton_autenticar_habilitado = true;\r\n          Message.error(error.mensaje ||  error.message);\r\n        });\r\n      }\r\n\r\n      /**\r\n       * Funcion que verifica el servidor de firma\r\n       */\r\n      function verificarServidor() {\r\n        DemofiService.verificarServidor();\r\n      }\r\n\r\n      /**\r\n       * Funcion que permite cancelar el modal de firma de documentos.\r\n       */\r\n      function cancelar() {\r\n        if(vmd.yaFirmo === true) {\r\n          $timeout(function(){ angular.element('#btn-refresh-crudtable').click(); });\r\n        }\r\n        $mdDialog.cancel();\r\n      }\r\n\r\n      /**\r\n       * Funcion que verifica documentos seleccionados para firmar.\r\n       */\r\n      function verificarSeleccionados() {\r\n        vmd.documentos.map (function (documento) {\r\n          if (documento.selected != null && documento.selected) {\r\n            documento.firmado = false;\r\n            vmd.documentosParaFirmar.push(documento);\r\n          }\r\n        });\r\n      }\r\n\r\n      /**\r\n       * Funcion que valida al firmador\r\n       * @param {Object} firmante Datos del certificado digital del firmante.\r\n       * @param {Object} cuenta   Datos de la cuenta del usuario.\r\n       */\r\n      function validarFirmador(firmante, cuenta) {\r\n        var respuesta = false;\r\n        if(cuenta.doc == firmante.ci) respuesta = true;\r\n        return respuesta;\r\n      }\r\n\r\n      /**\r\n       * Funcion que firma de manera asincrona.\r\n       * @param {Array} documentos  Array de documentos a firmar.\r\n       * @param {Integer} indice    Indica la posicion del array\r\n       * @param {String} alias      Informacion sobre el alias del firmante.\r\n       */\r\n      function firmarAsincrono(documentos, indice, alias) {\r\n        if(indice < documentos.length) {\r\n          firmarDocumento(documentos[indice], alias)\r\n          .then(function(){\r\n            documentos[indice].firmado = true;\r\n            documentos[indice].class = 'firmado';\r\n            indice++;\r\n            vmd.firmados++;\r\n            firmarAsincrono(documentos,indice, alias);\r\n          })\r\n          .catch(function(){\r\n            documentos[indice].firmado = false;\r\n            documentos[indice].class = 'error';\r\n            indice++;\r\n            firmarAsincrono(documentos,indice, alias);\r\n          });\r\n        }\r\n        else {\r\n          if(vmd.firmados === documentos.length) vmd.cancelar();\r\n          Message.success(vmd.firmados +' documento(s) firmado(s) y guardado(s) correctamente.');\r\n          return;\r\n        }\r\n\r\n      }\r\n\r\n      /**\r\n       * Funcion que ejecuta la firma de documentos.\r\n       */\r\n      function firmar() {\r\n        var alias = angular.fromJson(vmd.formData.certificado_seleccionado).alias;\r\n        var firmadorValido = vmd.validarFirmador(angular.fromJson(vmd.formData.certificado_seleccionado), vmd.cuenta);\r\n        var docs = vmd.documentosParaFirmar;\r\n        vmd.yaFirmo = true;\r\n        vmd.alias = alias;\r\n        if(!firmadorValido || firmadorValido === false) {\r\n          Message.error('El dispositivo de firma no corresponde al usuario');\r\n          return;\r\n        }\r\n        var cont = 0;\r\n        firmarAsincrono(docs, cont, alias);\r\n      }\r\n\r\n      /**\r\n       * Funcion que realiza la firma de un documento.\r\n       * @param {Object} documento  Datos del documento a firmar\r\n       * @param {String} alias      Alias del certificado del firmante\r\n       */\r\n      function firmarDocumento(documento, alias) {\r\n        var nombreArchivo = documento.nombre.replace(/\\//g , \"\") + '.pdf';\r\n        var solicitudFirma = {};\r\n        return new Promise(function (resolve, reject) {\r\n          return DataService.pdf(restUrl+'documento/firmar',{cite: nombreArchivo, id_documento:documento.id_documento})\r\n          .then(function (respuestaPdf)  {\r\n            if(!respuestaPdf || !respuestaPdf.data) throw Error('No se pudo obtener el documento');\r\n            solicitudFirma.codigo_archivo = nombreArchivo;\r\n            return  arrayBufferToBase64(respuestaPdf.data);\r\n          })\r\n          .then(function (base64) {\r\n            solicitudFirma.pdf_base64 = base64;\r\n            if(!base64) throw Error('No se pudo obtener el documento');\r\n            return DemofiService.sign(solicitudFirma, alias);\r\n          })\r\n          .then(function (respuestaFirma) {\r\n            if(!respuestaFirma.datos || !respuestaFirma.finalizado || respuestaFirma.finalizado == false) {\r\n              throw Error(\"No se pudo firmar el documento, revise que el firmador se encuentra en ejecución.\");\r\n            }\r\n            if(nombreArchivo !== respuestaFirma.datos.nombre_archivo) {\r\n              throw Error(\"No existe integridad de datos, es posible que tenga un intruso en su red.\");\r\n            }\r\n            return DataService.post(restUrl+'documento/firmado/',{base64: respuestaFirma.datos.pdf_base64, id_documento: documento.id_documento});\r\n          })\r\n          .then(function (documentoFirmado) {\r\n            if(!documentoFirmado) throw Error('No se pudo guardar el documento firmado.');\r\n            if(documentoFirmado.tipoMensaje !== 'EXITO') throw Error('No se pudo guardar el documento firmado.');\r\n            return resolve(documentoFirmado);\r\n          })\r\n          .catch(function (error) {\r\n            return reject(error.message || error);\r\n          });\r\n        });\r\n      }\r\n\r\n      /**\r\n       * Funcion que transforma un buffer en base64\r\n       * @param {Buffer} buffer buffer de un archivo\r\n       */\r\n      function arrayBufferToBase64(buffer) {\r\n        var defer = $q.defer();\r\n        var binary = '';\r\n        var bytes = new Uint8Array(buffer);\r\n        var len = bytes.byteLength;\r\n        for (var i = 0; i < len; i++) {\r\n          binary += String.fromCharCode(bytes[i]);\r\n        }\r\n        defer.resolve($window.btoa(binary));\r\n        return defer.promise;\r\n      }\r\n\r\n      /**\r\n       * Funcion que filtra una lista de certificados digitales.\r\n       * @param {Array} certificados Array de certificados digitales\r\n       */\r\n      function filtrarCertificadosValidos(certificados) {\r\n        var validos = [];\r\n        if(certificados.length == 0) return validos;\r\n        certificados.map(function (item) {\r\n          if (item.esFirmaBolivia == 'true' && item.esValido == 'true') {\r\n            validos.push(item);\r\n          }\r\n        });\r\n        \r\n        return validos;\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app')\r\n    .controller('EnCursoController', EnCursoController);\r\n\r\n  /** @ngInject */\r\n  function EnCursoController(restUrl, Storage, Documento) {\r\n\r\n      var vm = this;\r\n      var cuenta = Storage.getUser();\r\n      vm.usuario = cuenta.id;\r\n      vm.titulo = \"Documentos en curso\";\r\n      vm.url = restUrl + \"plantillasFormly/documento/\"+cuenta.id+\"/encurso\";\r\n\r\n      vm.permission = {\r\n          create: false,\r\n          update: false,\r\n          delete: false\r\n      };\r\n\r\n      vm.fields = [\r\n          \"id_documento\",\r\n          \"nombre\",\r\n          \"nombre_plantilla\",\r\n          \"estado\",\r\n          \"fecha\",\r\n          \"_fecha_creacion\",\r\n          \"_fecha_modificacion\"\r\n      ];\r\n\r\n      vm.buttons = [\r\n        {\r\n          tooltip: 'Ver',\r\n          icon: 'remove_red_eye',\r\n          onclick: vistaPrevia\r\n        },\r\n        {\r\n            tooltip: 'Ver Historial',\r\n            icon: 'timeline',\r\n            onclick: verProgreso\r\n        }\r\n      ];\r\n\r\n      function vistaPrevia(pEvento, pIdentificador){\r\n          Documento.showPdfId(pIdentificador);\r\n      }\r\n      function verProgreso(pEvento, pIdentificador) {\r\n          Documento.showProgressAll(pEvento, pIdentificador);\r\n      }\r\n\r\n  }\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app')\r\n    .controller('DocumentosController', DocumentosController);\r\n\r\n  /** @ngInject */\r\n  function DocumentosController(DataService, restUrl, Storage, Datetime, $location, Modal, Documento) {\r\n    var vm = this;\r\n    vm.titulo = \"Bandeja de documentos\";\r\n    var cuenta = Storage.getUser();\r\n\r\n    vm.usuario=cuenta.id;\r\n    vm.url = restUrl + 'plantillasFormly/documento/'+cuenta.id+'/misdocumentos/';\r\n    vm.permission = {\r\n      create:false,\r\n      update:false,\r\n      delete:true\r\n    };\r\n    vm.fields = [\r\n      \"id_documento\",\r\n      \"nombre\",\r\n      \"nombre_plantilla\",\r\n      \"fecha\",\r\n      \"estado\",\r\n      \"impreso\",\r\n      \"_fecha_creacion\",\r\n      \"_fecha_modificacion\"\r\n    ];\r\n\r\n    vm.estadoOpciones = [\r\n        { v:'nuevo', t:'NUEVO'},\r\n        { v:'envia', t:'ENVIADO'},\r\n        { v:'cerra', t:'CERRADO'},\r\n        { v:'deriv', t:'DERIVADO'},\r\n        { v:'derive', t:'DERIVE'},\r\n        { v:'respondi', t:'RESPONDI'}\r\n    ];\r\n    if(cuenta.es_jefe){\r\n        vm.estadoOpciones.push( { v:'aprobe', t:'APROBE'} );\r\n        vm.estadoOpciones.push( { v:'rechace', t:'RECHACE'} );\r\n    }\r\n\r\n    vm.buttons = [\r\n        {\r\n          multiple: true,\r\n          key_item: 'estado',\r\n          opcion: {\r\n            'NUEVO': { tooltip: 'Editar', icon: 'checked', onclick: irDocumento },\r\n            'ENVIADO': { tooltip: 'Editar', icon: 'checked', onclick: irDocumento},\r\n            'CERRADO': { tooltip: 'Editar', icon: 'checked', onclick: irDocumento},\r\n            'DERIVADO': { tooltip: 'Editar', icon: 'checked', onclick: irDocumento},\r\n            'DEFAULT': { tooltip: 'Ver', icon: 'remove_red_eye', onclick: irDocumento}\r\n          }\r\n        },\r\n        {\r\n            tooltip: 'Ver Historial',\r\n            icon: 'timeline',\r\n            onclick: verProgreso\r\n        }\r\n    ];\r\n    vm.buttonAgregar = {\r\n        tooltip: 'Añadir',\r\n        icon: 'add',\r\n        onclick: nuevoDocumento\r\n    };\r\n\r\n    function irDocumento(pEvento, pIdentificador){\r\n        DataService.get(restUrl+'plantillasFormly/documento/?id_documento='+pIdentificador+'&fields=_usuario_creacion')\r\n        .then(function (respuesta) {\r\n            if(respuesta.datos.resultado[0]._usuario_creacion==cuenta.id)\r\n                $location.path('documento/' + pIdentificador);\r\n            else\r\n                Documento.showPdfId(pIdentificador);\r\n        })\r\n    }\r\n    function verProgreso(pEvento, pIdentificador) {\r\n        Documento.showProgressAll(pEvento, pIdentificador);\r\n    }\r\n\r\n    function nuevoDocumento(pEvento){\r\n        var config = {\r\n            event: pEvento,\r\n            templateUrl: 'app/modules/plantillasFormly/documentos/documento.dialog.html',\r\n            controller: ['$scope','$mdDialog','DataService','Message','restUrl', 'Storage', DialogEscojerPlantilla]\r\n        };\r\n        Modal.show(config);\r\n    }\r\n\r\n    function DialogEscojerPlantilla( $scope, $mdDialog, DataService, Message, restUrl, Storage ) {\r\n        var vmd = $scope;\r\n\r\n        vmd.elegir = elegir;\r\n        vmd.urlBase = 'plantillasFormly/plantilla_formly/?fields=id_plantilla_formly,nombre,abreviacion&sort=nombre&estado=ACTIVO&limit=10000'\r\n        \r\n        iniciarDialog();\r\n\r\n        function iniciarDialog() {\r\n            DataService.get(restUrl + vmd.urlBase)\r\n            .then(function (data) {\r\n                vmd.plantillas_disponibles = data.datos.resultado;\r\n                vmd.plantilla_seleccionada = data.datos.resultado[0].id_plantilla_formly;\r\n            });\r\n        }\r\n\r\n        function elegir() {\r\n            DataService.get(restUrl + 'plantillasFormly/plantilla_formly/'+vmd.plantilla_seleccionada)\r\n            .then(function (data) {\r\n                Storage.setSession(\"pl\", data.datos);\r\n                $location.path('documento/0');\r\n                $mdDialog.cancel();\r\n            });\r\n        }\r\n    }\r\n\r\n  }\r\n})();\r\n\n(function () {\n  'use strict';\n\n  angular\n  .module('app')\n  .controller('ContactosController', ContactosController);\n\n  /** @ngInject */\n\n  function ContactosController(restUrl, Storage) {\n    var vm = this;\n    var cuenta = Storage.getUser();\n    vm.usuario = cuenta.id;\n    \n    vm.titulo = 'Bandeja de contactos';\n    vm.url = restUrl + 'plantillasFormly/contacto/';\n    vm.fields = [\n      'id_contacto',\n      'grado',\n      'nombres',\n      'apellidos',\n      'entidad',\n      'tipo_entidad',\n      'estado',\n      '_fecha_creacion',\n      '_fecha_modificacion'\n    ];\n    vm.permission = {\n      delete: false\n    };\n\n    vm.order= 'estado';\n    vm.dialogController = ['data', 'Message', '$scope', '$mdDialog', 'DataService', 'restUrl', '$timeout', DialogContactoController];\n    vm.template = 'app/modules/plantillasFormly/contactos/dialog.contactos.html';\n    function DialogContactoController(data, Message, $scope, $mdDialog, DataService, restUrl, $timeout) {\n      var vmd = $scope;\n      \n      vmd.obtenerTiposEntidad = obtenerTiposEntidad;\n      vmd.cerrar = cerrar;\n      vmd.registrarContacto = registrarContacto;\n      vmd.habilitarOtro = habilitarOtro;\n      vmd.data = data;\n      vmd.titulo = 'Editar';\n      vmd.otroEditar = false;\n      vmd.departamentos = [\n        { id: 'BENI', name: 'BENI'},\n        { id: 'CHUQUISACA', name: 'CHUQUISACA'},\n        { id: 'COCHABAMBA', name: 'COCHABAMBA'},\n        { id: 'LA PAZ', name: 'LA PAZ'},\n        { id: 'ORURO', name: 'ORURO'},\n        { id: 'PANDO', name: 'PANDO'},\n        { id: 'POTOSI', name: 'POTOSI'},\n        { id: 'SANTA CRUZ', name: 'SANTA CRUZ'},\n        { id: 'TARIJA', name: 'TARIJA'}\n      ];\n      vmd.estados = [\n        { id: 'ACTIVO', name: 'ACTIVO'},\n        { id: 'INACTIVO', name: 'INACTIVO'}\n      ];\n      if(vmd.data.id_contacto == null) {\n        vmd.titulo = 'Agregar';\n        vmd.data.estado = 'ACTIVO';\n        vmd.data.departamento = 'LA PAZ';\n      }\n      vmd.obtenerTiposEntidad();\n      \n      function registrarContacto() {\n        var datosEnviar = vmd.data;\n\n        if (vmd.otroEditar == true) {\n          datosEnviar.tipo_entidad = datosEnviar.otro_tipo;\n        }\n        // Modificar contacto\n        if(vmd.data.id_contacto) {\n          DataService.put(restUrl + 'plantillasFormly/contacto/' + vmd.data.id_contacto, datosEnviar)\n          .then(function (respContacto) {\n            Message.show(respContacto.tipoMensaje, respContacto.mensaje);\n            $mdDialog.hide();\n            $timeout(function (){\n              angular.element('#btn-refresh-crudtable').click();\n            }, 500);\n          });\n        }\n        // Crear contacto\n        else {\n          DataService.post(restUrl+'plantillasFormly/contacto', datosEnviar)\n          .then(function (respContacto) {\n            Message.show(respContacto.tipoMensaje, respContacto.mensaje);\n            $mdDialog.hide();\n            $timeout(function () {\n              angular.element('#btn-refresh-crudtable').click();\n            }, 500)\n          })\n        }\n      }\n      \n      function obtenerTiposEntidad() {\n        DataService.get(restUrl + 'plantillasFormly/contactos/tiposEntidad')\n        .then(function (respTipos) {\n          vmd.tiposEntidad = respTipos.datos;\n          vmd.tiposEntidad.push({tipo_entidad:'Otros...', otro:true});\n        })\n        \n      }\n\n      function habilitarOtro(item) {\n        if (angular.isDefined(item.otro) && item.otro == true) {\n          vmd.otroEditar = true;\n        }\n        else {\n          vmd.otroEditar = false;\n        }\n        \n      }\n\n      function cerrar() {\n        $mdDialog.cancel();\n      }\n      \n    }\n\n  }\n})();\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app')\r\n    .controller('AprobacionController', AprobacionController);\r\n\r\n  /** @ngInject */\r\n  function AprobacionController(DataService, restUrl, backUrl, Storage, $location, Modal, UtilFormly, Datetime, Documento, Loading) {\r\n\r\n    var vm = this;\r\n    vm.titulo = \"Documentos pendientes\";\r\n    var cuenta = Storage.getUser();\r\n    vm.usuario=cuenta.id;\r\n    vm.url = restUrl + 'plantillasFormly/documento/'+cuenta.id+'/todo/';\r\n\r\n    //cargamos funciones\r\n    vm.vistaPrevia = vistaPrevia;\r\n\r\n    vm.permission ={\r\n      create:false,\r\n      update:false,\r\n      delete:true\r\n    };\r\n\r\n    vm.estadoOpciones = [{ v:'deriv', t:'DERIVADO'},{ v:'recha', t:'RECHAZADO'}];\r\n    if(cuenta.es_jefe){\r\n        vm.estadoOpciones.push({ v:'envia', t:'ENVIADO'});\r\n    }\r\n\r\n    vm.fields = [\r\n      \"id_documento\",\r\n      \"nombre\",\r\n      \"nombre_plantilla\",\r\n      \"fecha\",\r\n      \"estado\",\r\n      \"_fecha_creacion\",\r\n      \"_fecha_modificacion\"\r\n    ];\r\n\r\n    vm.buttons = [\r\n      {\r\n        multiple: true,\r\n        key_item: 'estado',\r\n        opcion: {\r\n          'RECHAZADO': {\r\n            tooltip: 'Editar',\r\n            icon: 'checked',\r\n            onclick: irDocumento\r\n          },\r\n          'DEFAULT': {\r\n            tooltip: 'Ver',\r\n            icon: 'remove_red_eye',\r\n            onclick: vistaPrevia\r\n          }\r\n        }\r\n      },\r\n      {\r\n          tooltip: 'Ver Historial',\r\n          icon: 'timeline',\r\n          onclick: verProgreso\r\n      }\r\n    ];\r\n\r\n    function irDocumento(pEvento, pIdentificador){\r\n        DataService.get(restUrl+'plantillasFormly/documento/?id_documento='+pIdentificador+'&fields=_usuario_creacion')\r\n        .then(function (respuesta) {\r\n            if(respuesta.datos.resultado[0]._usuario_creacion==cuenta.id)\r\n                $location.path('documento/' + pIdentificador);\r\n            else\r\n                Documento.showPdfId(pIdentificador);\r\n        });\r\n    }\r\n\r\n    function verProgreso(pEvento, pIdentificador) {\r\n        Documento.showProgressAll(pEvento, pIdentificador);\r\n    }\r\n\r\n    function vistaPrevia(pEvento, pIdentificador){\r\n      var datosEnviar = {doc:{}};\r\n      datosEnviar.doc = {};\r\n      var data;\r\n      DataService.get(restUrl + 'plantillasFormly/documento/'+pIdentificador)\r\n      .then(function (respuestaDocumento) {\r\n        // $log.log(\"revisando la obtencion de datos\", respuestaDocumento);\r\n        data = respuestaDocumento;\r\n        // var usuarioPara = JSON.parse(data.datos.para);\r\n        datosEnviar.model_actual = angular.fromJson(data.datos.plantilla_valor);\r\n        var model = datosEnviar.model_actual;\r\n        if( model[\"cite-0\"] && model[\"cite-0\"].fecha )\r\n        model[\"cite-0\"].fecha = Datetime.format(model[\"cite-0\"].fecha, 'dd de MMM de YYYY');\r\n        datosEnviar.form_actual = UtilFormly.dataToView(angular.fromJson(data.datos.plantilla), datosEnviar.model_actual);\r\n        datosEnviar.doc.nombre = data.datos.nombre;\r\n        datosEnviar.doc.plantilla = data.datos.plantilla;\r\n\r\n        return;\r\n\r\n      })\r\n      .then(function() {\r\n        return DataService.post(restUrl+ \"plantillasFormly/generarDocumento/\",datosEnviar);\r\n      })\r\n      .then(function (pRespuesta) {\r\n        datosEnviar = { html: pRespuesta.datos.html, nombre: pRespuesta.datos.nombre};\r\n        datosEnviar.esDispositivoMovil = Documento.isMobile();\r\n        return DataService.pdf(restUrl+'plantillasFormly/documentoPDF/',{cite: datosEnviar.nombre});\r\n      })\r\n      .then(function (respuesta) {\r\n        if(!respuesta) return;\r\n        datosEnviar.pdf = respuesta.url;\r\n        datosEnviar.pdf_buffer = respuesta.data;\r\n        var config = {\r\n          data: { id:data.datos.id_documento, dc: data.datos, cuenta: cuenta, pdf: datosEnviar },\r\n          templateUrl: 'app/modules/plantillasFormly/aprobacion/dialogPDF.html',\r\n          controller: ['data', '$scope', '$mdDialog', 'DataService', 'restUrl', '$timeout', 'Storage', 'Datetime', 'Documento', 'Message', 'Util', DialogPDFController]\r\n        };\r\n        Modal.show(config);\r\n      });\r\n\r\n    }\r\n\r\n    \r\n    function DialogPDFController(data, $scope, $mdDialog, DataService, restUrl, $timeout, Storage, Datetime, Documento, Message, Util){\r\n        var vmd = $scope;\r\n        vmd.data={};\r\n        vmd.data.dc=data.dc;\r\n        vmd.data.observaciones;\r\n        vmd.data.show_select = false;\r\n        vmd.data.datosEnviar=data.dc.datosEnviar;\r\n\r\n        vmd.data.html=data.pdf.html;\r\n        vmd.data.pdf=data.pdf.pdf;\r\n        vmd.data.flag_html=true;\r\n        vmd.data.show_pdf=!data.pdf.esDispositivoMovil;\r\n\r\n        //funciones\r\n        vmd.cerrar = cerrar;\r\n        vmd.aprobar = aprobar;\r\n        vmd.observar = observar;\r\n        vmd.derivar = derivar;\r\n        vmd.openSelect = openSelect;\r\n        vmd.crear = crear;\r\n        vmd.verDocumento = verDocumento;\r\n\r\n        vmd.mostrarPdf = function (id, sw){ if(sw) Documento.showPdfx(id); else Documento.showPdfId(id, false); }\r\n        vmd.verHtml=function(){ vmd.data.flag_html=true; }\r\n        vmd.verPdf=function(){ vmd.data.flag_html=false; }\r\n\r\n        iniciar();\r\n\r\n        function iniciar() {\r\n            if (angular.isString(vmd.data.dc.para)) {\r\n                vmd.data.dc.para = angular.fromJson(vmd.data.dc.para);\r\n            }\r\n            vmd.data.es_derivar = (vmd.data.dc.estado=='DERIVADO');\r\n            vmd.data.es_para = (vmd.data.dc.para.indexOf(data.cuenta.id)!=-1 && !vmd.data.es_derivar);\r\n            vmd.data.sw_es_respuesta = vmd.data.dc.grupo || false;\r\n            if(vmd.data.sw_es_respuesta) {\r\n                // obtener documentos de grupo\r\n                DataService.get(restUrl + 'plantillasFormly/documento/?fields=id_documento,nombre,nombre_plantilla&estado=DERIVADO,CERRADO,APROBADO&sort=_fecha_creacion&grupo='+vmd.data.dc.grupo)\r\n                .then(function (resultado) {\r\n                    vmd.data.docs_grupo = resultado.datos.resultado;\r\n                });\r\n            }\r\n            if (data.pdf.esDispositivoMovil) {\r\n                Util.loadCanvas(data.pdf.pdf_buffer, '#canvasContainer');\r\n            }\r\n\r\n            DataService.get(restUrl + 'seguridad/usuario/'+vmd.data.dc._usuario_creacion)\r\n            .then(function (respuesta) {\r\n                vmd.data.nombres =  respuesta.datos.nombres;\r\n                vmd.data.apellidos =  respuesta.datos.apellidos;\r\n                if(vmd.data.es_para || vmd.data.es_derivar)\r\n                    return DataService.get(restUrl + 'seguridad/usuario/'+cuenta.id+'/informacion');\r\n                return;\r\n            })\r\n            .then(function (respuesta) {\r\n                if(respuesta){\r\n                    vmd.data.accion='observar';\r\n                    vmd.data.usuarios = respuesta.datos.resultado;\r\n                }\r\n                if(vmd.data.es_derivar || vmd.data.es_para)\r\n                    return DataService.get(restUrl + 'plantillasFormly/plantilla_formly/?fields=id_plantilla_formly,nombre,abreviacion&sort=nombre&estado=ACTIVO&limit=10000');\r\n                return;\r\n            })\r\n            .then(function (respuesta) {\r\n                if(respuesta){\r\n                    vmd.data.plantillas_disponibles = respuesta.datos.resultado;\r\n                }\r\n            });\r\n\r\n            if(vmd.data.es_derivar){\r\n                DataService.get(restUrl + 'historialFlujo/'+vmd.data.dc.id_documento+'/ultimo')\r\n                .then(function (resultado) {\r\n                    vmd.data.usuario_proveido = resultado.datos.nombres+' '+resultado.datos.apellidos;\r\n                });\r\n            }\r\n\r\n        }\r\n\r\n        function aprobar(text) {\r\n            var datos = { usuario: cuenta.id };\r\n            var sw_crear = text=='crear';\r\n            var mensajeLoad = 'Espere...';\r\n            if(vmd.data.es_para) {\r\n\r\n                datos.usuario_derivar = vmd.data._usuario_seleccionado;\r\n                if(text=='aprobar') {\r\n                    text = 'aprobar y cerrar';\r\n                    mensajeLoad = ' Aprobando y cerrando...';\r\n                    datos.derivar = false;\r\n                }\r\n                if(text=='derivar'){\r\n                    text = 'aprobar y derivar';\r\n                    mensajeLoad = 'Aprobando y derivando...'\r\n                    datos.observaciones = vmd.data.observaciones;\r\n                    datos.derivar = true;\r\n                }\r\n                if(sw_crear){\r\n                    text = 'aprobar y luego crear documento';\r\n                    datos.usuario_derivar = datos.usuario;\r\n                    datos.observaciones = '';\r\n                    datos.derivar = true;\r\n                }\r\n            }\r\n            Modal.confirm('¿Esta seguro de que quiere '+text+'?', function () {\r\n                var configLoad = {\r\n                    data: {\r\n                        mensaje: mensajeLoad,\r\n                        tipo: 'info'\r\n                    }\r\n                };\r\n                Loading.show(configLoad);\r\n                Loading.cambiar({tipo:'info'});\r\n                DataService.put( restUrl+'plantillasFormly/documento/'+data.id+\"/aprobar\", datos)\r\n                .then(function (respuesta) {\r\n                    Message.show(respuesta.tipoMensaje, respuesta.mensaje);\r\n                    if (sw_crear) {\r\n                      DataService.get(restUrl + 'plantillasFormly/plantilla_formly/'+vmd.data._plantilla_seleccionada.id_plantilla_formly)\r\n                      .then(function (respuesta) {\r\n                        respuesta.datos.documento_padre = data.id;\r\n                        respuesta.datos.grupo = data.dc.grupo;\r\n                        Storage.setSession(\"pl\", respuesta.datos);\r\n                        $location.path('documento/0');\r\n                        $mdDialog.cancel();\r\n                        Loading.cerrar();\r\n                    });\r\n                    $timeout(function(){ angular.element('#btn-refresh-crudtable').click(); });\r\n                    cerrar();\r\n                    }else{\r\n                        $timeout(function(){ angular.element('#btn-refresh-crudtable').click(); });\r\n                        cerrar();\r\n                        Loading.cerrar();\r\n                    }\r\n                });\r\n            });\r\n        }\r\n\r\n        function observar() {\r\n            var datos = {\r\n                usuario: cuenta.id,\r\n                observaciones: vmd.data.observaciones,\r\n                observado_por: cuenta.first_name+' '+cuenta.last_name\r\n            };\r\n            \r\n            Modal.confirm('¿Esta seguro de que quiere observar?', function(){\r\n              DataService.put( restUrl+'plantillasFormly/documento/'+data.id+\"/rechazar\", datos)\r\n              .then(function (respuesta) {\r\n                Message.show(respuesta.tipoMensaje, respuesta.mensaje);\r\n                $timeout(function(){ angular.element('#btn-refresh-crudtable').click(); });\r\n                cerrar();\r\n              });\r\n            });\r\n        }\r\n\r\n        function derivar(){\r\n            Modal.confirm('¿Esta seguro de que quiere derivar?', function(){\r\n                var datos = {\r\n                    usuario: cuenta.id,\r\n                    destino: vmd.data._usuario_seleccionado,\r\n                    observaciones: vmd.data.observaciones\r\n                };\r\n                DataService.put( restUrl+'plantillasFormly/documento/'+data.id+\"/derivar\", datos)\r\n                .then(function (respuesta) {\r\n                    Message.show(respuesta.tipoMensaje, respuesta.mensaje);\r\n                    $timeout(function(){ angular.element('#btn-refresh-crudtable').click(); });\r\n                    cerrar();\r\n                });\r\n            });\r\n        }\r\n\r\n        function openSelect(ev){\r\n            angular.element(ev.currentTarget).next().children()[0].click();\r\n            vmd.data.show_select = true;\r\n        }\r\n\r\n        function crear(p) {\r\n            DataService.get(restUrl+'plantillasFormly/documento/?documento_padre='+data.id)\r\n            .then(function (respuesta) {\r\n                if(respuesta.datos.total==0){\r\n                  if(angular.isDefined(p) && p){\r\n                    aprobar('crear');\r\n                  }\r\n                  else {\r\n                    Modal.confirm('¿Esta seguro de que quiere crear '+vmd.data._plantilla_seleccionada.nombre+'?', function () {\r\n                      DataService.get(restUrl + 'plantillasFormly/plantilla_formly/'+vmd.data._plantilla_seleccionada.id_plantilla_formly)\r\n                      .then(function (respuesta) {\r\n                          respuesta.datos.documento_padre = data.id;\r\n                          respuesta.datos.grupo = data.dc.grupo;\r\n                          Storage.setSession(\"pl\", respuesta.datos);\r\n                          $location.path('documento/0');\r\n                          $mdDialog.cancel();\r\n                      });\r\n                      cerrar();\r\n                    });\r\n                  }\r\n\r\n                }\r\n\r\n                else{\r\n                    var doc = respuesta.datos.resultado[0];\r\n                    var html = '';\r\n                    html+= 'El documento ya tiene respuesta!!<br>';\r\n                    html+= 'Si quiere crear otra tiene que borrar la actual <br>';\r\n                    html+= 'Nombre: '+doc.nombre+' <br>';\r\n                    html+= 'Tipo de documento: '+doc.nombre_plantilla+' <br>';\r\n                    html+= 'Estado: '+doc.estado+' <br>';\r\n                    html+= 'Fecha de creación: '+Datetime.format(doc._fecha_creacion)+' <br>';\r\n                    Modal.alert(html);\r\n                    $location.path('documentos');\r\n                }\r\n\r\n\r\n            })\r\n\r\n\r\n\r\n        }\r\n\r\n        function verDocumento(id_doc) { Documento.showPdfId(id_doc, false); }\r\n        function cerrar(){ $mdDialog.cancel(); }\r\n    }\r\n\r\n  }\r\n})();\r\n\n(function () {\n  'use strict';\n\n  angular\n  .module('app')\n  .controller('VirtualController', VirtualController);\n\n  /** @ngInject */\n  function VirtualController($location, Message) {\n    var vm = this;\n    vm.usuariosVirtuales = [\n      {\n        id_usuario: 163,\n        nombres: 'correspondencia',\n        cargo: 'Responsable de Correspondencia'\n      },\n      {\n        id_usuario: 164,\n        nombres: 'correspondencia1',\n        cargo: 'Responsable de Correspondencia'\n      },\n      {\n        id_usuario: 165,\n        nombres: 'correspondencia2',\n        cargo: 'Responsable de Correspondencia'\n      },\n    ];\n\n\n    vm.seleccionar = function (item) {\n      console.log('HOLA', item);\n    }\n  }\n\n})();\n(function() {\r\n    'use strict';\r\n\r\n    angular\r\n    .module('app')\r\n    .controller('UsuariosController',UsuariosController);\r\n\r\n\r\n    /** @ngInject */\r\n    function UsuariosController(restUrl, Modal, DataService, Util, Message, Storage, $log) {\r\n        var vm = this;\r\n\r\n        vm.title = 'Usuarios';\r\n        vm.url = restUrl + 'seguridad/usuario/';\r\n        vm.fields = ['id_usuario','usuario','numero_documento','nombres','apellidos','cargo','email','estado','_fecha_creacion','_fecha_modificacion'];\r\n        vm.dialogController = [ 'data', 'Message', '$scope', '$mdConstant', '$mdDialog', 'Modal', 'DataService', 'restUrl', '$timeout', DialogUsuarioController];\r\n        vm.template = 'app/modules/admin/usuarios/dialog.usuario.html'; // TODO: Es necesario crear???.\r\n        var cuenta=Storage.getUser();\r\n        vm.usuario=cuenta.id;\r\n\r\n        vm.permission ={\r\n          create:true,\r\n          update:true,\r\n          delete:false\r\n        };\r\n\r\n        vm.buttonAgregar = {\r\n            tooltip: 'Syncronizar todos los datos con ldap',\r\n            icon: 'cached',\r\n            onclick: Syncronizar\r\n        };\r\n\r\n        function Syncronizar(ev) {\r\n            $log.log(\"Sin servicio\", ev);\r\n        }\r\n\r\n        function DialogUsuarioController(data, Message, $scope,$mdConstant,$mdDialog,Modal,DataService,restUrl,$timeout){\r\n\r\n          var vmd=$scope;\r\n\r\n          vmd.data = data;\r\n\r\n\r\n          // funciones\r\n          vmd.cerrar = cerrar;\r\n          vmd.registrarUsuario = registrarUsuario;\r\n\r\n          var flagEditar=(data.id_usuario)?true:false; // true: editar, false:crear.\r\n          iniciarDialog();\r\n\r\n          // TODO: Abstraer un nivel mas los metodos iniciarDialog y obtener Usuarios.\r\n          function iniciarDialog(){\r\n            var roles=[];\r\n            var rolesEnviar=[];\r\n            DataService.get(restUrl+\"seguridad/rol\")\r\n            .then(function(response){\r\n              roles=response.datos.resultado;\r\n              if(flagEditar){\r\n                var rolesAsignados=data.usuario_rol;\r\n                roles.forEach(function(itemGlobal,indiceGlobal){\r\n                  var rol={\r\n                    id_rol:itemGlobal.id_rol,\r\n                    nombre:itemGlobal.nombre,\r\n                    valor:false\r\n                  }\r\n\r\n                  if(rolesAsignados!=null && rolesAsignados.length>0){\r\n                    rolesAsignados.forEach(function(item,indice){\r\n                      if(itemGlobal.id_rol==item.rol.id_rol) rol.valor=true;\r\n                      if(indice==rolesAsignados.length-1){\r\n                        rolesEnviar.push(rol);\r\n                        if(indiceGlobal==roles.length-1) vmd.data.roles=rolesEnviar;\r\n                      }\r\n                    });\r\n                  }else{\r\n                    vmd.data.roles = roles;\r\n                  }\r\n\r\n                });\r\n              }\r\n              else{\r\n                // Agrega valor, por defecto en false.\r\n                roles.forEach(function(item,indice){\r\n\r\n                  var rol={\r\n                    id_rol:item.id_rol,\r\n                    nombre:item.nombre,\r\n                    valor:false\r\n                  }\r\n                  rolesEnviar.push(rol);\r\n                  if(indice==roles.length-1) vmd.data.roles=rolesEnviar;\r\n                });\r\n\r\n              }\r\n            })\r\n\r\n            DataService.get(restUrl+\"seguridad/unidad?fields=id_unidad,nombre,abreviacion\")\r\n            .then(function (respuesta) {\r\n                vmd.data.unidades = respuesta.datos.resultado;\r\n            })\r\n\r\n          }\r\n\r\n          function cerrar(){\r\n            $mdDialog.cancel();\r\n          }\r\n\r\n          function registrarUsuario(){\r\n\r\n            var roles=[];\r\n            for(var i in vmd.data.roles){\r\n              if(vmd.data.roles[i].valor==true) roles.push(vmd.data.roles[i].id_rol);\r\n            }\r\n            var oficinas=[];\r\n            for(var j in vmd.data.oficinas){\r\n\r\n              if(vmd.data.oficinas[j].valor==true) oficinas.push(vmd.data.oficinas[j].id_oficina);\r\n            }\r\n\r\n            var usuario={\r\n              usuario:vmd.data.usuario,\r\n              fid_unidad:vmd.data.fid_unidad,\r\n              contrasena:\" \",//vmd.data.contrasena, //Se utiliza la contraseña del LDAP\r\n              numero_documento:vmd.data.numero_documento,\r\n              nombres:vmd.data.nombres,\r\n              apellidos:vmd.data.apellidos,\r\n              cargo:vmd.data.cargo,\r\n              email:vmd.data.email,\r\n              estado:vmd.data.estado,\r\n              roles:roles,\r\n              oficinas:oficinas\r\n            }\r\n\r\n            if(flagEditar){\r\n              usuario.id_usuario=vmd.data.id_usuario;\r\n              usuario._usuario_modificacion=cuenta.id;\r\n              usuario._fecha_modificacion=new Date();\r\n            }\r\n            else{\r\n              usuario._usuario_creacion=cuenta.id;\r\n              usuario._fecha_creacion= new Date();\r\n            }\r\n\r\n\r\n\r\n            if(flagEditar){\r\n              DataService.put(restUrl+\"seguridad/usuario/\"+usuario.id_usuario, usuario)\r\n              .then(function(respuesta){\r\n                //console.log(\"Verificando la modificacion\",respuesta);\r\n                Message.success();\r\n                if(respuesta!=undefined ){\r\n                  $mdDialog.hide();\r\n\r\n                  $timeout(function(){\r\n                    angular.element('#btn-refresh-crudtable').click();\r\n                  },500)\r\n                }\r\n\r\n              });\r\n            }\r\n            else{\r\n              DataService.post(restUrl+\"seguridad/usuario\", usuario)\r\n              .then(function(respuesta){\r\n                //console.log(\"Verificando la creacion\",respuesta);\r\n                Message.success();\r\n                if(respuesta!=undefined){\r\n                  $mdDialog.hide();\r\n                  $timeout(function(){\r\n                    angular.element('#btn-refresh-crudtable').click();\r\n                  },500)\r\n                }\r\n\r\n              });\r\n            }\r\n\r\n          }\r\n\r\n        } // Fin DialogUsuarioController.\r\n\r\n\r\n\r\n    }\r\n})();\r\n\n(function() {\r\n\t'use strict';\r\n\r\n\tangular\r\n\t.module('app')\r\n\t.controller('ProfileController', ProfileController);\r\n\r\n\t/** @ngInject */\r\n\tfunction ProfileController(Storage, SideNavFactory, Datetime, DataService, restUrl, Message) {\r\n\t\tvar vm = this;\r\n\r\n\t\tvm.getColor = function () {\r\n\t\t\treturn SideNavFactory.userColor;\r\n\t\t}\r\n\r\n\t\tvm.getName = function () {\r\n\t\t\tvar user = SideNavFactory.getUser();\r\n\t\t\treturn user.first_name + ' ' + user.last_name;\r\n\t\t}\r\n\r\n\t\tvm.getEmail = function () {\r\n\t\t\treturn SideNavFactory.getUser().email;\r\n\t\t}\r\n\r\n\t\tvm.getInitial = function () {\r\n\t\t\tvar firstName = SideNavFactory.getUser().first_name;\r\n\t\t\treturn firstName.length ? firstName[0].toUpperCase() : '?';\r\n\t\t}\r\n\r\n\t\tvm.getData = function (key) {\r\n\r\n\t\t\tvar value = SideNavFactory.getUser()[key];\r\n\t\t\tif (['last_login', 'date_joined'].indexOf(key) != -1) {\r\n\t\t\t\treturn Datetime.datetimeLiteral(new Date(value));\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t\tvm.getEsJefe = function () {\r\n\t\t\treturn SideNavFactory.getUser().es_jefe || false;\r\n\t\t}\r\n\r\n\t\tvm.abrirEditar = function (acc){\r\n\t\t\tif(acc=='editar_notificaciones'){\r\n\t\t\t\tDataService.get(restUrl + \"notificacion/conf_notificacion/?fields=id_conf_notificacion,canal,enviado,celular,observado,aprobado,derivado&fid_usuario=\"+vm.getData('id'))\r\n\t\t\t\t.then(function (respuesta) {\r\n\t\t\t\t\tvm.swEditarCuenta = acc;\r\n\t\t\t\t\tvm.ca = respuesta.datos.resultado[0];\r\n\t\t\t\t\tvm.ca.email = vm.getEmail();\r\n\t\t\t\t})\r\n\r\n\t\t\t}else {\r\n\t\t\t\tDataService.get(restUrl + \"seguridad/usuario/\", vm.getData('id'))\r\n\t\t\t\t.then(function (respuesta) {\r\n\t\t\t\t\tif(respuesta.datos){\r\n\t\t\t\t\t\t// console.log(respuesta);\r\n\t\t\t\t\t\tvm.numero_documento = respuesta.datos.numero_documento;\r\n\t\t\t\t\t\tvm.nombre_usuario = respuesta.datos.usuario;\r\n\t\t\t\t\t\tvm.email = respuesta.datos.email;\r\n\t\t\t\t\t\tvm.nombres = respuesta.datos.nombres;\r\n\t\t\t\t\t\tvm.apellidos = respuesta.datos.apellidos;\r\n\t\t\t\t\t\tif(acc == \"editar_cuenta\"){\r\n\t\t\t\t\t\t\tvm.contrasena = respuesta.datos.contrasena;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvm.swEditarCuenta = acc;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tvm.editarCuenta = function (){\r\n\t\t\tvar usuario_enviar = {\r\n\t\t\t\tid_usuario: vm.getData('id'),\r\n\t\t\t\tnumero_documento: vm.numero_documento,\r\n\t\t\t\tusuario: vm.nombre_usuario,\r\n\t\t\t\temail: vm.email,\r\n\t\t\t\tnombres: vm.nombres,\r\n\t\t\t\tapellido_paterno: vm.apellidos,\r\n\t\t\t\t_usuario_modificacion: vm.getData('id')\r\n\t\t\t}\r\n\t\t\tvar swPut = true;\r\n\t\t\tif (vm.swEditarCuenta == \"editar_cuenta\") {\r\n\t\t\t\tusuario_enviar.contrasena = vm.contrasena;\r\n\t\t\t}else if (vm.swEditarCuenta == \"editar_contrasena\") {\r\n\t\t\t\tif(vm.contrasena_nueva !== vm.contrasena_confirm){\r\n\t\t\t\t\tMessage.error(\"Las contraseña a confirmar no coincide con la contraseña nueva!!\");\r\n\t\t\t\t\tswPut = false;\r\n\t\t\t\t}\r\n\t\t\t\tusuario_enviar.verificarContrasena = vm.contrasena;\r\n\t\t\t\tusuario_enviar.contrasena = vm.contrasena_nueva;\r\n\t\t\t}\r\n\t\t\tif(swPut){\r\n\t\t\t\tDataService.put(restUrl + \"seguridad/usuario/\"+vm.getData('id'), usuario_enviar)\r\n\t\t\t\t.then(function (respuesta) {\r\n\t\t\t\t\tif(respuesta.datos){\r\n\t\t\t\t\t\t// console.log(respuesta);\r\n\t\t\t\t\t\tvm.numero_documento = null;\r\n\t\t\t\t\t\tvm.nombre_usuario = null;\r\n\t\t\t\t\t\tvm.email = null;\r\n\t\t\t\t\t\tvm.nombres = null;\r\n\t\t\t\t\t\tvm.apellidos = null;\r\n\r\n\t\t\t\t\t\tvm.contrasena = null;\r\n\t\t\t\t\t\tvm.contrasena_nueva = null;\r\n\t\t\t\t\t\tvm.contrasena_confirm = null;\r\n\t\t\t\t\t\tvar user_set={\r\n\t\t\t\t\t\t\tid: respuesta.datos.id_usuario,\r\n\t\t\t\t\t\t\tusername: respuesta.datos.usuario,\r\n\t\t\t\t\t\t\tfirst_name: respuesta.datos.nombres,\r\n\t\t\t\t\t\t\tlast_name: respuesta.datos.apellido_paterno+\" \"+respuesta.datos.apellido_materno,\r\n\t\t\t\t\t\t\tcargo: respuesta.datos.cargo,\r\n\t\t\t\t\t\t\tdoc: respuesta.datos.numero_documento,\r\n\t\t\t\t\t\t\temail: respuesta.datos.email,\r\n\t\t\t\t\t\t\tdate_joined: respuesta.datos._fecha_creacion\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// Set user\r\n\t\t\t\t\t\tSideNavFactory.setUser(user_set);\r\n\t\t\t\t\t\tStorage.setUser(user_set);\r\n\t\t\t\t\t\tvm.swEditarCuenta = null;\r\n\t\t\t\t\t\tMessage.show(respuesta.tipoMensaje, respuesta.mensaje);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tvm.editarConfiguracion = function () {\r\n\t\t\tvar conf_enviar = angular.copy(vm.ca)\r\n\t\t\tDataService.put(restUrl + \"notificacion/conf_notificacion/\"+conf_enviar.id_conf_notificacion, conf_enviar)\r\n\t\t\t.then(function (respuesta) {\r\n\t\t\t\tMessage.show(respuesta.tipoMensaje, respuesta.mensaje);\r\n\t\t\t\tvm.swEditarCuenta = null;\r\n\t\t\t})\r\n\t\t}\r\n\r\n\r\n\t\tvm.cancelarEditar = function () {\r\n\t\t\tvm.numero_documento = null;\r\n\t\t\tvm.nombre_usuario = null;\r\n\t\t\tvm.email = null;\r\n\t\t\tvm.nombres = null;\r\n\t\t\tvm.apellidos = null;\r\n\r\n\t\t\tvm.contrasena = null;\r\n\t\t\tvm.contrasena_nueva = null;\r\n\t\t\tvm.contrasena_confirm = null;\r\n\r\n\t\t\tvm.swEditarCuenta=null;\r\n\t\t}\r\n\r\n\t}\r\n})();\r\n\n(function() {\r\n    'use strict';\r\n\r\n    angular\r\n    .module('app')\r\n    .controller('LoginController', LoginController);\r\n\r\n    /** @ngInject */\r\n    function LoginController($auth, $location, Message, SideNavFactory, Storage, $timeout, Util, BreadcrumbFactory, $window, Datetime, $mdDialog, Modal, ExpirationTime, backUrl, DataService) {\r\n\r\n        var vm = this;\r\n        vm.login = login;\r\n        vm.iniciarSesion= iniciarSesion;\r\n        vm.irAVerificar= irAVerificar;\r\n        vm.backUrl = backUrl;\r\n        Storage.destroySession();\r\n        activate();\r\n            \r\n        function activate() {\r\n            angular.element('body').addClass('no-login');\r\n            angular.element('body').removeClass('principal');\r\n            //TODO: Mostrar para ver errores cuando se bloquea ciudania digital\r\n            if ($window.localStorage.getItem('error') != null && $window.localStorage.getItem('error') != undefined) {\r\n                Message.error($window.localStorage.getItem('error'));\r\n                $window.localStorage.removeItem('error');\r\n            }\r\n        }\r\n\r\n        function login () {\r\n            $auth.login({\r\n                username: vm.username,\r\n                password: vm.password\r\n            })\r\n            .then(function(response) {\r\n                console.log('Revisando la respuesta', response);\r\n\r\n                var user = response.data.datos.user;\r\n                var menu = response.data.datos.menu;\r\n                var roles = response.data.datos.roles;\r\n\r\n                angular.element('body').removeClass('no-login');\r\n                angular.element('body').addClass('principal');\r\n\r\n                var path = Storage.getSession('path');\r\n                user.es_jefe=false;\r\n                if(path==null){\r\n                    var max = 10;\r\n                    roles.forEach(function (it) {\r\n                        if(it.rol.peso<max && it.rol.peso!==0){ max = it.rol.peso; }\r\n                        if(it.rol.nombre=='JEFE') user.es_jefe=true;\r\n                    })\r\n                    path = ['documentos','aprobacion','aprobacion', 'impresion', 'documentos', 'documentos'][max];\r\n                }\r\n\r\n                // Set user\r\n                SideNavFactory.setUser(user);\r\n                Storage.setUser(user);\r\n\r\n\r\n                // Set Menu\r\n                SideNavFactory.setMenu(menu);\r\n                Storage.setSession('menu', SideNavFactory.getMenu());\r\n\r\n\r\n                if (path) {\r\n                    var route = path.replace('/', '');\r\n\r\n                    // Set breadcrumb\r\n                    var page = Util.getMenuOption(Storage.getSession('menu'), route);\r\n                    BreadcrumbFactory.setParent(page[0]);\r\n                    BreadcrumbFactory.setCurrent(page[1]);\r\n\r\n                    // Select menu option\r\n                    $timeout(function () {\r\n                        var $sidenav = angular.element('#sidenav')\r\n                        $sidenav.find('.md-button-href').removeClass('active');\r\n                        $sidenav.find('.sidenav-sublist').hide();\r\n                        $sidenav.find(\".md-button-href[data-url='\" + route + \"']\")\r\n                                .addClass('active').parent().parent().prev().click();\r\n                    });\r\n\r\n                }\r\n                ExpirationTime.init();\r\n\r\n                angular.element('#toast-container-main').find('md-toast').fadeOut();\r\n\r\n                // Redirect to dashboard\r\n                $location.path(path && path.indexOf('login') == -1? path : '/');\r\n\r\n            })\r\n            .catch(function(error) {\r\n                if (error.status == 400 || error.status == 401) {\r\n                    Message.error('Nombre de usuario y/o contraseña no válidos.');\r\n                }\r\n                if(error.status == 412){\r\n                    Message.show(error.data.tipoMensaje,error.data.mensaje);\r\n                }\r\n\r\n                if (error.status == -1) {\r\n                    Message.error('Servidor no Disponible.');\r\n                }\r\n            });\r\n        }\r\n\r\n\r\n        vm.abrirDialog= function(pEvento){\r\n\r\n          var config={\r\n            event: pEvento,\r\n            title: 'Recuperar contraseña',\r\n            templateUrl: 'app/modules/admin/login/recuperar.dialog.html',\r\n            controller: ['$scope','$mdDialog','DataService','Message','restUrl', DialogRecuperarController]\r\n          };\r\n          Modal.show(config);\r\n        }\r\n\r\n        /**\r\n         Funcion Controlador para el dialogo de recuperacion de contraseña.\r\n         */\r\n        function DialogRecuperarController($scope,$mdDialog, DataService, Message, restUrl){\r\n          var vmd=$scope;\r\n          vmd.usuario=null;\r\n          vmd.email=null;\r\n          vmd.numero_documento=null;\r\n\r\n          // Funcion que recupera los datos y los envia al servicio rest.\r\n          vmd.recuperar=function(){\r\n\r\n            var datosEnviar={\r\n              usuario:vmd.usuario,\r\n              email:vmd.email,\r\n              numero_documento:vmd.numero_documento\r\n            }\r\n\r\n            DataService.put(restUrl+\"seguridad/recuperar/\", datosEnviar)\r\n            .then(function(pRespuesta){\r\n              Message.show(pRespuesta.tipoMensaje,pRespuesta.mensaje);\r\n              vmd.cerrar();\r\n            })\r\n\r\n          }\r\n          vmd.cerrar= function(){\r\n            $mdDialog.cancel();\r\n          }\r\n        }\r\n\r\n      function iniciarSesion() {\r\n          var ruta =  vm.backUrl + 'codigo';\r\n          DataService.get(ruta)\r\n          .then(function(response) {\r\n            if (response) {\r\n              $window.localStorage.setItem('oauth2_state', response.datos.codigo);\r\n              $window.location.href = response.datos.url;\r\n            }\r\n\r\n        })\r\n        .catch(function (err) {\r\n          Message.error(err);\r\n        });\r\n      }\r\n\r\n      function irAVerificar() {\r\n          $location.path('verificar');\r\n      }\r\n    }\r\n\r\n})();\r\n\n(function() {\n  'use strict';\n\n  angular\n    .module('app')\n    .controller('fcVacioController', CiteController);\n\n  /** @ngInject */\n  function CiteController($scope) {\n        var vm = this;\n        var sc = $scope;\n        sc.vm = vm;\n        sc.$watch('to.height', function (newValue) {\n            if( newValue<0 ) sc.to.style.height = '0cm';\n            else if( newValue>30 ) sc.to.style.height = '30cm';\n            else if(sc.to.style) sc.to.style.height = sc.to.height+'cm';\n        });\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n  .module('app')\n  .controller('fcListaContactosController', listaContactos);\n\n  /** @ngInject */\n  function listaContactos($scope, DataService, restUrl, ArrayUtil) {\n    var vm = this;\n    var sc = $scope;\n    var tempContactos;\n    \n    sc.vm = vm;\n    vm.buscarContacto = \"\";\n    vm.mostrarContacto = false;\n    vm.contactos = [];\n\n    vm.abrirSelector = abrirSelector;\n    vm.cerrarSelector = cerrarSelector;\n    if (angular.isUndefined(sc.model[sc.options.key])) sc.model[sc.options.key]={};\n    if (angular.isUndefined(sc.model[sc.options.key].lista)) sc.model[sc.options.key].lista=[];\n\n    sc.$watch('vm.buscarContacto', function () {\n      var contador;\n      var vector = [];\n      vm.contactos = [];\n      tempContactos = sc.model[sc.options.key].lista || [];\n      \n      for (contador = 0; contador < tempContactos.length; contador++) {\n        vm.contactos.push(tempContactos[contador]);\n      }\n\n      if(vm.buscarContacto != \"\") {\n        DataService.get(restUrl + 'plantillasFormly/contactos?filter='+vm.buscarContacto)\n        .then(function (respuesta) {\n          vm.contactos = [];\n          vector = respuesta.datos.resultado;\n          for (contador = 0; contador < tempContactos; contador ++) vm.contactos.push(tempContactos[contador]);\n          for (contador = 0; contador < vector.length; contador++) {\n            if(!ArrayUtil.buscarObj(tempContactos, 'id_contacto', vector[contador].id_contacto)) {\n              vm.contactos.push(vector[contador]);\n            }\n          }\n        })\n      }\n    });\n    \n    function abrirSelector(evento, mostrar) {\n      angular.element(evento.currentTarget).parent().next().children()[1].click();\n      switch (mostrar) {\n        case 'contacto': vm.mostrarContacto = true; break;\n      }\n    }\n\n    function cerrarSelector() {\n      vm.buscarContacto = '';\n      vm.mostrarContacto = false;\n    }\n\n  }\n})();\n(function() {\n  'use strict';\n\n  angular\n    .module('app')\n    .controller('fcEncabezadoController', EncabezadoController);\n\n  /** @ngInject */\n  function EncabezadoController($scope, DataService, restUrl, $timeout, Storage, Datetime, ArrayUtil) {\n    var vm = this;\n    var sc = $scope;\n    sc.vm = vm;\n    var cuenta = Storage.getUser();\n\n    vm.buscar_para = \"\";\n    vm.buscar_via = \"\";\n    vm.buscar_de = \"\";\n    vm.show_para = false;\n    vm.show_via = false;\n    vm.show_de = false;\n\n    //cargamos funciones\n    vm.openSelect = openSelect;\n    vm.moverUsuario = moverUsuario;\n\n    $timeout(iniciarController);\n\n    function iniciarController() {\n        var xu, u, i, arr, xde, xpara, xvia, fd;\n        var form_nuevo = angular.isUndefined(sc.model[sc.options.key]);\n\n        xu = {\n            id_usuario: cuenta.id,\n            nombres: cuenta.first_name,\n            apellidos: cuenta.last_name,\n            cargo: cuenta.cargo\n        };\n\n        // cambiamos evento de los inputs\n        angular.element('input.header-searchbox').on('keydown', function(ev) {\n            ev.stopPropagation();\n        });\n\n        if(form_nuevo){\n            sc.model[sc.options.key] = {};\n            sc.model[sc.options.key][\"de\"] = [xu];\n        }else {\n            // delete sc.model[sc.options.key][\"para\"].$$mdSelectId;\n            xpara = sc.model[sc.options.key][\"para\"] || {id_usuario:-1};\n            xde = sc.model[sc.options.key][\"de\"] || {id_usuario:-1};\n            xvia = sc.model[sc.options.key][\"via\"] || {id_usuario:-1};\n            vm.usuarios_check = {};\n            fd = Storage.getSession('flujo_doc');\n\n            if(fd!=null){\n                if(angular.isDefined(fd.via)){\n                    for (i = 0; i < fd.via.length; i++) {\n                        if(fd.via[i]!==fd.via_actual)\n                        vm.usuarios_check[fd.via[i]] = true;\n                    }\n                }\n                if(sc.model['cite-0'] && sc.model['cite-0']['cite'])\n                    vm.usuarios_check[fd.para[0]] = true;\n            }\n        }\n\n        DataService.get(restUrl + 'seguridad/usuario_rol/')\n        .then(function (resultado) {\n            vm.usuarios = [];\n            vm.usuarios_jefes = [];\n            arr = resultado.datos;\n            // console.log(arr);\n            if(form_nuevo){\n                for (i = 0; i < arr.length; i++) {\n                    u = newUser(arr[i]);\n                    vm.usuarios.push( (xu.id_usuario==u.id_usuario)? xu : u );\n                    vm.usuarios_jefes.push(u);\n                }\n            }else {\n                for (i = 0; i < arr.length; i++) {\n                    u = newUser(arr[i]);\n                    if(xpara && ArrayUtil.buscarObj(xpara, 'id_usuario', u.id_usuario)){\n                        vm.usuarios_jefes.push(ArrayUtil.buscarObj(xpara, 'id_usuario', u.id_usuario, true));\n                        vm.usuarios.push(u);\n                    }else if(xvia && ArrayUtil.buscarObj(xvia, 'id_usuario', u.id_usuario)) {\n                        vm.usuarios_jefes.push(ArrayUtil.buscarObj(xvia, 'id_usuario', u.id_usuario, true));\n                        vm.usuarios.push(u);\n                    }else if(ArrayUtil.buscarObj(xde, 'id_usuario', u.id_usuario)) {\n                        vm.usuarios.push(ArrayUtil.buscarObj(xde, 'id_usuario', u.id_usuario, true));\n                    }else {\n                        vm.usuarios_jefes.push(u);\n                        vm.usuarios.push(u);\n                    }\n                }\n            }\n        });\n    }\n\n    function newUser(el) {\n        return {\n            id_usuario: el.id_usuario,\n            nombres: el.nombres,\n            apellidos: el.apellidos,\n            cargo: el.cargo\n        };\n    }\n\n    function moverUsuario(index, dir, nom) {\n        var arr = sc.model[sc.options.key][ nom||'via' ];\n        if(dir==\"down\") ArrayUtil.mover(arr, index, index+1);\n        else if(dir==\"up\") ArrayUtil.mover(arr, index, index-1);\n    }\n\n\n    function openSelect(ev, show) {\n        // console.log($(ev.currentTarget).next().children()[1]);\n        angular.element(ev.currentTarget).parent().next().children()[1].click();\n        switch (show) {\n            case 'para': vm.show_para = true; break;\n            case 'via': vm.show_via = true; break;\n            case 'de': vm.show_de = true; break;\n        }\n    }\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('app')\n    .controller('fcDocumentosRelacionadosController', documentosRelacionados);\n\n  /** @ngInject */\n  function documentosRelacionados($scope, DataService, restUrl, ArrayUtil, Documento) {\n    var vm = this,\n        sc = $scope,\n        xdocs;\n    sc.vm = vm;\n    vm.buscar_doc = \"\";\n    vm.show_doc = false;\n    vm.documentos = [];\n\n    //cargamos funciones\n    vm.openSelect = openSelect;\n    vm.mostrarPdf = mostrarPdf;\n    vm.closeSelectDoc = closeSelectDoc;\n\n    sc.$watch('vm.buscar_doc', function () {\n        var i, arr;\n        vm.documentos = [];\n        xdocs = sc.model[sc.options.key] || [];\n        for (i = 0; i < xdocs.length; i++) vm.documentos.push(xdocs[i]);\n\n        if (vm.buscar_doc!=\"\") {\n            // DataService.get( restUrl+'plantillasFormly/documento?fields=id_documento,nombre,fecha' )\n            DataService.get( restUrl+'plantillasFormly/documento?fields=id_documento,nombre,fecha&estado=APROBADO,CERRADO,DERIVADO&page=1&order=-fecha&limit=20&searchPro=1&tipoBus=campo&campoSel=nombre&filter='+vm.buscar_doc)\n            .then(function (respuesta) {\n                vm.documentos = [];\n                arr = respuesta.datos.resultado;\n                for (i = 0; i < xdocs.length; i++) vm.documentos.push(xdocs[i]);\n                for (i = 0; i < arr.length; i++) {\n                    if(!ArrayUtil.buscarObj(xdocs, 'id_documento', arr[i].id_documento))\n                        vm.documentos.push( arr[i] );\n                }\n            })\n        }\n    })\n\n    function openSelect(ev, show) {\n        angular.element(ev.currentTarget).parent().next().children()[1].click();\n        switch (show) {\n            case 'doc': vm.show_doc = true; break;\n        }\n    }\n\n    function closeSelectDoc() {\n        vm.buscar_doc='';\n        vm.show_doc=false;\n    }\n\n    function mostrarPdf(pIdentificador){\n        Documento.showPdfId(pIdentificador);\n    }\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n  .module('app')\n  .controller('fcDocumentosAnularController', documentosAnular);\n\n  /** @ngInject */\n  function documentosAnular($scope, DataService, restUrl, ArrayUtil, Documento) {\n    var vm = this,\n    sc = $scope,\n    xdocs;\n    sc.vm = vm;\n    vm.buscar_doc = \"\";\n    vm.show_doc = false;\n    vm.documentos = [];\n\n    //cargamos funciones\n    vm.openSelect = openSelect;\n    vm.mostrarPdf = mostrarPdf;\n    vm.closeSelectDoc = closeSelectDoc;\n\n    sc.$watch('vm.buscar_doc', function () {\n      var i, arr;\n      vm.documentos = [];\n      xdocs = sc.model[sc.options.key] || [];\n      for (i = 0; i < xdocs.length; i++) vm.documentos.push(xdocs[i]);\n\n      if (vm.buscar_doc!=\"\") {\n        // TODO: No es necesario evitar el listado de documentos anulados?\n        DataService.get( restUrl+'plantillasFormly/documento?fields=id_documento,nombre,fecha&estado=APROBADO,CERRADO,DERIVADO&page=1&order=-fecha&limit=20&searchPro=1&tipoBus=campo&campoSel=nombre&filter='+vm.buscar_doc)\n        .then(function (respuesta) {\n          vm.documentos = [];\n          arr = respuesta.datos.resultado;\n          for (i = 0; i < xdocs.length; i++) vm.documentos.push(xdocs[i]);\n          for (i = 0; i < arr.length; i++) {\n            if(!ArrayUtil.buscarObj(xdocs, 'id_documento', arr[i].id_documento))\n            vm.documentos.push( arr[i] );\n          }\n        });\n      }\n    });\n\n    function openSelect(ev, show) {\n      angular.element(ev.currentTarget).parent().next().children()[1].click();\n      switch (show) {\n        case 'doc': vm.show_doc = true; break;\n      }\n    }\n\n    function closeSelectDoc() {\n      vm.buscar_doc='';\n      vm.show_doc=false;\n    }\n\n    function mostrarPdf(pIdentificador){\n      Documento.showPdfId(pIdentificador);\n    }\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('app')\n    .controller('fcDatosGeneralesController', DatosGeneralesController);\n\n  /** @ngInject */\n  function DatosGeneralesController($scope, DataService, restUrl, $timeout, Storage, Datetime, ArrayUtil) {\n    var vm = this;\n    var sc = $scope;\n    sc.vm = vm;\n    var cuenta = Storage.getUser();\n\n    vm.buscar_para = \"\";\n    vm.buscar_via = \"\";\n    vm.buscar_de = \"\";\n    vm.show_para = false;\n    vm.show_via = false;\n    vm.show_de = false;\n\n    //cargamos funciones\n    vm.openSelect = openSelect;\n    vm.moverUsuario = moverUsuario;\n\n    $timeout(iniciarController);\n\n    function iniciarController() {\n        var xu, u, i, j, arr, xde, xpara, xvia, rol, fd, push_gral, push_jefe;\n        var form_nuevo = angular.isUndefined(sc.model[sc.options.key]);\n\n        xu = {\n            id_usuario: cuenta.id,\n            nombres: cuenta.first_name,\n            apellidos: cuenta.last_name,\n            cargo: cuenta.cargo\n        };\n\n        // cambiamos evento de los inputs\n        angular.element('input.header-searchbox').on('keydown', function(ev) {\n            ev.stopPropagation();\n        });\n\n        if(form_nuevo){\n            sc.model[sc.options.key] = {};\n            sc.model[sc.options.key][\"de\"] = [xu];\n        }else {\n            // delete sc.model[sc.options.key][\"para\"].$$mdSelectId;\n            xpara = sc.model[sc.options.key][\"para\"] || {id_usuario:-1};\n            xde = sc.model[sc.options.key][\"de\"] || {id_usuario:-1};\n            xvia = sc.model[sc.options.key][\"via\"] || {id_usuario:-1};\n            vm.usuarios_check = {};\n            fd = Storage.getSession('flujo_doc');\n\n            if(angular.isDefined(fd) && fd!=null){\n                if(fd.via!=null){\n                    for (i = 0; i < fd.via.length; i++) {\n                        if(fd.via[i]!==fd.via_actual)\n                        vm.usuarios_check[fd.via[i]] = true;\n                    }\n                }\n                if(sc.model['cite-0'] && sc.model['cite-0']['cite'])\n                    vm.usuarios_check[fd.para[0]] = true;\n            }\n        }\n\n        DataService.get(restUrl + 'seguridad/usuario_rol/')\n        .then(function (resultado) {\n            vm.usuarios = [];\n            vm.usuarios_jefes = [];\n            arr = resultado.datos;\n            // console.log(arr);\n            if(form_nuevo){\n                for (i = 0; i < arr.length; i++) {\n                    u = newUser(arr[i]);\n                    push_jefe = false;\n                    for (j = 0; j < arr[i].usuario_rol.length; j++) {\n                        rol = arr[i].usuario_rol[j].rol.nombre;\n                        if(rol===\"JEFE\" ||rol ==\"CORRESPONDENCIA\")\n                            push_jefe=true;\n                    }\n                    vm.usuarios.push( (xu.id_usuario==u.id_usuario)? xu : u );\n                    if(push_jefe && xu.id_usuario!=u.id_usuario) vm.usuarios_jefes.push(u);\n                }\n            }else {\n                for (i = 0; i < arr.length; i++) {\n                    push_gral = false;\n                    push_jefe = false;\n                    u = newUser(arr[i]);\n                    if( u.id_usuario==xpara.id_usuario ){\n                        vm.usuarios_jefes.push(xpara);\n                        if(!push_gral) vm.usuarios.push(u);\n                        push_gral = true;\n                        push_jefe = true;\n                    }\n                    if(xvia && ArrayUtil.buscarObj(xvia, 'id_usuario', u.id_usuario)) {\n                        vm.usuarios_jefes.push(ArrayUtil.buscarObj(xvia, 'id_usuario', u.id_usuario, true));\n                        if(!push_gral) vm.usuarios.push(u);\n                        push_gral = true;\n                        push_jefe = true;\n                    }\n                    if(ArrayUtil.buscarObj(xde, 'id_usuario', u.id_usuario)) {\n                        vm.usuarios.push(ArrayUtil.buscarObj(xde, 'id_usuario', u.id_usuario, true));\n                        push_gral = true;\n                    }\n\n                    {\n                        if(!push_gral) vm.usuarios.push(u);\n\n                        push_gral = false; // usamos para ver si en sus roles es jefe o CORRESPONDENCIA\n                        if(!push_jefe)\n                            for (j = 0; j < arr[i].usuario_rol.length; j++) {\n                                rol = arr[i].usuario_rol[j].rol.nombre;\n                                if(rol===\"JEFE\" ||rol ==\"CORRESPONDENCIA\")\n                                    push_gral = true;\n                            }\n\n                        if(push_gral && xu.id_usuario!=u.id_usuario &&  !push_jefe) vm.usuarios_jefes.push(u);\n                    }\n                }\n            }\n        });\n    }\n\n    function newUser(el) {\n        return {\n            id_usuario: el.id_usuario,\n            nombres: el.nombres,\n            apellidos: el.apellidos,\n            cargo: el.cargo\n        };\n    }\n\n    function moverUsuario(index, dir) {\n        var arr = sc.model[sc.options.key][\"via\"];\n        if(dir==\"down\") ArrayUtil.mover(arr, index, index+1);\n        else if(dir==\"up\") ArrayUtil.mover(arr, index, index-1);\n    }\n\n\n    function openSelect(ev, show) {\n        // console.log($(ev.currentTarget).next().children()[1]);\n        angular.element(ev.currentTarget).parent().next().children()[1].click();\n        switch (show) {\n            case 'para': vm.show_para = true; break;\n            case 'via': vm.show_via = true; break;\n            case 'de': vm.show_de = true; break;\n        }\n    }\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('app')\n    .controller('fcCiteController', CiteController);\n\n  /** @ngInject */\n  function CiteController($scope, Datetime) {\n    var vm = this;\n    var sc = $scope;\n    sc.vm = vm;\n\n    if(sc.model[sc.options.key] && sc.model[sc.options.key]['fecha'])\n        sc.model[sc.options.key][\"fecha\"] = Datetime.format(sc.model[sc.options.key][\"fecha\"], 'dd de MMM de YYYY');\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('app')\n    .controller('fcConCopiaArchivoController', ConCopiaArchivoController);\n\n  /** @ngInject */\n  function ConCopiaArchivoController($scope, $timeout, Storage) {\n    var vm = this;\n    var sc = $scope;\n    sc.vm = vm;\n    var cuenta = Storage.getUser();\n\n    $timeout(iniciarController);\n\n    function iniciarController() {\n        if(angular.isUndefined(sc.model[sc.options.key])){\n            sc.model[sc.options.key] = generarAbreviacion(cuenta.first_name + \" \" + cuenta.last_name);\n            sc.model[sc.options.key] += '\\nCc.:archivo';    \n        }\n    }\n        \n    function generarAbreviacion(cadena) {        \n        cadena = cadena.replace(/[^a-zA-Z ]/g, \"\");\n        var str = cadena.toUpperCase();\n        var res = str.split(\" \");\n        var abreviacion = \"\";\n        for (var i = 0; i < res.length; i++) {            \n            abreviacion = abreviacion + res[i][0];            \n        }\n        return abreviacion;\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('app')\n    .controller('fcCajaChicaController', CajaChicaController);\n\n  /** @ngInject */\n  function CajaChicaController($scope, $timeout, DataService, restUrl) {\n    var vm = this;\n    var sc = $scope;\n    var model, to;\n    sc.vm = vm;\n\n    vm.buscar = {};\n    vm.alert = {};\n\n    vm.addRow = addRow;\n    vm.deleteRow = deleteRow;\n    vm.buscarDocumentos = buscarDocumentos;\n    vm.buscarPartidas = buscarPartidas;\n    vm.cargarPartidas = cargarPartidas;\n    vm.obtenerSaldo = obtenerSaldo;\n    vm.calcularTotal = calcularTotal;\n\n    $timeout(iniciarController);\n\n    function iniciarController() {\n        to = sc.options.templateOptions;\n        vm.documentos = [];\n        if (angular.isUndefined(sc.model[sc.options.key])) {\n            sc.model[sc.options.key] = { rows: [], monto_total:0 };\n            sc.model[sc.options.key].tipo = to.tipo=='GESTION'? 'MODIFICADO': to.tipo;\n        }else {\n          calcularTotal();\n        }\n        model = sc.model[sc.options.key];\n    }\n\n    function buscarPartidas(texto) {\n      var url = restUrl+'presupuesto/partidas/';\n      if (texto) { url += '?filter='+texto; }\n      return DataService.get(url)\n      .then(function (respuesta) {\n        return respuesta.datos || [];\n      })\n    }\n\n    function calcularTotal(row) {\n      if (row) row.monto = isFloat(row.monto)? parseFloat(row.monto).toFixed(2) : '0.00';\n\n      sc.model[sc.options.key].monto_total = 0;\n      sc.model[sc.options.key].rows.forEach(function (it) {\n        if (isFloat(it.monto)) sc.model[sc.options.key].monto_total+=toFloat(it.monto);\n      })\n      sc.model[sc.options.key].monto_total = parseFloat(sc.model[sc.options.key].monto_total).toFixed(2);\n    }\n    function toFloat(string) { return parseFloat(parseFloat(string).toFixed(2)); }\n    function isFloat(string) { return /(?:\\d*\\.)?\\d+/.test(string); }\n\n    function obtenerSaldo(multiple) {\n        var url = restUrl+'presupuesto/partidas/?saldo='+multiple;\n        DataService.get(url)\n        .then(function (respuesta) {\n          if (respuesta) {\n            if (respuesta.tipoMensaje=='EXITO')\n              showALert('info', ' El saldo actual del comprometido es '+respuesta.datos.monto);\n            if (respuesta.tipoMensaje=='ADVERTENCIA')\n              showALert('warning', ' '+respuesta.mensaje);\n          }\n        })\n    }\n\n    function cargarPartidas(cite) {\n      if (cite) {\n        var url = restUrl+'presupuesto/partidas/?cite='+cite;\n        DataService.get(url)\n        .then(function (respuesta) {\n          if (respuesta){\n            if (respuesta.tipoMensaje=='EXITO'){\n              if (model.rows) {\n                vm.ids_comprometidos = {};\n                model.rows.forEach(function (it) { vm.ids_comprometidos[it.id_comprometido] = !it.pago_multiple; })\n\n                for (var k in respuesta.datos) {\n                  if (respuesta.datos.hasOwnProperty(k) && !vm.ids_comprometidos[k]) {\n                      model.rows.push({\n                        cite: angular.copy(vm.buscar.doc_seleccionado),\n                        partida: angular.copy(respuesta.datos[k].partida),\n                        descripcion: angular.copy(respuesta.datos[k].descripcion),\n                        id_comprometido: angular.copy(respuesta.datos[k].id),\n                        comprometido: angular.copy(respuesta.datos[k].monto),\n                        pago_multiple: angular.copy(respuesta.datos[k].pago_multiple),\n                        monto: '0.00'\n                      })\n                      vm.ids_comprometidos[k] = !respuesta.datos[k].pago_multiple;\n                  }\n                }\n                if (Object.keys(respuesta.datos)==0) showALert('warning', 'El documento ya no tiene partidas disponibles.')\n              }\n            } else if (respuesta.tipoMensaje=='ADVERTENCIA') showALert('warning', respuesta.mensaje);\n          }\n          vm.buscar.doc_seleccionado = null;\n        })\n      }\n    }\n\n    function buscarDocumentos(texto) {\n      var url = restUrl+'plantillasFormly/documento?fields=id_documento,nombre,fecha&estado=APROBADO,CERRADO,DERIVADO&page=1&order=-fecha&limit=20';\n      if (texto) {\n        url += '&searchPro=1&tipoBus=campo&campoSel=nombre&filter='+texto;\n      }\n      return DataService.get(url)\n      .then(function (respuesta) {\n        if (respuesta){\n          vm.documentos = respuesta.datos.resultado;\n        }\n        return respuesta.datos.resultado || [];\n      })\n    }\n\n    function addRow(tipo, button) {\n      if (tipo=='MODIFICADO'||tipo=='COMPROMETIDO') {\n        if (button) {\n          if (vm.buscar.par_seleccionado)\n            model.rows.push({ partida: angular.copy(vm.buscar.par_seleccionado), monto:'0.00' });\n          else showALert('warning', 'Seleccione una partida para adicionar');\n        }\n        else if (vm.buscar.par_seleccionado) model.rows.push({ partida: angular.copy(vm.buscar.par_seleccionado), monto:'0.00' });\n      }\n      else if ( tipo=='INICIAL' )\n        model.rows.push({monto:'0.00'});\n      calcularTotal();\n    }\n    function deleteRow(i) { model.rows.splice(i, 1); calcularTotal(); }\n    function showALert(tipo, mensaje, time) {\n      var icons = {\n        'info': 'info',\n        'warning': 'warning'\n      }\n      vm.alert.show = true;\n      vm.alert.tipo = tipo;\n      vm.alert.mensaje = mensaje;\n      vm.alert.icono = icons[tipo];\n      vm.alert.time = time || 0;\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('app')\n    .controller('fcArchivoController', archivos);\n\n  /** @ngInject */\n  function archivos($scope, $timeout, Documento) {\n    var vm = this;\n    var sc = $scope;\n    sc.vm = vm;\n\n    //funciones\n    vm.elegirPdf = elegirPdf;\n    vm.limpiarPdf = limpiarPdf;\n    vm.showPdf = showPdf;\n    vm.redondear = redondear;\n    vm.onLoadModel = onLoadModel;\n\n    $timeout(iniciarController);\n\n    function iniciarController() {\n        vm.form_nuevo = angular.isUndefined(sc.model[sc.options.key]);\n        if(!vm.form_nuevo){\n            if(!sc.to.multiple){\n                sc.model[sc.options.key] = sc.model[sc.options.key][0];\n            }\n        }\n    }\n\n    function showPdf(nombre) { Documento.showPdfx(nombre); }\n    \n\n    function elegirPdf(ev) {\n        angular.element(ev.currentTarget).next().click();\n    }\n\n    function onLoadModel(ev, afiles) {\n        afiles.forEach(function (f, i, arr) {\n            if(f.filetype!=\"application/pdf\"){\n                arr.splice(i, 1);\n                if(sc.to.multiple){\n                    sc.model[sc.options.key].splice(i,1);\n                }else {\n                    delete sc.model[sc.options.key];\n                }\n            }\n        })\n    }\n\n    function limpiarPdf(index) {\n        if(!sc.to.multiple){\n            delete sc.model[sc.options.key]\n        }else {\n            if (index) {\n                sc.model[sc.options.key].splice(index, 1);\n            }else {\n                sc.model[sc.options.key].splice(0, 1);\n            }\n        }\n    }\n\n    function redondear(x, a) {\n        return Math.round(x*Math.pow(10,a))/Math.pow(10,a);\n    }\n\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n  .module('app')\n  .service('FirmaticService', ['$log', '$q',  FirmaticService]);\n\n  /** @ngInject */\n  function FirmaticService($log, $q) {\n    var urlFirmatic = 'https://localhost:4637';\n    var service = {\n      firmarPdf: firmarPdf,\n      verificarEstado: verificarEstado\n    };\n    return service;\n\n    function firmarPdf(documentos, ci) {\n      // $log.log('Iniciando el proceso de firma', documentos);\n      var datos = {\n        archivo: documentos,\n        format: 'pades'\n      };\n      if(!angular.isUndefined(ci)) datos.ci = ci;\n      var cabeceras = {\n        headers: {\n          'Content-Type': 'application/json'\n          // 'Content-Type': 'application/x-www-form-urlencoded'\n        }\n      };\n      var urlFirma = urlFirmatic + '/sign';\n      return $q(function (resolve, reject) {\n        axios.post(urlFirma, datos, cabeceras)\n        .then(function (respFirma) {\n          // $log.log('Revisando la respuesta de la firma', respFirma);\n          return resolve(respFirma);\n        })\n        .catch(function (errorFirma) {\n          // $log.log('#error en la firma', errorFirma.response);\n          return reject({\n            finalizado: false,\n            message: (errorFirma.response.data.message || errorFirma.response.data) + ' (Error en el firmador.)'\n          });\n        });\n      });\n    }\n\n    function verificarEstado() {\n      var respuesta = {\n        activo: false,\n        mensaje: ''\n      }\n      return $q(function (resolve) {\n        axios.get(urlFirmatic)\n        .then(function (respEstado) {\n          // $log.log('Revisando la respuesta del estado', respEstado);\n          if(respEstado.status === 200) {\n            respuesta.activo = true;\n          }\n          else {\n            $log.log('Error no definido');\n          }\n          return resolve(respuesta);\n        })\n        .catch(function (errorEstado) {\n          respuesta.activo = false;\n          if(errorEstado.message.indexOf('Network Error' > -1)) {\n            respuesta.mensaje = 'El servicio del firmador no se encuentra iniciado.'\n          }\n\n          return resolve(respuesta);\n        });\n      });\n    }\n  }\n  \n})();\n(function() {\n    'use strict';\n    \n    angular\n    .module('app')\n    .service('DemofiService', ['$log', '$q', '$http', '$compile', 'Modal', '$window', 'Message', DemofiService]);\n\n    /** @ngInject */\n    function DemofiService($log, $q, $http, $compile, Modal, $window, Message) {\n\n        var url_demofi = 'https://localhost:3200';\n\n        var service = {\n            openModal: openModal,\n            verificarServidor: verificarServidor,\n            listTokens: listTokens,\n            login: login,\n            listCertificates: listCertificates,\n            sign: sign,\n            logout: logout\n        };\n\n        return service;\n\n        function openModal(solicitudes, config) {\n            //import templateModal from './demofi.modal.html';\n            //import controllerModal from './demofi.modal.controller';\n            return Modal.show({\n                template: './demofi.modal.html', //templateModal,\n                controller: './demofi.modal.controller', //controllerModal,\n                data: { solicitudes: solicitudes, config: config },\n                size: 'lg'\n            });\n        }\n\n        function verificarServidor() {\n            var w = 800;\n            var h = 400;\n            var y = $window.outerHeight / 2 + $window.screenY - (h / 2);\n            var x = $window.outerWidth / 2 + $window.screenX - (w / 2);\n            $window.open(url_demofi,'_blank', 'toolbar=no,status=no,menubar=no,scrollbars=yes,left='+x+', top='+y+', width='+w+', height='+h+', visible=none', '');\n        }\n\n        function listTokens() {\n            var req = url_demofi+'/tokens';\n            return callRequest(req);\n        }\n\n        function login(pinToken) {\n            var req = url_demofi+'/start?pin='+pinToken;\n            return callRequest(req);\n        }\n\n        function listCertificates() {\n            var req = url_demofi+'/certs';\n            return callRequest(req);\n        }\n\n        function sign(solicitudFirma, aliasParaFirmar) {\n            var dataSend = {\n                nombre_archivo: solicitudFirma.codigo_archivo,\n                pdf_base64: solicitudFirma.pdf_base64,\n                alias: aliasParaFirmar\n            };\n\n            return $q(function(resolve, reject) {\n                axios.post(url_demofi+'/sign', dataSend,  {\n                    headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\n                    })\n                  .then(function (response) {\n                    //console.log(response);\n                    resolve(response.data);\n                    return;\n                  })\n                  .catch(function (error) {\n                    //console.log(error);\n                    reject({ finalizado: false, mensaje: \"Demofi no se esta ejecutando en su equipo\" + error });\n                  });\n            });\n        }\n\n        function logout() {\n            var req =  url_demofi + '/finish';\n            return callRequest(req);\n        }\n\n        function callRequest(req) {\n            return $q(function(resolve, reject) {\n                axios.get(req)\n                .then(function (response) {\n                    if (response.data.finalizado === false) {\n                        reject(response.data);\n                        return;\n                    }\n                    resolve(response.data);\n                })\n                .catch(function (error) {\n                    if (error) {\n                        Message.error('Demofi no se esta ejecutando en su equipo.');\n                        reject({ finalizado: false, mensaje: \"Demofi no se esta ejecutando en su equipo\" });\n                    }\n                    else {\n                        Message.error('No se puede conectar con Demofi. Verifique que el programa se este ejecutando en su maquina.');\n                        reject({ finalizado: false, mensaje: \"No se puede conectar con Demofi. Verifique que el programa se este ejecutando en su maquina.\" });\n                    }\n                });\n            });\n        }\n\n    }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n  .module('app')\n  .controller('VerificarController', VerificarController);\n\n\n  function VerificarController(Message, backUrl, DataService, $log, Documento, Util, $location) {\n    \n    \n    activate();\n    var vm = this;\n    vm.currentNavItem= 'verificar';\n    vm.goto= function(page) {\n      vm.status = 'Go to '+page;\n    };\n\n    vm.data = {\n      selectedIndex: 0\n    };\n\n    vm.next = function () {\n      vm.data.selectedIndex = Math.min(vm.data.selectedIndex +1, 2);\n    };\n    vm.previous = function () {\n      vm.data.selectedIndex = Math.max(vm.data.selectedIndex -1, 0);\n    };\n\n\n    vm.esMovil = Documento.isMobile();\n    \n    \n    vm.buscar = buscar;\n    vm.irInicio = irInicio;\n\n    function activate() {\n      angular.element('body').addClass('no-login');\n      angular.element('body').removeClass('principal');\n    }\n    \n    function buscar() {\n      if(vm.datosDocumento) {\n        vm.datosDocumento = {};\n        vm.pdf = null;\n        vm.pdf_buffer = null;\n      }\n      vm.datos.codigo = vm.datos.codigo.toUpperCase();\n      DataService.post(backUrl + 'verificar', vm.datos)\n      .then(function (respPost) {\n        if(respPost && respPost.tipoMensaje !== 'ERROR') {\n          vm.datosDocumento = respPost.datos;\n          vm.datos.token = respPost.datos.token;\n        }\n        if(respPost ) {\n          DataService.pdf(backUrl + 'pdfVerificado', vm.datos)\n          .then(function (response) {\n            if(response) {\n              vm.pdf = response.url;\n              vm.pdf_buffer = response.data;\n              if (vm.esMovil) {\n                Util.loadCanvas(response.data, '#canvasContainerVerificado');\n              }\n            }\n          })\n        }\n      })\n      .catch(function (error) {\n        Message.error(error);\n      })\n    }\n\n    function irInicio() {\n      $location.path('login');\n    }\n  }\n})();\n\n(function() {\n    'use strict';\n\n    angular\n    .module('app')\n    .controller('MainController', MainController);\n\n    /** @ngInject */\n    function MainController() {\n\n        // var vm = this;        \n\n    }\n\n})();\n\n(function() {\n    'use strict'\n\n    angular\n    .module('app')\n    .factory('UtilFormly', UtilFormlyFactory);\n\n    /** @ngInject */\n    function UtilFormlyFactory() {\n\n        var factory = {\n            getConfigItem: getConfigItem,\n            parse: parse,\n            listToForm: listToForm,\n            filterDates: filterDates,\n            newTemplate: newTemplate,\n            dataToView: dataToView,\n            sizeObj: sizeObj,\n            recursiveShowError: recursiveShowError,\n            disableForm: disableForm,\n            clearModel: clearModel\n        };\n\n        load_templates();\n\n        return factory;\n\n        /**\n          Funcion que crea un nuevo template\n          @param {String} tipo Tipo de template que se quiere crear\n        */\n        function newTemplate(tipo) {\n            return parse(this.templates[tipo].template);\n        }\n\n        function sizeObj(o) {\n            return Object.keys(o).length;\n        }\n        function recursiveShowError(error) {\n            for (var k in error) {\n                for (var i = 0; i < error[k].length; i++) {\n                    if(angular.isDefined(error[k][i].$submitted)){\n                        error[k][i].$submitted = true;\n                        recursiveShowError(error[k][i].$error);\n                    }else {\n                        if(error[k][i].$setTouched)\n                            error[k][i].$setTouched(true);\n                    }\n                }\n            }\n        }\n\n        /**\n          Funcion que limpia los valores del modelo, para que no quede basura\n          @param {Array} data Array de objetos formly\n          @param {Objeto} model contiene los valores para todos los keys de cada template\n        */\n        function clearModel(data, model) {\n            var elem,\n                new_model = {},\n                keys = {};\n                for (var i = 0; i < data.length; i++) {\n                  if (data[i].type==\"layout\") {\n                      for (var j = 0; j < data[i].fieldGroup.length; j++) {\n                          elem = getConfigItem(data[i].fieldGroup[j]);\n                          clearElem(elem, keys, model, new_model);\n                      }\n                  }else {\n                      elem = getConfigItem(data[i]);\n                      clearElem(elem, keys, model, new_model)                    ;\n                  }\n                }\n            return new_model;\n        }\n\n        /**\n          Funcion que modifica la estructura de un elemento, ademas tranforma de cadena a Date del modelo de la plantilla\n          @param {Objecto} elem Template formly\n          @param {Objeto} keys Objeto que representa un arbol de tipos de formly, para ir incrementando sus keys\n          @param {Objeto} model contiene los valores para todos los keys de cada template\n          @param {Objeto} new_model contiene los valores para todos los keys de cada template limpiado\n        */\n        function clearElem(elem, keys, model, new_model) {\n          if (angular.isUndefined(keys[elem.type])) {\n              keys[elem.type] = 1;\n              elem.key = elem.type + \"-0\";\n          } else {\n              elem.key = elem.type +\"-\"+ keys[elem.type];\n              keys[elem.type]++;\n          }\n          if (angular.isDefined(model[elem.key])) new_model[elem.key] = angular.copy(model[elem.key]);\n        }\n\n        /**\n          Funcion que transforma los string de la lista_valores a datepicker\n          @param {Array} lista_templates Lista de objetos formato formly\n          @param {Array} lista_valores Lista de objetos que son valores de los templates\n        */\n        function filterDates(lista_templates, lista_valores) {\n            for (var j = 0; j < lista_templates.length; j++) {\n                //cuando en la lista de templates exista uno de tipo datepicker\n                //hay que cambiar de tipo String a Objeto Date\n                if (lista_templates[j].type == \"datepicker\") {\n                    var nombre = lista_templates[j].templateOptions.label;\n                    if(lista_valores.hasOwnProperty(nombre)){\n                        lista_valores[nombre] = new Date(lista_valores[nombre]);\n                    }\n                }\n            }\n        }\n        /**\n          Funcion que crea un array de templates formly tranformado\n          @param {Array} data Array de objetos formly\n          @param {Objeto} model contiene los valores para todos los keys de cada template\n        */\n        function dataToView(data, model) {\n            var elem;\n            var form = [];\n            var keys = {}; // variable para controlar que no existan keys iguales\n            for (var i = 0; i < data.length; i++) {\n                if (data[i].type==\"layout\") {\n                    var fg = parse(data[i]);\n                    var clase = \" flex-\"+parseInt(100/fg.elementAttributes['num-cols']);\n                    delete fg.type;\n                    delete fg.elementAttributes['num-cols'];\n                    fg.fieldGroup = [];\n                    for (var j = 0; j < data[i].fieldGroup.length; j++) {\n                        elem = getConfigItem(data[i].fieldGroup[j]);\n                        elem.className += clase;\n                        changeElement(elem, keys, model);\n                        fg.fieldGroup.push(elem);\n                    }\n                    form.push(fg);\n                }else {\n                    elem = getConfigItem(data[i]);\n                    changeElement(elem, keys, model);\n                    form.push(elem);\n                }\n            }\n\n            return form;\n        }\n        /**\n          Funcion deshabilita/habilita todos los campos de un formulario\n          @param {Array} data Array de objetos formly\n          @param {Boolean} val True/false\n        */\n        function disableForm(data, val) {\n            angular.forEach(data, function(field) {\n                if (angular.isDefined(field.fieldGroup)) {\n                    for (var i = 0; i < field.fieldGroup.length; i++) {\n                        if(field.fieldGroup[i].templateOptions)\n                            field.fieldGroup[i].templateOptions.disabled = val;\n                    }\n                }else {\n                    if(field.templateOptions)\n                        field.templateOptions.disabled = val;\n                }\n            });\n        }\n\n\n        /**\n          Funcion que modifica la estructura de un elemento, ademas tranforma de cadena a Date del modelo de la plantilla\n          @param {Template} elem template formly\n          @param {Objeto} keys Objeto que representa un arbol de tipos de formly, para ir incrementando sus keys\n          @param {Objeto} model contiene los valores para todos los keys de cada template\n        */\n        function changeElement(elem, keys, model) {\n            if(angular.isUndefined(keys[elem.type])){\n                keys[elem.type] = 1;\n                elem.key = elem.type + \"-0\";\n            } else {\n                elem.key = elem.type +\"-\"+ keys[elem.type];\n                keys[elem.type]++;\n            }\n            if(elem.type === \"radio\"){\n                elem.templateOptions.className = \"layout layout-wrap\";\n            }\n            if(elem.type === \"datepicker\" && angular.isDefined(model) && angular.isDefined(model[elem.key])){\n                model[elem.key] = new Date(model[elem.key]);\n            }\n            if(elem.type === \"textarea\"){\n                elem.templateOptions.grow = true;\n            }\n\n            if(elem.templateOptions){\n                var validation = {messages:{}};\n                if(elem.templateOptions.required){\n                    validation.messages.required = '\"Debe llenar este campo.\"';\n                }\n                if( elem.type===\"input\"){\n                    var idx = {\n                        '([a-zA-Zñáéíóú]+ ?)+': '\"El campo debe contener solo palabras separadas por un espacio.\"',\n                        '\\\\d+': '\"El campo debe contener solo números.\"',\n                        '([a-zA-Z0-9ñáéíóú]+ ?)+': '\"El campo debe contener palabras y números separadas por un espacio.\"',\n                        '^(([^<>()\\\\[\\\\]\\\\\\\\.,;:\\\\s@\"]+(\\\\.[^<>()\\\\[\\\\]\\\\\\\\.,;:\\\\s@\"]+)*)|(\".+\"))@((\\\\[[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}])|(([a-zA-Z\\\\-0-9]+\\\\.)+[a-zA-Z]{2,}))$': '\"El campo debe ser un email válido.\"',\n                        '^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$':'\"El campo debe ser una hora en formato hh:mm (ej. 08:47)\"'\n                    };\n                    if(elem.templateOptions.pattern) validation.messages.pattern = idx[elem.templateOptions.pattern];\n                    //le da el efecto de slider al mensaje de error\n                    validation.show = true;\n                    elem.validation = validation;\n                }\n            }\n        }\n        /**\n          Funcion que añade clases a la lista de templates para que se renderizen dividos por columnas\n          @param {Array} lista_templates Lista de objetos formato formly\n          @param {Objeto} config configuracion que tendra el formulario tiene columnas y deshabilitar\n          @return {Array} formulario Lista de objetos, que son la transformacion de la lista de templates\n        */\n        function listToForm(lista_templates, config) {\n\n            var nro_columnas = config.columnas || 1;\n\n            var clase='flex-gt-sm-' + parseInt(100/nro_columnas);\n            // console.log(lista_templates.length+\"/\"+nro_columnas+\"=\"+(parseInt( lista_templates.length / nro_columnas ) + 1 ));\n            var nro_filas = parseInt( lista_templates.length / nro_columnas ) + 1;\n\n            var formulario = [];\n            for (var i = 0; i < nro_filas; i++) {\n                formulario.push({\n                    \"elementAttributes\": {\n                        \"layout-gt-sm\": \"row\",\n                        \"layout\": \"column\",\n                        \"layout-align-gt-sm\": \"start end\"\n                    },\n                    \"fieldGroup\": []\n                });\n            }\n            i = 0;\n            var k = 0;\n            while ( i < lista_templates.length ) {\n                var j = 0;\n                while (i < lista_templates.length && j < nro_columnas ) {\n\n                    lista_templates[i].className = clase;\n\n                    // Hacemos que el key de cada elemento sea su label\n                    if(lista_templates[i].templateOptions.label === \"\" || lista_templates[i].templateOptions.label === null){\n                        lista_templates[i].key = lista_templates[i].templateOptions.placeholder;\n                    }\n                    else lista_templates[i].key = lista_templates[i].templateOptions.label;\n\n\n                    if(lista_templates[i].type === \"radio\"){\n                        lista_templates[i].templateOptions.className = \"layout layout-wrap\";\n                    }\n\n                    if(config.deshabilitar || false){\n                        lista_templates[i].templateOptions.disabled = true;\n                    }else {\n                        lista_templates[i].templateOptions.disabled = false;\n                    }\n                    if(config.todoMayuscula || false){\n                        if(lista_templates[i].type === \"input\"){\n                            var onkeyup = 'model[\"' + lista_templates[i].key + '\"] = model[\"' + lista_templates[i].key + '\"].toUpperCase()';\n                            lista_templates[i].templateOptions.onKeyup = onkeyup;\n                        }\n                    }\n\n                    if(config.validacion || false){\n                        if(lista_templates[i].type === \"input\" || lista_templates[i].type === \"datepicker\"){\n                            lista_templates[i].validation = {\n                                messages: {\n                                    required: '\"Debe llenar este campo.\"'\n                                    // required: '\"El campo \" + to.label + \" es requerido\"'\n                                }\n                            }\n                        }\n                    }\n\n                    formulario[k].fieldGroup.push(getConfigItem(lista_templates[i]));\n                    i++;\n                    j++;\n                }\n                k++;\n            }\n\n            return formulario;\n        }\n\n        /**\n        Funcion que obtiene el template limpio de un elemento\n        */\n        function getConfigItem(item){\n            if(item.type=='layout') return parse(item);\n            var obj = {\n                type: item.type,\n                key: item.key,\n                className: parse(item.className),\n                templateOptions: parse(item.templateOptions),\n                validation: parse(item.validation)\n            }\n            return obj;\n        }\n        /**\n        Funcion que copia un objeto, pero perdiendo la referencia\n        */\n        function parse(data) {\n            return angular.fromJson(angular.toJson(data));\n        }\n\n        function load_templates() {\n            // console.log(this);\n            factory.templates = {\n                input: {\n                    template: {\n                        type: \"input\",\n                        key: \"inputText\",\n                        templateOptions: {\n                            type: \"text\",\n                            label: \"Campo de texto\",\n                            disabled: false\n                        }\n                    }\n                },\n                radio: {\n                    template: {\n                        type: \"radio\",\n                        key: \"inputRadio\",\n                        templateOptions: {\n                            label: \"Selección simple\",\n                            labelProp: \"value\",\n                            valueProp: \"id\",\n                            vertical:false,\n                            options: [\n                                {value: \"opción 1\", id: \"opcion 1\"},\n                                {value: \"opción 2\", id: \"opcion 2\"}\n                            ]\n                        }\n                    }\n                },\n                select: {\n                    template: {\n                        type: \"select\",\n                        key: \"inputSelect\",\n                        templateOptions: {\n                            label: \"Lista de selección\",\n                            multiple: false,\n                            labelProp: \"value\",\n                            valueProp: \"id\",\n                            showItem: true,\n                            options: [\n                                {value: \"opción 1\", id: \"opcion 1\"},\n                                {value: \"opción 2\", id: \"opcion 2\"}\n                            ]\n                        }\n                    }\n                },\n                select_multiple: {\n                    template: {\n                        type: \"select\",\n                        key: \"inputSelect\",\n                        templateOptions: {\n                            label: \"Lista de selección\",\n                            multiple: true,\n                            labelProp: \"value\",\n                            valueProp: \"id\",\n                            options: [\n                                { value: \"opción 1\", id: \"opcion 1\" },\n                                { value: \"opción 2\", id: \"opcion 2\" }\n                            ]\n                        }\n                    }\n                },\n                textarea: {\n                    template: {\n                        type: \"textarea\",\n                        key: \"inputTextArea\",\n                        // className: \"ap-text-left\",\n                        templateOptions: {\n                            label: \"Area de texto\",\n                            rows: 2,\n                            grow: false\n                        }\n                    }\n                },\n                checkbox: {\n                    template: {\n                        type: \"checkbox\",\n                        key: \"inputCheckBox\",\n                        templateOptions: {\n                            label: \"Casilla de verificación\",\n                            disabled: false\n                        }\n                    }\n                },\n                datepicker: {\n                    template: {\n                        type: \"datepicker\",\n                        key: \"inputDatePicker\",\n                        templateOptions: {\n                            label: \"Calendario\"\n                            // placeholder: \"Calendario\",\n                            // minDate: minDate, // instance of Date\n                            // maxDate: maxDate, // instance of Date\n                            // filterDate: function(date) {\n                            //     // only weekends\n                            //     var day = date.getDay();\n                            //     return day === 0 || day === 6;\n                            // }\n                        }\n                    }\n                },\n                slider: {\n                    template: {\n                        type: \"slider\",\n                        key: \"inputSlider\",\n                        templateOptions: {\n                            label: \"Deslizador\",\n                            min: 1,\n                            max: 5,\n                            step: 0.5,\n                            discrete: true\n                        }\n                    }\n                },\n                switch: {\n                    template: {\n                        type: \"switch\",\n                        key: \"inputSwitch\",\n                        templateOptions: {\n                            label: \"Interruptor\"\n                        }\n                    }\n                },\n                chips: {\n                    template: {\n                        type: \"chips\",\n                        key: \"inputChips\",\n                        templateOptions: {\n                            label: \"Palabras clave\",\n                            placeholder: \"+palabras\",\n                            secondaryPlaceholder: \"Añadir palabras\",\n                            deleteButtonLabel: \"Borrar\",\n                            deleteHint: \"Borrar palabra\"\n                            // onAdd: function() {\n                            //   console.log('new chip');\n                            // },\n                            // onRemove: function() {\n                            //   console.log('chip removed');\n                            // }\n                        }\n                    }\n                },\n                titulo: {\n                    template: {\n                        type: \"texto\",\n                        key: \"texto\",\n                        templateOptions: {\n                            label: \"Título\",\n                            tipo: \"h2\",\n                            className: \"ap-text-left\",\n                            mTop: true,\n                            mBot: true\n                        }\n                    }\n                },\n                subtitulo: {\n                    template: {\n                        type: \"texto\",\n                        key: \"texto\",\n                        templateOptions: {\n                            label: \"Subtítulo\",\n                            tipo: \"h3\",\n                            className: \"ap-text-left\",\n                            mTop: true,\n                            mBot: true\n                        }\n                    }\n                },\n                parrafo: {\n                    template: {\n                        type: \"texto\",\n                        key: \"parrafo\",\n                        templateOptions: {\n                            label: \"Texto del párrafo, texto del párrafo, texto del párrafo, texto del párrafo, texto del párrafo, texto del párrafo, texto del párrafo, texto del párrafo.\",\n                            tipo: \"p\",\n                            className: \"ap-text-justify\",\n                            mTop: true,\n                            mBot: true\n                        }\n                    }\n                },\n                lista: {\n                    template: {\n                        type: \"lista\",\n                        key: \"lista\",\n                        templateOptions: {\n                            label: \"Lista de elementos\",\n                            className: \"ap-text-left\",\n                            tipo: \"ol\",\n                            showItem: true,\n                            options: [\n                                \"Elemento 1\",\n                                \"Elemento 2\"\n                            ]\n                        }\n                    }\n                },\n                datosGenerales: {\n                    template: {\n                        type: \"datosGenerales\",\n                        key: \"datosGenerales\",\n                        templateOptions: {\n                            labelw: 10,\n                            labelRef: 'REF.:',\n                            showItem: true,\n                            show: {\n                                para: true,\n                                via: true,\n                                de: true,\n                                ref: true\n                            }\n                        }\n                    }\n                },\n                encabezado: {\n                  template: {\n                    type: \"encabezado\",\n                    key: \"encabezado\",\n                    templateOptions: {\n                      labelw: 10,\n                      labelRef: 'REF.:',\n                      show: {\n                        para: true,\n                        via: true,\n                        de: true,\n                        ref: true\n                      }\n                    }\n                  }\n                },\n                documentosRelacionados: {\n                    template: {\n                        type: \"documentosRelacionados\",\n                        key: \"documentosRelacionados\",\n                        templateOptions: {\n                          labelw: 10,\n                          label: \"Referencias:\"\n                        }\n                    }\n                },\n                listaContactos: {\n                    template: {\n                        type: \"listaContactos\",\n                        key: \"listaContactos\",\n                        templateOptions: {\n                            labelw: 20,\n                            label: 'Lista de contactos:'\n                        }\n                    }\n                },\n                documentosAnular: {\n                    template: {\n                        type: \"documentosAnular\",\n                        key: \"documentosAnular\",\n                        templateOptions: {\n                          labelw: 10,\n                          label: \"Referencias:\"\n                        }\n                    }\n                },\n                ccArchivo: {\n                    template: {\n                        type: \"ccArchivo\",\n                        key: \"ccArchivo\",\n                        templateOptions: {\n                            labelw: 10,\n                            label: \"CC/Archivo:\"\n                        }\n                    }\n                },\n                archivo: {\n                    template: {\n                        type: \"archivo\",\n                        key: \"archivo\",\n                        templateOptions: {\n                            label: \"Elegir PDF\"\n                        }\n                    }\n                },\n                cite: {\n                    template: {\n                        type: \"cite\",\n                        templateOptions: {\n                            labelCite: 'CITE',\n                            labelFecha: 'FECHA',\n                            tipo: 'general',\n                            numeracionPagina:'false',\n                            tipoHoja:'Letter'\n                        }\n                    }\n                },\n                inputt: {\n                    template: {\n                        type: \"inputt\",\n                        templateOptions: {\n                            labelw: 20,\n                            labelx: 'Asunto:'\n                        }\n                    }\n                },\n                editorTexto: {\n                    template: {\n                        type: \"editorTexto\",\n                        templateOptions: {\n                            label: 'jojojo'\n                        }\n                    }\n                },\n                layout: {\n                    template: {\n                        \"type\": \"layout\",\n                        \"elementAttributes\": {\n                            \"num-cols\": \"2\",\n                            \"layout-align\": \"start end\",\n                            \"layout\": \"row\"\n                        },\n                        \"fieldGroup\": []\n                    }\n                },\n                vacio: {\n                    template: {\n                        type: \"vacio\",\n                        templateOptions: {\n                            height: 1,\n                            style: {}\n                        }\n                    }\n                },\n                cajachica: {\n                    template: {\n                        type: \"cajachica\",\n                        templateOptions: {\n                            tipo: 'GESTION'\n                        }\n                    }\n                },\n                certificacionComprometido: {\n                  template: {\n                    type: \"certificacionComprometido\",\n                    templateOptions: {\n                      label: 'Certificación de presupuesto comprometido'\n                    }\n                  }\n                }\n            };\n        }\n\n    }\n})();\n\n(function() {\n    'use strict'\n\n    angular\n    .module('app')\n    .factory('Util', ['$window', '$injector', UtilFactory]);\n\n    /** @ngInject */\n    function UtilFactory($window, $injector) {\n\n        var $document = $window.document;\n\n        var tmpl_print ='<!DOCTYPE html>' +\n                        '<html lang=\"en\">' +\n                        '<head>' +\n                            '<meta charset=\"UTF-8\"/>' +\n                            '<title>Document</title>' +\n                            '<style>{css}</style>' +\n                        '</head>' +\n                        '<body>{body}' +\n                        '</body>' +\n                        '</html>';\n\n        var factory = {\n            toType: toType,\n            isJson: isJson,\n            getParams: getParams,\n            print: print,\n            fullscreen: fullscreen,\n            nano: nano,\n            popup: popup,\n            filterFields: filterFields,\n            addPropertiesFormly: addPropertiesFormly,\n            size: size,\n            getFkData: getFkData,\n            serialize: serialize,\n            serializeToJson: serializeToJson,\n            getMenuOption: getMenuOption,\n            searchField: searchField,\n            lengthOptions: lengthOptions,\n            formatDate: formatDate,\n            filterItem: filterItem,\n            getKeys: getKeys,\n            getId: getId,\n            parseSave: parseSave,\n            truncate: truncate,\n            loadCanvas: loadCanvas,\n            stripHTML: stripHTML\n        };\n\n        return factory;\n\n        function nano (template, data) {\n            return template.replace(/\\{([\\w\\.]*)\\}/g, function (str, key) {\n                var keys = key.split(\".\"), v = data[keys.shift()];\n                for (var i = 0, l = keys.length;i < l;i++)\n                    v = v[keys[i]];\n                return (typeof v !== \"undefined\" && v !== null) ? v : \"\";\n            });\n        }\n\n        function toType (obj) {\n            return ({}).toString.call(obj).match(/\\s([a-zA-Z]+)/)[1].toLowerCase();\n        }\n\n        function isJson (text) {\n            return /^[\\],:{}\\s]*$/.test(text.replace(/\\\\[\"\\\\\\/bfnrtu]/g, '@').\n                replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, ']').\n                replace(/(?:^|:|,)(?:\\s*\\[)+/g, ''));\n        }\n\n        function truncate (text, length) {\n            return text.length > length ? (text.substring(0, Math.min(length, text.length)) + '...') : text;\n        }\n\n        function stripHTML(texto) {\n            return texto.replace(/(<([^>]+)>)/ig,\"\");\n        }\n\n        function getParams (p, args) {\n            var first = p.first.defaultValue,\n            second = p.second.defaultValue;\n\n            p.first.position = p.first.position || 0;\n            p.second.position = p.second.position || 1;\n\n            var type = toType(args[p.first.position]);\n            if (type != 'undefined') {\n                if (type == p.first.type) {\n                    first = args[p.first.position];\n                    second = toType(args[p.second.position]) == p.second.type ? args[p.second.position] : p.second.defaultValue;\n                } else {\n                    if (type == p.second.type) {\n                        first = toType(args[p.second.position]) == p.first.type ? args[p.second.position] : p.first.defaultValue;\n                        second = args[p.first.position];\n                    }\n                }\n            }\n            return {\n                first : first,\n                second : second\n            };\n        }\n\n        function print (html, css) {\n            if (typeof css == 'string') {\n                angular.element.get(css, function (response) {\n                    var popup = $window.open('', 'print');\n                    popup.document.write(nano(tmpl_print, {body : html, css : response}));\n                    popup.document.close();\n                    popup.focus();\n                    popup.print();\n                    popup.close();\n                });\n            } else {\n                var popup = $window.open('', 'print');\n                popup.document.write(nano(tmpl_print, {body : html, css : css}));\n                popup.document.close();\n                popup.focus();\n                popup.print();\n                popup.close();\n            }\n\n            return true;\n        }\n\n        function popup(url) {\n            $window.open(url, 'print');\n        }\n\n        function fullscreen () {\n            if (!$document.fullscreenElement &&    // alternative standard method\n                !$document.mozFullScreenElement && !$document.webkitFullscreenElement && !$document.msFullscreenElement ) {  // current working methods\n                if ($document.documentElement.requestFullscreen) {\n                    $document.documentElement.requestFullscreen();\n                } else if ($document.documentElement.msRequestFullscreen) {\n                    $document.documentElement.msRequestFullscreen();\n                } else if ($document.documentElement.mozRequestFullScreen) {\n                    $document.documentElement.mozRequestFullScreen();\n                } else if ($document.documentElement.webkitRequestFullscreen) {\n                    $document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n                }\n            } else {\n                if ($document.exitFullscreen) {\n                    $document.exitFullscreen();\n                } else if ($document.msExitFullscreen) {\n                    $document.msExitFullscreen();\n                } else if ($document.mozCancelFullScreen) {\n                    $document.mozCancelFullScreen();\n                } else if ($document.webkitExitFullscreen) {\n                    $document.webkitExitFullscreen();\n                }\n            }\n        }\n\n        function filterFields(data, fields) {\n            if (typeof fields == 'undefined' || fields.length == 0) {\n                return data;\n            }\n            var filter = [];\n            for (var i in fields) {\n                var field = searchField(data, fields[i]);\n                if (field) {\n                    filter.push(field);\n                }\n            }\n            return filter;\n        }\n\n        function searchField(fields, field) {\n            for (var i in fields) {\n                if (fields[i].key == field) {\n                    return fields[i];\n                }\n            }\n            return null;\n        }\n\n        function addPropertiesFormly(data, formly) {\n            if (typeof formly == 'undefined' || formly.length == 0) {\n                return data;\n            }\n            for (var i in data) {\n                var field = searchField(formly, data[i].key);\n                if (field) {\n                    //data[i] = angular.element.extend(true, data[i], field);\n                    data[i] = angular.element.extend(true, {}, data[i], field);\n                }\n            }\n            return data;\n        }\n\n        function size(obj) {\n            return Object.keys(obj).length;\n        }\n\n        function parseSave(data, formly) {\n            var Datetime = $injector.get('Datetime');\n            var item = {};\n            for (var i in data) {\n                if (toType(data[i]) == 'date') {\n                    item[i] = Datetime.format(data[i], 'YYYY-MM-dd');\n                } else {\n                    if (typeof data[i] == 'string' && (data[i] == 'true' || data[i] == 'false')) {\n                        item[i] = item[i] == 'true';\n                    } else {\n                        item[i] = data[i];\n                    }\n                }\n            }\n            item.id = getId(item, formly);\n            return item;\n        }\n\n        function getId(item, formly, key) {            \n            if (item) {\n                for (var i in formly) {\n                    if (formly[i].templateOptions.label && formly[i].templateOptions.label == 'ID') {\n                        if (key) {\n                            return formly[i].key;\n                        } else {\n                            return item[formly[i].key];\n                        }\n                    }\n                }\n            }\n            return null;\n        }\n\n        function getFkData(fieldsData, key, value) {\n            fieldsData.filter(function (e) {\n                if (e.key == key && e.templateOptions.options) {\n                    e.templateOptions.options.filter(function(elem) {\n                        if (elem.value == value) {\n                            value = elem.name;\n                        }\n                    })\n                }\n            });\n            return value;\n        }\n\n        // TODO: Comentado en la limpieza de errores de consola.\n        // function parseDate(date) {\n        //     return [date.getFullYear(),date.getMonth()+1,date.getDate()].join('-');\n        // }\n\n        function serialize(json) {\n            var string = [];\n            for (var i in json) {\n                string.push(i + '=' + json[i]);\n            }\n            return string.join('&');\n        }\n\n        function serializeToJson(json, limpiar) {\n            var string = [];\n            for (var i in json) {\n                if(limpiar){\n                    for (var j in json[i]) {\n                        if ( json[i][j]==null || json[i][j]==undefined || json[i][j]=='' ) {\n                            delete json[i][j];\n                        }\n                    }\n                }\n                if(Object.keys(json[i]).length > 0)\n                    string.push(i + '=' + angular.toJson(json[i]));\n            }\n            return string.join('&');\n        }\n\n        function getMenuOption(menu, url) {\n            for (var i in menu) {\n                if (typeof menu[i].submenu != 'undefined') {\n                    var pages = menu[i].submenu;\n                    for (var j in pages) {\n                        if (pages[j].url == url) {\n                            return [menu[i].label, pages[j].label];\n                        }\n                    }\n                }\n            }\n            for (var k in menu) {\n                if (menu[k].url == url) {\n                    return [menu[k].label, false];\n                }\n            }\n            return [false,false];\n        }\n\n        function lengthOptions(data, key) {\n            for (var i in data) {\n                if (data[i].key == key && data[i].templateOptions && data[i].templateOptions.options) {\n                    return data[i].templateOptions.options.length;\n                }\n            }\n            return 0;\n        }\n\n        function formatDate(date) {\n            date = date.split('-')\n            return [date[2], date[1], date[0]].join('/');\n        }\n\n        function filterItem(data) {\n            var Datetime = $injector.get('Datetime');            \n            for (var i in data) {\n                if (typeof data[i] == 'string') {\n                    if (Datetime.isDate(data[i])) {\n                      if (!(/^[0-9]\\s*$/).test(data[i]))\n                        data[i] = new Date();\n                    } else if (!/[a-zA-Z]+/g.test(data[i]) && /^(?:(?:([01]?\\d|2[0-3]):)?([0-5]?\\d):)?([0-5]?\\d)$/g.test(data[i]) && data[i].length == 8) {                        \n                        data[i] = formatTime(data[i]);\n                    }\n                }\n            }\n            return data;\n        }\n\n        function formatTime(time) {\n            time = time.split(':')\n            return [time[0], time[1]].join(':')\n        }\n\n        function getKeys(data) {\n            var types = {};\n\n            data.map(function(el) {\n                types[el.key] = el;\n            });\n\n            return types;\n        }\n        /**\n         * Funcion para cargar pdf a un canvas\n         * @param {texto o array} url data del pdf a renderizar\n         * @param {texto} idCanvasContainer selectorID del div padre\n         */\n\n         /* eslint-disable */\n        function loadCanvas(url, idCanvasContainer) {\n            PDFJS.workerSrc = $injector.get('backUrl') + 'flibs/pdfjs/pdf.worker.js';\n            var scale= 1.5;  //\"zoom\" factor for the PDF\n            function renderPage(page) {\n                var viewport = page.getViewport(scale);\n                var canvas = document.createElement('canvas');\n                var ctx = canvas.getContext('2d');\n                var renderContext = {\n                    canvasContext: ctx,\n                    viewport: viewport\n                };\n                canvas.height = viewport.height;\n                canvas.width = viewport.width;\n                canvas.style = \"width:100%; height:100%;\";\n\n                document.querySelector(idCanvasContainer).appendChild(canvas);\n                page.render(renderContext);\n            }\n\n            function renderPages(pdfDoc) {\n                for(var num = 1; num <= pdfDoc.numPages; num++)\n                    pdfDoc.getPage(num).then(renderPage);\n            }\n            PDFJS.disableWorker = true;\n            PDFJS.getDocument(url).then(renderPages);\n        }\n        /* eslint-enable */\n    }\n  })();\n\n(function() {\n    'use strict'\n\n    angular\n    .module('app')\n    .factory('Storage', ['$window', 'appName', StorageFactory]);\n\n    /** @ngInject */\n    function StorageFactory($window, appName) {\n\n        appName = appName || 'app';\n\n        var $local = $window.localStorage;\n        var $session = $window.sessionStorage;\n\n        var factory = {\n            get: get,\n            set: set,\n            remove: remove,\n            destroy: destroy,\n            exist: exist,\n            getSession: getSession,\n            setSession: setSession,\n            removeSession: removeSession,\n            destroySession: destroySession,\n            existSession: existSession,\n            setUser: setUser,\n            getUser: getUser,\n            existUser: existUser,\n            removeUser: removeUser,\n            getToken: getToken\n        };\n\n        return factory;\n\n        function setUser(user) {\n            setSession('user', user);\n        }\n\n        function getUser() {\n            return getSession('user');\n        }\n\n        function existUser() {\n            return existSession('user');\n        }\n\n        function removeUser() {\n            removeSession('user');\n        }\n\n        function getToken() {\n            return $local.getItem(appName + '_' + 'token');\n        }\n\n        // LocalStorage\n        function set(key, value) {\n            $local.setItem(appName + '_' + key, angular.toJson(value));\n        }\n\n        function get(key) {\n            return angular.fromJson($local.getItem(appName + '_' + key));\n        }\n\n        function remove(key) {\n            $local.removeItem(appName + '_' + key);\n        }\n\n        function destroy() {\n            for(var x in $local)\n                $local.removeItem(x);\n        }\n\n        function exist(key) {\n            return typeof $local.getItem(appName + '_' + key) != 'undefined' && $local.getItem(appName + '_' + key) != null && $local.getItem(appName + '_' + key) != 'undefined';\n        }\n\n        // SessionStorage\n        function setSession(key, value) {\n            $session.setItem(appName + '_' + key, angular.toJson(value));\n        }\n\n        function getSession(key) {\n            return angular.fromJson($session.getItem(appName + '_' + key));\n        }\n\n        function removeSession(key) {\n            $session.removeItem(appName + '_' + key);\n        }\n        function destroySession() {\n            for(var x in $session)\n                $session.removeItem(x);\n        }\n\n        function existSession(key) {\n            return typeof $session.getItem(appName + '_' + key) != 'undefined' && $session.getItem(appName + '_' + key) != null && $session.getItem(appName + '_' + key) != 'undefined';\n        }\n    }\n})();\n\n(function() {\n    'use strict'\n\n    angular\n    .module('app')\n    .factory('RouteValidator', ['$rootScope', 'Storage', 'Message', 'ExpirationTime', RouteValidatorFactory]);\n\n    /** @ngInject */\n    function RouteValidatorFactory($rootScope, Storage, Message, ExpirationTime) {\n\n        var factory = {\n            init: init\n        };\n\n        return factory;\n\n        function init(){\n            $rootScope.$on('$stateChangeStart', onStateChangeStart); // eslint-disable-line angular/on-watch\n        }\n\n        /**\n            Funcion que se activa cada vez que se quiere cambiar de localizacion de vista\n            @param {Objeto} ev Evento cambiar de localizacion\n            @param {Objeto} toState Objeto con datos de la url a la que se quiere ir\n            @param {Objeto} toParams Objeto con los parametros de la url a la que se quiere ir\n            @param {Objeto} fromState Objeto con datos de la url en la se encuentra actualmente\n        */\n        function onStateChangeStart(ev, toState, toParams, fromState){\n\n            if (fromState.url !== \"^\" && toState.url!==\"/login\" && toState.url!==\"/verificar\") {\n                // console.log(\"origen->\"+fromState.url);\n                // console.log(\"destino->\" +toState.url);\n\n                var user = Storage.getUser();\n                var existeUsuario = (user !== null)? true : false;\n                // console.log(user);\n\n                var menus = Storage.getSession('menu');\n                var rutaPermitida = true;\n\n                if(fromState.url===\"/login\" && toState.url!==\"/login\" && !existeUsuario){\n                    Message.error('Usted no esta autorizado para acceder a la vista.');\n                    ev.preventDefault();\n                    return;\n                }else {\n                    rutaPermitida = (toState.url === \"/\")? true : false;\n                    if(toState.url===\"/profile\") rutaPermitida = true;\n                    if(toState.url===\"/vista_pdf\") rutaPermitida = true;\n                    // rutaPermitida = true;\n                    if(existeUsuario && !rutaPermitida){\n                        for (var i = 0; i < menus.length; i++) {\n                            for (var j = 0; j < menus[i].submenu.length; j++) {\n                                // console.log(\"submenu \"+\"/\"+menus[i].submenu[j]);\n                                if(tienePermiso(menus[i].submenu[j].url, toState.url)){\n                                    rutaPermitida = true;\n                                }\n                            }\n                        }\n                    }\n\n                    if(toState.url!=='/documento/:idDocumento') ExpirationTime.stopAutoSave();\n                    // console.log(existeUsuario +\"   \"+ rutaPermitida);\n                    if(!existeUsuario || !rutaPermitida){\n                        Message.error('Usted no esta autorizado para acceder a la vista.');\n                        ev.preventDefault();\n                        return;\n                    }\n                }\n            }\n        }\n\n        function tienePermiso(ruta, ruta_destino) {\n            // console.log(\"sm-> \" + ruta);\n            var submenu_rutas = {\n                \"plantillas\": {\n                    \"/plantillas\": true,\n                    \"/plantilla/:idPlantilla\": true\n                },\n                \"usuario\": {\n                    \"/usuario\": true,\n                    \"/elegir\": true\n                },\n                \"rol\": {\n                    \"/rol\": true\n                },\n                \"menu\": {\n                    \"/menu\": true\n                },\n                \"documentos\": {\n                    \"/documentos\": true,\n                    \"/documento/:idDocumento\": true\n                },\n                \"aprobacion\": {\n                    \"/aprobacion\": true\n                },\n                \"progreso\": {\n                    \"/progreso\": true\n                },\n                \"impresion\": {\n                    \"/impresion\": true\n                },\n                \"en_curso\": {\n                    \"/en_curso\": true\n                },\n                \"firmar\": {\n                    \"/firmar\": true\n                },\n                \"monitoreo\": {\n                    \"/monitoreo\": true\n                },\n                \"contactos\": {\n                  \"/contactos\": true\n                }\n            }\n            if(angular.isDefined(submenu_rutas[ruta])){\n                if(angular.isDefined(submenu_rutas[ruta][ruta_destino]))\n                    return submenu_rutas[ruta][ruta_destino];\n            }\n            return false;\n        }\n\n    }\n})();\n\n(function() {\n    'use strict';\n\n    angular\n    .module('app')\n    .factory('Panel', ['$mdPanel', '$document',PanelFactory]);\n\n    /** @ngInject */\n    function PanelFactory($mdPanel, $document) {\n\n        var factory = {\n            show : show\n        };\n\n        return factory;\n\n        function show(config) {\n            // console.log(config);\n\n            var position = null;\n            // delete config.event;\n            if(config.event){\n                position = $mdPanel.newPanelPosition()\n                .relativeTo(config.event.currentTarget)\n                .addPanelPosition($mdPanel.xPosition.ALIGN_END, $mdPanel.yPosition.BELOW);\n            }else {\n                position = $mdPanel.newPanelPosition().absolute().center();\n            }\n            // console.log(position);\n\n            var default_template = 'app/factories/Panel/defaultPanelTemplate.html';\n\n            var settings = {\n                    attachTo: angular.element($document[0].body),\n                    controller: config.controller || ['$scope', '$log', PanelController],\n                    templateUrl: config.templateUrl || default_template,\n                    panelClass: 'md-panel',\n                    position: position,\n                    locals: {\n                        data: config.data || ''\n                    },\n                    openFrom: config.event,\n                    clickOutsideToClose: angular.isUndefined(config.clickOutsideToClose) ? true : config.clickOutsideToClose,\n                    escapeToClose: angular.isUndefined(config.clickOutsideToClose) ? true : config.clickOutsideToClose,\n                    focusOnOpen: true\n                    // zIndex: 2\n                };\n\n            if (config.event) {\n                settings.targetEvent = config.event;\n            }\n\n            $mdPanel.open(settings);\n\n            // var settings = {\n            //     controller: config.controller || ['$scope', '$mdDialog', 'data', 'fields', 'title', 'add', 'column', 'done', DialogController],\n            //     templateUrl: config.templateUrl || '',\n            //     parent: angular.element('body'),\n            //     clickOutsideToClose:typeof config.clickOutsideToClose == 'undefined' ? true : config.clickOutsideToClose,\n            //     escapeToClose:typeof config.escapeToClose == 'undefined' ? true : config.escapeToClose,\n            //     locals: {\n            //         data: config.data || '',\n            //         fields: config.fields || '',\n            //         title: config.title || '',\n            //         add: config.add || '',\n            //         column: config.column || 1,\n            //         done: config.done || function () {}\n            //     }\n            // };\n            // if (config.event) {\n            //     settings.targetEvent = config.event;\n            // }\n            // $mdDialog.show(settings)\n            // .then(function () {}, function() {\n            //     if (config.close) {\n            //         config.close();\n            //     }\n            // });\n        }\n\n        function PanelController($scope, $log) {\n            $log.info(\"hola desde controller default, introduzca su controller\");\n        }\n\n        // BasicDemoCtrl.prototype.showMenu = function(ev) {\n        //     var position = this._mdPanel.newPanelPosition()\n        //     .relativeTo('.demo-menu-open-button')\n        //     .addPanelPosition(this._mdPanel.xPosition.ALIGN_START, this._mdPanel.yPosition.BELOW);\n        //\n        //     var config = {\n        //         attachTo: angular.element(document.body),\n        //         controller: PanelMenuCtrl,\n        //         controllerAs: 'ctrl',\n        //         template:\n        //         '<div class=\"demo-menu-example\" ' +\n        //         '     aria-label=\"Select your favorite dessert.\" ' +\n        //         '     role=\"listbox\">' +\n        //         '  <div class=\"demo-menu-item\" ' +\n        //         '       ng-class=\"{selected : dessert == ctrl.favoriteDessert}\" ' +\n        //         '       aria-selected=\"{{dessert == ctrl.favoriteDessert}}\" ' +\n        //         '       tabindex=\"-1\" ' +\n        //         '       role=\"option\" ' +\n        //         '       ng-repeat=\"dessert in ctrl.desserts\" ' +\n        //         '       ng-click=\"ctrl.selectDessert(dessert)\"' +\n        //         '       ng-keydown=\"ctrl.onKeydown($event, dessert)\">' +\n        //         '    {{ dessert }} ' +\n        //         '  </div>' +\n        //         '</div>',\n        //         panelClass: 'demo-menu-example',\n        //         position: position,\n        //         locals: {\n        //             'selected': el.selected,\n        //             'desserts': el.desserts\n        //         },\n        //         openFrom: ev,\n        //         clickOutsideToClose: true,\n        //         escapeToClose: true,\n        //         focusOnOpen: false,\n        //         zIndex: 2\n        //     };\n        // }\n    }\n})();\n\n(function() {\n    'use strict'\n\n    angular\n    .module('app')\n    .factory('MyFormlyConfig', FormlyConfigFactory);\n\n    /** @ngInject */\n    function FormlyConfigFactory() {\n\n        var factory = {\n            init: init\n        };\n\n        return factory;\n\n\n        /**\n          Funcion que inicia los elementos formly extras que se usaran en la aplicacion\n          @param {formlyConfig} ProveedorServicio Objeto el cual angular-formly provee para poder configurar nuevos elementos y wrappers\n        */\n        function init(formlyConfig){\n            // console.log(formlyConfig);\n            formlyConfig.setType({\n                name: 'texto',\n                templateUrl: 'app/components/formlyComponents/texto/texto.html'\n            });\n            formlyConfig.setType({\n              name: 'lista',\n              templateUrl: 'app/components/formlyComponents/listas/listas.html'\n            });\n            formlyConfig.setType({\n                name: 'vacio',\n                templateUrl: 'app/components/formlyComponents/vacio/vacio.html',\n                controller: 'fcVacioController'\n            });\n            formlyConfig.setType({\n                name: 'cite',\n                templateUrl: 'app/components/formlyComponents/cite/cite.html',\n                controller: 'fcCiteController'\n            });\n            formlyConfig.setType({\n                name: 'inputt',\n                templateUrl: 'app/components/formlyComponents/inputt/inputt.html'\n            });\n            formlyConfig.setType({\n                name: 'editorTexto',\n                templateUrl: 'app/components/formlyComponents/editorTexto/editorTexto.html'\n            });\n            formlyConfig.setType({\n              name: 'datosGenerales',\n              templateUrl: 'app/components/formlyComponents/datosGenerales/datosGenerales.html',\n              controller: 'fcDatosGeneralesController'\n            });\n            formlyConfig.setType({\n              name: 'encabezado',\n              templateUrl: 'app/components/formlyComponents/encabezado/encabezado.html',\n              controller: 'fcEncabezadoController'\n            });\n            formlyConfig.setType({\n              name: 'documentosRelacionados',\n              templateUrl: 'app/components/formlyComponents/documentosRelacionados/documentosRelacionados.html',\n              controller: 'fcDocumentosRelacionadosController'\n            });\n            formlyConfig.setType({\n              name: 'documentosAnular',\n              templateUrl: 'app/components/formlyComponents/documentosAnular/documentosAnular.html',\n              controller: 'fcDocumentosAnularController'\n            });\n            formlyConfig.setType({\n              name: 'ccArchivo',\n              templateUrl: 'app/components/formlyComponents/ccArchivo/ccArchivo.html',\n              controller: 'fcConCopiaArchivoController'\n            });\n            formlyConfig.setType({\n              name: 'archivo',\n              templateUrl: 'app/components/formlyComponents/archivo/archivo.html',\n              controller: 'fcArchivoController'\n            });\n            formlyConfig.setType({\n              name: 'cajachica',\n              templateUrl: 'app/components/formlyComponents/cajachica/cajachica.html',\n              controller: 'fcCajaChicaController'\n            });\n            formlyConfig.setType({\n              name: 'certificacionComprometido',\n              templateUrl: 'app/components/formlyComponents/certificacionComprometido/certificacionComprometido.html'\n            });\n            formlyConfig.setType({\n              name: 'listaContactos',\n              templateUrl: 'app/components/formlyComponents/listaContactos/listaContactos.html',\n              controller: 'fcListaContactosController'\n            });\n        }\n\n    }\n})();\n\n(function() {\n    'use strict';\n\n    angular\n    .module('app')\n    .factory('Modal', ['$mdDialog', ModalFactory]);\n\n    /** @ngInject */\n    function ModalFactory($mdDialog) {\n\n        var factory = {\n            show : show,\n            alert : alert,\n            confirm : confirm\n        };\n\n        return factory;\n\n        function show(config) {\n            var settings = {\n                controller: config.dialogController || config.controller || ['$scope', '$mdDialog', 'data', 'fields', 'title', 'add', 'column', 'done', DialogController],\n                templateUrl: config.templateUrl || '',\n                parent: angular.element('body'),\n                clickOutsideToClose:typeof config.clickOutsideToClose == 'undefined' ? true : config.clickOutsideToClose,\n                escapeToClose:typeof config.escapeToClose == 'undefined' ? true : config.escapeToClose,\n                locals: {\n                    data: config.data || '',\n                    fields: config.fields || '',\n                    title: config.title || '',\n                    add: config.add || '',\n                    column: config.column || 1,\n                    done: config.done || function () {}\n                }\n            };\n            if (config.event) {\n                settings.targetEvent = config.event;\n            }\n            $mdDialog.show(settings)\n            .then(function () {}, function() {\n                if (config.close) {\n                    config.close();\n                }\n            });\n        }\n\n        function DialogController($scope, $mdDialog, data, fields, title, add, column, done) {\n            var vm = $scope;\n\n            vm.data = data;\n            vm.fields = fields;\n            vm.title = title;\n            vm.add = add;\n            vm.column = column;\n            vm.hide = $mdDialog.hide;\n            vm.cancel = $mdDialog.cancel;\n\n            vm.answer = function(answer) {\n                done(answer, $mdDialog);\n            }\n        }\n\n        function alert(text, event) {\n            var $alert = $mdDialog.alert()\n                .clickOutsideToClose(true)\n                .title('Alerta')\n                .htmlContent(text)\n                .ariaLabel('Alerta')\n                .ok('Aceptar');\n\n            if (event) {\n                $alert.targetEvent(event);\n            }\n            $mdDialog.show($alert);\n        }\n\n        function confirm(text, done, cancel, event) {\n            var $confirm = $mdDialog.confirm()\n                .title('Confirmar')\n                .textContent(text)\n                .ariaLabel('Confirmar')\n                .ok('Aceptar')\n                .cancel('Cancelar');\n\n            if (event) {\n                $confirm.targetEvent(event);\n            }\n\n            $mdDialog.show($confirm)\n            .then(function() {\n                if (done) {\n                    done();\n                }\n            }, function() {\n                if (cancel) {\n                    cancel();\n                }\n            });\n        }\n\n    }\n})();\n\n(function() {\n    'use strict'\n\n    angular\n    .module('app')\n    .factory('Message', ['$mdToast', MessageFactory]);\n\n    /** @ngInject */\n    function MessageFactory($mdToast) {\n\n        var factory = {\n            success : success,\n            warning : warning,\n            error : error,\n            show: show\n        };\n\n        return factory;\n\n        function show(type, msg, title, timeout) {\n            var typeIcon = {\n              'EXITO': 'check',\n              'ERROR': 'error',\n              'ADVERTENCIA': 'warning',\n              'INFORMACION': 'info'\n            }\n\n            var messageDefault = {\n              'EXITO': 'La operación se realizó correctamente.',\n              'ERROR': 'Ocurrió un error al procesar su operación.',\n              'ADVERTENCIA': 'Ocurrió algo inesperado al procesar su operación.',\n              'INFORMACION': 'La operacion se realizó correctamente, pero hay alguna infromación que no se muestra'\n            }\n\n            var titleDefault = {\n              'EXITO': 'Correcto',\n              'ERROR': 'Error',\n              'ADVERTENCIA': 'Advertencia',\n              'INFORMACION': 'Información'\n            }\n\n            var typeClass = {\n              'EXITO': 'success',\n              'ERROR': 'danger',\n              'ADVERTENCIA': 'warning',\n              'INFORMACION': 'info'\n            }\n\n            var data = {\n                icon : typeIcon[type],\n                message : msg || messageDefault[type],\n                title : title || titleDefault[type],\n                type : typeClass[type],\n                timeout: timeout\n            };\n\n            render(data);\n        }\n\n\n        function success(msg, title, timeout) {\n            var data = {\n                icon : 'check',\n                message : msg || 'La operación se realizó correctamente.',\n                title : title || 'Correcto',\n                type : 'success',\n                timeout: timeout\n            };\n\n            render(data);\n        }\n\n        function error(msg, title, timeout) {\n            var data = {\n                icon : 'error',\n                message : msg || 'Ocurrió un error al procesar su operación.',\n                title : title || 'Error',\n                type : 'danger',\n                timeout: timeout\n            };\n\n            render(data);\n        }\n\n        function warning(msg, title, timeout) {\n            var data = {\n                icon : 'warning',\n                message : msg || 'Ocurrió algo inesperado al procesar su operación.',\n                title : title || 'Advertencia',\n                type : 'warning',\n                timeout: timeout\n            };\n\n            render(data);\n        }\n\n        function render(data) {\n            $mdToast.show({\n                controller: ToastController,\n                templateUrl: 'app/factories/Messages/layout.toast.html',\n                parent : angular.element('#toast-container-main'),\n                hideDelay: typeof data.timeout != 'undefined' ? (data.timeout == 0 ? 31536000000 : data.timeout) : 5000,\n                position: 'top right',\n                locals: data\n            });\n        }\n\n        function ToastController($scope, $mdToast, icon, message, title, type) {\n            var vm = $scope;\n\n            vm.icon = icon;\n            vm.message = message;\n            vm.title = title;\n            vm.type = type;\n\n            vm.close = function() {\n                $mdToast.hide()\n            };\n        }\n    }\n})();\n\n(function() {\n    'use strict';\n\n    angular\n    .module('app')\n    .factory('Loading', ['$mdDialog', LoadingFactory]);\n\n    /** @ngInject */\n    function LoadingFactory($mdDialog) {\n\n        var factory = {\n            show : show,\n            cerrar : cerrar,\n            cambiar: cambiar\n        };\n        var tiposDic = {\n            warning: 'loader-warning',\n            error: 'loader-error',\n            success: 'loader-success',\n            info: 'loader-info'\n        };\n        var dataLocal = {\n            mensaje: 'Cargando...',\n            tipo: tiposDic.warning\n        };\n\n        return factory;\n\n        function show(config) {\n            if(config.data) dataLocal= config.data;\n            var settings = {\n                controller: config.dialogController || config.controller || ['$scope', '$mdDialog', 'data', 'fields', 'title', 'add', 'column', DialogController],\n                templateUrl: config.templateUrl || 'app/factories/Loading/Loading.html' ||'',\n                parent: angular.element('body'),\n                // clickOutsideToClose:typeof config.clickOutsideToClose == 'undefined' ? true : config.clickOutsideToClose,\n                escapeToClose: false,\n                locals: {\n                    // data: config.data || dataLocal ||'',\n                    data:  dataLocal,\n                    fields: config.fields || '',\n                    title: config.title || '',\n                    add: config.add || '',\n                    column: config.column || 1\n                    // done: config.done || function () {}\n                }\n            };\n            if (config.event) {\n                settings.targetEvent = config.event;\n            }\n            $mdDialog.show(settings)\n            .then(function () {}, function() {\n                if (config.close) {\n                    // console.log('OHHHH NO!!!!');\n                    \n                    config.close();\n                }\n            });\n        }\n        function cerrar() {\n        //   console.log('Ejecutando el cerrar');\n          $mdDialog.hide();\n        }\n\n        function cambiar(datos) {\n            // console.log('Inciando el cambio');\n            if(datos.mensaje) dataLocal.mensaje = datos.mensaje;\n            if (datos.tipo) dataLocal.tipo = tiposDic[datos.tipo];\n        }\n\n        function DialogController($scope, $mdDialog, data, fields, title, add, column) {\n            var vm = $scope;\n            vm.data = data;\n            vm.fields = fields;\n            vm.title = title;\n            vm.add = add;\n            vm.column = column;\n            vm.hide = $mdDialog.hide;\n            \n\n            \n        }\n\n        \n    }\n})();\n\n(function() {\n    'use strict'\n\n    angular\n    .module('app')\n    .factory('HttpInterceptor', ['$q', 'Storage', 'restUrl', HttpInterceptorFactory]);\n\n    /** @ngInject */\n    function HttpInterceptorFactory($q, Storage, restUrl) {\n\n        var factory = {\n            request: request\n        };\n\n        return factory;\n\n        function request(req) {\n            if(req.url.indexOf(restUrl) !== -1){\n                var validacion = {\n                    flag: true,\n                    token: Storage.getToken()\n                };\n                req.headers[\"validacion\"] = base64Encode(angular.toJson(validacion));\n            }\n            return req;\n        }\n\n        // function responseError(response) {\n        //     return $q.reject(response);\n        // }\n\n        function base64Encode(text){\n\n            if (/([^\\u0000-\\u00ff])/.test(text)){\n                throw new Error(\"Can't base64 encode non-ASCII characters.\");\n            }\n\n            var digits = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",\n                i = 0,\n                cur, prev, byteNum,\n                result=[];\n\n            while(i < text.length){\n\n                cur = text.charCodeAt(i);\n                byteNum = i % 3;\n\n                switch(byteNum){\n                    case 0: //first byte\n                        result.push(digits.charAt(cur >> 2));\n                        break;\n\n                    case 1: //second byte\n                        result.push(digits.charAt((prev & 3) << 4 | (cur >> 4)));\n                        break;\n\n                    case 2: //third byte\n                        result.push(digits.charAt((prev & 0x0f) << 2 | (cur >> 6)));\n                        result.push(digits.charAt(cur & 0x3f));\n                        break;\n                }\n\n                prev = cur;\n                i++;\n            }\n\n            if (byteNum == 0){\n                result.push(digits.charAt((prev & 3) << 4));\n                result.push(\"==\");\n            } else if (byteNum == 1){\n                result.push(digits.charAt((prev & 0x0f) << 2));\n                result.push(\"=\");\n            }\n\n            return result.join(\"\");\n        }\n\n    }\n})();\n\n(function() {\n    'use strict'\n\n    angular\n    .module('app')\n    .factory('ExpirationTime', ['Storage', 'Message', '$interval', '$auth', '$location', '$mdDialog', 'DataService', 'restUrl', ExpirationTimeFactory]);\n\n    /** @ngInject */\n    function ExpirationTimeFactory(Storage, Message, $interval, $auth, $location, $mdDialog, DataService, restUrl) {\n\n        /**\n            Factory que se encargara de controlar el tiempo de expiración de la sesion de usuario.\n            interval: funcion que se repite cada segundo\n            time: el tiempo que se que tiende a disminuir hasta cero si no se apreta alguna tecla o se hace un click\n            init: funcion que inicializara a la funcion interval y el tiempo time\n            stopInterval: funcion que cancela la funcion interval y la vuelve indefinida\n            refreshToken: funcion que refresca el tiempo time, esta funcion se activa al entrar a la ruta documento/:idDocumento\n            guardar: funcion que se manda desde documento/:idDocumento\n            autoSaveInterval: funcion que se repite cada 10 minutos y activa a guardar,\n            initAutoSave: iniciar el autoguardado,\n            stopAutoSave: cancelar el autoguardado,\n            getExpirationTime: obtener el tiempo de expiracion,\n            logout: funcion desloguearse del sistema\n        */\n        var factory = {\n            interval: undefined,\n            time: null,\n            init: init,\n            stopInterval: stopInterval,\n            refreshToken: refreshToken,\n            guardar: undefined,\n            autoSaveInterval: undefined,\n            initAutoSave: initAutoSave,\n            stopAutoSave: stopAutoSave,\n            getExpirationTime: getExpirationTime,\n            logout: logout\n        };\n        var fac = factory;\n        return factory;\n\n        function init(){\n            if(angular.isUndefined(fac.interval)){\n                fac.time = getExpirationTime()*60;\n                fac.interval = $interval(function () {\n                    fac.time--;\n                    if (fac.time == 10 && $location.url().indexOf('/documento/') && angular.isDefined(fac.autoSaveInterval)) fac.guardar(false, true);\n                    if (fac.time <= 0 || $location.url().indexOf('/login')==0)  logout(true);\n                }, 1000)\n            }\n        }\n\n        function getExpirationTime() {\n             return angular.isDefined($auth.getPayload())? $auth.getPayload().tiempo : 0 ;\n         }\n\n        function stopInterval() {\n            if(angular.isDefined(fac.interval)) {\n                $interval.cancel(fac.interval);\n                fac.interval = undefined;\n            }\n        }\n\n        function stopAutoSave() {\n            if(angular.isDefined(fac.autoSaveInterval)) {\n                $interval.cancel(fac.autoSaveInterval);\n                fac.autoSaveInterval = undefined;\n            }\n        }\n\n        function initAutoSave(funcionGuardar, enviado) {\n            fac.guardar = angular.isFunction(funcionGuardar)? funcionGuardar: function(x,y){};  // eslint-disable-line no-unused-vars\n            if(angular.isUndefined(fac.autoSaveInterval)){\n                // la funcion interval se activara cada 10 minutos--> 10*60 = 600, tiempo en miliseconds 600*1000=600000\n                fac.autoSaveInterval = $interval(function () {\n                    fac.guardar(false, true);\n                }, 600000); //\n            }\n            if(enviado) stopAutoSave();\n            refreshToken();\n        }\n\n        /*\n            Funcion logout que limpia la session de usuario y redirecciona a la vista login\n            se activa cuando el tiempo de expiracion es igual a 0 o menor\n        */\n        function logout (sw_inactive) {\n            fac.stopInterval();\n            if(sw_inactive) Message.warning('Su sesión ha sido cerrada automáticamente después de ' + getExpirationTime() + ' minutos, tiempo que dura la sesión.', null, 0);\n            $auth.logout()\n            .then(function() {\n                $location.path(\"login\");\n                $mdDialog.hide();\n            });\n        }\n\n        function refreshToken() {\n            if(angular.isDefined(fac.interval)){\n                DataService.get(restUrl+'refrescar')\n                .then(function (respuesta) {\n                    if(angular.isDefined(respuesta)){\n                        $auth.setToken(respuesta.token);\n                        fac.time = getExpirationTime()*60;\n                    }\n                })\n            }\n        }\n\n    }\n})();\n\n(function() {\n'use strict'\n\nangular\n.module('app')\n.factory('Documento', DocumentoFactory);\n\n/** @ngInject */\nfunction DocumentoFactory(DataService, restUrl, backUrl, Datetime, UtilFormly, Modal, $window, $location, Storage, $log) {\n\n    var factory = {\n        showPdfId: showPdfId,\n        showPdf: showPdf,\n        showPdfx: showPdfx,\n        showProgress: showProgress,\n        showProgressAll: showProgressAll,\n        generarAbreviacion: generarAbreviacion,\n        isMobile: isMobile\n\n    };\n\n    return factory;\n\n    function generarAbreviacion(cadena) {\n        cadena = cadena.replace(/[^a-zA-Z ]/g, \"\");\n        var str = cadena.toUpperCase();\n        var res = str.split(\" \");\n        var abreviacion = \"\";\n        for (var i = 0; i < res.length; i++) {\n            if(res[i] !== \"DE\" && res[i] !== \"PARA\" && res[i] !== \"Y\" && res[i] !== \"LA\") {\n                if (angular.isDefined(res[i][0])) {\n                    abreviacion = abreviacion + res[i][0];\n                }\n            }\n        }\n        return abreviacion;\n    }\n\n\n    function showPdfx(nombre) {\n        var datosEnviar = { nombre:nombre, html:'<p>Este es un documento externo, no puede transformarse en texto.</p>' };\n        var new_url =  $location.absUrl();\n        datosEnviar.esDocumentoExterno = true;\n        new_url = new_url.substring(0, new_url.indexOf('#/')+2);\n        Storage.setSession('datos_enviar', datosEnviar);\n        $window.open(new_url+'vista_pdf');\n    }\n\n\n    /**\n      Funcion que descarga un documento y lo muestra en pdf\n      @param {Integer} id_documento Id de documento\n    */\n    function showPdfId(id_documento, sw_url) {\n        DataService.get(restUrl + 'plantillasFormly/documento/'+id_documento)\n        .then(function (respuesta) {\n            showPdf(respuesta.datos.plantilla, respuesta.datos.plantilla_valor, respuesta.datos.nombre, sw_url, id_documento);\n        });\n    }\n\n\n    /**\n      Funcion que muestra pdf de documento\n      @param {String} plantilla Cadena de json que contiene la estructura de un documento\n      @param {String} plantilla_valor Valores de los campos del documento\n      @param {String} nombre Nombre del documento\n    */\n    function showPdf(plantilla, plantilla_valor, nombre, sw_url,id_documento) {\n        var abrirDialogPDF = (angular.isUndefined(sw_url))? true : sw_url;\n        var datosEnviar = {doc:{}};\n        datosEnviar.model_actual = angular.fromJson(plantilla_valor);\n        var model = datosEnviar.model_actual;\n        if( model[\"cite-0\"] && model[\"cite-0\"][\"fecha\"] )\n            model[\"cite-0\"][\"fecha\"] = Datetime.format(model[\"cite-0\"][\"fecha\"], 'dd de MMM de YYYY');\n        datosEnviar.form_actual = UtilFormly.dataToView(angular.fromJson(plantilla), model);\n        datosEnviar.doc.nombre = nombre;\n        datosEnviar.doc.plantilla = plantilla;\n        DataService.post(restUrl+ \"plantillasFormly/generarDocumento/\",datosEnviar)\n        .then(function(respuesta){\n            datosEnviar = { html: respuesta.datos.html, nombre: respuesta.datos.nombre};\n            datosEnviar.esDispositivoMovil = factory.isMobile();\n            if(abrirDialogPDF){\n                //abrimos dialogPDF\n                DataService.pdf(restUrl+'plantillasFormly/documentoPDF/',{cite: datosEnviar.nombre})\n                .then(function (respuestaPdf) {\n                  if(!respuestaPdf) return;\n                    datosEnviar.pdf = respuestaPdf.url;\n                    datosEnviar.pdf_buffer = respuestaPdf.data;\n                    if(id_documento !== null && id_documento) {\n                      $log.log(\"Obteniendo firmas\");\n                      return DataService.get(restUrl +'documento/firmado/'+id_documento);\n                    }\n\n                })\n                .then(function (firmas) {\n                  if(firmas) datosEnviar.firmas = firmas.datos || [];\n                  var config = {\n                    data: datosEnviar,\n                    templateUrl: 'app/factories/Documento/dialogPDF.html',\n                    controller: ['data', '$scope', '$mdDialog', 'Util', DialogPDFController]\n                  };\n                  Modal.show(config);\n                });\n            }else {\n                var new_url =  $location.absUrl();\n                new_url = new_url.substring(0, new_url.indexOf('#/')+2);\n                Storage.setSession('datos_enviar', datosEnviar);\n                $window.open(new_url+'vista_pdf');\n            }\n        });\n    }\n\n    function isMobile() { return angular.isDefined($window.orientation)\n        || navigator.userAgent.match(/Android/i)\n        || navigator.userAgent.match(/webOS/i)\n        || navigator.userAgent.match(/iPhone/i)\n        || navigator.userAgent.match(/iPad/i)\n        || navigator.userAgent.match(/iPod/i)\n        || navigator.userAgent.match(/BlackBerry/i)\n        || navigator.userAgent.match(/Windows Phone/i)\n    }\n\n    /**\n      Funcion que muestra pdf de documento\n      @param {Objeto} data Objeto que tiene valores que llegan de la configuracion\n      @param {Objeto} scope Scope del controlador\n      @param {Objeto} mdDialog mdDialog usado para cerrar el modal\n    */\n    function DialogPDFController(data, $scope, $mdDialog, Util){\n      $log.log(\"CHECK DATA \", data);\n        var vmd = $scope;\n        vmd.data={};\n        vmd.data.html=data.html;\n        vmd.data.pdf=data.pdf;\n        vmd.data.flag_html=true;\n        vmd.data.firmas=data.firmas || [];\n        vmd.data.show_pdf=!data.esDispositivoMovil;\n        if (data.esDispositivoMovil) {\n            Util.loadCanvas(data.pdf_buffer, '#canvasContainer');\n        }\n\n        //funciones\n        vmd.mostrarPdf = function (id, sw){ if(sw) showPdfx(id); else showPdfId(id, false); }\n        vmd.cerrar = function (){ $mdDialog.cancel(); }\n        vmd.verHtml = function(){ vmd.data.flag_html=true; }\n        vmd.verPdf = function(){ vmd.data.flag_html=false; }\n\n    }\n\n\n    /**\n      Funcion que muestra el historial del flujo del documento\n      @param {Evento} ev Evento que se activa al hacer click\n      @param {Integer} id_doc Id del documento\n    */\n    function showProgress(ev, id_doc){\n        DataService.get(restUrl + 'historialFlujo/'+id_doc)\n        .then(function (respuesta) {\n            if(respuesta){\n                setAttrs(respuesta.datos);\n                var config = {\n                    event: ev,\n                    data: { id: id_doc, datos: respuesta.datos },\n                    templateUrl: 'app/factories/Documento/dialog.progreso.html',\n                    controller: ['$scope','$mdDialog', 'data', DialogProgreso]\n                };\n                Modal.show(config);\n            }\n        });\n\n\n    }\n    function setAttrs(arr) {\n        arr.forEach(function (it) {\n            it.fecha_mos = Datetime.dateLiteral(it._fecha_creacion);\n            it.hora_mos = Datetime.time(it._fecha_creacion);\n            switch (it.accion) {\n                case 'ENVIADO':\n                it.acc = 'Envió';\n                it.icon = 'send';\n                it.bg_color = 'envio';\n                break;\n                case 'APROBADO':\n                it.acc = 'Aprobó';\n                it.icon = 'done_all';\n                it.bg_color = 'success';\n                break;\n                case 'RECHAZADO':\n                it.acc = 'Observó';\n                it.icon = 'error';\n                it.bg_color = 'danger';\n                it.observacion = it.observacion.substring(it.observacion.indexOf('Observaciones:'), it.observacion.length);\n                break;\n                case 'DERIVADO':\n                it.acc = 'Derivó';\n                it.icon = 'trending_down';\n                it.bg_color = 'envio';\n                break;\n                case 'CERRADO':\n                it.acc = 'Cerró';\n                it.icon = 'assignment_turned_in';\n                it.bg_color = 'warning';\n                break;\n                case 'CREADO':\n                it.acc = 'Respondió';\n                it.icon = 'undo';\n                it.bg_color = 'success';\n                break;\n                case 'ELIMINADO':\n                it.acc = 'Eliminó';\n                it.icon = 'clear';\n                it.bg_color = 'danger';\n                break;\n                case 'FIRMO':\n                it.acc = 'Firmó';\n                it.icon = 'fingerprint';\n                it.bg_color = 'firmo';\n                break;\n                case 'ANULADO':\n                it.acc = 'Anuló';\n                it.icon = 'cancel';\n                it.bg_color = 'danger';\n                break;\n                default:\n                it.acc = 'Sin respuesta';\n                it.icon = 'visibility';\n                it.bg_color = 'bold';\n            }\n        });\n    }\n\n    function showProgressAll(ev, id_doc){\n        DataService.get(restUrl + 'historialFlujo/'+id_doc+'/proceso')\n        .then(function (respuesta) {\n            if(respuesta){\n                setAttrs(respuesta.datos);\n                var config = {\n                    event: ev,\n                    data: { id: id_doc, datos: respuesta.datos },\n                    templateUrl: 'app/factories/Documento/dialog.progreso.html',\n                    controller: ['$scope','$mdDialog', 'data', DialogProgreso]\n                };\n                Modal.show(config);\n            }\n        });\n\n\n    }\n\n    function DialogProgreso( $scope, $mdDialog, data) {\n        var vmd = $scope;\n        vmd.data = data;\n\n        //funciones\n        vmd.cerrar = cerrar;\n        vmd.verDocumento = verDocumento;\n        function cerrar(){ $mdDialog.cancel(); }\n        function verDocumento(id_doc) { showPdfId(id_doc, false); }\n    }\n\n\n}\n\n})();\n\n(function() {\n    'use strict'\n\n    angular\n    .module('app')\n    .factory('Datetime', ['Util', 'ArrayUtil', DatetimeFactory])\n    .factory('ArrayUtil', ArrayUtilFactory);\n\n    function ArrayUtilFactory() {\n        var factory = {\n            replace: replace,\n            insert: insert,\n            mover: mover,\n            buscarObj: buscarObj\n        };\n\n        function replace (text, find, replace) {\n            for (var i = 0, l = find.length, regex; i < l; i++) {\n                regex = new RegExp(find[i], \"g\");\n                text = text.replace(regex, replace[i]);\n            }\n            return text;\n        }\n\n        /**\n            Funcion que mueve un item de un array al mismo array o a un segundo array\n            @param {Array} arr Primer array del que se sacara el item\n            @param {Integer} fromIndex Indice del item que se sacara del primer array\n            @param {Integer} toIndex Indice del lugar en el que se pusheara en el segundo arraysi esta definido\n            @param {Array} arr2 Segundo array en el que se pusheara si esta definido\n        */\n        function mover (arr, fromIndex, toIndex, arr2) {\n            var item = arr[fromIndex];\n            arr.splice(fromIndex, 1);\n            if(angular.isDefined(arr2))\n                arr2.splice(toIndex, 0, item);\n            else\n                arr.splice(toIndex, 0, item);\n        }\n\n        /**\n            Funcion que inserta un item a un array en una posicion\n            @param {Array} arr Array en el que se pusheara el item\n            @param {Integer} toIndex Indice del lugar en el que se pusheara el item\n            @param {Generico} item ELemento que se pusheara al array\n        */\n        function insert (arr, toIndex, item) {\n            arr.splice(toIndex, 0, item);\n        }\n\n        /**\n            Funcion que busca un objeto en un array\n            @param {Array} arr Array que tiene objetos\n            @param {string} attr Atributo de un objeto del array\n            @param {string} val Valor con el que se comparara\n            @param {Boolean} sw_obj True la funcion devuelve el objeto encontrado, false|undefined la funcion devuelve true si encuentra el objeto\n        */\n        function buscarObj(arr, attrib, val, sw_obj) {\n            for (var i = 0; i < arr.length; i++)\n                if(arr[i][attrib] == val) return (sw_obj)? arr[i] : true;\n                \n            return (sw_obj)? null : false;\n        }\n\n        return factory;\n    }\n\n\n    /** @ngInject */\n    function DatetimeFactory(Util, ArrayUtil) {\n\n        var formatDate = 'dd/MM/YYYY',\n        months = [\"Enero\", \"Febrero\", \"Marzo\", \"Abril\", \"Mayo\", \"Junio\", \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"],\n        days = [\"dom\", \"lun\", \"mar\", \"mié\" , \"jue\", \"vie\" , \"sáb\"],\n        dayslong = [\"Domingo\", \"Lunes\", \"Martes\", \"Miércoles\" , \"Jueves\", \"Viernes\" , \"Sábado\"];\n\n        var factory = {\n            isDate: isDate,\n            isValid: isValid,\n            isLessThan: isLessThan,\n            isLessThanDays: isLessThanDays,\n            isGreaterThan: isGreaterThan,\n            isGreaterThanDays: isGreaterThanDays,\n            addDays: addDays,\n            subtractDays: subtractDays,\n            diff: diff,\n            milliseconds: milliseconds,\n            convert: convert,\n            setFormatDate: setFormatDate,\n            now: now,\n            dateLiteral: dateLiteral,\n            time: time,\n            timeLiteral: timeLiteral,\n            datetimeLiteral: datetimeLiteral,\n            format: format,\n            getSeconds: getSeconds,\n            standar: standar,\n            replace: replace,\n            last: last,\n            secondsBetweenTwoDates: secondsBetweenTwoDates,\n            minutesBetweenTwoDates: minutesBetweenTwoDates,\n            hoursBetweenTwoDates: hoursBetweenTwoDates,\n            daysBetweenTwoDates: daysBetweenTwoDates,\n            betweenTwoDates: betweenTwoDates,\n            isYesterday: isYesterday,\n            parseDate: parseDate,\n            parseDateDjango: parseDateDjango,\n            dateMonth: dateMonth,\n            parse : parse,\n            formatDate: formatDate,\n            months: months,\n            days: days,\n            getPrevDateMonth: getPrevDateMonth,\n            date: date,\n            dayslong: dayslong\n        }\n\n        return factory;\n\n        function date(pDate, separator) {\n            var date = pDate[0].split(separator || '-');\n            // var date = pDate[i].split(separator || '-'); // TODO: verificar el indice correcto. cual es el reemplazo para \"i\"??.\n            return new Date(date[0],date[1]-1,date[2]);\n        }\n\n        function parse(date, separator) {\n            return [date.getFullYear(), date.getMonth()+1, date.getDate()].join(separator || '-');\n        }\n\n        function dateMonth() {\n            var date = new Date();\n            return new Date(date.getFullYear(), date.getMonth(), 1);\n        }\n\n        function getPrevDateMonth(data) {\n            data = data || 1;\n            var date = new Date();\n            var day = date.getDate();\n            var month = date.getMonth()\n            var year = date.getFullYear();\n\n            if (day < data) {\n                month--;\n                if (month < 0) {\n                    month = 11;\n                    year--;\n                }\n            }\n            return new Date(year, month, data);\n        }\n\n        function isDate (date) {\n            if (Util.toType(date) == 'string') {\n                date = convert(date);\n            }\n            return isValid(date);\n        }\n\n        function isValid (date) {\n            if (Util.toType(date) != 'date')\n                return false;\n            return !isNaN(date.getTime());\n        }\n\n        function isLessThan (date) {\n            return milliseconds(date) < (new Date()).getTime();\n        }\n\n        function isLessThanDays (date, data) {\n            return milliseconds(date) > subtractDays(new Date(), data);\n        }\n\n        function isGreaterThan (date) {\n            return milliseconds(date) > (new Date()).getTime();\n        }\n\n        function isGreaterThanDays (date, data) {\n            return milliseconds(date) < addDays(new Date(), data);\n        }\n\n        function addDays (date, days) {\n            return milliseconds(date) + (days || 0)*24*60*60*1000;\n        }\n\n        function subtractDays (date, days) {\n            return milliseconds(date) - (days || 0)*24*60*60*1000;\n        }\n\n        function diff (date2, date1) {\n            return milliseconds(date2) - milliseconds(date1);\n        }\n\n        function milliseconds (date) {\n            if (Util.toType(date) == 'string') {\n                date = convert(date);\n            }\n            return date.getTime();\n        }\n\n        function convert (date) {\n            date = date.split('/');\n            return formatDate == 'dd/MM/YYYY' ? new Date(date[2], date[1]-1, date[0]) :\n            formatDate == 'MM/dd/YYYY' ? new Date(date[2], date[0]-1, date[1]) :\n            new Date(date[0], date[1]-1, date[2]);\n        }\n\n        function setFormatDate (format) {\n            formatDate = format;\n        }\n\n        function now (format) {\n            return replace(new Date(), format || formatDate);\n        }\n\n        function dateLiteral (date) {\n            return format(date, 'dd de MMM del YYYY');\n        }\n\n        function time (date) {\n            return format(date, 'HH:mm');\n        }\n\n        function timeLiteral(time, txt) {\n            var text = '';\n            if (typeof time == 'number') {\n                if (time == 0) {\n                    return '';\n                }\n                if (time < 60) {\n                    text = time + 's';\n                } else if (time < 3600) {\n                    text = Math.floor(time / 60) + 'm ' + (time % 60 > 0 ? (time % 60 + 's') : '');\n                } else {\n                    text = Math.floor(time / 3600) + 'h ' + (time % 3600 > 0 ? (Math.floor(time / 60) + 'm ') : '') + (time % 60 > 0 ? (time % 60 + 's') : '');\n                }\n                return (txt || '') + text;\n            } else {\n                if (time.length == 0) {\n                    return '';\n                }\n                time = time.split(':');\n                var hours = time[0],\n                    minutes = time[1];\n\n                if (parseInt(hours) > 0) {\n                    text += parseInt(hours) + 'h ';\n                }\n                if (parseInt(minutes) > 0) {\n                    text += parseInt(minutes) + 'm ';\n                }\n                if (time.length == 3 && parseInt(time[2]) > 0) {\n                    text += parseInt(time[2]) + 's' ;\n                }\n\n                return (txt || '') + text;\n            }\n        }\n\n        function getSeconds(time) {\n            time = time.split(':');\n            var hours = time[0],\n                minutes = time[1],\n                total = 0;\n\n            if (parseInt(hours) > 0) {\n                total += parseInt(hours)*3600;\n            }\n            if (parseInt(minutes) > 0) {\n                total += parseInt(minutes)*60;\n            }\n            if (time.length == 3 && parseInt(time[2]) > 0) {\n                total += parseInt(time[2]);\n            }\n\n            return total;\n        }\n\n        function datetimeLiteral (date) {\n            return format(date, 'dddd dd de MMM del YYYY a la(s) HH:mm');\n        }\n\n        function format (date, format) {\n            var d = new Date(date);\n            if (isDate(d)) {\n                return replace(d, format || formatDate);\n            }\n            return date;\n        }\n\n        function standar (date, format) {\n            var type = Util.toType(date);\n            if (type == 'date') {\n                return date;\n            }\n            if (type == 'string') {\n                format = format || formatDate;\n                var separator = date.indexOf('/') != -1 ? '/' : '-';\n                date = date.split(separator);\n                if (format == 'dd/MM/YYYY' || format == 'dd-MM-YYYY') {\n                    date = date[1] + separator + date[0] + separator + date[2];\n                }\n                if (format == 'YYYY/dd/MM' || format == 'YYYY-dd-MM') {\n                    date = date[0] + separator + date[1] + separator + date[0];\n                }\n            }\n            return new Date(date);\n        }\n\n        function replace (date, format) {\n            format = format || formatDate;\n            date = standar(date, format);\n            var monthLiteral = format.indexOf('MMM') != -1;\n            return ArrayUtil.replace(format, [\n                \"dddd\", \"ddd\", \"dd\", monthLiteral ? 'MMM' : 'MM', 'YYYY', 'HH', 'mm', 'ss'\n            ], [\n                dayslong[date.getDay()],\n                days[date.getDay()],\n                (date.getDate() < 10 ? '0' : '') + date.getDate(),\n                monthLiteral ? months[date.getMonth()] : ((date.getMonth() + 1 < 10 ? '0' : '') + (date.getMonth() + 1)),\n                date.getFullYear(),\n                (date.getHours() < 10 ? '0' : '') + date.getHours(),\n                (date.getMinutes() < 10 ? '0' : '') + date.getMinutes(),\n                (date.getSeconds() < 10 ? '0' : '') + date.getSeconds()\n            ]);\n        }\n\n        function last (date) {\n            var now = new Date();\n            var days = daysBetweenTwoDates(date, now);\n            if (days > 31) {\n                return dateLiteral(date);\n            } else {\n                if (days > 7) {\n                    var weeks = parseInt(days / 7);\n                    return 'Hace ' + weeks + ' semana' + (weeks > 1 ? 's' : '');\n                } else {\n                    if (days >= 1) {\n                        return format(date, 'ddd a la(s) HH:mm');\n                    } else {\n                        var hours = hoursBetweenTwoDates(date, now);\n                        if (isYesterday(date, hours)) {\n                            return 'Ayer a la(s) ' + time(date);\n                        } else {\n                            if (hours >= 1) {\n                                return 'Hace ' + hours + ' hora' + (hours > 1 ? 's' : '');\n                            } else {\n                                var minutes = minutesBetweenTwoDates(date, now);\n                                if (minutes >= 1) {\n                                    return 'Hace ' + minutes + ' minuto' + (minutes > 1 ? 's' : '');\n                                } else {\n                                    var seconds = secondsBetweenTwoDates(date, now);\n                                    return 'Hace ' + seconds + ' segundo' + (seconds > 1 ? 's' : '');\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        function secondsBetweenTwoDates (date1, date2, absolute) {\n            return betweenTwoDates(date1, date2, \"s\", absolute);\n        }\n\n        function minutesBetweenTwoDates (date1, date2, absolute) {\n            return betweenTwoDates(date1, date2, \"i\", absolute);\n        }\n\n        function hoursBetweenTwoDates (date1, date2, absolute) {\n            return betweenTwoDates(date1, date2, \"h\", absolute);\n        }\n\n        function daysBetweenTwoDates (date1, date2, absolute) {\n            return betweenTwoDates(date1, date2, \"d\", absolute);\n        }\n\n        function betweenTwoDates (date1, date2, type, absolute) {\n            var types = {s : 1000, i : 60*1000, h : 60*60*1000, d : 24*60*60*1000};\n            var diff = parseInt((standar(date2).getTime() - standar(date1).getTime())/types[type]);\n\n            if (typeof absolute !== 'undefined' && absolute !== false) {\n                return Math.abs(diff);\n            }\n            return diff;\n        }\n\n        function isYesterday (date, hours) {\n            if (isDate(date)) {\n                date = date.split(' ');\n                var time = date[1].split(':');\n                return hours >= parseInt(time[0]);\n            }\n            return false;\n        }\n\n        function parseDate(date) {\n            return [date.getDate(), date.getMonth() + 1, date.getFullYear()].join('/')\n        }\n\n        function parseDateDjango(date) {\n            return [date.getFullYear(),date.getMonth()+1,date.getDate()].join('-');\n        }\n\n    }\n})();\n\n\n(function() {\n    'use strict'\n\n    angular\n    .module('app')\n    .factory('AuthInterceptor', AuthInterceptor)\n    .config(function($httpProvider) {\n        $httpProvider.interceptors.push('AuthInterceptor');\n    });\n\n    /** @ngInject */\n    function AuthInterceptor($q, $location, $injector) {\n\n        var interceptor = {\n            request: function(config) {\n                angular.element('#loading-progress').show();\n                return config;\n            },\n            requestError: function(config) {\n                angular.element('#loading-progress').hide();\n                return config;\n            },\n            response: function(response){\n                angular.element('#loading-progress').hide();\n                return response || $q.when(response);\n            },\n            responseError: function(rejection) {\n                if (rejection.status === 401 || rejection.status === 403) {\n                    // en estos estados se deslogue y va a login\n                    var Storage = $injector.get('Storage');\n                    var ExpirationTime = $injector.get('ExpirationTime');\n\n                    Storage.setSession('path', $location.path());\n                    ExpirationTime.logout();\n                }\n                return $q.reject(rejection);\n            }\n        };\n\n        /*eslint-disable no-unused-vars*/\n        function exist(path) {\n          /*eslint-enable no-unused-vars*/\n            var paths = $injector.get('PageNoLogin');\n            for (var i in paths) {\n                if (path.indexOf('/' + paths[i]) != -1 || path.indexOf('/' + paths[i] + '/') != -1) {\n                    return true;\n                }\n            }\n            return false;\n        }\n\n\n        return interceptor;\n    }\n\n})();\n\n(function() {\n    'use strict'\n\n    angular\n    .module('app')\n    .component('visorImagenes', {\n        templateUrl : 'app/components/visorImagenes/visorImagenes.html',\n        controller : ['$scope', 'restUrl', 'DataService', 'Storage', 'FileUploader','Modal', VisorImagenesController],\n        controllerAs: 'vm',\n        bindings: {\n            titulo: '=', \n            imagenes: '=', // Lista de archivos subidos\n            ancho: '=',\n            alto: '=',            \n            eliminar: '=',\n            imagenesEliminar: '='            \n        }\n    });\n\n    function VisorImagenesController($scope, restUrl, DataService, Storage, FileUploader,Modal) {\n\n        var vm = this;\n        vm.restUrl = restUrl;\n   \n        // Funcion que elimina una imagen   \n        vm.eliminarImagen = function(pArchivo){\n          // Despliega el modal de confirmacion para eliminar un elemento.\n          Modal.confirm('Se eliminará la foto, ¿Está seguro/a?.', function () {\n            var indice=vm.imagenes.indexOf(pArchivo);\n\n            // Si el elemento existe dentro del vector.\n            if (indice > -1) {\n              // Elimina el elemento, basado en su indice.\n              vm.imagenes.splice(indice, 1);\n              // Agrega el item eliminado a un vector.\n              vm.imagenesEliminar.push(pArchivo);\n            }\n\n          });\n\n        }\n        \n        vm.mostrarImagen = function (ruta) {\n            var config = {                \n                data: ruta,\n                templateUrl: 'app/components/visorImagenes/visorImagenes.dialog.html',\n                controller: ['data', '$scope', '$mdDialog', DialogImagenController]\n            };\n            Modal.show(config);           \n        }\n               \n        function DialogImagenController(data, $scope, $mdDialog) {\n            var vmd = $scope;\n            vmd.cerrar = cerrar;\n\n            vmd.data = data ? data : {};\n\n            // Funcion que cierra el modal.\n            function cerrar() {\n                $mdDialog.hide();\n            }\n        }\n\n\n    } //Fin del controller\n\n\n  })();\n\n(function() {\n    'use strict'\n\n    angular\n    .module('app')\n    .directive('tooltip', ['DataService', 'restUrl', linkTooltipController])\n\n\n    function linkTooltipController(DataService, restUrl){\n\n        var directive = {\n            scope: {\n                doc: '='\n            },\n            restrict: 'E',\n            link: function (sc, elm, attrs, controller) { // eslint-disable-line no-unused-vars\n                elm.hide();\n                DataService.get(restUrl+'plantillasFormly/documento/'+sc.doc.id_documento+'/info')\n                .then(function (respuesta) {\n                    if(respuesta){\n                        var $td = elm.parent().parent().parent().parent().parent().parent().parent();\n                        $td.append(createTooltip(respuesta.datos));\n                        var $card = $td.children('md-card');\n                        $card.hide();\n                        elm.parent().mouseover(function () {\n                            $card.show();\n                            elm.parent().css('cursor','pointer');\n                        })\n                        elm.parent().mouseout(function () {\n                            $card.hide();\n                            elm.parent().css('cursor','normal');\n                        })\n                    }\n\n                })\n            }\n        };\n        function createTooltip(html) {\n            var new_html = '';\n            new_html += '<md-card class=\"ap-tooltip\"><md-card-content>';\n            new_html += html;\n            new_html += '</md-card-content></md-card>';\n            return new_html;\n        }\n\n        return directive;\n    }\n\n  })();\n\n/* eslint-disable */\n/*!\n* Simditor v2.3.6\n* http://simditor.tower.im/\n* 2015-12-21\n*/\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module unless amdModuleId is set\n    define('simditor', [\"jquery\",\"simple-module\",\"simple-hotkeys\",\"simple-uploader\"], function ($, SimpleModule, simpleHotkeys, simpleUploader) {\n      return (root['Simditor'] = factory($, SimpleModule, simpleHotkeys, simpleUploader));\n    });\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory(require(\"jquery\"),require(\"simple-module\"),require(\"simple-hotkeys\"),require(\"simple-uploader\"));\n  } else {\n    root['Simditor'] = factory(jQuery,SimpleModule,simple.hotkeys,simple.uploader);\n  }\n}(this, function ($, SimpleModule, simpleHotkeys, simpleUploader) {\n\nvar AlignmentButton, BlockquoteButton, BoldButton, Button, Clipboard, CodeButton, CodePopover, ColorButton, FontScaleButton, Formatter, HrButton, ImageButton, ImagePopover, IndentButton, Indentation, InputManager, ItalicButton, Keystroke, LinkButton, LinkPopover, ListButton, OrderListButton, OutdentButton, Popover, Selection, Simditor, StrikethroughButton, TableButton, TitleButton, Toolbar, UnderlineButton, UndoManager, UnorderListButton, Util,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty,\n  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },\n  slice = [].slice;\n\nSelection = (function(superClass) {\n  extend(Selection, superClass);\n\n  function Selection() {\n    return Selection.__super__.constructor.apply(this, arguments);\n  }\n\n  Selection.pluginName = 'Selection';\n\n  Selection.prototype._range = null;\n\n  Selection.prototype._startNodes = null;\n\n  Selection.prototype._endNodes = null;\n\n  Selection.prototype._containerNode = null;\n\n  Selection.prototype._nodes = null;\n\n  Selection.prototype._blockNodes = null;\n\n  Selection.prototype._rootNodes = null;\n\n  Selection.prototype._init = function() {\n    this.editor = this._module;\n    this._selection = document.getSelection();\n    this.editor.on('selectionchanged', (function(_this) {\n      return function(e) {\n        _this.reset();\n        return _this._range = _this._selection.getRangeAt(0);\n      };\n    })(this));\n    return this.editor.on('blur', (function(_this) {\n      return function(e) {\n        return _this.reset();\n      };\n    })(this));\n  };\n\n  Selection.prototype.reset = function() {\n    this._range = null;\n    this._startNodes = null;\n    this._endNodes = null;\n    this._containerNode = null;\n    this._nodes = null;\n    this._blockNodes = null;\n    return this._rootNodes = null;\n  };\n\n  Selection.prototype.clear = function() {\n    var e;\n    try {\n      this._selection.removeAllRanges();\n    } catch (_error) {\n      e = _error;\n    }\n    return this.reset();\n  };\n\n  Selection.prototype.range = function(range) {\n    var ffOrIE;\n    if (range) {\n      this.clear();\n      this._selection.addRange(range);\n      this._range = range;\n      ffOrIE = this.editor.util.browser.firefox || this.editor.util.browser.msie;\n      if (!this.editor.inputManager.focused && ffOrIE) {\n        this.editor.body.focus();\n      }\n    } else if (!this._range && this.editor.inputManager.focused && this._selection.rangeCount) {\n      this._range = this._selection.getRangeAt(0);\n    }\n    return this._range;\n  };\n\n  Selection.prototype.startNodes = function() {\n    if (this._range) {\n      this._startNodes || (this._startNodes = (function(_this) {\n        return function() {\n          var startNodes;\n          startNodes = $(_this._range.startContainer).parentsUntil(_this.editor.body).get();\n          startNodes.unshift(_this._range.startContainer);\n          return $(startNodes);\n        };\n      })(this)());\n    }\n    return this._startNodes;\n  };\n\n  Selection.prototype.endNodes = function() {\n    var endNodes;\n    if (this._range) {\n      this._endNodes || (this._endNodes = this._range.collapsed ? this.startNodes() : (endNodes = $(this._range.endContainer).parentsUntil(this.editor.body).get(), endNodes.unshift(this._range.endContainer), $(endNodes)));\n    }\n    return this._endNodes;\n  };\n\n  Selection.prototype.containerNode = function() {\n    if (this._range) {\n      this._containerNode || (this._containerNode = $(this._range.commonAncestorContainer));\n    }\n    return this._containerNode;\n  };\n\n  Selection.prototype.nodes = function() {\n    if (this._range) {\n      this._nodes || (this._nodes = (function(_this) {\n        return function() {\n          var nodes;\n          nodes = [];\n          if (_this.startNodes().first().is(_this.endNodes().first())) {\n            nodes = _this.startNodes().get();\n          } else {\n            _this.startNodes().each(function(i, node) {\n              var $endNode, $node, $nodes, endIndex, index, sharedIndex, startIndex;\n              $node = $(node);\n              if (_this.endNodes().index($node) > -1) {\n                return nodes.push(node);\n              } else if ($node.parent().is(_this.editor.body) || (sharedIndex = _this.endNodes().index($node.parent())) > -1) {\n                if (sharedIndex && sharedIndex > -1) {\n                  $endNode = _this.endNodes().eq(sharedIndex - 1);\n                } else {\n                  $endNode = _this.endNodes().last();\n                }\n                $nodes = $node.parent().contents();\n                startIndex = $nodes.index($node);\n                endIndex = $nodes.index($endNode);\n                return $.merge(nodes, $nodes.slice(startIndex, endIndex).get());\n              } else {\n                $nodes = $node.parent().contents();\n                index = $nodes.index($node);\n                return $.merge(nodes, $nodes.slice(index).get());\n              }\n            });\n            _this.endNodes().each(function(i, node) {\n              var $node, $nodes, index;\n              $node = $(node);\n              if ($node.parent().is(_this.editor.body) || _this.startNodes().index($node.parent()) > -1) {\n                nodes.push(node);\n                return false;\n              } else {\n                $nodes = $node.parent().contents();\n                index = $nodes.index($node);\n                return $.merge(nodes, $nodes.slice(0, index + 1));\n              }\n            });\n          }\n          return $($.unique(nodes));\n        };\n      })(this)());\n    }\n    return this._nodes;\n  };\n\n  Selection.prototype.blockNodes = function() {\n    if (!this._range) {\n      return;\n    }\n    this._blockNodes || (this._blockNodes = (function(_this) {\n      return function() {\n        return _this.nodes().filter(function(i, node) {\n          return _this.editor.util.isBlockNode(node);\n        });\n      };\n    })(this)());\n    return this._blockNodes;\n  };\n\n  Selection.prototype.rootNodes = function() {\n    if (!this._range) {\n      return;\n    }\n    this._rootNodes || (this._rootNodes = (function(_this) {\n      return function() {\n        return _this.nodes().filter(function(i, node) {\n          var $parent;\n          $parent = $(node).parent();\n          return $parent.is(_this.editor.body) || $parent.is('blockquote');\n        });\n      };\n    })(this)());\n    return this._rootNodes;\n  };\n\n  Selection.prototype.rangeAtEndOf = function(node, range) {\n    var afterLastNode, beforeLastNode, endNode, endNodeLength, lastNodeIsBr, result;\n    if (range == null) {\n      range = this.range();\n    }\n    if (!(range && range.collapsed)) {\n      return;\n    }\n    node = $(node)[0];\n    endNode = range.endContainer;\n    endNodeLength = this.editor.util.getNodeLength(endNode);\n    beforeLastNode = range.endOffset === endNodeLength - 1;\n    lastNodeIsBr = $(endNode).contents().last().is('br');\n    afterLastNode = range.endOffset === endNodeLength;\n    if (!((beforeLastNode && lastNodeIsBr) || afterLastNode)) {\n      return false;\n    }\n    if (node === endNode) {\n      return true;\n    } else if (!$.contains(node, endNode)) {\n      return false;\n    }\n    result = true;\n    $(endNode).parentsUntil(node).addBack().each(function(i, n) {\n      var $lastChild, beforeLastbr, isLastNode, nodes;\n      nodes = $(n).parent().contents().filter(function() {\n        return !(this !== n && this.nodeType === 3 && !this.nodeValue);\n      });\n      $lastChild = nodes.last();\n      isLastNode = $lastChild.get(0) === n;\n      beforeLastbr = $lastChild.is('br') && $lastChild.prev().get(0) === n;\n      if (!(isLastNode || beforeLastbr)) {\n        result = false;\n        return false;\n      }\n    });\n    return result;\n  };\n\n  Selection.prototype.rangeAtStartOf = function(node, range) {\n    var result, startNode;\n    if (range == null) {\n      range = this.range();\n    }\n    if (!(range && range.collapsed)) {\n      return;\n    }\n    node = $(node)[0];\n    startNode = range.startContainer;\n    if (range.startOffset !== 0) {\n      return false;\n    }\n    if (node === startNode) {\n      return true;\n    } else if (!$.contains(node, startNode)) {\n      return false;\n    }\n    result = true;\n    $(startNode).parentsUntil(node).addBack().each(function(i, n) {\n      var nodes;\n      nodes = $(n).parent().contents().filter(function() {\n        return !(this !== n && this.nodeType === 3 && !this.nodeValue);\n      });\n      if (nodes.first().get(0) !== n) {\n        return result = false;\n      }\n    });\n    return result;\n  };\n\n  Selection.prototype.insertNode = function(node, range) {\n    if (range == null) {\n      range = this.range();\n    }\n    if (!range) {\n      return;\n    }\n    node = $(node)[0];\n    range.insertNode(node);\n    return this.setRangeAfter(node, range);\n  };\n\n  Selection.prototype.setRangeAfter = function(node, range) {\n    if (range == null) {\n      range = this.range();\n    }\n    if (range == null) {\n      return;\n    }\n    node = $(node)[0];\n    range.setEndAfter(node);\n    range.collapse(false);\n    return this.range(range);\n  };\n\n  Selection.prototype.setRangeBefore = function(node, range) {\n    if (range == null) {\n      range = this.range();\n    }\n    if (range == null) {\n      return;\n    }\n    node = $(node)[0];\n    range.setEndBefore(node);\n    range.collapse(false);\n    return this.range(range);\n  };\n\n  Selection.prototype.setRangeAtStartOf = function(node, range) {\n    if (range == null) {\n      range = this.range();\n    }\n    node = $(node).get(0);\n    range.setEnd(node, 0);\n    range.collapse(false);\n    return this.range(range);\n  };\n\n  Selection.prototype.setRangeAtEndOf = function(node, range) {\n    var $lastNode, $node, contents, lastChild, lastChildLength, lastText, nodeLength;\n    if (range == null) {\n      range = this.range();\n    }\n    $node = $(node);\n    node = $node[0];\n    if ($node.is('pre')) {\n      contents = $node.contents();\n      if (contents.length > 0) {\n        lastChild = contents.last();\n        lastText = lastChild.text();\n        lastChildLength = this.editor.util.getNodeLength(lastChild[0]);\n        if (lastText.charAt(lastText.length - 1) === '\\n') {\n          range.setEnd(lastChild[0], lastChildLength - 1);\n        } else {\n          range.setEnd(lastChild[0], lastChildLength);\n        }\n      } else {\n        range.setEnd(node, 0);\n      }\n    } else {\n      nodeLength = this.editor.util.getNodeLength(node);\n      if (node.nodeType !== 3 && nodeLength > 0) {\n        $lastNode = $(node).contents().last();\n        if ($lastNode.is('br')) {\n          nodeLength -= 1;\n        } else if ($lastNode[0].nodeType !== 3 && this.editor.util.isEmptyNode($lastNode)) {\n          $lastNode.append(this.editor.util.phBr);\n          node = $lastNode[0];\n          nodeLength = 0;\n        }\n      }\n      range.setEnd(node, nodeLength);\n    }\n    range.collapse(false);\n    return this.range(range);\n  };\n\n  Selection.prototype.deleteRangeContents = function(range) {\n    var atEndOfBody, atStartOfBody, endRange, startRange;\n    if (range == null) {\n      range = this.range();\n    }\n    startRange = range.cloneRange();\n    endRange = range.cloneRange();\n    startRange.collapse(true);\n    endRange.collapse(false);\n    atStartOfBody = this.rangeAtStartOf(this.editor.body, startRange);\n    atEndOfBody = this.rangeAtEndOf(this.editor.body, endRange);\n    if (!range.collapsed && atStartOfBody && atEndOfBody) {\n      this.editor.body.empty();\n      range.setStart(this.editor.body[0], 0);\n      range.collapse(true);\n      this.range(range);\n    } else {\n      range.deleteContents();\n    }\n    return range;\n  };\n\n  Selection.prototype.breakBlockEl = function(el, range) {\n    var $el;\n    if (range == null) {\n      range = this.range();\n    }\n    $el = $(el);\n    if (!range.collapsed) {\n      return $el;\n    }\n    range.setStartBefore($el.get(0));\n    if (range.collapsed) {\n      return $el;\n    }\n    return $el.before(range.extractContents());\n  };\n\n  Selection.prototype.save = function(range) {\n    var endCaret, endRange, startCaret;\n    if (range == null) {\n      range = this.range();\n    }\n    if (this._selectionSaved) {\n      return;\n    }\n    endRange = range.cloneRange();\n    endRange.collapse(false);\n    startCaret = $('<span/>').addClass('simditor-caret-start');\n    endCaret = $('<span/>').addClass('simditor-caret-end');\n    endRange.insertNode(endCaret[0]);\n    range.insertNode(startCaret[0]);\n    this.clear();\n    return this._selectionSaved = true;\n  };\n\n  Selection.prototype.restore = function() {\n    var endCaret, endContainer, endOffset, range, startCaret, startContainer, startOffset;\n    if (!this._selectionSaved) {\n      return false;\n    }\n    startCaret = this.editor.body.find('.simditor-caret-start');\n    endCaret = this.editor.body.find('.simditor-caret-end');\n    if (startCaret.length && endCaret.length) {\n      startContainer = startCaret.parent();\n      startOffset = startContainer.contents().index(startCaret);\n      endContainer = endCaret.parent();\n      endOffset = endContainer.contents().index(endCaret);\n      if (startContainer[0] === endContainer[0]) {\n        endOffset -= 1;\n      }\n      range = document.createRange();\n      range.setStart(startContainer.get(0), startOffset);\n      range.setEnd(endContainer.get(0), endOffset);\n      startCaret.remove();\n      endCaret.remove();\n      this.range(range);\n    } else {\n      startCaret.remove();\n      endCaret.remove();\n    }\n    this._selectionSaved = false;\n    return range;\n  };\n\n  return Selection;\n\n})(SimpleModule);\n\nFormatter = (function(superClass) {\n  extend(Formatter, superClass);\n\n  function Formatter() {\n    return Formatter.__super__.constructor.apply(this, arguments);\n  }\n\n  Formatter.pluginName = 'Formatter';\n\n  Formatter.prototype.opts = {\n    allowedTags: [],\n    allowedAttributes: {},\n    allowedStyles: {}\n  };\n\n  Formatter.prototype._init = function() {//mod-for-jl\n    this.editor = this._module;\n    this._allowedTags = $.merge(['br', 'span', 'a', 'img',' strong', 'strike', 'u', 'p', 'ol', 'li', 'blockquote', 'pre', 'code', 'h1', 'h2', 'h3', 'h4', 'hr'], this.opts.allowedTags);\n    this._allowedAttributes = $.extend({\n      img: ['src', 'alt', 'width', 'height', 'data-non-image'],\n      a: ['href', 'target'],\n      code: ['class']\n    }, this.opts.allowedAttributes);\n    this._allowedStyles = $.extend({\n      p: ['margin-left', 'text-align'],\n      h1: ['margin-left', 'text-align'],\n      h2: ['margin-left', 'text-align'],\n      h3: ['margin-left', 'text-align'],\n      h4: ['margin-left', 'text-align']\n    }, this.opts.allowedStyles);\n    return this.editor.body.on('click', 'a', function(e) {\n      return false;\n    });\n  };\n\n  Formatter.prototype.decorate = function($el) {\n    if ($el == null) {\n      $el = this.editor.body;\n    }\n    this.editor.trigger('decorate', [$el]);\n    return $el;\n  };\n\n  Formatter.prototype.undecorate = function($el) {\n    if ($el == null) {\n      $el = this.editor.body.clone();\n    }\n    this.editor.trigger('undecorate', [$el]);\n    return $el;\n  };\n\n  Formatter.prototype.autolink = function($el) {\n    var $link, $node, findLinkNode, k, lastIndex, len, linkNodes, match, re, replaceEls, subStr, text, uri;\n    if ($el == null) {\n      $el = this.editor.body;\n    }\n    linkNodes = [];\n    findLinkNode = function($parentNode) {\n      return $parentNode.contents().each(function(i, node) {\n        var $node, text;\n        $node = $(node);\n        if ($node.is('a') || $node.closest('a, pre', $el).length) {\n          return;\n        }\n        if (!$node.is('iframe') && $node.contents().length) {\n          return findLinkNode($node);\n        } else if ((text = $node.text()) && /https?:\\/\\/|www\\./ig.test(text)) {\n          return linkNodes.push($node);\n        }\n      });\n    };\n    findLinkNode($el);\n    re = /(https?:\\/\\/|www\\.)[\\w\\-\\.\\?&=\\/#%:,@\\!\\+]+/ig;\n    for (k = 0, len = linkNodes.length; k < len; k++) {\n      $node = linkNodes[k];\n      text = $node.text();\n      replaceEls = [];\n      match = null;\n      lastIndex = 0;\n      while ((match = re.exec(text)) !== null) {\n        subStr = text.substring(lastIndex, match.index);\n        replaceEls.push(document.createTextNode(subStr));\n        lastIndex = re.lastIndex;\n        uri = /^(http(s)?:\\/\\/|\\/)/.test(match[0]) ? match[0] : 'http://' + match[0];\n        $link = $(\"<a href=\\\"\" + uri + \"\\\" rel=\\\"nofollow\\\"></a>\").text(match[0]);\n        replaceEls.push($link[0]);\n      }\n      replaceEls.push(document.createTextNode(text.substring(lastIndex)));\n      $node.replaceWith($(replaceEls));\n    }\n    return $el;\n  };\n\n  Formatter.prototype.format = function($el) {\n    var $node, blockNode, k, l, len, len1, n, node, ref, ref1;\n    if ($el == null) {\n      $el = this.editor.body;\n    }\n\n    if ($el.is(':empty')) {\n      $el.append('<p>' + this.editor.util.phBr + '</p>');\n      return $el;\n    }\n    ref = $el.contents();\n    for (k = 0, len = ref.length; k < len; k++) {\n      n = ref[k];\n      this.cleanNode(n, true);\n    }\n    ref1 = $el.contents();\n    for (l = 0, len1 = ref1.length; l < len1; l++) {\n      node = ref1[l];\n      $node = $(node);\n      if ($node.is('br')) {\n        if (typeof blockNode !== \"undefined\" && blockNode !== null) {\n          blockNode = null;\n        }\n        $node.remove();\n      } else if (this.editor.util.isBlockNode(node)) {\n        if ($node.is('li')) {\n          if (blockNode && blockNode.is('ul, ol')) {\n            blockNode.append(node);\n          } else {\n            blockNode = $('<ul/>').insertBefore(node);\n            blockNode.append(node);\n          }\n        } else {\n          blockNode = null;\n        }\n      } else {\n        if (!blockNode || blockNode.is('ul, ol')) {\n          blockNode = $('<p/>').insertBefore(node);\n        }\n        blockNode.append(node);\n        if (this.editor.util.isEmptyNode(blockNode)) {\n          blockNode.append(this.editor.util.phBr);\n        }\n      }\n    }\n    return $el;\n  };\n\n  Formatter.prototype.cleanNode = function(node, recursive) {\n    var $blockEls, $childImg, $node, $p, $td, allowedAttributes, attr, contents, isDecoration, k, l, len, len1, n, ref, ref1, text, textNode;\n    $node = $(node);\n    if (!($node.length > 0)) {\n      return;\n    }\n    if ($node[0].nodeType === 3) {\n      text = $node.text().replace(/(\\r\\n|\\n|\\r)/gm, '');\n      if (text) {\n        textNode = document.createTextNode(text);\n        $node.replaceWith(textNode);\n      } else {\n        $node.remove();\n      }\n      return;\n    }\n    contents = $node.is('iframe') ? null : $node.contents();\n    isDecoration = this.editor.util.isDecoratedNode($node);\n    if ($node.is(this._allowedTags.join(',')) || isDecoration) {\n      if ($node.is('a') && ($childImg = $node.find('img')).length > 0) {\n        $node.replaceWith($childImg);\n        $node = $childImg;\n        contents = null;\n      }\n      if ($node.is('td') && ($blockEls = $node.find(this.editor.util.blockNodes.join(','))).length > 0) {\n        $blockEls.each((function(_this) {\n          return function(i, blockEl) {\n            return $(blockEl).contents().unwrap();\n          };\n        })(this));\n        contents = $node.contents();\n      }\n      if ($node.is('img') && $node.hasClass('uploading')) {\n        $node.remove();\n      }\n      if (!isDecoration) {\n        allowedAttributes = this._allowedAttributes[$node[0].tagName.toLowerCase()];\n        ref = $.makeArray($node[0].attributes);\n        for (k = 0, len = ref.length; k < len; k++) {\n          attr = ref[k];\n          if (attr.name === 'style') {\n            continue;\n          }\n          if (!((allowedAttributes != null) && (ref1 = attr.name, indexOf.call(allowedAttributes, ref1) >= 0))) {\n            $node.removeAttr(attr.name);\n          }\n        }\n        this._cleanNodeStyles($node);\n        if ($node.is('span') && $node[0].attributes.length === 0) {\n          $node.contents().first().unwrap();\n        }\n      }\n    } else if ($node[0].nodeType === 1 && !$node.is(':empty')) {\n      if ($node.is('div, article, dl, header, footer, tr')) {\n        $node.append('<br/>');\n        contents.first().unwrap();\n      } else if ($node.is('table')) {\n        $p = $('<p/>');\n        $node.find('tr').each(function(i, tr) {\n          return $p.append($(tr).text() + '<br/>');\n        });\n        $node.replaceWith($p);\n        contents = null;\n      } else if ($node.is('thead, tfoot')) {\n        $node.remove();\n        contents = null;\n      } else if ($node.is('th')) {\n        $td = $('<td/>').append($node.contents());\n        $node.replaceWith($td);\n      } else {\n        contents.first().unwrap();\n      }\n    } else {\n      $node.remove();\n      contents = null;\n    }\n    if (recursive && (contents != null) && !$node.is('pre')) {\n      for (l = 0, len1 = contents.length; l < len1; l++) {\n        n = contents[l];\n        this.cleanNode(n, true);\n      }\n    }\n    return null;\n  };\n\n  Formatter.prototype._cleanNodeStyles = function($node) {\n    var allowedStyles, k, len, pair, ref, ref1, style, styleStr, styles;\n    styleStr = $node.attr('style');\n    if (!styleStr) {\n      return;\n    }\n    $node.removeAttr('style');\n    allowedStyles = this._allowedStyles[$node[0].tagName.toLowerCase()];\n    if (!(allowedStyles && allowedStyles.length > 0)) {\n      return $node;\n    }\n    styles = {};\n    ref = styleStr.split(';');\n    for (k = 0, len = ref.length; k < len; k++) {\n      style = ref[k];\n      style = $.trim(style);\n      pair = style.split(':');\n      if (!(pair.length = 2)) {\n        continue;\n      }\n      if (ref1 = pair[0], indexOf.call(allowedStyles, ref1) >= 0) {\n        styles[$.trim(pair[0])] = $.trim(pair[1]);\n      }\n    }\n    if (Object.keys(styles).length > 0) {\n      $node.css(styles);\n    }\n    return $node;\n  };\n\n  Formatter.prototype.clearHtml = function(html, lineBreak) {\n    var container, contents, result;\n    if (lineBreak == null) {\n      lineBreak = true;\n    }\n    container = $('<div/>').append(html);\n    contents = container.contents();\n    result = '';\n    contents.each((function(_this) {\n      return function(i, node) {\n        var $node, children;\n        if (node.nodeType === 3) {\n          return result += node.nodeValue;\n        } else if (node.nodeType === 1) {\n          $node = $(node);\n          children = $node.is('iframe') ? null : $node.contents();\n          if (children && children.length > 0) {\n            result += _this.clearHtml(children);\n          }\n          if (lineBreak && i < contents.length - 1 && $node.is('br, p, div, li,tr, pre, address, artticle, aside, dl, figcaption, footer, h1, h2,h3, h4, header')) {\n            return result += '\\n';\n          }\n        }\n      };\n    })(this));\n    return result;\n  };\n\n  Formatter.prototype.beautify = function($contents) {\n    var uselessP;\n    uselessP = function($el) {\n      return !!($el.is('p') && !$el.text() && $el.children(':not(br)').length < 1);\n    };\n    return $contents.each(function(i, el) {\n      var $el, invalid;\n      $el = $(el);\n      invalid = $el.is(':not(img, br, col, td, hr, [class^=\"simditor-\"]):empty');\n      if (invalid || uselessP($el)) {\n        $el.remove();\n      }\n      return $el.find(':not(img, br, col, td, hr, [class^=\"simditor-\"]):empty').remove();\n    });\n  };\n\n  return Formatter;\n\n})(SimpleModule);\n\nInputManager = (function(superClass) {\n  extend(InputManager, superClass);\n\n  function InputManager() {\n    return InputManager.__super__.constructor.apply(this, arguments);\n  }\n\n  InputManager.pluginName = 'InputManager';\n\n  InputManager.prototype._modifierKeys = [16, 17, 18, 91, 93, 224];\n\n  InputManager.prototype._arrowKeys = [37, 38, 39, 40];\n\n  InputManager.prototype._init = function() {\n    var selectAllKey, submitKey;\n    this.editor = this._module;\n    this.throttledValueChanged = this.editor.util.throttle((function(_this) {\n      return function(params) {\n        return setTimeout(function() {\n          return _this.editor.trigger('valuechanged', params);\n        }, 10);\n      };\n    })(this), 300);\n    this.throttledSelectionChanged = this.editor.util.throttle((function(_this) {\n      return function() {\n        return _this.editor.trigger('selectionchanged');\n      };\n    })(this), 50);\n    $(document).on('selectionchange.simditor' + this.editor.id, (function(_this) {\n      return function(e) {\n        var triggerEvent;\n        if (!(_this.focused && !_this.editor.clipboard.pasting)) {\n          return;\n        }\n        triggerEvent = function() {\n          if (_this._selectionTimer) {\n            clearTimeout(_this._selectionTimer);\n            _this._selectionTimer = null;\n          }\n          if (_this.editor.selection._selection.rangeCount > 0) {\n            return _this.throttledSelectionChanged();\n          } else {\n            return _this._selectionTimer = setTimeout(function() {\n              _this._selectionTimer = null;\n              if (_this.focused) {\n                return triggerEvent();\n              }\n            }, 10);\n          }\n        };\n        return triggerEvent();\n      };\n    })(this));\n    this.editor.on('valuechanged', (function(_this) {\n      return function() {\n        var $rootBlocks;\n        _this.lastCaretPosition = null;\n        $rootBlocks = _this.editor.body.children().filter(function(i, node) {\n          return _this.editor.util.isBlockNode(node);\n        });\n        if (_this.focused && $rootBlocks.length === 0) {\n          _this.editor.selection.save();\n          _this.editor.formatter.format();\n          _this.editor.selection.restore();\n        }\n        _this.editor.body.find('hr, pre, .simditor-table').each(function(i, el) {\n          var $el, formatted;\n          $el = $(el);\n          if ($el.parent().is('blockquote') || $el.parent()[0] === _this.editor.body[0]) {\n            formatted = false;\n            if ($el.next().length === 0) {\n              $('<p/>').append(_this.editor.util.phBr).insertAfter($el);\n              formatted = true;\n            }\n            if ($el.prev().length === 0) {\n              $('<p/>').append(_this.editor.util.phBr).insertBefore($el);\n              formatted = true;\n            }\n            if (formatted) {\n              return _this.throttledValueChanged();\n            }\n          }\n        });\n        _this.editor.body.find('pre:empty').append(_this.editor.util.phBr);\n        if (!_this.editor.util.support.onselectionchange && _this.focused) {\n          return _this.throttledSelectionChanged();\n        }\n      };\n    })(this));\n    this.editor.body.on('keydown', $.proxy(this._onKeyDown, this)).on('keypress', $.proxy(this._onKeyPress, this)).on('keyup', $.proxy(this._onKeyUp, this)).on('mouseup', $.proxy(this._onMouseUp, this)).on('focus', $.proxy(this._onFocus, this)).on('blur', $.proxy(this._onBlur, this)).on('drop', $.proxy(this._onDrop, this)).on('input', $.proxy(this._onInput, this));\n    if (this.editor.util.browser.firefox) {\n      this.editor.hotkeys.add('cmd+left', (function(_this) {\n        return function(e) {\n          e.preventDefault();\n          _this.editor.selection._selection.modify('move', 'backward', 'lineboundary');\n          return false;\n        };\n      })(this));\n      this.editor.hotkeys.add('cmd+right', (function(_this) {\n        return function(e) {\n          e.preventDefault();\n          _this.editor.selection._selection.modify('move', 'forward', 'lineboundary');\n          return false;\n        };\n      })(this));\n      selectAllKey = this.editor.util.os.mac ? 'cmd+a' : 'ctrl+a';\n      this.editor.hotkeys.add(selectAllKey, (function(_this) {\n        return function(e) {\n          var $children, firstBlock, lastBlock, range;\n          $children = _this.editor.body.children();\n          if (!($children.length > 0)) {\n            return;\n          }\n          firstBlock = $children.first().get(0);\n          lastBlock = $children.last().get(0);\n          range = document.createRange();\n          range.setStart(firstBlock, 0);\n          range.setEnd(lastBlock, _this.editor.util.getNodeLength(lastBlock));\n          _this.editor.selection.range(range);\n          return false;\n        };\n      })(this));\n    }\n    submitKey = this.editor.util.os.mac ? 'cmd+enter' : 'ctrl+enter';\n    return this.editor.hotkeys.add(submitKey, (function(_this) {\n      return function(e) {\n        _this.editor.el.closest('form').find('button:submit').click();\n        return false;\n      };\n    })(this));\n  };\n\n  InputManager.prototype._onFocus = function(e) {\n    if (this.editor.clipboard.pasting) {\n      return;\n    }\n    this.editor.el.addClass('focus').removeClass('error');\n    this.focused = true;\n    return setTimeout((function(_this) {\n      return function() {\n        var $blockEl, range;\n        range = _this.editor.selection._selection.getRangeAt(0);\n        if (range.startContainer === _this.editor.body[0]) {\n          if (_this.lastCaretPosition) {\n            _this.editor.undoManager.caretPosition(_this.lastCaretPosition);\n          } else {\n            $blockEl = _this.editor.body.children().first();\n            range = document.createRange();\n            _this.editor.selection.setRangeAtStartOf($blockEl, range);\n          }\n        }\n        _this.lastCaretPosition = null;\n        _this.editor.triggerHandler('focus');\n        if (!_this.editor.util.support.onselectionchange) {\n          return _this.throttledSelectionChanged();\n        }\n      };\n    })(this), 0);\n  };\n\n  InputManager.prototype._onBlur = function(e) {\n    var ref;\n    if (this.editor.clipboard.pasting) {\n      return;\n    }\n    this.editor.el.removeClass('focus');\n    this.editor.sync();\n    this.focused = false;\n    this.lastCaretPosition = (ref = this.editor.undoManager.currentState()) != null ? ref.caret : void 0;\n    return this.editor.triggerHandler('blur');\n  };\n\n  InputManager.prototype._onMouseUp = function(e) {\n    if (!this.editor.util.support.onselectionchange) {\n      return this.throttledSelectionChanged();\n    }\n  };\n\n  InputManager.prototype._onKeyDown = function(e) {\n    var ref, ref1;\n    if (this.editor.triggerHandler(e) === false) {\n      return false;\n    }\n    if (this.editor.hotkeys.respondTo(e)) {\n      return;\n    }\n    if (this.editor.keystroke.respondTo(e)) {\n      this.throttledValueChanged();\n      return false;\n    }\n    if ((ref = e.which, indexOf.call(this._modifierKeys, ref) >= 0) || (ref1 = e.which, indexOf.call(this._arrowKeys, ref1) >= 0)) {\n      return;\n    }\n    if (this.editor.util.metaKey(e) && e.which === 86) {\n      return;\n    }\n    if (!this.editor.util.support.oninput) {\n      this.throttledValueChanged(['typing']);\n    }\n    return null;\n  };\n\n  InputManager.prototype._onKeyPress = function(e) {\n    if (this.editor.triggerHandler(e) === false) {\n      return false;\n    }\n  };\n\n  InputManager.prototype._onKeyUp = function(e) {\n    var p, ref;\n    if (this.editor.triggerHandler(e) === false) {\n      return false;\n    }\n    if (!this.editor.util.support.onselectionchange && (ref = e.which, indexOf.call(this._arrowKeys, ref) >= 0)) {\n      this.throttledValueChanged();\n      return;\n    }\n    if ((e.which === 8 || e.which === 46) && this.editor.util.isEmptyNode(this.editor.body)) {\n      this.editor.body.empty();\n      p = $('<p/>').append(this.editor.util.phBr).appendTo(this.editor.body);\n      this.editor.selection.setRangeAtStartOf(p);\n    }\n  };\n\n  InputManager.prototype._onDrop = function(e) {\n    if (this.editor.triggerHandler(e) === false) {\n      return false;\n    }\n    return this.throttledValueChanged();\n  };\n\n  InputManager.prototype._onInput = function(e) {\n    return this.throttledValueChanged(['oninput']);\n  };\n\n  return InputManager;\n\n})(SimpleModule);\n\nKeystroke = (function(superClass) {\n  extend(Keystroke, superClass);\n\n  function Keystroke() {\n    return Keystroke.__super__.constructor.apply(this, arguments);\n  }\n\n  Keystroke.pluginName = 'Keystroke';\n\n  Keystroke.prototype._init = function() {\n    this.editor = this._module;\n    this._keystrokeHandlers = {};\n    return this._initKeystrokeHandlers();\n  };\n\n  Keystroke.prototype.add = function(key, node, handler) {\n    key = key.toLowerCase();\n    key = this.editor.hotkeys.constructor.aliases[key] || key;\n    if (!this._keystrokeHandlers[key]) {\n      this._keystrokeHandlers[key] = {};\n    }\n    return this._keystrokeHandlers[key][node] = handler;\n  };\n\n  Keystroke.prototype.respondTo = function(e) {\n    var base, key, ref, result;\n    key = (ref = this.editor.hotkeys.constructor.keyNameMap[e.which]) != null ? ref.toLowerCase() : void 0;\n    if (!key) {\n      return;\n    }\n    if (key in this._keystrokeHandlers) {\n      result = typeof (base = this._keystrokeHandlers[key])['*'] === \"function\" ? base['*'](e) : void 0;\n      if (!result) {\n        this.editor.selection.startNodes().each((function(_this) {\n          return function(i, node) {\n            var handler, ref1;\n            if (node.nodeType !== Node.ELEMENT_NODE) {\n              return;\n            }\n            handler = (ref1 = _this._keystrokeHandlers[key]) != null ? ref1[node.tagName.toLowerCase()] : void 0;\n            result = typeof handler === \"function\" ? handler(e, $(node)) : void 0;\n            if (result === true || result === false) {\n              return false;\n            }\n          };\n        })(this));\n      }\n      if (result) {\n        return true;\n      }\n    }\n  };\n\n  Keystroke.prototype._initKeystrokeHandlers = function() {\n    var titleEnterHandler;\n    if (this.editor.util.browser.safari) {\n      this.add('enter', '*', (function(_this) {\n        return function(e) {\n          var $blockEl, $br;\n          if (!e.shiftKey) {\n            return;\n          }\n          $blockEl = _this.editor.selection.blockNodes().last();\n          if ($blockEl.is('pre')) {\n            return;\n          }\n          $br = $('<br/>');\n          if (_this.editor.selection.rangeAtEndOf($blockEl)) {\n            _this.editor.selection.insertNode($br);\n            _this.editor.selection.insertNode($('<br/>'));\n            _this.editor.selection.setRangeBefore($br);\n          } else {\n            _this.editor.selection.insertNode($br);\n          }\n          return true;\n        };\n      })(this));\n    }\n    if (this.editor.util.browser.webkit || this.editor.util.browser.msie) {\n      titleEnterHandler = (function(_this) {\n        return function(e, $node) {\n          var $p;\n          if (!_this.editor.selection.rangeAtEndOf($node)) {\n            return;\n          }\n          $p = $('<p/>').append(_this.editor.util.phBr).insertAfter($node);\n          _this.editor.selection.setRangeAtStartOf($p);\n          return true;\n        };\n      })(this);\n      this.add('enter', 'h1', titleEnterHandler);\n      this.add('enter', 'h2', titleEnterHandler);\n      this.add('enter', 'h3', titleEnterHandler);\n      this.add('enter', 'h4', titleEnterHandler);\n      this.add('enter', 'h5', titleEnterHandler);\n      this.add('enter', 'h6', titleEnterHandler);\n    }\n    this.add('backspace', '*', (function(_this) {\n      return function(e) {\n        var $blockEl, $prevBlockEl, $rootBlock, isWebkit;\n        $rootBlock = _this.editor.selection.rootNodes().first();\n        $prevBlockEl = $rootBlock.prev();\n        if ($prevBlockEl.is('hr') && _this.editor.selection.rangeAtStartOf($rootBlock)) {\n          _this.editor.selection.save();\n          $prevBlockEl.remove();\n          _this.editor.selection.restore();\n          return true;\n        }\n        $blockEl = _this.editor.selection.blockNodes().last();\n        isWebkit = _this.editor.util.browser.webkit;\n        if (isWebkit && _this.editor.selection.rangeAtStartOf($blockEl)) {\n          _this.editor.selection.save();\n          _this.editor.formatter.cleanNode($blockEl, true);\n          _this.editor.selection.restore();\n          return null;\n        }\n      };\n    })(this));\n    this.add('enter', 'li', (function(_this) {\n      return function(e, $node) {\n        var $cloneNode, listEl, newBlockEl, newListEl;\n        $cloneNode = $node.clone();\n        $cloneNode.find('ul, ol').remove();\n        if (!(_this.editor.util.isEmptyNode($cloneNode) && $node.is(_this.editor.selection.blockNodes().last()))) {\n          return;\n        }\n        listEl = $node.parent();\n        if ($node.next('li').length > 0) {\n          if (!_this.editor.util.isEmptyNode($node)) {\n            return;\n          }\n          if (listEl.parent('li').length > 0) {\n            newBlockEl = $('<li/>').append(_this.editor.util.phBr).insertAfter(listEl.parent('li'));\n            newListEl = $('<' + listEl[0].tagName + '/>').append($node.nextAll('li'));\n            newBlockEl.append(newListEl);\n          } else {\n            newBlockEl = $('<p/>').append(_this.editor.util.phBr).insertAfter(listEl);\n            newListEl = $('<' + listEl[0].tagName + '/>').append($node.nextAll('li'));\n            newBlockEl.after(newListEl);\n          }\n        } else {\n          if (listEl.parent('li').length > 0) {\n            newBlockEl = $('<li/>').insertAfter(listEl.parent('li'));\n            if ($node.contents().length > 0) {\n              newBlockEl.append($node.contents());\n            } else {\n              newBlockEl.append(_this.editor.util.phBr);\n            }\n          } else {\n            newBlockEl = $('<p/>').append(_this.editor.util.phBr).insertAfter(listEl);\n            if ($node.children('ul, ol').length > 0) {\n              newBlockEl.after($node.children('ul, ol'));\n            }\n          }\n        }\n        if ($node.prev('li').length) {\n          $node.remove();\n        } else {\n          listEl.remove();\n        }\n        _this.editor.selection.setRangeAtStartOf(newBlockEl);\n        return true;\n      };\n    })(this));\n    this.add('enter', 'pre', (function(_this) {\n      return function(e, $node) {\n        var $p, breakNode, range;\n        e.preventDefault();\n        if (e.shiftKey) {\n          $p = $('<p/>').append(_this.editor.util.phBr).insertAfter($node);\n          _this.editor.selection.setRangeAtStartOf($p);\n          return true;\n        }\n        range = _this.editor.selection.range();\n        breakNode = null;\n        range.deleteContents();\n        if (!_this.editor.util.browser.msie && _this.editor.selection.rangeAtEndOf($node)) {\n          breakNode = document.createTextNode('\\n\\n');\n          range.insertNode(breakNode);\n          range.setEnd(breakNode, 1);\n        } else {\n          breakNode = document.createTextNode('\\n');\n          range.insertNode(breakNode);\n          range.setStartAfter(breakNode);\n        }\n        range.collapse(false);\n        _this.editor.selection.range(range);\n        return true;\n      };\n    })(this));\n    this.add('enter', 'blockquote', (function(_this) {\n      return function(e, $node) {\n        var $closestBlock, range;\n        $closestBlock = _this.editor.selection.blockNodes().last();\n        if (!($closestBlock.is('p') && !$closestBlock.next().length && _this.editor.util.isEmptyNode($closestBlock))) {\n          return;\n        }\n        $node.after($closestBlock);\n        range = document.createRange();\n        _this.editor.selection.setRangeAtStartOf($closestBlock, range);\n        return true;\n      };\n    })(this));\n    this.add('backspace', 'li', (function(_this) {\n      return function(e, $node) {\n        var $br, $childList, $newLi, $prevChildList, $prevNode, $textNode, isFF, range, text;\n        $childList = $node.children('ul, ol');\n        $prevNode = $node.prev('li');\n        if (!($childList.length > 0 && $prevNode.length > 0)) {\n          return false;\n        }\n        text = '';\n        $textNode = null;\n        $node.contents().each(function(i, n) {\n          if (n.nodeType === 1 && /UL|OL/.test(n.nodeName)) {\n            return false;\n          }\n          if (n.nodeType === 1 && /BR/.test(n.nodeName)) {\n            return;\n          }\n          if (n.nodeType === 3 && n.nodeValue) {\n            text += n.nodeValue;\n          } else if (n.nodeType === 1) {\n            text += $(n).text();\n          }\n          return $textNode = $(n);\n        });\n        isFF = _this.editor.util.browser.firefox && !$textNode.next('br').length;\n        if ($textNode && text.length === 1 && isFF) {\n          $br = $(_this.editor.util.phBr).insertAfter($textNode);\n          $textNode.remove();\n          _this.editor.selection.setRangeBefore($br);\n          return true;\n        } else if (text.length > 0) {\n          return false;\n        }\n        range = document.createRange();\n        $prevChildList = $prevNode.children('ul, ol');\n        if ($prevChildList.length > 0) {\n          $newLi = $('<li/>').append(_this.editor.util.phBr).appendTo($prevChildList);\n          $prevChildList.append($childList.children('li'));\n          $node.remove();\n          _this.editor.selection.setRangeAtEndOf($newLi, range);\n        } else {\n          _this.editor.selection.setRangeAtEndOf($prevNode, range);\n          $prevNode.append($childList);\n          $node.remove();\n          _this.editor.selection.range(range);\n        }\n        return true;\n      };\n    })(this));\n    this.add('backspace', 'pre', (function(_this) {\n      return function(e, $node) {\n        var $newNode, codeStr, range;\n        if (!_this.editor.selection.rangeAtStartOf($node)) {\n          return;\n        }\n        codeStr = $node.html().replace('\\n', '<br/>') || _this.editor.util.phBr;\n        $newNode = $('<p/>').append(codeStr).insertAfter($node);\n        $node.remove();\n        range = document.createRange();\n        _this.editor.selection.setRangeAtStartOf($newNode, range);\n        return true;\n      };\n    })(this));\n    return this.add('backspace', 'blockquote', (function(_this) {\n      return function(e, $node) {\n        var $firstChild, range;\n        if (!_this.editor.selection.rangeAtStartOf($node)) {\n          return;\n        }\n        $firstChild = $node.children().first().unwrap();\n        range = document.createRange();\n        _this.editor.selection.setRangeAtStartOf($firstChild, range);\n        return true;\n      };\n    })(this));\n  };\n\n  return Keystroke;\n\n})(SimpleModule);\n\nUndoManager = (function(superClass) {\n  extend(UndoManager, superClass);\n\n  function UndoManager() {\n    return UndoManager.__super__.constructor.apply(this, arguments);\n  }\n\n  UndoManager.pluginName = 'UndoManager';\n\n  UndoManager.prototype._index = -1;\n\n  UndoManager.prototype._capacity = 20;\n\n  UndoManager.prototype._startPosition = null;\n\n  UndoManager.prototype._endPosition = null;\n\n  UndoManager.prototype._init = function() {\n    var redoShortcut, undoShortcut;\n    this.editor = this._module;\n    this._stack = [];\n    if (this.editor.util.os.mac) {\n      undoShortcut = 'cmd+z';\n      redoShortcut = 'shift+cmd+z';\n    } else if (this.editor.util.os.win) {\n      undoShortcut = 'ctrl+z';\n      redoShortcut = 'ctrl+y';\n    } else {\n      undoShortcut = 'ctrl+z';\n      redoShortcut = 'shift+ctrl+z';\n    }\n    this.editor.hotkeys.add(undoShortcut, (function(_this) {\n      return function(e) {\n        e.preventDefault();\n        _this.undo();\n        return false;\n      };\n    })(this));\n    this.editor.hotkeys.add(redoShortcut, (function(_this) {\n      return function(e) {\n        e.preventDefault();\n        _this.redo();\n        return false;\n      };\n    })(this));\n    this.throttledPushState = this.editor.util.throttle((function(_this) {\n      return function() {\n        return _this._pushUndoState();\n      };\n    })(this), 2000);\n    this.editor.on('valuechanged', (function(_this) {\n      return function(e, src) {\n        if (src === 'undo' || src === 'redo') {\n          return;\n        }\n        return _this.throttledPushState();\n      };\n    })(this));\n    this.editor.on('selectionchanged', (function(_this) {\n      return function(e) {\n        _this.resetCaretPosition();\n        return _this.update();\n      };\n    })(this));\n    this.editor.on('focus', (function(_this) {\n      return function(e) {\n        if (_this._stack.length === 0) {\n          return _this._pushUndoState();\n        }\n      };\n    })(this));\n    return this.editor.on('blur', (function(_this) {\n      return function(e) {\n        return _this.resetCaretPosition();\n      };\n    })(this));\n  };\n\n  UndoManager.prototype.resetCaretPosition = function() {\n    this._startPosition = null;\n    return this._endPosition = null;\n  };\n\n  UndoManager.prototype.startPosition = function() {\n    if (this.editor.selection._range) {\n      this._startPosition || (this._startPosition = this._getPosition('start'));\n    }\n    return this._startPosition;\n  };\n\n  UndoManager.prototype.endPosition = function() {\n    if (this.editor.selection._range) {\n      this._endPosition || (this._endPosition = (function(_this) {\n        return function() {\n          var range;\n          range = _this.editor.selection.range();\n          if (range.collapsed) {\n            return _this._startPosition;\n          }\n          return _this._getPosition('end');\n        };\n      })(this)());\n    }\n    return this._endPosition;\n  };\n\n  UndoManager.prototype._pushUndoState = function() {\n    var caret;\n    if (this.editor.triggerHandler('pushundostate') === false) {\n      return;\n    }\n    caret = this.caretPosition();\n    if (!caret.start) {\n      return;\n    }\n    this._index += 1;\n    this._stack.length = this._index;\n    this._stack.push({\n      html: this.editor.body.html(),\n      caret: this.caretPosition()\n    });\n    if (this._stack.length > this._capacity) {\n      this._stack.shift();\n      return this._index -= 1;\n    }\n  };\n\n  UndoManager.prototype.currentState = function() {\n    if (this._stack.length && this._index > -1) {\n      return this._stack[this._index];\n    } else {\n      return null;\n    }\n  };\n\n  UndoManager.prototype.undo = function() {\n    var state;\n    if (this._index < 1 || this._stack.length < 2) {\n      return;\n    }\n    this.editor.hidePopover();\n    this._index -= 1;\n    state = this._stack[this._index];\n    this.editor.body.get(0).innerHTML = state.html;\n    this.caretPosition(state.caret);\n    this.editor.body.find('.selected').removeClass('selected');\n    this.editor.sync();\n    return this.editor.trigger('valuechanged', ['undo']);\n  };\n\n  UndoManager.prototype.redo = function() {\n    var state;\n    if (this._index < 0 || this._stack.length < this._index + 2) {\n      return;\n    }\n    this.editor.hidePopover();\n    this._index += 1;\n    state = this._stack[this._index];\n    this.editor.body.get(0).innerHTML = state.html;\n    this.caretPosition(state.caret);\n    this.editor.body.find('.selected').removeClass('selected');\n    this.editor.sync();\n    return this.editor.trigger('valuechanged', ['redo']);\n  };\n\n  UndoManager.prototype.update = function() {\n    var currentState;\n    currentState = this.currentState();\n    if (!currentState) {\n      return;\n    }\n    currentState.html = this.editor.body.html();\n    return currentState.caret = this.caretPosition();\n  };\n\n  UndoManager.prototype._getNodeOffset = function(node, index) {\n    var $parent, merging, offset;\n    if ($.isNumeric(index)) {\n      $parent = $(node);\n    } else {\n      $parent = $(node).parent();\n    }\n    offset = 0;\n    merging = false;\n    $parent.contents().each(function(i, child) {\n      if (node === child || (index === i && i === 0)) {\n        return false;\n      }\n      if (child.nodeType === Node.TEXT_NODE) {\n        if (!merging && child.nodeValue.length > 0) {\n          offset += 1;\n          merging = true;\n        }\n      } else {\n        offset += 1;\n        merging = false;\n      }\n      if (index - 1 === i) {\n        return false;\n      }\n      return null;\n    });\n    return offset;\n  };\n\n  UndoManager.prototype._getPosition = function(type) {\n    var $nodes, node, nodes, offset, position, prevNode, range;\n    if (type == null) {\n      type = 'start';\n    }\n    range = this.editor.selection.range();\n    offset = range[type + \"Offset\"];\n    $nodes = this.editor.selection[type + \"Nodes\"]();\n    node = $nodes.first()[0];\n    if (node.nodeType === Node.TEXT_NODE) {\n      prevNode = node.previousSibling;\n      while (prevNode && prevNode.nodeType === Node.TEXT_NODE) {\n        node = prevNode;\n        offset += this.editor.util.getNodeLength(prevNode);\n        prevNode = prevNode.previousSibling;\n      }\n      nodes = $nodes.get();\n      nodes[0] = node;\n      $nodes = $(nodes);\n    } else {\n      offset = this._getNodeOffset(node, offset);\n    }\n    position = [offset];\n    $nodes.each((function(_this) {\n      return function(i, node) {\n        return position.unshift(_this._getNodeOffset(node));\n      };\n    })(this));\n    return position;\n  };\n\n  UndoManager.prototype._getNodeByPosition = function(position) {\n    var child, childNodes, i, k, len, node, offset, ref;\n    node = this.editor.body[0];\n    ref = position.slice(0, position.length - 1);\n    for (i = k = 0, len = ref.length; k < len; i = ++k) {\n      offset = ref[i];\n      childNodes = node.childNodes;\n      if (offset > childNodes.length - 1) {\n        if (i === position.length - 2 && $(node).is('pre:empty')) {\n          child = document.createTextNode('');\n          node.appendChild(child);\n          childNodes = node.childNodes;\n        } else {\n          node = null;\n          break;\n        }\n      }\n      node = childNodes[offset];\n    }\n    return node;\n  };\n\n  UndoManager.prototype.caretPosition = function(caret) {\n    var endContainer, endOffset, range, startContainer, startOffset;\n    if (!caret) {\n      range = this.editor.selection.range();\n      caret = this.editor.inputManager.focused && (range != null) ? {\n        start: this.startPosition(),\n        end: this.endPosition(),\n        collapsed: range.collapsed\n      } : {};\n      return caret;\n    } else {\n      if (!caret.start) {\n        return;\n      }\n      startContainer = this._getNodeByPosition(caret.start);\n      startOffset = caret.start[caret.start.length - 1];\n      if (caret.collapsed) {\n        endContainer = startContainer;\n        endOffset = startOffset;\n      } else {\n        endContainer = this._getNodeByPosition(caret.end);\n        endOffset = caret.start[caret.start.length - 1];\n      }\n      if (!startContainer || !endContainer) {\n        if (typeof console !== \"undefined\" && console !== null) {\n          if (typeof console.warn === \"function\") {\n            console.warn('simditor: invalid caret state');\n          }\n        }\n        return;\n      }\n      range = document.createRange();\n      range.setStart(startContainer, startOffset);\n      range.setEnd(endContainer, endOffset);\n      return this.editor.selection.range(range);\n    }\n  };\n\n  return UndoManager;\n\n})(SimpleModule);\n\nUtil = (function(superClass) {\n  extend(Util, superClass);\n\n  function Util() {\n    return Util.__super__.constructor.apply(this, arguments);\n  }\n\n  Util.pluginName = 'Util';\n\n  Util.prototype._init = function() {\n    this.editor = this._module;\n    if (this.browser.msie && this.browser.version < 11) {\n      return this.phBr = '';\n    }\n  };\n\n  Util.prototype.phBr = '<br/>';\n\n  Util.prototype.os = (function() {\n    var os;\n    os = {};\n    if (/Mac/.test(navigator.appVersion)) {\n      os.mac = true;\n    } else if (/Linux/.test(navigator.appVersion)) {\n      os.linux = true;\n    } else if (/Win/.test(navigator.appVersion)) {\n      os.win = true;\n    } else if (/X11/.test(navigator.appVersion)) {\n      os.unix = true;\n    }\n    if (/Mobi/.test(navigator.appVersion)) {\n      os.mobile = true;\n    }\n    return os;\n  })();\n\n  Util.prototype.browser = (function() {\n    var chrome, edge, firefox, ie, ref, ref1, ref2, ref3, ref4, safari, ua;\n    ua = navigator.userAgent;\n    ie = /(msie|trident)/i.test(ua);\n    chrome = /chrome|crios/i.test(ua);\n    safari = /safari/i.test(ua) && !chrome;\n    firefox = /firefox/i.test(ua);\n    edge = /edge/i.test(ua);\n    if (ie) {\n      return {\n        msie: true,\n        version: ((ref = ua.match(/(msie |rv:)(\\d+(\\.\\d+)?)/i)) != null ? ref[2] : void 0) * 1\n      };\n    } else if (edge) {\n      return {\n        edge: true,\n        webkit: true,\n        version: ((ref1 = ua.match(/edge\\/(\\d+(\\.\\d+)?)/i)) != null ? ref1[1] : void 0) * 1\n      };\n    } else if (chrome) {\n      return {\n        webkit: true,\n        chrome: true,\n        version: ((ref2 = ua.match(/(?:chrome|crios)\\/(\\d+(\\.\\d+)?)/i)) != null ? ref2[1] : void 0) * 1\n      };\n    } else if (safari) {\n      return {\n        webkit: true,\n        safari: true,\n        version: ((ref3 = ua.match(/version\\/(\\d+(\\.\\d+)?)/i)) != null ? ref3[1] : void 0) * 1\n      };\n    } else if (firefox) {\n      return {\n        mozilla: true,\n        firefox: true,\n        version: ((ref4 = ua.match(/firefox\\/(\\d+(\\.\\d+)?)/i)) != null ? ref4[1] : void 0) * 1\n      };\n    } else {\n      return {};\n    }\n  })();\n\n  Util.prototype.support = (function() {\n    return {\n      onselectionchange: (function() {\n        var e, onselectionchange;\n        onselectionchange = document.onselectionchange;\n        if (onselectionchange !== void 0) {\n          try {\n            document.onselectionchange = 0;\n            return document.onselectionchange === null;\n          } catch (_error) {\n            e = _error;\n          } finally {\n            document.onselectionchange = onselectionchange;\n          }\n        }\n        return false;\n      })(),\n      oninput: (function() {\n        return !/(msie|trident)/i.test(navigator.userAgent);\n      })()\n    };\n  })();\n\n  Util.prototype.reflow = function(el) {\n    if (el == null) {\n      el = document;\n    }\n    return $(el)[0].offsetHeight;\n  };\n\n  Util.prototype.metaKey = function(e) {\n    var isMac;\n    isMac = /Mac/.test(navigator.userAgent);\n    if (isMac) {\n      return e.metaKey;\n    } else {\n      return e.ctrlKey;\n    }\n  };\n\n  Util.prototype.isEmptyNode = function(node) {\n    var $node;\n    $node = $(node);\n    return $node.is(':empty') || (!$node.text() && !$node.find(':not(br, span, div)').length);\n  };\n\n  Util.prototype.isDecoratedNode = function(node) {\n    return $(node).is('[class^=\"simditor-\"]');\n  };\n\n  Util.prototype.blockNodes = [\"div\", \"p\", \"ul\", \"ol\", \"li\", \"blockquote\", \"hr\", \"pre\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"table\"];\n\n  Util.prototype.isBlockNode = function(node) {\n    node = $(node)[0];\n    if (!node || node.nodeType === 3) {\n      return false;\n    }\n    return new RegExp(\"^(\" + (this.blockNodes.join('|')) + \")$\").test(node.nodeName.toLowerCase());\n  };\n\n  Util.prototype.getNodeLength = function(node) {\n    node = $(node)[0];\n    switch (node.nodeType) {\n      case 7:\n      case 10:\n        return 0;\n      case 3:\n      case 8:\n        return node.length;\n      default:\n        return node.childNodes.length;\n    }\n  };\n\n  Util.prototype.dataURLtoBlob = function(dataURL) {\n    var BlobBuilder, arrayBuffer, bb, blobArray, byteString, hasArrayBufferViewSupport, hasBlobConstructor, i, intArray, k, mimeString, ref, supportBlob;\n    hasBlobConstructor = window.Blob && (function() {\n      var e;\n      try {\n        return Boolean(new Blob());\n      } catch (_error) {\n        e = _error;\n        return false;\n      }\n    })();\n    hasArrayBufferViewSupport = hasBlobConstructor && window.Uint8Array && (function() {\n      var e;\n      try {\n        return new Blob([new Uint8Array(100)]).size === 100;\n      } catch (_error) {\n        e = _error;\n        return false;\n      }\n    })();\n    BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\n    supportBlob = hasBlobConstructor || BlobBuilder;\n    if (!(supportBlob && window.atob && window.ArrayBuffer && window.Uint8Array)) {\n      return false;\n    }\n    if (dataURL.split(',')[0].indexOf('base64') >= 0) {\n      byteString = atob(dataURL.split(',')[1]);\n    } else {\n      byteString = decodeURIComponent(dataURL.split(',')[1]);\n    }\n    arrayBuffer = new ArrayBuffer(byteString.length);\n    intArray = new Uint8Array(arrayBuffer);\n    for (i = k = 0, ref = byteString.length; 0 <= ref ? k <= ref : k >= ref; i = 0 <= ref ? ++k : --k) {\n      intArray[i] = byteString.charCodeAt(i);\n    }\n    mimeString = dataURL.split(',')[0].split(':')[1].split(';')[0];\n    if (hasBlobConstructor) {\n      blobArray = hasArrayBufferViewSupport ? intArray : arrayBuffer;\n      return new Blob([blobArray], {\n        type: mimeString\n      });\n    }\n    bb = new BlobBuilder();\n    bb.append(arrayBuffer);\n    return bb.getBlob(mimeString);\n  };\n\n  Util.prototype.throttle = function(func, wait) {\n    var args, call, ctx, last, rtn, throttled, timeoutID;\n    last = 0;\n    timeoutID = 0;\n    ctx = args = rtn = null;\n    call = function() {\n      timeoutID = 0;\n      last = +new Date();\n      rtn = func.apply(ctx, args);\n      ctx = null;\n      return args = null;\n    };\n    throttled = function() {\n      var delta;\n      ctx = this;\n      args = arguments;\n      delta = new Date() - last;\n      if (!timeoutID) {\n        if (delta >= wait) {\n          call();\n        } else {\n          timeoutID = setTimeout(call, wait - delta);\n        }\n      }\n      return rtn;\n    };\n    throttled.clear = function() {\n      if (!timeoutID) {\n        return;\n      }\n      clearTimeout(timeoutID);\n      return call();\n    };\n    return throttled;\n  };\n\n  Util.prototype.formatHTML = function(html) {\n    var cursor, indentString, lastMatch, level, match, re, repeatString, result, str;\n    re = /<(\\/?)(.+?)(\\/?)>/g;\n    result = '';\n    level = 0;\n    lastMatch = null;\n    indentString = '  ';\n    repeatString = function(str, n) {\n      return new Array(n + 1).join(str);\n    };\n    while ((match = re.exec(html)) !== null) {\n      match.isBlockNode = $.inArray(match[2], this.blockNodes) > -1;\n      match.isStartTag = match[1] !== '/' && match[3] !== '/';\n      match.isEndTag = match[1] === '/' || match[3] === '/';\n      cursor = lastMatch ? lastMatch.index + lastMatch[0].length : 0;\n      if ((str = html.substring(cursor, match.index)).length > 0 && $.trim(str)) {\n        result += str;\n      }\n      if (match.isBlockNode && match.isEndTag && !match.isStartTag) {\n        level -= 1;\n      }\n      if (match.isBlockNode && match.isStartTag) {\n        if (!(lastMatch && lastMatch.isBlockNode && lastMatch.isEndTag)) {\n          result += '\\n';\n        }\n        result += repeatString(indentString, level);\n      }\n      result += match[0];\n      if (match.isBlockNode && match.isEndTag) {\n        result += '\\n';\n      }\n      if (match.isBlockNode && match.isStartTag) {\n        level += 1;\n      }\n      lastMatch = match;\n    }\n    return $.trim(result);\n  };\n\n  return Util;\n\n})(SimpleModule);\n\nToolbar = (function(superClass) {\n  extend(Toolbar, superClass);\n\n  function Toolbar() {\n    return Toolbar.__super__.constructor.apply(this, arguments);\n  }\n\n  Toolbar.pluginName = 'Toolbar';\n\n  Toolbar.prototype.opts = {\n    toolbar: true,\n    toolbarFloat: true,\n    toolbarHidden: false,\n    toolbarFloatOffset: 0\n  };\n\n  Toolbar.prototype._tpl = {\n    wrapper: '<div class=\"simditor-toolbar\"><ul></ul></div>',\n    separator: '<li><span class=\"separator\"></span></li>'\n  };\n\n  Toolbar.prototype._init = function() {\n    var floatInitialized, initToolbarFloat, toolbarHeight;\n    this.editor = this._module;\n    if (!this.opts.toolbar) {\n      return;\n    }\n    if (!$.isArray(this.opts.toolbar)) {\n      this.opts.toolbar = ['bold', 'italic', 'underline', 'strikethrough', '|', 'ol', 'ul', 'blockquote', 'code', '|', 'link', 'image', '|', 'indent', 'outdent'];\n    }\n    this._render();\n    this.list.on('click', function(e) {\n      return false;\n    });\n    this.wrapper.on('mousedown', (function(_this) {\n      return function(e) {\n        return _this.list.find('.menu-on').removeClass('.menu-on');\n      };\n    })(this));\n    $(document).on('mousedown.simditor' + this.editor.id, (function(_this) {\n      return function(e) {\n        return _this.list.find('.menu-on').removeClass('.menu-on');\n      };\n    })(this));\n    if (!this.opts.toolbarHidden && this.opts.toolbarFloat) {\n      this.wrapper.css('top', this.opts.toolbarFloatOffset);\n      toolbarHeight = 0;\n      initToolbarFloat = (function(_this) {\n        return function() {\n          _this.wrapper.css('position', 'static');\n          _this.wrapper.width('auto');\n          _this.editor.util.reflow(_this.wrapper);\n          _this.wrapper.width(_this.wrapper.outerWidth());\n          _this.wrapper.css('left', _this.editor.util.os.mobile ? _this.wrapper.position().left : _this.wrapper.offset().left);\n          _this.wrapper.css('position', '');\n          toolbarHeight = _this.wrapper.outerHeight();\n          _this.editor.placeholderEl.css('top', toolbarHeight);\n          return true;\n        };\n      })(this);\n      floatInitialized = null;\n      $(window).on('resize.simditor-' + this.editor.id, function(e) {\n        return floatInitialized = initToolbarFloat();\n      });\n      $(window).on('scroll.simditor-' + this.editor.id, (function(_this) {\n        return function(e) {\n          var bottomEdge, scrollTop, topEdge;\n          if (!_this.wrapper.is(':visible')) {\n            return;\n          }\n          topEdge = _this.editor.wrapper.offset().top;\n          bottomEdge = topEdge + _this.editor.wrapper.outerHeight() - 80;\n          scrollTop = $(document).scrollTop() + _this.opts.toolbarFloatOffset;\n          if (scrollTop <= topEdge || scrollTop >= bottomEdge) {\n            _this.editor.wrapper.removeClass('toolbar-floating').css('padding-top', '');\n            if (_this.editor.util.os.mobile) {\n              return _this.wrapper.css('top', _this.opts.toolbarFloatOffset);\n            }\n          } else {\n            floatInitialized || (floatInitialized = initToolbarFloat());\n            _this.editor.wrapper.addClass('toolbar-floating').css('padding-top', toolbarHeight);\n            if (_this.editor.util.os.mobile) {\n              return _this.wrapper.css('top', scrollTop - topEdge + _this.opts.toolbarFloatOffset);\n            }\n          }\n        };\n      })(this));\n    }\n    this.editor.on('destroy', (function(_this) {\n      return function() {\n        return _this.buttons.length = 0;\n      };\n    })(this));\n    return $(document).on(\"mousedown.simditor-\" + this.editor.id, (function(_this) {\n      return function(e) {\n        return _this.list.find('li.menu-on').removeClass('menu-on');\n      };\n    })(this));\n  };\n\n  Toolbar.prototype._render = function() {\n    var k, len, name, ref;\n    this.buttons = [];\n    this.wrapper = $(this._tpl.wrapper).prependTo(this.editor.wrapper);\n    this.list = this.wrapper.find('ul');\n    ref = this.opts.toolbar;\n    for (k = 0, len = ref.length; k < len; k++) {\n      name = ref[k];\n      if (name === '|') {\n        $(this._tpl.separator).appendTo(this.list);\n        continue;\n      }\n      if (!this.constructor.buttons[name]) {\n        throw new Error(\"simditor: invalid toolbar button \" + name);\n        continue;\n      }\n      this.buttons.push(new this.constructor.buttons[name]({\n        editor: this.editor\n      }));\n    }\n    if (this.opts.toolbarHidden) {\n      return this.wrapper.hide();\n    }\n  };\n\n  Toolbar.prototype.findButton = function(name) {\n    var button;\n    button = this.list.find('.toolbar-item-' + name).data('button');\n    return button != null ? button : null;\n  };\n\n  Toolbar.addButton = function(btn) {\n    return this.buttons[btn.prototype.name] = btn;\n  };\n\n  Toolbar.buttons = {};\n\n  return Toolbar;\n\n})(SimpleModule);\n\nIndentation = (function(superClass) {\n  extend(Indentation, superClass);\n\n  function Indentation() {\n    return Indentation.__super__.constructor.apply(this, arguments);\n  }\n\n  Indentation.pluginName = 'Indentation';\n\n  Indentation.prototype.opts = {\n    tabIndent: true\n  };\n\n  Indentation.prototype._init = function() {\n    this.editor = this._module;\n    return this.editor.keystroke.add('tab', '*', (function(_this) {\n      return function(e) {\n        var codeButton;\n        codeButton = _this.editor.toolbar.findButton('code');\n        if (!(_this.opts.tabIndent || (codeButton && codeButton.active))) {\n          return;\n        }\n        return _this.indent(e.shiftKey);\n      };\n    })(this));\n  };\n\n  Indentation.prototype.indent = function(isBackward) {\n    var $blockNodes, $endNodes, $startNodes, nodes, result;\n    $startNodes = this.editor.selection.startNodes();\n    $endNodes = this.editor.selection.endNodes();\n    $blockNodes = this.editor.selection.blockNodes();\n    nodes = [];\n    $blockNodes = $blockNodes.each(function(i, node) {\n      var include, j, k, len, n;\n      include = true;\n      for (j = k = 0, len = nodes.length; k < len; j = ++k) {\n        n = nodes[j];\n        if ($.contains(node, n)) {\n          include = false;\n          break;\n        } else if ($.contains(n, node)) {\n          nodes.splice(j, 1, node);\n          include = false;\n          break;\n        }\n      }\n      if (include) {\n        return nodes.push(node);\n      }\n    });\n    $blockNodes = $(nodes);\n    result = false;\n    $blockNodes.each((function(_this) {\n      return function(i, blockEl) {\n        var r;\n        r = isBackward ? _this.outdentBlock(blockEl) : _this.indentBlock(blockEl);\n        if (r) {\n          return result = r;\n        }\n      };\n    })(this));\n    return result;\n  };\n\n  Indentation.prototype.indentBlock = function(blockEl) {\n    var $blockEl, $childList, $nextTd, $nextTr, $parentLi, $pre, $td, $tr, marginLeft, tagName;\n    $blockEl = $(blockEl);\n    if (!$blockEl.length) {\n      return;\n    }\n    if ($blockEl.is('pre')) {\n      $pre = this.editor.selection.containerNode();\n      if (!($pre.is($blockEl) || $pre.closest('pre').is($blockEl))) {\n        return;\n      }\n      this.indentText(this.editor.selection.range());\n    } else if ($blockEl.is('li')) {\n      $parentLi = $blockEl.prev('li');\n      if ($parentLi.length < 1) {\n        return;\n      }\n      this.editor.selection.save();\n      tagName = $blockEl.parent()[0].tagName;\n      $childList = $parentLi.children('ul, ol');\n      if ($childList.length > 0) {\n        $childList.append($blockEl);\n      } else {\n        $('<' + tagName + '/>').append($blockEl).appendTo($parentLi);\n      }\n      this.editor.selection.restore();\n    } else if ($blockEl.is('p, h1, h2, h3, h4')) {\n      marginLeft = parseInt($blockEl.css('margin-left')) || 0;\n      marginLeft = (Math.round(marginLeft / this.opts.indentWidth) + 1) * this.opts.indentWidth;\n      $blockEl.css('margin-left', marginLeft);\n    } else if ($blockEl.is('table') || $blockEl.is('.simditor-table')) {\n      $td = this.editor.selection.containerNode().closest('td, th');\n      $nextTd = $td.next('td, th');\n      if (!($nextTd.length > 0)) {\n        $tr = $td.parent('tr');\n        $nextTr = $tr.next('tr');\n        if ($nextTr.length < 1 && $tr.parent().is('thead')) {\n          $nextTr = $tr.parent('thead').next('tbody').find('tr:first');\n        }\n        $nextTd = $nextTr.find('td:first, th:first');\n      }\n      if (!($td.length > 0 && $nextTd.length > 0)) {\n        return;\n      }\n      this.editor.selection.setRangeAtEndOf($nextTd);\n    } else {\n      return false;\n    }\n    return true;\n  };\n\n  Indentation.prototype.indentText = function(range) {\n    var text, textNode;\n    text = range.toString().replace(/^(?=.+)/mg, '\\u00A0\\u00A0');\n    textNode = document.createTextNode(text || '\\u00A0\\u00A0');\n    range.deleteContents();\n    range.insertNode(textNode);\n    if (text) {\n      range.selectNode(textNode);\n      return this.editor.selection.range(range);\n    } else {\n      return this.editor.selection.setRangeAfter(textNode);\n    }\n  };\n\n  Indentation.prototype.outdentBlock = function(blockEl) {\n    var $blockEl, $parent, $parentLi, $pre, $prevTd, $prevTr, $td, $tr, marginLeft, range;\n    $blockEl = $(blockEl);\n    if (!($blockEl && $blockEl.length > 0)) {\n      return;\n    }\n    if ($blockEl.is('pre')) {\n      $pre = this.editor.selection.containerNode();\n      if (!($pre.is($blockEl) || $pre.closest('pre').is($blockEl))) {\n        return;\n      }\n      this.outdentText(range);\n    } else if ($blockEl.is('li')) {\n      $parent = $blockEl.parent();\n      $parentLi = $parent.parent('li');\n      this.editor.selection.save();\n      if ($parentLi.length < 1) {\n        range = document.createRange();\n        range.setStartBefore($parent[0]);\n        range.setEndBefore($blockEl[0]);\n        $parent.before(range.extractContents());\n        $('<p/>').insertBefore($parent).after($blockEl.children('ul, ol')).append($blockEl.contents());\n        $blockEl.remove();\n      } else {\n        if ($blockEl.next('li').length > 0) {\n          $('<' + $parent[0].tagName + '/>').append($blockEl.nextAll('li')).appendTo($blockEl);\n        }\n        $blockEl.insertAfter($parentLi);\n        if ($parent.children('li').length < 1) {\n          $parent.remove();\n        }\n      }\n      this.editor.selection.restore();\n    } else if ($blockEl.is('p, h1, h2, h3, h4')) {\n      marginLeft = parseInt($blockEl.css('margin-left')) || 0;\n      marginLeft = Math.max(Math.round(marginLeft / this.opts.indentWidth) - 1, 0) * this.opts.indentWidth;\n      $blockEl.css('margin-left', marginLeft === 0 ? '' : marginLeft);\n    } else if ($blockEl.is('table') || $blockEl.is('.simditor-table')) {\n      $td = this.editor.selection.containerNode().closest('td, th');\n      $prevTd = $td.prev('td, th');\n      if (!($prevTd.length > 0)) {\n        $tr = $td.parent('tr');\n        $prevTr = $tr.prev('tr');\n        if ($prevTr.length < 1 && $tr.parent().is('tbody')) {\n          $prevTr = $tr.parent('tbody').prev('thead').find('tr:first');\n        }\n        $prevTd = $prevTr.find('td:last, th:last');\n      }\n      if (!($td.length > 0 && $prevTd.length > 0)) {\n        return;\n      }\n      this.editor.selection.setRangeAtEndOf($prevTd);\n    } else {\n      return false;\n    }\n    return true;\n  };\n\n  Indentation.prototype.outdentText = function(range) {};\n\n  return Indentation;\n\n})(SimpleModule);\n\nClipboard = (function(superClass) {\n  extend(Clipboard, superClass);\n\n  function Clipboard() {\n    return Clipboard.__super__.constructor.apply(this, arguments);\n  }\n\n  Clipboard.pluginName = 'Clipboard';\n\n  Clipboard.prototype.opts = {\n    pasteImage: false,\n    cleanPaste: false\n  };\n\n  Clipboard.prototype._init = function() {\n    this.editor = this._module;\n    if (this.opts.pasteImage && typeof this.opts.pasteImage !== 'string') {\n      this.opts.pasteImage = 'inline';\n    }\n    return this.editor.body.on('paste', (function(_this) {\n      return function(e) {\n        var range;\n        if (_this.pasting || _this._pasteBin) {\n          return;\n        }\n        if (_this.editor.triggerHandler(e) === false) {\n          return false;\n        }\n        range = _this.editor.selection.deleteRangeContents();\n        if (_this.editor.body.html()) {\n          if (!range.collapsed) {\n            range.collapse(true);\n          }\n        } else {\n          _this.editor.formatter.format();\n          _this.editor.selection.setRangeAtStartOf(_this.editor.body.find('p:first'));\n        }\n        if (_this._processPasteByClipboardApi(e)) {\n          return false;\n        }\n        _this.editor.inputManager.throttledValueChanged.clear();\n        _this.editor.inputManager.throttledSelectionChanged.clear();\n        _this.editor.undoManager.throttledPushState.clear();\n        _this.editor.selection.reset();\n        _this.editor.undoManager.resetCaretPosition();\n        _this.pasting = true;\n        return _this._getPasteContent(function(pasteContent) {\n          _this._processPasteContent(pasteContent);\n          _this._pasteInBlockEl = null;\n          _this._pastePlainText = null;\n          return _this.pasting = false;\n        });\n      };\n    })(this));\n  };\n\n  Clipboard.prototype._processPasteByClipboardApi = function(e) {\n    var imageFile, pasteItem, ref, uploadOpt;\n    if (this.editor.util.browser.edge) {\n      return;\n    }\n    if (e.originalEvent.clipboardData && e.originalEvent.clipboardData.items && e.originalEvent.clipboardData.items.length > 0) {\n      pasteItem = e.originalEvent.clipboardData.items[0];\n      if (/^image\\//.test(pasteItem.type)) {\n        imageFile = pasteItem.getAsFile();\n        if (!((imageFile != null) && this.opts.pasteImage)) {\n          return;\n        }\n        if (!imageFile.name) {\n          imageFile.name = \"Clipboard Image.png\";\n        }\n        if (this.editor.triggerHandler('pasting', [imageFile]) === false) {\n          return;\n        }\n        uploadOpt = {};\n        uploadOpt[this.opts.pasteImage] = true;\n        if ((ref = this.editor.uploader) != null) {\n          ref.upload(imageFile, uploadOpt);\n        }\n        return true;\n      }\n    }\n  };\n\n  Clipboard.prototype._getPasteContent = function(callback) {\n    var state;\n    this._pasteBin = $('<div contenteditable=\"true\" />').addClass('simditor-paste-bin').attr('tabIndex', '-1').appendTo(this.editor.el);\n    state = {\n      html: this.editor.body.html(),\n      caret: this.editor.undoManager.caretPosition()\n    };\n    this._pasteBin.focus();\n    return setTimeout((function(_this) {\n      return function() {\n        var pasteContent, $el, $parent, $li;\n        _this.editor.hidePopover();\n        _this.editor.body.get(0).innerHTML = state.html;\n        _this.editor.undoManager.caretPosition(state.caret);\n        _this.editor.body.focus();\n        _this.editor.selection.reset();\n        _this.editor.selection.range();\n        _this._pasteInBlockEl = _this.editor.selection.blockNodes().last();\n\n        _this._pasteBin.children('style').remove(); //mod-for-jl\n        _this._pasteBin.find('ul').each(function(i, ul){ $(ul).before($('<ol/>').append($(ul).find('li'))); $(ul).remove();}); //mod-for-jl\n        _this._pasteBin.find('ol').find('li').children('p').each(function(i, p){ $(p).after($(p).html()); $(p).remove(); }); //mod-for-jl\n        // console.log(_this._pasteBin.html());\n        _this._pastePlainText = _this.opts.cleanPaste || _this._pasteInBlockEl.is('pre, table');\n        if (_this._pastePlainText) {\n          pasteContent = _this.editor.formatter.clearHtml(_this._pasteBin.html(), true);\n        } else {\n          pasteContent = $('<div/>').append(_this._pasteBin.contents());\n          pasteContent.find('table colgroup').remove();\n          _this.editor.formatter.format(pasteContent);\n          _this.editor.formatter.decorate(pasteContent);\n          _this.editor.formatter.beautify(pasteContent.children());\n          pasteContent.find('p').each(function(i, p){ if($(p).html()=='\t\t\t\t') $(p).html('<br>'); }) //mod-for-jl\n          pasteContent = pasteContent.contents();\n        }\n        _this._pasteBin.remove();\n        _this._pasteBin = null;\n        return callback(pasteContent);\n      };\n    })(this), 0);\n  };\n\n  Clipboard.prototype._processPasteContent = function(pasteContent) {\n    var $blockEl, $img, blob, children, insertPosition, k, l, lastLine, len, len1, len2, len3, len4, line, lines, m, node, o, q, ref, ref1, ref2, uploadOpt;\n    if (this.editor.triggerHandler('pasting', [pasteContent]) === false) {\n      return;\n    }\n    $blockEl = this._pasteInBlockEl;\n    if (!pasteContent) {\n      return;\n    } else if (this._pastePlainText) {\n      if ($blockEl.is('table')) {\n        lines = pasteContent.split('\\n');\n        lastLine = lines.pop();\n        for (k = 0, len = lines.length; k < len; k++) {\n          line = lines[k];\n          this.editor.selection.insertNode(document.createTextNode(line));\n          this.editor.selection.insertNode($('<br/>'));\n        }\n        this.editor.selection.insertNode(document.createTextNode(lastLine));\n      } else {\n        pasteContent = $('<div/>').text(pasteContent);\n        ref = pasteContent.contents();\n        for (l = 0, len1 = ref.length; l < len1; l++) {\n          node = ref[l];\n          this.editor.selection.insertNode($(node)[0]);\n        }\n      }\n    } else if ($blockEl.is(this.editor.body)) {\n      for (m = 0, len2 = pasteContent.length; m < len2; m++) {\n        node = pasteContent[m];\n        this.editor.selection.insertNode(node);\n      }\n    } else if (pasteContent.length < 1) {\n      return;\n    } else if (pasteContent.length === 1) {\n      if (pasteContent.is('p')) {\n        children = pasteContent.contents();\n        if (children.length === 1 && children.is('img')) {\n          $img = children;\n          if (/^data:image/.test($img.attr('src'))) {\n            if (!this.opts.pasteImage) {\n              return;\n            }\n            blob = this.editor.util.dataURLtoBlob($img.attr(\"src\"));\n            blob.name = \"Clipboard Image.png\";\n            uploadOpt = {};\n            uploadOpt[this.opts.pasteImage] = true;\n            if ((ref1 = this.editor.uploader) != null) {\n              ref1.upload(blob, uploadOpt);\n            }\n            return;\n          } else if ($img.is('img[src^=\"webkit-fake-url://\"]')) {\n            return;\n          }\n        }\n        for (o = 0, len3 = children.length; o < len3; o++) {\n          node = children[o];\n          this.editor.selection.insertNode(node);\n        }\n      } else if ($blockEl.is('p') && this.editor.util.isEmptyNode($blockEl)) {\n        $blockEl.replaceWith(pasteContent);\n        this.editor.selection.setRangeAtEndOf(pasteContent);\n      } else if (pasteContent.is('ul, ol')) {\n        if (pasteContent.find('li').length === 1) {\n          pasteContent = $('<div/>').text(pasteContent.text());\n          ref2 = pasteContent.contents();\n          for (q = 0, len4 = ref2.length; q < len4; q++) {\n            node = ref2[q];\n            this.editor.selection.insertNode($(node)[0]);\n          }\n        } else if ($blockEl.is('li')) {\n          $blockEl.parent().after(pasteContent);\n          this.editor.selection.setRangeAtEndOf(pasteContent);\n        } else {\n          $blockEl.after(pasteContent);\n          this.editor.selection.setRangeAtEndOf(pasteContent);\n        }\n      } else {\n        $blockEl.after(pasteContent);\n        this.editor.selection.setRangeAtEndOf(pasteContent);\n      }\n    } else {\n      if ($blockEl.is('li')) {\n        $blockEl = $blockEl.parent();\n      }\n      if (this.editor.selection.rangeAtStartOf($blockEl)) {\n        insertPosition = 'before';\n      } else if (this.editor.selection.rangeAtEndOf($blockEl)) {\n        insertPosition = 'after';\n      } else {\n        this.editor.selection.breakBlockEl($blockEl);\n        insertPosition = 'before';\n      }\n      $blockEl[insertPosition](pasteContent);\n      this.editor.selection.setRangeAtEndOf(pasteContent.last());\n    }\n    return this.editor.inputManager.throttledValueChanged();\n  };\n\n  return Clipboard;\n\n})(SimpleModule);\n\nSimditor = (function(superClass) {\n  extend(Simditor, superClass);\n\n  function Simditor() {\n    return Simditor.__super__.constructor.apply(this, arguments);\n  }\n\n  Simditor.connect(Util);\n\n  Simditor.connect(InputManager);\n\n  Simditor.connect(Selection);\n\n  Simditor.connect(UndoManager);\n\n  Simditor.connect(Keystroke);\n\n  Simditor.connect(Formatter);\n\n  Simditor.connect(Toolbar);\n\n  Simditor.connect(Indentation);\n\n  Simditor.connect(Clipboard);\n\n  Simditor.count = 0;\n\n  Simditor.prototype.opts = {\n    textarea: null,\n    placeholder: '',\n    defaultImage: 'images/image.png',\n    params: {},\n    upload: false,\n    indentWidth: 40\n  };\n\n  Simditor.prototype._init = function() {\n    var e, editor, form, uploadOpts;\n    this.textarea = $(this.opts.textarea);\n    this.opts.placeholder = this.opts.placeholder || this.textarea.attr('placeholder');\n    if (!this.textarea.length) {\n      throw new Error('simditor: param textarea is required.');\n      return;\n    }\n    editor = this.textarea.data('simditor');\n    if (editor != null) {\n      editor.destroy();\n    }\n    this.id = ++Simditor.count;\n    this._render();\n    if (simpleHotkeys) {\n      this.hotkeys = simpleHotkeys({\n        el: this.body\n      });\n    } else {\n      throw new Error('simditor: simple-hotkeys is required.');\n      return;\n    }\n    if (this.opts.upload && simpleUploader) {\n      uploadOpts = typeof this.opts.upload === 'object' ? this.opts.upload : {};\n      this.uploader = simpleUploader(uploadOpts);\n    }\n    form = this.textarea.closest('form');\n    if (form.length) {\n      form.on('submit.simditor-' + this.id, (function(_this) {\n        return function() {\n          return _this.sync();\n        };\n      })(this));\n      form.on('reset.simditor-' + this.id, (function(_this) {\n        return function() {\n          return _this.setValue('');\n        };\n      })(this));\n    }\n    this.on('initialized', (function(_this) {\n      return function() {\n        if (_this.opts.placeholder) {\n          _this.on('valuechanged', function() {\n            return _this._placeholder();\n          });\n        }\n        _this.setValue(_this.textarea.val().trim() || '');\n        if (_this.textarea.attr('autofocus')) {\n          return _this.focus();\n        }\n      };\n    })(this));\n    if (this.util.browser.mozilla) {\n      this.util.reflow();\n      try {\n        document.execCommand('enableObjectResizing', false, false);\n        return document.execCommand('enableInlineTableEditing', false, false);\n      } catch (_error) {\n        e = _error;\n      }\n    }\n  };\n\n  Simditor.prototype._tpl = \"<div class=\\\"simditor\\\">\\n  <div class=\\\"simditor-wrapper\\\">\\n    <div class=\\\"simditor-placeholder\\\"></div>\\n    <div class=\\\"simditor-body\\\" contenteditable=\\\"true\\\">\\n    </div>\\n  </div>\\n</div>\";\n\n  Simditor.prototype._render = function() {\n    var key, ref, results, val;\n    this.el = $(this._tpl).insertBefore(this.textarea);\n    this.wrapper = this.el.find('.simditor-wrapper');\n    this.body = this.wrapper.find('.simditor-body');\n    this.placeholderEl = this.wrapper.find('.simditor-placeholder').append(this.opts.placeholder);\n    this.el.data('simditor', this);\n    this.wrapper.append(this.textarea);\n    this.textarea.data('simditor', this).blur();\n    this.body.attr('tabindex', this.textarea.attr('tabindex'));\n    if (this.util.os.mac) {\n      this.el.addClass('simditor-mac');\n    } else if (this.util.os.linux) {\n      this.el.addClass('simditor-linux');\n    }\n    if (this.util.os.mobile) {\n      this.el.addClass('simditor-mobile');\n    }\n    if (this.opts.params) {\n      ref = this.opts.params;\n      results = [];\n      for (key in ref) {\n        val = ref[key];\n        results.push($('<input/>', {\n          type: 'hidden',\n          name: key,\n          value: val\n        }).insertAfter(this.textarea));\n      }\n      return results;\n    }\n  };\n\n  Simditor.prototype._placeholder = function() {\n    var children;\n    children = this.body.children();\n    if (children.length === 0 || (children.length === 1 && this.util.isEmptyNode(children) && parseInt(children.css('margin-left') || 0) < this.opts.indentWidth)) {\n      return this.placeholderEl.show();\n    } else {\n      return this.placeholderEl.hide();\n    }\n  };\n\n  Simditor.prototype.setValue = function(val) {\n    this.hidePopover();\n    this.textarea.val(val);\n    this.body.get(0).innerHTML = val;\n    this.formatter.format();\n    this.formatter.decorate();\n    this.util.reflow(this.body);\n    this.inputManager.lastCaretPosition = null;\n    return this.trigger('valuechanged');\n  };\n\n  Simditor.prototype.getValue = function() {\n    return this.sync();\n  };\n\n  Simditor.prototype.sync = function() {\n    var children, cloneBody, emptyP, firstP, lastP, val;\n    cloneBody = this.body.clone();\n    this.formatter.undecorate(cloneBody);\n    this.formatter.format(cloneBody);\n    this.formatter.autolink(cloneBody);\n    children = cloneBody.children();\n    lastP = children.last('p');\n    firstP = children.first('p');\n    while (lastP.is('p') && this.util.isEmptyNode(lastP)) {\n      emptyP = lastP;\n      lastP = lastP.prev('p');\n      emptyP.remove();\n    }\n    while (firstP.is('p') && this.util.isEmptyNode(firstP)) {\n      emptyP = firstP;\n      firstP = lastP.next('p');\n      emptyP.remove();\n    }\n    cloneBody.find('img.uploading').remove();\n    val = $.trim(cloneBody.html());\n    this.textarea.val(val);\n    return val;\n  };\n\n  Simditor.prototype.focus = function() {\n    var $blockEl, range;\n    if (!(this.body.is(':visible') && this.body.is('[contenteditable]'))) {\n      this.el.find('textarea:visible').focus();\n      return;\n    }\n    if (this.inputManager.lastCaretPosition) {\n      this.undoManager.caretPosition(this.inputManager.lastCaretPosition);\n      return this.inputManager.lastCaretPosition = null;\n    } else {\n      $blockEl = this.body.children().last();\n      if (!$blockEl.is('p')) {\n        $blockEl = $('<p/>').append(this.util.phBr).appendTo(this.body);\n      }\n      range = document.createRange();\n      return this.selection.setRangeAtEndOf($blockEl, range);\n    }\n  };\n\n  Simditor.prototype.blur = function() {\n    if (this.body.is(':visible') && this.body.is('[contenteditable]')) {\n      return this.body.blur();\n    } else {\n      return this.body.find('textarea:visible').blur();\n    }\n  };\n\n  Simditor.prototype.hidePopover = function() {\n    return this.el.find('.simditor-popover').each(function(i, popover) {\n      popover = $(popover).data('popover');\n      if (popover.active) {\n        return popover.hide();\n      }\n    });\n  };\n\n  Simditor.prototype.destroy = function() {\n    this.triggerHandler('destroy');\n    this.textarea.closest('form').off('.simditor .simditor-' + this.id);\n    this.selection.clear();\n    this.inputManager.focused = false;\n    this.textarea.insertBefore(this.el).hide().val('').removeData('simditor');\n    this.el.remove();\n    $(document).off('.simditor-' + this.id);\n    $(window).off('.simditor-' + this.id);\n    return this.off();\n  };\n\n  return Simditor;\n\n})(SimpleModule);\n\nSimditor.i18n = {\n  'zh-CN': {\n    'blockquote': '引用',\n    'bold': '加粗文字',\n    'code': '插入代码',\n    'color': '文字颜色',\n    'coloredText': '彩色文字',\n    'hr': '分隔线',\n    'image': '插入图片',\n    'externalImage': '外链图片',\n    'uploadImage': '上传图片',\n    'uploadFailed': '上传失败了',\n    'uploadError': '上传出错了',\n    'imageUrl': '图片地址',\n    'imageSize': '图片尺寸',\n    'imageAlt': '图片描述',\n    'restoreImageSize': '还原图片尺寸',\n    'uploading': '正在上传',\n    'indent': '向右缩进',\n    'outdent': '向左缩进',\n    'italic': '斜体文字',\n    'link': '插入链接',\n    'linkText': '链接文字',\n    'linkUrl': '链接地址',\n    'linkTarget': '打开方式',\n    'openLinkInCurrentWindow': '在当前窗口中打开',\n    'openLinkInNewWindow': '在新窗口中打开',\n    'removeLink': '移除链接',\n    'ol': '有序列表',\n    'ul': '无序列表',\n    'strikethrough': '删除线文字',\n    'table': '表格',\n    'deleteRow': '删除行',\n    'insertRowAbove': '在上面插入行',\n    'insertRowBelow': '在下面插入行',\n    'deleteColumn': '删除列',\n    'insertColumnLeft': '在左边插入列',\n    'insertColumnRight': '在右边插入列',\n    'deleteTable': '删除表格',\n    'title': '标题',\n    'normalText': '普通文本',\n    'underline': '下划线文字',\n    'alignment': '水平对齐',\n    'alignCenter': '居中',\n    'alignLeft': '居左',\n    'alignRight': '居右',\n    'selectLanguage': '选择程序语言',\n    'fontScale': '字体大小',\n    'fontScaleXLarge': '超大字体',\n    'fontScaleLarge': '大号字体',\n    'fontScaleNormal': '正常大小',\n    'fontScaleSmall': '小号字体',\n    'fontScaleXSmall': '超小字体',\n    'paintRow': 'Paint Row',\n    'paintCell': 'Paint Cell',\n    'dissolveRow': 'Dissolve Row',\n    'dissolveCell': 'Dissolve Cell',\n    'addBorder': 'Add borders',\n    'removeBorder': 'Delete borders',\n    'listDisc': 'List Disc',\n    'listCircle': 'List Circle',\n    'listSquare': 'List Square',\n    'listDecimal': 'List Decimal',\n    'listDecimal0': 'List Decimal 0',\n    'listUpperRoman': 'List Upper Roman',\n    'listLowerRoman': 'List Lower Roman',\n    'listUpperAlpha': 'List Upper Alpha',\n    'listLowerAlpha': 'List Lower Alpha',\n    'listGreek': 'List Greek',\n    'toggleList': 'List on/off'\n  },\n  'en-US': {\n    'blockquote': 'Block Quote',\n    'bold': 'Bold',\n    'code': 'Code',\n    'color': 'Text Color',\n    'coloredText': 'Colored Text',\n    'hr': 'Horizontal Line',\n    'image': 'Insert Image',\n    'externalImage': 'External Image',\n    'uploadImage': 'Upload Image',\n    'uploadFailed': 'Upload failed',\n    'uploadError': 'Error occurs during upload',\n    'imageUrl': 'Url',\n    'imageSize': 'Size',\n    'imageAlt': 'Alt',\n    'restoreImageSize': 'Restore Origin Size',\n    'uploading': 'Uploading',\n    'indent': 'Indent',\n    'outdent': 'Outdent',\n    'italic': 'Italic',\n    'link': 'Insert Link',\n    'linkText': 'Text',\n    'linkUrl': 'Url',\n    'linkTarget': 'Target',\n    'openLinkInCurrentWindow': 'Open link in current window',\n    'openLinkInNewWindow': 'Open link in new window',\n    'removeLink': 'Remove Link',\n    'ol': 'Ordered List',\n    'ul': 'Unordered List',\n    'strikethrough': 'Strikethrough',\n    'table': 'Table',\n    'deleteRow': 'Delete Row',\n    'insertRowAbove': 'Insert Row Above',\n    'insertRowBelow': 'Insert Row Below',\n    'deleteColumn': 'Delete Column',\n    'insertColumnLeft': 'Insert Column Left',\n    'insertColumnRight': 'Insert Column Right',\n    'deleteTable': 'Delete Table',\n    'title': 'Title',\n    'normalText': 'Text',\n    'underline': 'Underline',\n    'alignment': 'Alignment',\n    'alignCenter': 'Align Center',\n    'alignLeft': 'Align Left',\n    'alignRight': 'Align Right',\n    'alignJustify': 'Align Justify',\n    'selectLanguage': 'Select Language',\n    'fontScale': 'Font Size',\n    'fontScaleXLarge': 'X Large Size',\n    'fontScaleLarge': 'Large Size',\n    'fontScaleNormal': 'Normal Size',\n    'fontScaleSmall': 'Small Size',\n    'fontScaleXSmall': 'X Small Size',\n    'paintRow': 'Paint Row',\n    'paintCell': 'Paint Cell',\n    'dissolveRow': 'Dissolve Row',\n    'dissolveCell': 'Dissolve Cell',\n    'addBorder': 'Add borders',\n    'removeBorder': 'Delete borders',\n    'listDisc': 'List Disc',\n    'listCircle': 'List Circle',\n    'listSquare': 'List Square',\n    'listDecimal': 'List Decimal',\n    'listDecimal0': 'List Decimal 0',\n    'listUpperRoman': 'List Upper Roman',\n    'listLowerRoman': 'List Lower Roman',\n    'listUpperAlpha': 'List Upper Alpha',\n    'listLowerAlpha': 'List Lower Alpha',\n    'listGreek': 'List Greek',\n    'toggleList': 'List on/off'\n  }\n};\n\nButton = (function(superClass) {\n  extend(Button, superClass);\n\n  Button.prototype._tpl = {\n    item: '<li><a tabindex=\"-1\" unselectable=\"on\" class=\"toolbar-item\" href=\"javascript:;\"><span></span></a></li>',\n    menuWrapper: '<div class=\"toolbar-menu\"></div>',\n    menuItem: '<li><a tabindex=\"-1\" unselectable=\"on\" class=\"menu-item\" href=\"javascript:;\"><span></span></a></li>',\n    separator: '<li><span class=\"separator\"></span></li>'\n  };\n\n  Button.prototype.name = '';\n\n  Button.prototype.icon = '';\n\n  Button.prototype.title = '';\n\n  Button.prototype.text = '';\n\n  Button.prototype.htmlTag = '';\n\n  Button.prototype.disableTag = '';\n\n  Button.prototype.menu = false;\n\n  Button.prototype.active = false;\n\n  Button.prototype.disabled = false;\n\n  Button.prototype.needFocus = true;\n\n  Button.prototype.shortcut = null;\n\n  function Button(opts) {\n    this.editor = opts.editor;\n    this.title = this._t(this.name);\n    Button.__super__.constructor.call(this, opts);\n  }\n\n  Button.prototype._init = function() {\n    var k, len, ref, tag;\n    this.render();\n    this.el.on('mousedown', (function(_this) {\n      return function(e) {\n        var exceed, noFocus, param;\n        e.preventDefault();\n        noFocus = _this.needFocus && !_this.editor.inputManager.focused;\n        if (_this.el.hasClass('disabled') || noFocus) {\n          return false;\n        }\n        if (_this.menu) {\n          _this.wrapper.toggleClass('menu-on').siblings('li').removeClass('menu-on');\n          if (_this.wrapper.is('.menu-on')) {\n            exceed = _this.menuWrapper.offset().left + _this.menuWrapper.outerWidth() + 5 - _this.editor.wrapper.offset().left - _this.editor.wrapper.outerWidth();\n            if (exceed > 0) {\n              _this.menuWrapper.css({\n                'left': 'auto',\n                'right': 0\n              });\n            }\n            _this.trigger('menuexpand');\n          }\n          return false;\n        }\n        param = _this.el.data('param');\n        _this.command(param);\n        return false;\n      };\n    })(this));\n    this.wrapper.on('click', 'a.menu-item', (function(_this) {\n      return function(e) {\n        var btn, noFocus, param;\n        e.preventDefault();\n        btn = $(e.currentTarget);\n        _this.wrapper.removeClass('menu-on');\n        noFocus = _this.needFocus && !_this.editor.inputManager.focused;\n        if (btn.hasClass('disabled') || noFocus) {\n          return false;\n        }\n        _this.editor.toolbar.wrapper.removeClass('menu-on');\n        param = btn.data('param');\n        _this.command(param);\n        return false;\n      };\n    })(this));\n    this.wrapper.on('mousedown', 'a.menu-item', function(e) {\n      return false;\n    });\n    this.editor.on('blur', (function(_this) {\n      return function() {\n        var editorActive;\n        editorActive = _this.editor.body.is(':visible') && _this.editor.body.is('[contenteditable]');\n        if (!(editorActive && !_this.editor.clipboard.pasting)) {\n          return;\n        }\n        _this.setActive(false);\n        return _this.setDisabled(false);\n      };\n    })(this));\n    if (this.shortcut != null) {\n      this.editor.hotkeys.add(this.shortcut, (function(_this) {\n        return function(e) {\n          _this.el.mousedown();\n          return false;\n        };\n      })(this));\n    }\n    ref = this.htmlTag.split(',');\n    for (k = 0, len = ref.length; k < len; k++) {\n      tag = ref[k];\n      tag = $.trim(tag);\n      if (tag && $.inArray(tag, this.editor.formatter._allowedTags) < 0) {\n        this.editor.formatter._allowedTags.push(tag);\n      }\n    }\n    return this.editor.on('selectionchanged', (function(_this) {\n      return function(e) {\n        if (_this.editor.inputManager.focused) {\n          return _this._status();\n        }\n      };\n    })(this));\n  };\n\n  Button.prototype.iconClassOf = function(icon) {\n    if (icon) {\n      return \"simditor-icon simditor-icon-\" + icon;\n    } else {\n      return '';\n    }\n  };\n\n  Button.prototype.setIcon = function(icon) {\n    return this.el.find('span').removeClass().addClass(this.iconClassOf(icon)).text(this.text);\n  };\n\n  Button.prototype.render = function() {\n    this.wrapper = $(this._tpl.item).appendTo(this.editor.toolbar.list);\n    this.el = this.wrapper.find('a.toolbar-item');\n    this.el.attr('title', this.title).addClass(\"toolbar-item-\" + this.name).data('button', this);\n    this.setIcon(this.icon);\n    if (!this.menu) {\n      return;\n    }\n    this.menuWrapper = $(this._tpl.menuWrapper).appendTo(this.wrapper);\n    this.menuWrapper.addClass(\"toolbar-menu-\" + this.name);\n    return this.renderMenu();\n  };\n\n  Button.prototype.renderMenu = function() {\n    var $menuBtnEl, $menuItemEl, k, len, menuItem, ref, ref1, results;\n    if (!$.isArray(this.menu)) {\n      return;\n    }\n    this.menuEl = $('<ul/>').appendTo(this.menuWrapper);\n    ref = this.menu;\n    results = [];\n    for (k = 0, len = ref.length; k < len; k++) {\n      menuItem = ref[k];\n      if (menuItem === '|') {\n        $(this._tpl.separator).appendTo(this.menuEl);\n        continue;\n      }\n      $menuItemEl = $(this._tpl.menuItem).appendTo(this.menuEl);\n      $menuBtnEl = $menuItemEl.find('a.menu-item').attr({\n        'title': (ref1 = menuItem.title) != null ? ref1 : menuItem.text,\n        'data-param': menuItem.param\n      }).addClass('menu-item-' + menuItem.name);\n      if (menuItem.icon) {\n        results.push($menuBtnEl.find('span').addClass(this.iconClassOf(menuItem.icon)));\n      } else {\n        results.push($menuBtnEl.find('span').text(menuItem.text));\n      }\n    }\n    return results;\n  };\n\n  Button.prototype.setActive = function(active) {\n    if (active === this.active) {\n      return;\n    }\n    this.active = active;\n    return this.el.toggleClass('active', this.active);\n  };\n\n  Button.prototype.setDisabled = function(disabled) {\n    if (disabled === this.disabled) {\n      return;\n    }\n    this.disabled = disabled;\n    return this.el.toggleClass('disabled', this.disabled);\n  };\n\n  Button.prototype._disableStatus = function() {\n    var disabled, endNodes, startNodes;\n    startNodes = this.editor.selection.startNodes();\n    endNodes = this.editor.selection.endNodes();\n    disabled = startNodes.filter(this.disableTag).length > 0 || endNodes.filter(this.disableTag).length > 0;\n    this.setDisabled(disabled);\n    if (this.disabled) {\n      this.setActive(false);\n    }\n    return this.disabled;\n  };\n\n  Button.prototype._activeStatus = function() {\n    var active, endNode, endNodes, startNode, startNodes;\n    startNodes = this.editor.selection.startNodes();\n    endNodes = this.editor.selection.endNodes();\n    startNode = startNodes.filter(this.htmlTag);\n    endNode = endNodes.filter(this.htmlTag);\n    active = startNode.length > 0 && endNode.length > 0 && startNode.is(endNode);\n    this.node = active ? startNode : null;\n    this.setActive(active);\n    return this.active;\n  };\n\n  Button.prototype._status = function() {\n    this._disableStatus();\n    if (this.disabled) {\n      return;\n    }\n    return this._activeStatus();\n  };\n\n  Button.prototype.command = function(param) {};\n\n  Button.prototype._t = function() {\n    var args, ref, result;\n    args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    result = Button.__super__._t.apply(this, args);\n    if (!result) {\n      result = (ref = this.editor)._t.apply(ref, args);\n    }\n    return result;\n  };\n\n  return Button;\n\n})(SimpleModule);\n\nSimditor.Button = Button;\n\nPopover = (function(superClass) {\n  extend(Popover, superClass);\n\n  Popover.prototype.offset = {\n    top: 4,\n    left: 0\n  };\n\n  Popover.prototype.target = null;\n\n  Popover.prototype.active = false;\n\n  function Popover(opts) {\n    this.button = opts.button;\n    this.editor = opts.button.editor;\n    Popover.__super__.constructor.call(this, opts);\n  }\n\n  Popover.prototype._init = function() {\n    this.el = $('<div class=\"simditor-popover\"></div>').appendTo(this.editor.el).data('popover', this);\n    this.render();\n    this.el.on('mouseenter', (function(_this) {\n      return function(e) {\n        return _this.el.addClass('hover');\n      };\n    })(this));\n    return this.el.on('mouseleave', (function(_this) {\n      return function(e) {\n        return _this.el.removeClass('hover');\n      };\n    })(this));\n  };\n\n  Popover.prototype.render = function() {};\n\n  Popover.prototype._initLabelWidth = function() {\n    var $fields;\n    $fields = this.el.find('.settings-field');\n    if (!($fields.length > 0)) {\n      return;\n    }\n    this._labelWidth = 0;\n    $fields.each((function(_this) {\n      return function(i, field) {\n        var $field, $label;\n        $field = $(field);\n        $label = $field.find('label');\n        if (!($label.length > 0)) {\n          return;\n        }\n        return _this._labelWidth = Math.max(_this._labelWidth, $label.width());\n      };\n    })(this));\n    return $fields.find('label').width(this._labelWidth);\n  };\n\n  Popover.prototype.show = function($target, position) {\n    if (position == null) {\n      position = 'bottom';\n    }\n    if ($target == null) {\n      return;\n    }\n    this.el.siblings('.simditor-popover').each(function(i, popover) {\n      popover = $(popover).data('popover');\n      if (popover.active) {\n        return popover.hide();\n      }\n    });\n    if (this.active && this.target) {\n      this.target.removeClass('selected');\n    }\n    this.target = $target.addClass('selected');\n    if (this.active) {\n      this.refresh(position);\n      return this.trigger('popovershow');\n    } else {\n      this.active = true;\n      this.el.css({\n        left: -9999\n      }).show();\n      if (!this._labelWidth) {\n        this._initLabelWidth();\n      }\n      this.editor.util.reflow();\n      this.refresh(position);\n      return this.trigger('popovershow');\n    }\n  };\n\n  Popover.prototype.hide = function() {\n    if (!this.active) {\n      return;\n    }\n    if (this.target) {\n      this.target.removeClass('selected');\n    }\n    this.target = null;\n    this.active = false;\n    this.el.hide();\n    return this.trigger('popoverhide');\n  };\n\n  Popover.prototype.refresh = function(position) {\n    var editorOffset, left, maxLeft, targetH, targetOffset, top;\n    if (position == null) {\n      position = 'bottom';\n    }\n    if (!this.active) {\n      return;\n    }\n    editorOffset = this.editor.el.offset();\n    targetOffset = this.target.offset();\n    targetH = this.target.outerHeight();\n    if (position === 'bottom') {\n      top = targetOffset.top - editorOffset.top + targetH;\n    } else if (position === 'top') {\n      top = targetOffset.top - editorOffset.top - this.el.height();\n    }\n    maxLeft = this.editor.wrapper.width() - this.el.outerWidth() - 10;\n    left = Math.min(targetOffset.left - editorOffset.left, maxLeft);\n    return this.el.css({\n      top: top + this.offset.top,\n      left: left + this.offset.left\n    });\n  };\n\n  Popover.prototype.destroy = function() {\n    this.target = null;\n    this.active = false;\n    this.editor.off('.linkpopover');\n    return this.el.remove();\n  };\n\n  Popover.prototype._t = function() {\n    var args, ref, result;\n    args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    result = Popover.__super__._t.apply(this, args);\n    if (!result) {\n      result = (ref = this.button)._t.apply(ref, args);\n    }\n    return result;\n  };\n\n  return Popover;\n\n})(SimpleModule);\n\nSimditor.Popover = Popover;\n\nTitleButton = (function(superClass) {\n  extend(TitleButton, superClass);\n\n  function TitleButton() {\n    return TitleButton.__super__.constructor.apply(this, arguments);\n  }\n\n  TitleButton.prototype.name = 'title';\n\n  TitleButton.prototype.htmlTag = 'h1, h2, h3, h4, h5';\n\n  TitleButton.prototype.disableTag = 'pre, table';\n\n  TitleButton.prototype._init = function() {\n    this.menu = [\n      {\n        name: 'normal',\n        text: this._t('normalText'),\n        param: 'p'\n      }, '|', {\n        name: 'h1',\n        text: this._t('title') + ' 1',\n        param: 'h1'\n      }, {\n        name: 'h2',\n        text: this._t('title') + ' 2',\n        param: 'h2'\n      }, {\n        name: 'h3',\n        text: this._t('title') + ' 3',\n        param: 'h3'\n      }, {\n        name: 'h4',\n        text: this._t('title') + ' 4',\n        param: 'h4'\n      }, {\n        name: 'h5',\n        text: this._t('title') + ' 5',\n        param: 'h5'\n      }\n    ];\n    return TitleButton.__super__._init.call(this);\n  };\n\n  TitleButton.prototype.setActive = function(active, param) {\n    TitleButton.__super__.setActive.call(this, active);\n    if (active) {\n      param || (param = this.node[0].tagName.toLowerCase());\n    }\n    this.el.removeClass('active-p active-h1 active-h2 active-h3 active-h4 active-h5');\n    if (active) {\n      return this.el.addClass('active active-' + param);\n    }\n  };\n\n  TitleButton.prototype.command = function(param) {\n    var $rootNodes;\n    $rootNodes = this.editor.selection.rootNodes();\n    this.editor.selection.save();\n    $rootNodes.each((function(_this) {\n      return function(i, node) {\n        var $node;\n        $node = $(node);\n        if ($node.is('blockquote') || $node.is(param) || $node.is(_this.disableTag) || _this.editor.util.isDecoratedNode($node)) {\n          return;\n        }\n        return $('<' + param + '/>').append($node.contents()).replaceAll($node);\n      };\n    })(this));\n    this.editor.selection.restore();\n    return this.editor.trigger('valuechanged');\n  };\n\n  return TitleButton;\n\n})(Button);\n\nSimditor.Toolbar.addButton(TitleButton);\n\nFontScaleButton = (function(superClass) {\n  extend(FontScaleButton, superClass);\n\n  function FontScaleButton() {\n    return FontScaleButton.__super__.constructor.apply(this, arguments);\n  }\n\n  FontScaleButton.prototype.name = 'fontScale';\n\n  FontScaleButton.prototype.icon = 'font';\n\n  FontScaleButton.prototype.disableTag = 'pre';\n\n  FontScaleButton.prototype.htmlTag = 'span';\n\n  FontScaleButton.prototype.sizeMap = {\n    'x-large': '1.5em',\n    'large': '1.25em',\n    'small': '.75em',\n    'x-small': '.5em'\n  };\n\n  FontScaleButton.prototype._init = function() {\n    this.menu = [\n      {\n        name: '150%',\n        text: this._t('fontScaleXLarge'),\n        param: '5'\n      }, {\n        name: '125%',\n        text: this._t('fontScaleLarge'),\n        param: '4'\n      }, {\n        name: '100%',\n        text: this._t('fontScaleNormal'),\n        param: '3'\n      }, {\n        name: '75%',\n        text: this._t('fontScaleSmall'),\n        param: '2'\n      }, {\n        name: '50%',\n        text: this._t('fontScaleXSmall'),\n        param: '1'\n      }\n    ];\n    return FontScaleButton.__super__._init.call(this);\n  };\n\n  FontScaleButton.prototype._activeStatus = function() {\n    var active, endNode, endNodes, range, startNode, startNodes;\n    range = this.editor.selection.range();\n    startNodes = this.editor.selection.startNodes();\n    endNodes = this.editor.selection.endNodes();\n    startNode = startNodes.filter('span[style*=\"font-size\"]');\n    endNode = endNodes.filter('span[style*=\"font-size\"]');\n    active = startNodes.length > 0 && endNodes.length > 0 && startNode.is(endNode);\n    this.setActive(active);\n    return this.active;\n  };\n\n  FontScaleButton.prototype.command = function(param) {\n    var $scales, containerNode, range;\n    range = this.editor.selection.range();\n    if (range.collapsed) {\n      return;\n    }\n    document.execCommand('styleWithCSS', false, true);\n    document.execCommand('fontSize', false, param);\n    document.execCommand('styleWithCSS', false, false);\n    this.editor.selection.reset();\n    this.editor.selection.range();\n    containerNode = this.editor.selection.containerNode();\n    if (containerNode[0].nodeType === Node.TEXT_NODE) {\n      $scales = containerNode.closest('span[style*=\"font-size\"]');\n    } else {\n      $scales = containerNode.find('span[style*=\"font-size\"]');\n    }\n    $scales.each((function(_this) {\n      return function(i, n) {\n        var $span, size;\n        $span = $(n);\n        size = n.style.fontSize;\n        if (/large|x-large|small|x-small/.test(size)) {\n          return $span.css('fontSize', _this.sizeMap[size]);\n        } else if (size === 'medium') {\n          return $span.replaceWith($span.contents());\n        }\n      };\n    })(this));\n    return this.editor.trigger('valuechanged');\n  };\n\n  return FontScaleButton;\n\n})(Button);\n\nSimditor.Toolbar.addButton(FontScaleButton);\n\nBoldButton = (function(superClass) {\n  extend(BoldButton, superClass);\n\n  function BoldButton() {\n    return BoldButton.__super__.constructor.apply(this, arguments);\n  }\n\n  BoldButton.prototype.name = 'bold';\n\n  BoldButton.prototype.icon = 'bold';\n\n  BoldButton.prototype.htmlTag = 'b, strong';\n\n  BoldButton.prototype.disableTag = 'pre';\n\n  BoldButton.prototype.shortcut = 'cmd+b';\n\n  BoldButton.prototype._init = function() {\n    if (this.editor.util.os.mac) {\n      this.title = this.title + ' ( Cmd + b )';\n    } else {\n      this.title = this.title + ' ( Ctrl + b )';\n      this.shortcut = 'ctrl+b';\n    }\n    return BoldButton.__super__._init.call(this);\n  };\n\n  BoldButton.prototype._activeStatus = function() {\n    var active;\n    active = document.queryCommandState('bold') === true;\n    this.setActive(active);\n    return this.active;\n  };\n\n  BoldButton.prototype.command = function() {\n    document.execCommand('bold');\n    if (!this.editor.util.support.oninput) {\n      this.editor.trigger('valuechanged');\n    }\n    return $(document).trigger('selectionchange');\n  };\n\n  return BoldButton;\n\n})(Button);\n\nSimditor.Toolbar.addButton(BoldButton);\n\nItalicButton = (function(superClass) {\n  extend(ItalicButton, superClass);\n\n  function ItalicButton() {\n    return ItalicButton.__super__.constructor.apply(this, arguments);\n  }\n\n  ItalicButton.prototype.name = 'italic';\n\n  ItalicButton.prototype.icon = 'italic';\n\n  ItalicButton.prototype.htmlTag = 'i';\n\n  ItalicButton.prototype.disableTag = 'pre';\n\n  ItalicButton.prototype.shortcut = 'cmd+i';\n\n  ItalicButton.prototype._init = function() {\n    if (this.editor.util.os.mac) {\n      this.title = this.title + \" ( Cmd + i )\";\n    } else {\n      this.title = this.title + \" ( Ctrl + i )\";\n      this.shortcut = 'ctrl+i';\n    }\n    return ItalicButton.__super__._init.call(this);\n  };\n\n  ItalicButton.prototype._activeStatus = function() {\n    var active;\n    active = document.queryCommandState('italic') === true;\n    this.setActive(active);\n    return this.active;\n  };\n\n  ItalicButton.prototype.command = function() {\n    document.execCommand('italic');\n    if (!this.editor.util.support.oninput) {\n      this.editor.trigger('valuechanged');\n    }\n    return $(document).trigger('selectionchange');\n  };\n\n  return ItalicButton;\n\n})(Button);\n\nSimditor.Toolbar.addButton(ItalicButton);\n\nUnderlineButton = (function(superClass) {\n  extend(UnderlineButton, superClass);\n\n  function UnderlineButton() {\n    return UnderlineButton.__super__.constructor.apply(this, arguments);\n  }\n\n  UnderlineButton.prototype.name = 'underline';\n\n  UnderlineButton.prototype.icon = 'underline';\n\n  UnderlineButton.prototype.htmlTag = 'u';\n\n  UnderlineButton.prototype.disableTag = 'pre';\n\n  UnderlineButton.prototype.shortcut = 'cmd+u';\n\n  UnderlineButton.prototype.render = function() {\n    if (this.editor.util.os.mac) {\n      this.title = this.title + ' ( Cmd + u )';\n    } else {\n      this.title = this.title + ' ( Ctrl + u )';\n      this.shortcut = 'ctrl+u';\n    }\n    return UnderlineButton.__super__.render.call(this);\n  };\n\n  UnderlineButton.prototype._activeStatus = function() {\n    var active;\n    active = document.queryCommandState('underline') === true;\n    this.setActive(active);\n    return this.active;\n  };\n\n  UnderlineButton.prototype.command = function() {\n    document.execCommand('underline');\n    if (!this.editor.util.support.oninput) {\n      this.editor.trigger('valuechanged');\n    }\n    return $(document).trigger('selectionchange');\n  };\n\n  return UnderlineButton;\n\n})(Button);\n\nSimditor.Toolbar.addButton(UnderlineButton);\n\nColorButton = (function(superClass) {\n  extend(ColorButton, superClass);\n\n  function ColorButton() {\n    return ColorButton.__super__.constructor.apply(this, arguments);\n  }\n\n  ColorButton.prototype.name = 'color';\n\n  ColorButton.prototype.icon = 'tint';\n\n  ColorButton.prototype.disableTag = 'pre';\n\n  ColorButton.prototype.menu = true;\n\n  ColorButton.prototype.render = function() {\n    var args;\n    args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    return ColorButton.__super__.render.apply(this, args);\n  };\n\n  ColorButton.prototype.renderMenu = function() {\n    $('<ul class=\"color-list\">\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-1\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-2\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-3\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-4\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-5\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-6\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-7\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-default\"></a></li>\\n</ul>').appendTo(this.menuWrapper);\n    this.menuWrapper.on('mousedown', '.color-list', function(e) {\n      return false;\n    });\n    return this.menuWrapper.on('click', '.font-color', (function(_this) {\n      return function(e) {\n        var $link, $p, hex, range, rgb, textNode;\n        _this.wrapper.removeClass('menu-on');\n        $link = $(e.currentTarget);\n        if ($link.hasClass('font-color-default')) {\n          $p = _this.editor.body.find('p, li');\n          if (!($p.length > 0)) {\n            return;\n          }\n          rgb = window.getComputedStyle($p[0], null).getPropertyValue('color');\n          hex = _this._convertRgbToHex(rgb);\n        } else {\n          rgb = window.getComputedStyle($link[0], null).getPropertyValue('background-color');\n          hex = _this._convertRgbToHex(rgb);\n        }\n        if (!hex) {\n          return;\n        }\n        range = _this.editor.selection.range();\n        if (!$link.hasClass('font-color-default') && range.collapsed) {\n          textNode = document.createTextNode(_this._t('coloredText'));\n          range.insertNode(textNode);\n          range.selectNodeContents(textNode);\n          _this.editor.selection.range(range);\n        }\n        document.execCommand('styleWithCSS', false, true);\n        document.execCommand('foreColor', false, hex);\n        document.execCommand('styleWithCSS', false, false);\n        if (!_this.editor.util.support.oninput) {\n          return _this.editor.trigger('valuechanged');\n        }\n      };\n    })(this));\n  };\n\n  ColorButton.prototype._convertRgbToHex = function(rgb) {\n    var match, re, rgbToHex;\n    re = /rgb\\((\\d+),\\s?(\\d+),\\s?(\\d+)\\)/g;\n    match = re.exec(rgb);\n    if (!match) {\n      return '';\n    }\n    rgbToHex = function(r, g, b) {\n      var componentToHex;\n      componentToHex = function(c) {\n        var hex;\n        hex = c.toString(16);\n        if (hex.length === 1) {\n          return '0' + hex;\n        } else {\n          return hex;\n        }\n      };\n      return \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b);\n    };\n    return rgbToHex(match[1] * 1, match[2] * 1, match[3] * 1);\n  };\n\n  return ColorButton;\n\n})(Button);\n\nSimditor.Toolbar.addButton(ColorButton);\n\nListButton = (function(superClass) {\n  extend(ListButton, superClass);\n\n  function ListButton() {\n    return ListButton.__super__.constructor.apply(this, arguments);\n  }\n\n  ListButton.prototype.type = '';\n\n  ListButton.prototype.disableTag = 'pre, table';\n\n  ListButton.prototype.command = function(param) {\n    var $list, $rootNodes, anotherType;\n    $rootNodes = this.editor.selection.blockNodes();\n    anotherType = this.type === 'ul' ? 'ol' : 'ul';\n    this.editor.selection.save();\n    $list = null;\n    $rootNodes.each((function(_this) {\n      return function(i, node) {\n        var $node;\n        $node = $(node);\n        if ($node.is('blockquote, li') || $node.is(_this.disableTag) || _this.editor.util.isDecoratedNode($node) || !$.contains(document, node)) {\n          return;\n        }\n        if ($node.is(_this.type)) {\n          $node.children('li').each(function(i, li) {\n            var $childList, $li;\n            $li = $(li);\n            $childList = $li.children('ul, ol').insertAfter($node);\n            return $('<p/>').append($(li).html() || _this.editor.util.phBr).insertBefore($node);\n          });\n          return $node.remove();\n        } else if ($node.is(anotherType)) {\n          return $('<' + _this.type + '/>').append($node.contents()).replaceAll($node);\n        } else if ($list && $node.prev().is($list)) {\n          $('<li/>').append($node.html() || _this.editor.util.phBr).appendTo($list);\n          return $node.remove();\n        } else {\n          $list = $(\"<\" + _this.type + \"><li></li></\" + _this.type + \">\");\n          $list.find('li').append($node.html() || _this.editor.util.phBr);\n          return $list.replaceAll($node);\n        }\n      };\n    })(this));\n    this.editor.selection.restore();\n    return this.editor.trigger('valuechanged');\n  };\n\n  return ListButton;\n\n})(Button);\n\nOrderListButton = (function(superClass) {\n  extend(OrderListButton, superClass);\n\n  function OrderListButton() {\n    return OrderListButton.__super__.constructor.apply(this, arguments);\n  }\n\n  OrderListButton.prototype.type = 'ol';\n\n  OrderListButton.prototype.name = 'ol';\n\n  OrderListButton.prototype.icon = 'list-ol';\n\n  OrderListButton.prototype.htmlTag = 'ol';\n\n  OrderListButton.prototype.shortcut = 'cmd+/';\n\n  OrderListButton.prototype._init = function() {\n    if (this.editor.util.os.mac) {\n      this.title = this.title + ' ( Cmd + / )';\n    } else {\n      this.title = this.title + ' ( ctrl + / )';\n      this.shortcut = 'ctrl+/';\n    }\n    return OrderListButton.__super__._init.call(this);\n  };\n\n  return OrderListButton;\n\n})(ListButton);\n\nSimditor.Toolbar.addButton(OrderListButton);\n\nOrderListStyleButton = (function(superClass) { //mod-for-jl\n  extend(OrderListStyleButton, superClass);\n\n  function OrderListStyleButton() {\n    return OrderListStyleButton.__super__.constructor.apply(this, arguments);\n  }\n\n  OrderListStyleButton.prototype.name = 'ols';\n\n  OrderListStyleButton.prototype.icon = 'list-ul';\n\n  OrderListStyleButton.prototype.type = 'ol';\n\n  OrderListStyleButton.prototype.htmlTag = 'ol';\n\n  OrderListStyleButton.prototype.disableTag = 'pre, table';\n\n  OrderListStyleButton.prototype.menu = true;\n\n  OrderListStyleButton.prototype.shortcut = 'cmd+/';\n\n  OrderListStyleButton.prototype._init = function() {\n    $.extend(this.editor.formatter._allowedStyles, {\n      ol: ['list-style-type']\n    });\n    if (this.editor.util.os.mac) {\n      this.title = this.title + ' ( Cmd + / )';\n    } else {\n      this.title = this.title + ' ( ctrl + / )';\n      this.shortcut = 'ctrl+/';\n    }\n    return OrderListStyleButton.__super__._init.call(this);\n  };\n\n  OrderListStyleButton.prototype.renderMenu = function() {\n    $(\"<div class=\\\"menu-create-list\\\">\\n</div>\\n<div class=\\\"menu-edit-list\\\">\\n  <ul>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"listDisc\\\">\\n        <span>\" + (this._t('listDisc')) + \"</span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"listCircle\\\">\\n        <span>\" + (this._t('listCircle')) + \" </span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"listSquare\\\">\\n        <span>\" + (this._t('listSquare')) + \"</span>\\n      </a>\\n    </li>\\n    <li><span class=\\\"separator\\\"></span></li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"listDecimal\\\">\\n        <span>\" + (this._t('listDecimal')) + \" </span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"listDecimal0\\\">\\n        <span>\" + (this._t('listDecimal0')) + \" </span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"listUpperRoman\\\">\\n        <span>\" + (this._t('listUpperRoman')) + \" </span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"listLowerRoman\\\">\\n        <span>\" + (this._t('listLowerRoman')) + \"</span>\\n      </a>\\n    </li>\\n    <li><span class=\\\"separator\\\"></span></li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"listUpperAlpha\\\">\\n        <span>\" + (this._t('listUpperAlpha')) + \" </span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"listLowerAlpha\\\">\\n        <span>\" + (this._t('listLowerAlpha')) + \" </span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"listGreek\\\">\\n        <span>\" + (this._t('listGreek')) + \" </span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"toggleList\\\">\\n        <span>\" + (this._t('toggleList')) + \" </span>\\n      </a>\\n    </li>\\n    </ul>\\n</div>\").appendTo(this.menuWrapper);\n    this.createMenu = this.menuWrapper.find('.menu-create-list');\n    this.editMenu = this.menuWrapper.find('.menu-edit-list');\n  };\n\n  OrderListStyleButton.prototype.command = function(param) {//mod-for-jl\n    var $ol, type, sw_mod;\n    type = {\n        'listDisc': 'disc',\n        'listCircle': 'circle',\n        'listSquare': 'square',\n        'listDecimal': 'decimal',\n        'listDecimal0': 'decimal-leading-zero',\n        'listUpperRoman': 'upper-roman',\n        'listLowerRoman': 'lower-roman',\n        'listUpperAlpha': 'upper-alpha',\n        'listLowerAlpha': 'lower-alpha',\n        'listGreek': 'lower-greek',\n    };\n\n    $ol = this.editor.selection.containerNode();\n    if (type[param]) {\n      while(!$ol.is('ol')){\n        if($ol.is('div.simditor-body')) break;\n        $ol = $ol.parent();\n      }\n      if(!$ol.is('div.simditor-body')) {\n        $ol.css('list-style-type', type[param])\n        return this.editor.trigger('valuechanged');\n      }\n    }\n\n    // codigo copeado de listButton\n    var $list, $rootNodes, anotherType;\n    $rootNodes = this.editor.selection.blockNodes();\n    anotherType = this.type === 'ul' ? 'ol' : 'ul';\n    this.editor.selection.save();\n    $list = null;\n    $rootNodes.each((function(_this) {\n      return function(i, node) {\n        var $node;\n        $node = $(node);\n        if ($node.is('blockquote, li') || $node.is(_this.disableTag) || _this.editor.util.isDecoratedNode($node) || !$.contains(document, node)) {\n          return;\n        }\n        if ($node.is(_this.type)) {\n          $node.children('li').each(function(i, li) {\n            var $childList, $li;\n            $li = $(li);\n            $childList = $li.children('ul, ol').insertAfter($node);\n            return $('<p/>').append($(li).html() || _this.editor.util.phBr).insertBefore($node);\n          });\n          return $node.remove();\n        } else if ($node.is(anotherType)) {\n          return $('<' + _this.type + '/>').append($node.contents()).replaceAll($node);\n        } else if ($list && $node.prev().is($list)) {\n          $('<li/>').append($node.html() || _this.editor.util.phBr).appendTo($list);\n          return $node.remove();\n        } else {\n          $list = $(\"<\" + _this.type + \"><li></li></\" + _this.type + \">\");\n          $list.find('li').append($node.html() || _this.editor.util.phBr);\n          return $list.replaceAll($node);\n        }\n      };\n    })(this));\n    this.editor.selection.restore();\n\n    if (type[param] && $list) { $list.css('list-style-type', type[param]) }\n\n    return this.editor.trigger('valuechanged');\n  };\n\n  return OrderListStyleButton;\n\n})(Button);\n\nSimditor.Toolbar.addButton(OrderListStyleButton);//mod-for-jl\n\n/*\nOrderListButton = (function(superClass) {\n  extend(OrderListButton, superClass);\n\n  function OrderListButton() {\n    return OrderListButton.__super__.constructor.apply(this, arguments);\n  }\n\n  OrderListButton.prototype.type = 'ol';\n\n  OrderListButton.prototype.name = 'ol';\n\n  OrderListButton.prototype.icon = 'list-ol';\n\n  OrderListButton.prototype.htmlTag = 'ol';\n\n  OrderListButton.prototype.shortcut = 'cmd+/';\n\n  OrderListButton.prototype._init = function() {\n    if (this.editor.util.os.mac) {\n      this.title = this.title + ' ( Cmd + / )';\n    } else {\n      this.title = this.title + ' ( ctrl + / )';\n      this.shortcut = 'ctrl+/';\n    }\n    return OrderListButton.__super__._init.call(this);\n  };\n\n  return OrderListButton;\n\n})(ListButton);\nUnorderListButton = (function(superClass) {\n  extend(UnorderListButton, superClass);\n\n  function UnorderListButton() {\n    return UnorderListButton.__super__.constructor.apply(this, arguments);\n  }\n\n  UnorderListButton.prototype.type = 'ul';\n\n  UnorderListButton.prototype.name = 'ul';\n\n  UnorderListButton.prototype.icon = 'list-ul';\n\n  UnorderListButton.prototype.htmlTag = 'ul';\n\n  UnorderListButton.prototype.shortcut = 'cmd+.';\n\n  UnorderListButton.prototype._init = function() {\n    if (this.editor.util.os.mac) {\n      this.title = this.title + ' ( Cmd + . )';\n    } else {\n      this.title = this.title + ' ( Ctrl + . )';\n      this.shortcut = 'ctrl+.';\n    }\n    return UnorderListButton.__super__._init.call(this);\n  };\n\n  return UnorderListButton;\n\n})(ListButton);\nSimditor.Toolbar.addButton(OrderListButton);\nSimditor.Toolbar.addButton(UnorderListButton);\n*/\nBlockquoteButton = (function(superClass) {\n  extend(BlockquoteButton, superClass);\n\n  function BlockquoteButton() {\n    return BlockquoteButton.__super__.constructor.apply(this, arguments);\n  }\n\n  BlockquoteButton.prototype.name = 'blockquote';\n\n  BlockquoteButton.prototype.icon = 'quote-left';\n\n  BlockquoteButton.prototype.htmlTag = 'blockquote';\n\n  BlockquoteButton.prototype.disableTag = 'pre, table';\n\n  BlockquoteButton.prototype.command = function() {\n    var $rootNodes, clearCache, nodeCache;\n    $rootNodes = this.editor.selection.rootNodes();\n    $rootNodes = $rootNodes.filter(function(i, node) {\n      return !$(node).parent().is('blockquote');\n    });\n    this.editor.selection.save();\n    nodeCache = [];\n    clearCache = (function(_this) {\n      return function() {\n        if (nodeCache.length > 0) {\n          $(\"<\" + _this.htmlTag + \"/>\").insertBefore(nodeCache[0]).append(nodeCache);\n          return nodeCache.length = 0;\n        }\n      };\n    })(this);\n    $rootNodes.each((function(_this) {\n      return function(i, node) {\n        var $node;\n        $node = $(node);\n        if (!$node.parent().is(_this.editor.body)) {\n          return;\n        }\n        if ($node.is(_this.htmlTag)) {\n          clearCache();\n          return $node.children().unwrap();\n        } else if ($node.is(_this.disableTag) || _this.editor.util.isDecoratedNode($node)) {\n          return clearCache();\n        } else {\n          return nodeCache.push(node);\n        }\n      };\n    })(this));\n    clearCache();\n    this.editor.selection.restore();\n    return this.editor.trigger('valuechanged');\n  };\n\n  return BlockquoteButton;\n\n})(Button);\n\nSimditor.Toolbar.addButton(BlockquoteButton);\n\nCodeButton = (function(superClass) {\n  extend(CodeButton, superClass);\n\n  function CodeButton() {\n    return CodeButton.__super__.constructor.apply(this, arguments);\n  }\n\n  CodeButton.prototype.name = 'code';\n\n  CodeButton.prototype.icon = 'code';\n\n  CodeButton.prototype.htmlTag = 'pre';\n\n  CodeButton.prototype.disableTag = 'ul, ol, table';\n\n  CodeButton.prototype._init = function() {\n    CodeButton.__super__._init.call(this);\n    this.editor.on('decorate', (function(_this) {\n      return function(e, $el) {\n        return $el.find('pre').each(function(i, pre) {\n          return _this.decorate($(pre));\n        });\n      };\n    })(this));\n    return this.editor.on('undecorate', (function(_this) {\n      return function(e, $el) {\n        return $el.find('pre').each(function(i, pre) {\n          return _this.undecorate($(pre));\n        });\n      };\n    })(this));\n  };\n\n  CodeButton.prototype.render = function() {\n    var args;\n    args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    CodeButton.__super__.render.apply(this, args);\n    return this.popover = new CodePopover({\n      button: this\n    });\n  };\n\n  CodeButton.prototype._checkMode = function() {\n    var $blockNodes, range;\n    range = this.editor.selection.range();\n    if (($blockNodes = $(range.cloneContents()).find(this.editor.util.blockNodes.join(','))) > 0 || (range.collapsed && this.editor.selection.startNodes().filter('code').length === 0)) {\n      this.inlineMode = false;\n      return this.htmlTag = 'pre';\n    } else {\n      this.inlineMode = true;\n      return this.htmlTag = 'code';\n    }\n  };\n\n  CodeButton.prototype._status = function() {\n    this._checkMode();\n    CodeButton.__super__._status.call(this);\n    if (this.inlineMode) {\n      return;\n    }\n    if (this.active) {\n      return this.popover.show(this.node);\n    } else {\n      return this.popover.hide();\n    }\n  };\n\n  CodeButton.prototype.decorate = function($pre) {\n    var $code, lang, ref, ref1;\n    $code = $pre.find('> code');\n    if ($code.length > 0) {\n      lang = (ref = $code.attr('class')) != null ? (ref1 = ref.match(/lang-(\\S+)/)) != null ? ref1[1] : void 0 : void 0;\n      $code.contents().unwrap();\n      if (lang) {\n        return $pre.attr('data-lang', lang);\n      }\n    }\n  };\n\n  CodeButton.prototype.undecorate = function($pre) {\n    var $code, lang;\n    lang = $pre.attr('data-lang');\n    $code = $('<code/>');\n    if (lang && lang !== -1) {\n      $code.addClass('lang-' + lang);\n    }\n    return $pre.wrapInner($code).removeAttr('data-lang');\n  };\n\n  CodeButton.prototype.command = function() {\n    if (this.inlineMode) {\n      return this._inlineCommand();\n    } else {\n      return this._blockCommand();\n    }\n  };\n\n  CodeButton.prototype._blockCommand = function() {\n    var $rootNodes, clearCache, nodeCache, resultNodes;\n    $rootNodes = this.editor.selection.rootNodes();\n    nodeCache = [];\n    resultNodes = [];\n    clearCache = (function(_this) {\n      return function() {\n        var $pre;\n        if (!(nodeCache.length > 0)) {\n          return;\n        }\n        $pre = $(\"<\" + _this.htmlTag + \"/>\").insertBefore(nodeCache[0]).text(_this.editor.formatter.clearHtml(nodeCache));\n        resultNodes.push($pre[0]);\n        return nodeCache.length = 0;\n      };\n    })(this);\n    $rootNodes.each((function(_this) {\n      return function(i, node) {\n        var $node, $p;\n        $node = $(node);\n        if ($node.is(_this.htmlTag)) {\n          clearCache();\n          $p = $('<p/>').append($node.html().replace('\\n', '<br/>')).replaceAll($node);\n          return resultNodes.push($p[0]);\n        } else if ($node.is(_this.disableTag) || _this.editor.util.isDecoratedNode($node) || $node.is('blockquote')) {\n          return clearCache();\n        } else {\n          return nodeCache.push(node);\n        }\n      };\n    })(this));\n    clearCache();\n    this.editor.selection.setRangeAtEndOf($(resultNodes).last());\n    return this.editor.trigger('valuechanged');\n  };\n\n  CodeButton.prototype._inlineCommand = function() {\n    var $code, $contents, range;\n    range = this.editor.selection.range();\n    if (this.active) {\n      range.selectNodeContents(this.node[0]);\n      this.editor.selection.save(range);\n      this.node.contents().unwrap();\n      this.editor.selection.restore();\n    } else {\n      $contents = $(range.extractContents());\n      $code = $(\"<\" + this.htmlTag + \"/>\").append($contents.contents());\n      range.insertNode($code[0]);\n      range.selectNodeContents($code[0]);\n      this.editor.selection.range(range);\n    }\n    return this.editor.trigger('valuechanged');\n  };\n\n  return CodeButton;\n\n})(Button);\n\nCodePopover = (function(superClass) {\n  extend(CodePopover, superClass);\n\n  function CodePopover() {\n    return CodePopover.__super__.constructor.apply(this, arguments);\n  }\n\n  CodePopover.prototype.render = function() {\n    var $option, k, lang, len, ref;\n    this._tpl = \"<div class=\\\"code-settings\\\">\\n  <div class=\\\"settings-field\\\">\\n    <select class=\\\"select-lang\\\">\\n      <option value=\\\"-1\\\">\" + (this._t('selectLanguage')) + \"</option>\\n    </select>\\n  </div>\\n</div>\";\n    this.langs = this.editor.opts.codeLanguages || [\n      {\n        name: 'Bash',\n        value: 'bash'\n      }, {\n        name: 'C++',\n        value: 'c++'\n      }, {\n        name: 'C#',\n        value: 'cs'\n      }, {\n        name: 'CSS',\n        value: 'css'\n      }, {\n        name: 'Erlang',\n        value: 'erlang'\n      }, {\n        name: 'Less',\n        value: 'less'\n      }, {\n        name: 'Sass',\n        value: 'sass'\n      }, {\n        name: 'Diff',\n        value: 'diff'\n      }, {\n        name: 'CoffeeScript',\n        value: 'coffeescript'\n      }, {\n        name: 'HTML,XML',\n        value: 'html'\n      }, {\n        name: 'JSON',\n        value: 'json'\n      }, {\n        name: 'Java',\n        value: 'java'\n      }, {\n        name: 'JavaScript',\n        value: 'js'\n      }, {\n        name: 'Markdown',\n        value: 'markdown'\n      }, {\n        name: 'Objective C',\n        value: 'oc'\n      }, {\n        name: 'PHP',\n        value: 'php'\n      }, {\n        name: 'Perl',\n        value: 'parl'\n      }, {\n        name: 'Python',\n        value: 'python'\n      }, {\n        name: 'Ruby',\n        value: 'ruby'\n      }, {\n        name: 'SQL',\n        value: 'sql'\n      }\n    ];\n    this.el.addClass('code-popover').append(this._tpl);\n    this.selectEl = this.el.find('.select-lang');\n    ref = this.langs;\n    for (k = 0, len = ref.length; k < len; k++) {\n      lang = ref[k];\n      $option = $('<option/>', {\n        text: lang.name,\n        value: lang.value\n      }).appendTo(this.selectEl);\n    }\n    this.selectEl.on('change', (function(_this) {\n      return function(e) {\n        var selected;\n        _this.lang = _this.selectEl.val();\n        selected = _this.target.hasClass('selected');\n        _this.target.removeClass().removeAttr('data-lang');\n        if (_this.lang !== -1) {\n          _this.target.attr('data-lang', _this.lang);\n        }\n        if (selected) {\n          _this.target.addClass('selected');\n        }\n        return _this.editor.trigger('valuechanged');\n      };\n    })(this));\n    return this.editor.on('valuechanged', (function(_this) {\n      return function(e) {\n        if (_this.active) {\n          return _this.refresh();\n        }\n      };\n    })(this));\n  };\n\n  CodePopover.prototype.show = function() {\n    var args;\n    args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    CodePopover.__super__.show.apply(this, args);\n    this.lang = this.target.attr('data-lang');\n    if (this.lang != null) {\n      return this.selectEl.val(this.lang);\n    } else {\n      return this.selectEl.val(-1);\n    }\n  };\n\n  return CodePopover;\n\n})(Popover);\n\nSimditor.Toolbar.addButton(CodeButton);\n\nLinkButton = (function(superClass) {\n  extend(LinkButton, superClass);\n\n  function LinkButton() {\n    return LinkButton.__super__.constructor.apply(this, arguments);\n  }\n\n  LinkButton.prototype.name = 'link';\n\n  LinkButton.prototype.icon = 'link';\n\n  LinkButton.prototype.htmlTag = 'a';\n\n  LinkButton.prototype.disableTag = 'pre';\n\n  LinkButton.prototype.render = function() {\n    var args;\n    args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    LinkButton.__super__.render.apply(this, args);\n    return this.popover = new LinkPopover({\n      button: this\n    });\n  };\n\n  LinkButton.prototype._status = function() {\n    LinkButton.__super__._status.call(this);\n    if (this.active && !this.editor.selection.rangeAtEndOf(this.node)) {\n      return this.popover.show(this.node);\n    } else {\n      return this.popover.hide();\n    }\n  };\n\n  LinkButton.prototype.command = function() {\n    var $contents, $link, $newBlock, linkText, range, txtNode;\n    range = this.editor.selection.range();\n    if (this.active) {\n      txtNode = document.createTextNode(this.node.text());\n      this.node.replaceWith(txtNode);\n      range.selectNode(txtNode);\n    } else {\n      $contents = $(range.extractContents());\n      linkText = this.editor.formatter.clearHtml($contents.contents(), false);\n      $link = $('<a/>', {\n        href: 'http://www.example.com',\n        target: '_blank',\n        text: linkText || this._t('linkText')\n      });\n      if (this.editor.selection.blockNodes().length > 0) {\n        range.insertNode($link[0]);\n      } else {\n        $newBlock = $('<p/>').append($link);\n        range.insertNode($newBlock[0]);\n      }\n      range.selectNodeContents($link[0]);\n      this.popover.one('popovershow', (function(_this) {\n        return function() {\n          if (linkText) {\n            _this.popover.urlEl.focus();\n            return _this.popover.urlEl[0].select();\n          } else {\n            _this.popover.textEl.focus();\n            return _this.popover.textEl[0].select();\n          }\n        };\n      })(this));\n    }\n    this.editor.selection.range(range);\n    return this.editor.trigger('valuechanged');\n  };\n\n  return LinkButton;\n\n})(Button);\n\nLinkPopover = (function(superClass) {\n  extend(LinkPopover, superClass);\n\n  function LinkPopover() {\n    return LinkPopover.__super__.constructor.apply(this, arguments);\n  }\n\n  LinkPopover.prototype.render = function() {\n    var tpl;\n    tpl = \"<div class=\\\"link-settings\\\">\\n  <div class=\\\"settings-field\\\">\\n    <label>\" + (this._t('linkText')) + \"</label>\\n    <input class=\\\"link-text\\\" type=\\\"text\\\"/>\\n    <a class=\\\"btn-unlink\\\" href=\\\"javascript:;\\\" title=\\\"\" + (this._t('removeLink')) + \"\\\"\\n      tabindex=\\\"-1\\\">\\n      <span class=\\\"simditor-icon simditor-icon-unlink\\\"></span>\\n    </a>\\n  </div>\\n  <div class=\\\"settings-field\\\">\\n    <label>\" + (this._t('linkUrl')) + \"</label>\\n    <input class=\\\"link-url\\\" type=\\\"text\\\"/>\\n  </div>\\n  <div class=\\\"settings-field\\\">\\n    <label>\" + (this._t('linkTarget')) + \"</label>\\n    <select class=\\\"link-target\\\">\\n      <option value=\\\"_blank\\\">\" + (this._t('openLinkInNewWindow')) + \" (_blank)</option>\\n      <option value=\\\"_self\\\">\" + (this._t('openLinkInCurrentWindow')) + \" (_self)</option>\\n    </select>\\n  </div>\\n</div>\";\n    this.el.addClass('link-popover').append(tpl);\n    this.textEl = this.el.find('.link-text');\n    this.urlEl = this.el.find('.link-url');\n    this.unlinkEl = this.el.find('.btn-unlink');\n    this.selectTarget = this.el.find('.link-target');\n    this.textEl.on('keyup', (function(_this) {\n      return function(e) {\n        if (e.which === 13) {\n          return;\n        }\n        _this.target.text(_this.textEl.val());\n        return _this.editor.inputManager.throttledValueChanged();\n      };\n    })(this));\n    this.urlEl.on('keyup', (function(_this) {\n      return function(e) {\n        var val;\n        if (e.which === 13) {\n          return;\n        }\n        val = _this.urlEl.val();\n        if (!(/https?:\\/\\/|^\\//ig.test(val) || !val)) {\n          val = 'http://' + val;\n        }\n        _this.target.attr('href', val);\n        return _this.editor.inputManager.throttledValueChanged();\n      };\n    })(this));\n    $([this.urlEl[0], this.textEl[0]]).on('keydown', (function(_this) {\n      return function(e) {\n        var range;\n        if (e.which === 13 || e.which === 27 || (!e.shiftKey && e.which === 9 && $(e.target).hasClass('link-url'))) {\n          e.preventDefault();\n          range = document.createRange();\n          _this.editor.selection.setRangeAfter(_this.target, range);\n          _this.hide();\n          return _this.editor.inputManager.throttledValueChanged();\n        }\n      };\n    })(this));\n    this.unlinkEl.on('click', (function(_this) {\n      return function(e) {\n        var range, txtNode;\n        txtNode = document.createTextNode(_this.target.text());\n        _this.target.replaceWith(txtNode);\n        _this.hide();\n        range = document.createRange();\n        _this.editor.selection.setRangeAfter(txtNode, range);\n        return _this.editor.inputManager.throttledValueChanged();\n      };\n    })(this));\n    return this.selectTarget.on('change', (function(_this) {\n      return function(e) {\n        _this.target.attr('target', _this.selectTarget.val());\n        return _this.editor.inputManager.throttledValueChanged();\n      };\n    })(this));\n  };\n\n  LinkPopover.prototype.show = function() {\n    var args;\n    args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    LinkPopover.__super__.show.apply(this, args);\n    this.textEl.val(this.target.text());\n    return this.urlEl.val(this.target.attr('href'));\n  };\n\n  return LinkPopover;\n\n})(Popover);\n\nSimditor.Toolbar.addButton(LinkButton);\n\nImageButton = (function(superClass) {\n  extend(ImageButton, superClass);\n\n  function ImageButton() {\n    return ImageButton.__super__.constructor.apply(this, arguments);\n  }\n\n  ImageButton.prototype.name = 'image';\n\n  ImageButton.prototype.icon = 'picture-o';\n\n  ImageButton.prototype.htmlTag = 'img';\n\n  ImageButton.prototype.disableTag = 'pre, table';\n\n  ImageButton.prototype.defaultImage = '';\n\n  ImageButton.prototype.needFocus = false;\n\n  ImageButton.prototype._init = function() {\n    var item, k, len, ref;\n    if (this.editor.opts.imageButton) {\n      if (Array.isArray(this.editor.opts.imageButton)) {\n        this.menu = [];\n        ref = this.editor.opts.imageButton;\n        for (k = 0, len = ref.length; k < len; k++) {\n          item = ref[k];\n          this.menu.push({\n            name: item + '-image',\n            text: this._t(item + 'Image')\n          });\n        }\n      } else {\n        this.menu = false;\n      }\n    } else {\n      if (this.editor.uploader != null) {\n        this.menu = [\n          {\n            name: 'upload-image',\n            text: this._t('uploadImage')\n          }, {\n            name: 'external-image',\n            text: this._t('externalImage')\n          }\n        ];\n      } else {\n        this.menu = false;\n      }\n    }\n    this.defaultImage = this.editor.opts.defaultImage;\n    this.editor.body.on('click', 'img:not([data-non-image])', (function(_this) {\n      return function(e) {\n        var $img, range;\n        $img = $(e.currentTarget);\n        range = document.createRange();\n        range.selectNode($img[0]);\n        _this.editor.selection.range(range);\n        if (!_this.editor.util.support.onselectionchange) {\n          _this.editor.trigger('selectionchanged');\n        }\n        return false;\n      };\n    })(this));\n    this.editor.body.on('mouseup', 'img:not([data-non-image])', function(e) {\n      return false;\n    });\n    this.editor.on('selectionchanged.image', (function(_this) {\n      return function() {\n        var $contents, $img, range;\n        range = _this.editor.selection.range();\n        if (range == null) {\n          return;\n        }\n        $contents = $(range.cloneContents()).contents();\n        if ($contents.length === 1 && $contents.is('img:not([data-non-image])')) {\n          $img = $(range.startContainer).contents().eq(range.startOffset);\n          return _this.popover.show($img);\n        } else {\n          return _this.popover.hide();\n        }\n      };\n    })(this));\n    this.editor.on('valuechanged.image', (function(_this) {\n      return function() {\n        var $masks;\n        $masks = _this.editor.wrapper.find('.simditor-image-loading');\n        if (!($masks.length > 0)) {\n          return;\n        }\n        return $masks.each(function(i, mask) {\n          var $img, $mask, file;\n          $mask = $(mask);\n          $img = $mask.data('img');\n          if (!($img && $img.parent().length > 0)) {\n            $mask.remove();\n            if ($img) {\n              file = $img.data('file');\n              if (file) {\n                _this.editor.uploader.cancel(file);\n                if (_this.editor.body.find('img.uploading').length < 1) {\n                  return _this.editor.uploader.trigger('uploadready', [file]);\n                }\n              }\n            }\n          }\n        });\n      };\n    })(this));\n    return ImageButton.__super__._init.call(this);\n  };\n\n  ImageButton.prototype.render = function() {\n    var args;\n    args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    ImageButton.__super__.render.apply(this, args);\n    this.popover = new ImagePopover({\n      button: this\n    });\n    if (this.editor.opts.imageButton === 'upload') {\n      return this._initUploader(this.el);\n    }\n  };\n\n  ImageButton.prototype.renderMenu = function() {\n    ImageButton.__super__.renderMenu.call(this);\n    return this._initUploader();\n  };\n\n  ImageButton.prototype._initUploader = function($uploadItem) {\n    var $input, createInput, uploadProgress;\n    if ($uploadItem == null) {\n      $uploadItem = this.menuEl.find('.menu-item-upload-image');\n    }\n    if (this.editor.uploader == null) {\n      this.el.find('.btn-upload').remove();\n      return;\n    }\n    $input = null;\n    createInput = (function(_this) {\n      return function() {\n        if ($input) {\n          $input.remove();\n        }\n        return $input = $('<input/>', {\n          type: 'file',\n          title: _this._t('uploadImage'),\n          multiple: true,\n          accept: 'image/*'\n        }).appendTo($uploadItem);\n      };\n    })(this);\n    createInput();\n    $uploadItem.on('click mousedown', 'input[type=file]', function(e) {\n      return e.stopPropagation();\n    });\n    $uploadItem.on('change', 'input[type=file]', (function(_this) {\n      return function(e) {\n        if (_this.editor.inputManager.focused) {\n          _this.editor.uploader.upload($input, {\n            inline: true\n          });\n          createInput();\n        } else {\n          _this.editor.one('focus', function(e) {\n            _this.editor.uploader.upload($input, {\n              inline: true\n            });\n            return createInput();\n          });\n          _this.editor.focus();\n        }\n        return _this.wrapper.removeClass('menu-on');\n      };\n    })(this));\n    this.editor.uploader.on('beforeupload', (function(_this) {\n      return function(e, file) {\n        var $img;\n        if (!file.inline) {\n          return;\n        }\n        if (file.img) {\n          $img = $(file.img);\n        } else {\n          $img = _this.createImage(file.name);\n          file.img = $img;\n        }\n        $img.addClass('uploading');\n        $img.data('file', file);\n        return _this.editor.uploader.readImageFile(file.obj, function(img) {\n          var src;\n          if (!$img.hasClass('uploading')) {\n            return;\n          }\n          src = img ? img.src : _this.defaultImage;\n          return _this.loadImage($img, src, function() {\n            if (_this.popover.active) {\n              _this.popover.refresh();\n              return _this.popover.srcEl.val(_this._t('uploading')).prop('disabled', true);\n            }\n          });\n        });\n      };\n    })(this));\n    uploadProgress = $.proxy(this.editor.util.throttle(function(e, file, loaded, total) {\n      var $img, $mask, percent;\n      if (!file.inline) {\n        return;\n      }\n      $mask = file.img.data('mask');\n      if (!$mask) {\n        return;\n      }\n      $img = $mask.data('img');\n      if (!($img.hasClass('uploading') && $img.parent().length > 0)) {\n        $mask.remove();\n        return;\n      }\n      percent = loaded / total;\n      percent = (percent * 100).toFixed(0);\n      if (percent > 99) {\n        percent = 99;\n      }\n      return $mask.find('.progress').height((100 - percent) + \"%\");\n    }, 500), this);\n    this.editor.uploader.on('uploadprogress', uploadProgress);\n    this.editor.uploader.on('uploadsuccess', (function(_this) {\n      return function(e, file, result) {\n        var $img, img_path, msg;\n        if (!file.inline) {\n          return;\n        }\n        $img = file.img;\n        if (!($img.hasClass('uploading') && $img.parent().length > 0)) {\n          return;\n        }\n        if (typeof result !== 'object') {\n          try {\n            result = $.parseJSON(result);\n          } catch (_error) {\n            e = _error;\n            result = {\n              success: false\n            };\n          }\n        }\n        if (result.success === false) {\n          msg = result.msg || _this._t('uploadFailed');\n          alert(msg);\n          img_path = _this.defaultImage;\n        } else {\n          img_path = result.file_path;\n        }\n        _this.loadImage($img, img_path, function() {\n          var $mask;\n          $img.removeData('file');\n          $img.removeClass('uploading').removeClass('loading');\n          $mask = $img.data('mask');\n          if ($mask) {\n            $mask.remove();\n          }\n          $img.removeData('mask');\n          _this.editor.trigger('valuechanged');\n          if (_this.editor.body.find('img.uploading').length < 1) {\n            return _this.editor.uploader.trigger('uploadready', [file, result]);\n          }\n        });\n        if (_this.popover.active) {\n          _this.popover.srcEl.prop('disabled', false);\n          return _this.popover.srcEl.val(result.file_path);\n        }\n      };\n    })(this));\n    return this.editor.uploader.on('uploaderror', (function(_this) {\n      return function(e, file, xhr) {\n        var $img, msg, result;\n        if (!file.inline) {\n          return;\n        }\n        if (xhr.statusText === 'abort') {\n          return;\n        }\n        if (xhr.responseText) {\n          try {\n            result = $.parseJSON(xhr.responseText);\n            msg = result.msg;\n          } catch (_error) {\n            e = _error;\n            msg = _this._t('uploadError');\n          }\n          alert(msg);\n        }\n        $img = file.img;\n        if (!($img.hasClass('uploading') && $img.parent().length > 0)) {\n          return;\n        }\n        _this.loadImage($img, _this.defaultImage, function() {\n          var $mask;\n          $img.removeData('file');\n          $img.removeClass('uploading').removeClass('loading');\n          $mask = $img.data('mask');\n          if ($mask) {\n            $mask.remove();\n          }\n          return $img.removeData('mask');\n        });\n        if (_this.popover.active) {\n          _this.popover.srcEl.prop('disabled', false);\n          _this.popover.srcEl.val(_this.defaultImage);\n        }\n        _this.editor.trigger('valuechanged');\n        if (_this.editor.body.find('img.uploading').length < 1) {\n          return _this.editor.uploader.trigger('uploadready', [file, result]);\n        }\n      };\n    })(this));\n  };\n\n  ImageButton.prototype._status = function() {\n    return this._disableStatus();\n  };\n\n  ImageButton.prototype.loadImage = function($img, src, callback) {\n    var $mask, img, positionMask;\n    positionMask = (function(_this) {\n      return function() {\n        var imgOffset, wrapperOffset;\n        imgOffset = $img.offset();\n        wrapperOffset = _this.editor.wrapper.offset();\n        return $mask.css({\n          top: imgOffset.top - wrapperOffset.top,\n          left: imgOffset.left - wrapperOffset.left,\n          width: $img.width(),\n          height: $img.height()\n        }).show();\n      };\n    })(this);\n    $img.addClass('loading');\n    $mask = $img.data('mask');\n    if (!$mask) {\n      $mask = $('<div class=\"simditor-image-loading\">\\n  <div class=\"progress\"></div>\\n</div>').hide().appendTo(this.editor.wrapper);\n      positionMask();\n      $img.data('mask', $mask);\n      $mask.data('img', $img);\n    }\n    img = new Image();\n    img.onload = (function(_this) {\n      return function() {\n        var height, width;\n        if (!$img.hasClass('loading') && !$img.hasClass('uploading')) {\n          return;\n        }\n        width = img.width;\n        height = img.height;\n        $img.attr({\n          src: src,\n          width: width,\n          height: height,\n          'data-image-size': width + ',' + height\n        }).removeClass('loading');\n        if ($img.hasClass('uploading')) {\n          _this.editor.util.reflow(_this.editor.body);\n          positionMask();\n        } else {\n          $mask.remove();\n          $img.removeData('mask');\n        }\n        if ($.isFunction(callback)) {\n          return callback(img);\n        }\n      };\n    })(this);\n    img.onerror = function() {\n      if ($.isFunction(callback)) {\n        callback(false);\n      }\n      $mask.remove();\n      return $img.removeData('mask').removeClass('loading');\n    };\n    return img.src = src;\n  };\n\n  ImageButton.prototype.createImage = function(name) {\n    var $img, range;\n    if (name == null) {\n      name = 'Image';\n    }\n    if (!this.editor.inputManager.focused) {\n      this.editor.focus();\n    }\n    range = this.editor.selection.range();\n    range.deleteContents();\n    this.editor.selection.range(range);\n    $img = $('<img/>').attr('alt', name);\n    range.insertNode($img[0]);\n    this.editor.selection.setRangeAfter($img, range);\n    this.editor.trigger('valuechanged');\n    return $img;\n  };\n\n  ImageButton.prototype.command = function(src) {\n    var $img;\n    $img = this.createImage();\n    return this.loadImage($img, src || this.defaultImage, (function(_this) {\n      return function() {\n        _this.editor.trigger('valuechanged');\n        _this.editor.util.reflow($img);\n        $img.click();\n        return _this.popover.one('popovershow', function() {\n          _this.popover.srcEl.focus();\n          return _this.popover.srcEl[0].select();\n        });\n      };\n    })(this));\n  };\n\n  return ImageButton;\n\n})(Button);\n\nImagePopover = (function(superClass) {\n  extend(ImagePopover, superClass);\n\n  function ImagePopover() {\n    return ImagePopover.__super__.constructor.apply(this, arguments);\n  }\n\n  ImagePopover.prototype.offset = {\n    top: 6,\n    left: -4\n  };\n\n  ImagePopover.prototype.render = function() {\n    var tpl;\n    tpl = \"<div class=\\\"link-settings\\\">\\n  <div class=\\\"settings-field\\\">\\n    <label>\" + (this._t('imageUrl')) + \"</label>\\n    <input class=\\\"image-src\\\" type=\\\"text\\\" tabindex=\\\"1\\\" />\\n    <a class=\\\"btn-upload\\\" href=\\\"javascript:;\\\"\\n      title=\\\"\" + (this._t('uploadImage')) + \"\\\" tabindex=\\\"-1\\\">\\n      <span class=\\\"simditor-icon simditor-icon-upload\\\"></span>\\n    </a>\\n  </div>\\n  <div class='settings-field'>\\n    <label>\" + (this._t('imageAlt')) + \"</label>\\n    <input class=\\\"image-alt\\\" id=\\\"image-alt\\\" type=\\\"text\\\" tabindex=\\\"1\\\" />\\n  </div>\\n  <div class=\\\"settings-field\\\">\\n    <label>\" + (this._t('imageSize')) + \"</label>\\n    <input class=\\\"image-size\\\" id=\\\"image-width\\\" type=\\\"text\\\" tabindex=\\\"2\\\" />\\n    <span class=\\\"times\\\">×</span>\\n    <input class=\\\"image-size\\\" id=\\\"image-height\\\" type=\\\"text\\\" tabindex=\\\"3\\\" />\\n    <a class=\\\"btn-restore\\\" href=\\\"javascript:;\\\"\\n      title=\\\"\" + (this._t('restoreImageSize')) + \"\\\" tabindex=\\\"-1\\\">\\n      <span class=\\\"simditor-icon simditor-icon-undo\\\"></span>\\n    </a>\\n  </div>\\n</div>\";\n    this.el.addClass('image-popover').append(tpl);\n    this.srcEl = this.el.find('.image-src');\n    this.widthEl = this.el.find('#image-width');\n    this.heightEl = this.el.find('#image-height');\n    this.altEl = this.el.find('#image-alt');\n    this.srcEl.on('keydown', (function(_this) {\n      return function(e) {\n        var range;\n        if (!(e.which === 13 && !_this.target.hasClass('uploading'))) {\n          return;\n        }\n        e.preventDefault();\n        range = document.createRange();\n        _this.button.editor.selection.setRangeAfter(_this.target, range);\n        return _this.hide();\n      };\n    })(this));\n    this.srcEl.on('blur', (function(_this) {\n      return function(e) {\n        return _this._loadImage(_this.srcEl.val());\n      };\n    })(this));\n    this.el.find('.image-size').on('blur', (function(_this) {\n      return function(e) {\n        _this._resizeImg($(e.currentTarget));\n        return _this.el.data('popover').refresh();\n      };\n    })(this));\n    this.el.find('.image-size').on('keyup', (function(_this) {\n      return function(e) {\n        var inputEl;\n        inputEl = $(e.currentTarget);\n        if (!(e.which === 13 || e.which === 27 || e.which === 9)) {\n          return _this._resizeImg(inputEl, true);\n        }\n      };\n    })(this));\n    this.el.find('.image-size').on('keydown', (function(_this) {\n      return function(e) {\n        var $img, inputEl, range;\n        inputEl = $(e.currentTarget);\n        if (e.which === 13 || e.which === 27) {\n          e.preventDefault();\n          if (e.which === 13) {\n            _this._resizeImg(inputEl);\n          } else {\n            _this._restoreImg();\n          }\n          $img = _this.target;\n          _this.hide();\n          range = document.createRange();\n          return _this.button.editor.selection.setRangeAfter($img, range);\n        } else if (e.which === 9) {\n          return _this.el.data('popover').refresh();\n        }\n      };\n    })(this));\n    this.altEl.on('keydown', (function(_this) {\n      return function(e) {\n        var range;\n        if (e.which === 13) {\n          e.preventDefault();\n          range = document.createRange();\n          _this.button.editor.selection.setRangeAfter(_this.target, range);\n          return _this.hide();\n        }\n      };\n    })(this));\n    this.altEl.on('keyup', (function(_this) {\n      return function(e) {\n        if (e.which === 13 || e.which === 27 || e.which === 9) {\n          return;\n        }\n        _this.alt = _this.altEl.val();\n        return _this.target.attr('alt', _this.alt);\n      };\n    })(this));\n    this.el.find('.btn-restore').on('click', (function(_this) {\n      return function(e) {\n        _this._restoreImg();\n        return _this.el.data('popover').refresh();\n      };\n    })(this));\n    this.editor.on('valuechanged', (function(_this) {\n      return function(e) {\n        if (_this.active) {\n          return _this.refresh();\n        }\n      };\n    })(this));\n    return this._initUploader();\n  };\n\n  ImagePopover.prototype._initUploader = function() {\n    var $uploadBtn, createInput;\n    $uploadBtn = this.el.find('.btn-upload');\n    if (this.editor.uploader == null) {\n      $uploadBtn.remove();\n      return;\n    }\n    createInput = (function(_this) {\n      return function() {\n        if (_this.input) {\n          _this.input.remove();\n        }\n        return _this.input = $('<input/>', {\n          type: 'file',\n          title: _this._t('uploadImage'),\n          multiple: true,\n          accept: 'image/*'\n        }).appendTo($uploadBtn);\n      };\n    })(this);\n    createInput();\n    this.el.on('click mousedown', 'input[type=file]', function(e) {\n      return e.stopPropagation();\n    });\n    return this.el.on('change', 'input[type=file]', (function(_this) {\n      return function(e) {\n        _this.editor.uploader.upload(_this.input, {\n          inline: true,\n          img: _this.target\n        });\n        return createInput();\n      };\n    })(this));\n  };\n\n  ImagePopover.prototype._resizeImg = function(inputEl, onlySetVal) {\n    var height, value, width;\n    if (onlySetVal == null) {\n      onlySetVal = false;\n    }\n    value = inputEl.val() * 1;\n    if (!(this.target && ($.isNumeric(value) || value < 0))) {\n      return;\n    }\n    if (inputEl.is(this.widthEl)) {\n      width = value;\n      height = this.height * value / this.width;\n      this.heightEl.val(height);\n    } else {\n      height = value;\n      width = this.width * value / this.height;\n      this.widthEl.val(width);\n    }\n    if (!onlySetVal) {\n      this.target.attr({\n        width: width,\n        height: height\n      });\n      return this.editor.trigger('valuechanged');\n    }\n  };\n\n  ImagePopover.prototype._restoreImg = function() {\n    var ref, size;\n    size = ((ref = this.target.data('image-size')) != null ? ref.split(\",\") : void 0) || [this.width, this.height];\n    this.target.attr({\n      width: size[0] * 1,\n      height: size[1] * 1\n    });\n    this.widthEl.val(size[0]);\n    this.heightEl.val(size[1]);\n    return this.editor.trigger('valuechanged');\n  };\n\n  ImagePopover.prototype._loadImage = function(src, callback) {\n    if (/^data:image/.test(src) && !this.editor.uploader) {\n      if (callback) {\n        callback(false);\n      }\n      return;\n    }\n    if (this.target.attr('src') === src) {\n      return;\n    }\n    return this.button.loadImage(this.target, src, (function(_this) {\n      return function(img) {\n        var blob;\n        if (!img) {\n          return;\n        }\n        if (_this.active) {\n          _this.width = img.width;\n          _this.height = img.height;\n          _this.widthEl.val(_this.width);\n          _this.heightEl.val(_this.height);\n        }\n        if (/^data:image/.test(src)) {\n          blob = _this.editor.util.dataURLtoBlob(src);\n          blob.name = \"Base64 Image.png\";\n          _this.editor.uploader.upload(blob, {\n            inline: true,\n            img: _this.target\n          });\n        } else {\n          _this.editor.trigger('valuechanged');\n        }\n        if (callback) {\n          return callback(img);\n        }\n      };\n    })(this));\n  };\n\n  ImagePopover.prototype.show = function() {\n    var $img, args;\n    args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    ImagePopover.__super__.show.apply(this, args);\n    $img = this.target;\n    this.width = $img.width();\n    this.height = $img.height();\n    this.alt = $img.attr('alt');\n    if ($img.hasClass('uploading')) {\n      return this.srcEl.val(this._t('uploading')).prop('disabled', true);\n    } else {\n      this.srcEl.val($img.attr('src')).prop('disabled', false);\n      this.widthEl.val(this.width);\n      this.heightEl.val(this.height);\n      return this.altEl.val(this.alt);\n    }\n  };\n\n  return ImagePopover;\n\n})(Popover);\n\nSimditor.Toolbar.addButton(ImageButton);\n\nIndentButton = (function(superClass) {\n  extend(IndentButton, superClass);\n\n  function IndentButton() {\n    return IndentButton.__super__.constructor.apply(this, arguments);\n  }\n\n  IndentButton.prototype.name = 'indent';\n\n  IndentButton.prototype.icon = 'indent';\n\n  IndentButton.prototype._init = function() {\n    this.title = this._t(this.name) + ' (Tab)';\n    return IndentButton.__super__._init.call(this);\n  };\n\n  IndentButton.prototype._status = function() {};\n\n  IndentButton.prototype.command = function() {\n    return this.editor.indentation.indent();\n  };\n\n  return IndentButton;\n\n})(Button);\n\nSimditor.Toolbar.addButton(IndentButton);\n\nOutdentButton = (function(superClass) {\n  extend(OutdentButton, superClass);\n\n  function OutdentButton() {\n    return OutdentButton.__super__.constructor.apply(this, arguments);\n  }\n\n  OutdentButton.prototype.name = 'outdent';\n\n  OutdentButton.prototype.icon = 'outdent';\n\n  OutdentButton.prototype._init = function() {\n    this.title = this._t(this.name) + ' (Shift + Tab)';\n    return OutdentButton.__super__._init.call(this);\n  };\n\n  OutdentButton.prototype._status = function() {};\n\n  OutdentButton.prototype.command = function() {\n    return this.editor.indentation.indent(true);\n  };\n\n  return OutdentButton;\n\n})(Button);\n\nSimditor.Toolbar.addButton(OutdentButton);\n\nHrButton = (function(superClass) {\n  extend(HrButton, superClass);\n\n  function HrButton() {\n    return HrButton.__super__.constructor.apply(this, arguments);\n  }\n\n  HrButton.prototype.name = 'hr';\n\n  HrButton.prototype.icon = 'minus';\n\n  HrButton.prototype.htmlTag = 'hr';\n\n  HrButton.prototype._status = function() {};\n\n  HrButton.prototype.command = function() {\n    var $hr, $newBlock, $nextBlock, $rootBlock;\n    $rootBlock = this.editor.selection.rootNodes().first();\n    $nextBlock = $rootBlock.next();\n    if ($nextBlock.length > 0) {\n      this.editor.selection.save();\n    } else {\n      $newBlock = $('<p/>').append(this.editor.util.phBr);\n    }\n    $hr = $('<hr/>').insertAfter($rootBlock);\n    if ($newBlock) {\n      $newBlock.insertAfter($hr);\n      this.editor.selection.setRangeAtStartOf($newBlock);\n    } else {\n      this.editor.selection.restore();\n    }\n    return this.editor.trigger('valuechanged');\n  };\n\n  return HrButton;\n\n})(Button);\n\nSimditor.Toolbar.addButton(HrButton);\n\nTableButton = (function(superClass) {\n  extend(TableButton, superClass);\n\n  function TableButton() {\n    return TableButton.__super__.constructor.apply(this, arguments);\n  }\n\n  TableButton.prototype.name = 'table';\n\n  TableButton.prototype.icon = 'table';\n\n  TableButton.prototype.htmlTag = 'table';\n\n  TableButton.prototype.disableTag = 'pre, li, blockquote';\n\n  TableButton.prototype.menu = true;\n\n  TableButton.prototype._init = function() {\n    TableButton.__super__._init.call(this);\n    $.merge(this.editor.formatter._allowedTags, ['thead', 'th', 'tbody', 'tr', 'td', 'colgroup', 'col']);\n    $.extend(this.editor.formatter._allowedAttributes, {\n      table: ['class'],\n      td: ['rowspan', 'colspan', 'class'],//mod-for-jl\n      col: ['width']\n    });\n    $.extend(this.editor.formatter._allowedStyles, {\n      td: ['text-align'],\n      th: ['text-align']\n    });\n    this._initShortcuts();\n    this.editor.on('decorate', (function(_this) {\n      return function(e, $el) {\n        return $el.find('table').each(function(i, table) {\n          return _this.decorate($(table));\n        });\n      };\n    })(this));\n    this.editor.on('undecorate', (function(_this) {\n      return function(e, $el) {\n        return $el.find('table').each(function(i, table) {\n          return _this.undecorate($(table));\n        });\n      };\n    })(this));\n    this.editor.on('selectionchanged.table', (function(_this) {\n      return function(e) {\n        var $container, range;\n        _this.editor.body.find('.simditor-table td, .simditor-table th').removeClass('active');\n        range = _this.editor.selection.range();\n        if (!range) {\n          return;\n        }\n        $container = _this.editor.selection.containerNode();\n        if (range.collapsed && $container.is('.simditor-table')) {\n          if (_this.editor.selection.rangeAtStartOf($container)) {\n            $container = $container.find('td:first');//mod-for-jl\n          } else {\n            $container = $container.find('td:last');\n          }\n          _this.editor.selection.setRangeAtEndOf($container);\n        }\n        return $container.closest('td, th', _this.editor.body).addClass('active');\n      };\n    })(this));\n    this.editor.on('blur.table', (function(_this) {\n      return function(e) {\n        return _this.editor.body.find('.simditor-table td, .simditor-table th').removeClass('active');\n      };\n    })(this));\n    this.editor.keystroke.add('up', 'td', (function(_this) {\n      return function(e, $node) {\n        _this._tdNav($node, 'up');\n        return true;\n      };\n    })(this));\n    this.editor.keystroke.add('up', 'th', (function(_this) {\n      return function(e, $node) {\n        _this._tdNav($node, 'up');\n        return true;\n      };\n    })(this));\n    this.editor.keystroke.add('down', 'td', (function(_this) {\n      return function(e, $node) {\n        _this._tdNav($node, 'down');\n        return true;\n      };\n    })(this));\n    return this.editor.keystroke.add('down', 'th', (function(_this) {\n      return function(e, $node) {\n        _this._tdNav($node, 'down');\n        return true;\n      };\n    })(this));\n  };\n\n  TableButton.prototype._tdNav = function($td, direction) {\n    var $anotherTr, $tr, action, anotherTag, index, parentTag, ref;\n    if (direction == null) {\n      direction = 'up';\n    }\n    action = direction === 'up' ? 'prev' : 'next';\n    ref = direction === 'up' ? ['tbody', 'thead'] : ['thead', 'tbody'], parentTag = ref[0], anotherTag = ref[1];\n    $tr = $td.parent('tr');\n    $anotherTr = this[\"_\" + action + \"Row\"]($tr);\n    if (!($anotherTr.length > 0)) {//mod-for-jl\n        if(direction=='up')\n            return this.editor.selection.setRangeAtEndOf($tr.parent().parent().parent().prev());\n        if(direction=='down')\n            return this.editor.selection.setRangeAtEndOf($tr.parent().parent().parent().next());\n      return true;\n    }\n    index = $tr.find('td, th').index($td);\n    if($anotherTr.find('td, th').length-1<index) index = $anotherTr.find('td th').length-1; //mod-for-jl\n    return this.editor.selection.setRangeAtEndOf($anotherTr.find('td, th').eq(index));\n  };\n\n  TableButton.prototype._nextRow = function($tr) {\n    var $nextTr;\n    $nextTr = $tr.next('tr');\n    if ($nextTr.length < 1 && $tr.parent('thead').length > 0) {\n      $nextTr = $tr.parent('thead').next('tbody').find('tr:first');\n    }\n    return $nextTr;\n  };\n\n  TableButton.prototype._prevRow = function($tr) {\n    var $prevTr;\n    $prevTr = $tr.prev('tr');\n    if ($prevTr.length < 1 && $tr.parent('tbody').length > 0) {\n      $prevTr = $tr.parent('tbody').prev('thead').find('tr');\n    }\n    return $prevTr;\n  };\n\n  TableButton.prototype.initResize = function($table) {//mod-for-jl\n    var $colgroup, $resizeHandle, $wrapper;\n    $wrapper = $table.parent('.simditor-table');\n    $colgroup = $table.find('colgroup');\n    if ($colgroup.length < 1) {\n      $colgroup = $('<colgroup/>').prependTo($table);\n      // seleccionamos la fila mas grande\n      var cant_td, max_td, $trr;;\n      max_td = 0;\n      $table.find('tbody tr').each(function(i, tr) {\n          cant_td = $(tr).find('td').length;\n          if(cant_td>max_td){\n              $trr = $(tr);\n              max_td = cant_td;\n          }\n      });\n      $trr.find('td').each(function(i, td) {\n        var $col;\n        return $col = $('<col/>').appendTo($colgroup);\n      })\n      this.refreshTableWidth($table);\n    }\n    $resizeHandle = $('<div />', {\n      \"class\": 'simditor-resize-handle',\n      contenteditable: 'false'\n    }).appendTo($wrapper);\n    $wrapper.on('mousemove', 'td, th', function(e) {\n      var $col, $td, index, ref, ref1, x;\n      if ($wrapper.hasClass('resizing')) {\n        return;\n      }\n      $td = $(e.currentTarget);\n      x = e.pageX - $(e.currentTarget).offset().left;\n      if (x < 5 && $td.prev().length > 0) {\n        $td = $td.prev();\n      }\n      if ($td.next('td, th').length < 1) {\n        $resizeHandle.hide();\n        return;\n      }\n      if ((ref = $resizeHandle.data('td')) != null ? ref.is($td) : void 0) {\n        $resizeHandle.show();\n        return;\n      }\n      index = $td.parent().find('td, th').index($td);\n      $col = $colgroup.find('col').eq(index);\n      if ((ref1 = $resizeHandle.data('col')) != null ? ref1.is($col) : void 0) {\n        $resizeHandle.show();\n        return;\n      }\n      return $resizeHandle.css('left', $td.position().left + $td.outerWidth() - 5).data('td', $td).data('col', $col).show();\n    });\n    $wrapper.on('mouseleave', function(e) {\n      return $resizeHandle.hide();\n    });\n    return $wrapper.on('mousedown', '.simditor-resize-handle', function(e) {\n      var $handle, $leftCol, $leftTd, $rightCol, $rightTd, minWidth, startHandleLeft, startLeftWidth, startRightWidth, startX, tableWidth;\n      $handle = $(e.currentTarget);\n      $leftTd = $handle.data('td');\n      $leftCol = $handle.data('col');\n      $rightTd = $leftTd.next('td, th');\n      $rightCol = $leftCol.next('col');\n      startX = e.pageX;\n      startLeftWidth = $leftTd.outerWidth() * 1;\n      startRightWidth = $rightTd.outerWidth() * 1;\n      startHandleLeft = parseFloat($handle.css('left'));\n      tableWidth = $leftTd.closest('table').width();\n      minWidth = 50;\n      $(document).on('mousemove.simditor-resize-table', function(e) {\n        var deltaX, leftWidth, rightWidth;\n        deltaX = e.pageX - startX;\n        leftWidth = startLeftWidth + deltaX;\n        rightWidth = startRightWidth - deltaX;\n        if (leftWidth < minWidth) {\n          leftWidth = minWidth;\n          deltaX = minWidth - startLeftWidth;\n          rightWidth = startRightWidth - deltaX;\n        } else if (rightWidth < minWidth) {\n          rightWidth = minWidth;\n          deltaX = startRightWidth - minWidth;\n          leftWidth = startLeftWidth + deltaX;\n        }\n        $leftCol.attr('width', (leftWidth / tableWidth * 100) + '%');\n        $rightCol.attr('width', (rightWidth / tableWidth * 100) + '%');\n        return $handle.css('left', startHandleLeft + deltaX);\n      });\n      $(document).one('mouseup.simditor-resize-table', function(e) {\n        $(document).off('.simditor-resize-table');\n        return $wrapper.removeClass('resizing');\n      });\n      $wrapper.addClass('resizing');\n      return false;\n    });\n  };\n\n  TableButton.prototype._initShortcuts = function() {\n    this.editor.hotkeys.add('ctrl+alt+up', (function(_this) {\n      return function(e) {\n        _this.editMenu.find('.menu-item[data-param=insertRowAbove]').click();\n        return false;\n      };\n    })(this));\n    this.editor.hotkeys.add('ctrl+alt+down', (function(_this) {\n      return function(e) {\n        _this.editMenu.find('.menu-item[data-param=insertRowBelow]').click();\n        return false;\n      };\n    })(this));\n    this.editor.hotkeys.add('ctrl+alt+left', (function(_this) {\n      return function(e) {\n        _this.editMenu.find('.menu-item[data-param=insertColLeft]').click();\n        return false;\n      };\n    })(this));\n    return this.editor.hotkeys.add('ctrl+alt+right', (function(_this) {\n      return function(e) {\n        _this.editMenu.find('.menu-item[data-param=insertColRight]').click();\n        return false;\n      };\n    })(this));\n  };\n\n  TableButton.prototype.decorate = function($table) {//mod-for-jl\n    var $headRow, $tbody, $thead;\n    if ($table.parent('.simditor-table').length > 0) {\n      this.undecorate($table);\n    }\n    $table.wrap('<div class=\"simditor-table\"></div>');\n    this.initResize($table);\n    return $table.parent();\n  };\n\n  TableButton.prototype.undecorate = function($table) {\n    if (!($table.parent('.simditor-table').length > 0)) {\n      return;\n    }\n    return $table.parent().replaceWith($table);\n  };\n\n  TableButton.prototype.renderMenu = function() {\n    var $table;\n    $(\"<div class=\\\"menu-create-table\\\">\\n</div>\\n<div class=\\\"menu-edit-table\\\">\\n  <ul>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"deleteRow\\\">\\n        <span>\" + (this._t('deleteRow')) + \"</span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"insertRowAbove\\\">\\n        <span>\" + (this._t('insertRowAbove')) + \" ( Ctrl + Alt + ↑ )</span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"insertRowBelow\\\">\\n        <span>\" + (this._t('insertRowBelow')) + \" ( Ctrl + Alt + ↓ )</span>\\n      </a>\\n    </li>\\n    <li><span class=\\\"separator\\\"></span></li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"deleteCol\\\">\\n        <span>\" + (this._t('deleteColumn')) + \"</span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"insertColLeft\\\">\\n        <span>\" + (this._t('insertColumnLeft')) + \" ( Ctrl + Alt + ← )</span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"insertColRight\\\">\\n        <span>\" + (this._t('insertColumnRight')) + \" ( Ctrl + Alt + → )</span>\\n      </a>\\n    </li>\\n    <li><span class=\\\"separator\\\"></span></li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"paintRow\\\">\\n        <span>\" + (this._t('paintRow')) + \"</span>\\n      </a>\\n    </li>\\n  <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"paintCell\\\">\\n        <span>\" + (this._t('paintCell')) + \"</span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"dissolveRow\\\">\\n        <span>\" + (this._t('dissolveRow')) + \"</span>\\n      </a>\\n    </li>\\n  <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"dissolveCell\\\">\\n        <span>\" + (this._t('dissolveCell')) + \"</span>\\n      </a>\\n    </li>\\n   <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"addBorder\\\">\\n        <span>\" + (this._t('addBorder')) + \"</span>\\n      </a>\\n    </li>\\n   <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"removeBorder\\\">\\n        <span>\" + (this._t('removeBorder')) + \"</span>\\n      </a>\\n    </li>\\n   <li><span class=\\\"separator\\\"></span></li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"deleteTable\\\">\\n        <span>\" + (this._t('deleteTable')) + \"</span>\\n      </a>\\n    </li>\\n  </ul>\\n</div>\").appendTo(this.menuWrapper);\n    this.createMenu = this.menuWrapper.find('.menu-create-table');\n    this.editMenu = this.menuWrapper.find('.menu-edit-table');\n    $table = this.createTable(6, 6).appendTo(this.createMenu);\n    this.createMenu.on('mouseenter', 'td, th', (function(_this) {\n      return function(e) {\n        var $td, $tr, $trs, num;\n        _this.createMenu.find('td, th').removeClass('selected');\n        $td = $(e.currentTarget);\n        $tr = $td.parent();\n        num = $tr.find('td, th').index($td) + 1;\n        $trs = $tr.prevAll('tr').addBack();\n        if ($tr.parent().is('tbody')) {\n          $trs = $trs.add($table.find('thead tr'));\n        }\n        return $trs.find(\"td:lt(\" + num + \"), th:lt(\" + num + \")\").addClass('selected');\n      };\n    })(this));\n    this.createMenu.on('mouseleave', function(e) {\n      return $(e.currentTarget).find('td, th').removeClass('selected');\n    });\n    return this.createMenu.on('mousedown', 'td', (function(_this) {\n      return function(e) {\n        var $closestBlock, $td, $tr, colNum, rowNum;\n        _this.wrapper.removeClass('menu-on');\n        if (!_this.editor.inputManager.focused) {\n          return;\n        }\n        $td = $(e.currentTarget);\n        $tr = $td.parent();\n        colNum = $tr.find('td').index($td) + 1;\n        rowNum = $tr.prevAll('tr').length + 1;\n        if ($tr.parent().is('tbody')) {\n          rowNum += 1;\n        }\n        $table = _this.createTable(rowNum, colNum, true);\n        $closestBlock = _this.editor.selection.blockNodes().last();\n        if (_this.editor.util.isEmptyNode($closestBlock)) {\n          $closestBlock.replaceWith($table);\n        } else {\n          $closestBlock.after($table);\n        }\n        _this.decorate($table);\n        _this.editor.selection.setRangeAtStartOf($table.find('td:first'));\n        _this.editor.trigger('valuechanged');\n        return false;\n      };\n    })(this));\n  };\n\n  TableButton.prototype.createTable = function(row, col, phBr) {//mod-for-jl\n    var $table, $tbody, $td, $thead, $tr, c, k, l, r, ref, ref1;\n    $table = $('<table/>');\n    $tbody = $('<tbody/>').appendTo($table);\n    for (r = k = 0, ref = row; 0 <= ref ? k < ref : k > ref; r = 0 <= ref ? ++k : --k) {\n      $tr = $('<tr/>');\n      $tr.appendTo($tbody);\n      for (c = l = 0, ref1 = col; 0 <= ref1 ? l < ref1 : l > ref1; c = 0 <= ref1 ? ++l : --l) {\n        $td = $('<td/>').appendTo($tr);\n        if (phBr) {\n          $td.append(this.editor.util.phBr);\n        }\n      }\n    }\n    return $table;\n  };\n\n  TableButton.prototype.refreshTableWidth = function($table) { //mod-for-jl\n    var cols, tableWidth;\n    tableWidth = $table.width();\n    cols = $table.find('col');\n\n    // seleccionamos la fila mas grande\n    var cant_td, max_td, $trr;;\n    max_td = 0;\n    $table.find('tbody tr').each(function(i, tr) {\n        cant_td = $(tr).find('td').length;\n        if(cant_td>max_td){\n            $trr = $(tr);\n            max_td = cant_td;\n        }\n    });\n\n    return $trr.find('td').each(function(i, td) {\n      var $col, tam;\n      $col = cols.eq(i);\n      tam = (typeof $(td).outerWidth==\"function\")? 100/cols.length:  ($(td).outerWidth()==0)? 100/cols.length: (td).outerWidth() / tableWidth * 100 ;\n      return $col.attr('width', tam + '%');\n    });\n  };\n\n  TableButton.prototype.setActive = function(active) {\n    TableButton.__super__.setActive.call(this, active);\n    if (active) {\n      this.createMenu.hide();\n      return this.editMenu.show();\n    } else {\n      this.createMenu.show();\n      return this.editMenu.hide();\n    }\n  };\n\n  TableButton.prototype._changeCellTag = function($tr, tagName) {\n    return $tr.find('td, th').each(function(i, cell) {\n      var $cell;\n      $cell = $(cell);\n      return $cell.replaceWith(\"<\" + tagName + \">\" + ($cell.html()) + \"</\" + tagName + \">\");\n    });\n  };\n\n  TableButton.prototype.deleteRow = function($td) {\n    var $newTr, $tr, index;\n    $tr = $td.parent('tr');\n    if ($tr.closest('table').find('tr').length < 1) {\n      return this.deleteTable($td);\n    } else {\n      $newTr = this._nextRow($tr);\n      if (!($newTr.length > 0)) {\n        $newTr = this._prevRow($tr);\n      }\n      index = $tr.find('td, th').index($td);\n      if ($tr.parent().is('thead')) {\n        $newTr.appendTo($tr.parent());\n        this._changeCellTag($newTr, 'th');\n      }\n      if($newTr.find('td, th').eq(index).length==0) return this.deleteTable($td);//mod-for-jl\n      $tr.remove();\n      return this.editor.selection.setRangeAtEndOf($newTr.find('td, th').eq(index));\n    }\n  };\n\n  TableButton.prototype.insertRow = function($td, direction) {\n    var $newTr, $table, $tr, cellTag, colNum, i, index, k, ref;\n    if (direction == null) {\n      direction = 'after';\n    }\n    $tr = $td.parent('tr');\n    $table = $tr.closest('table');\n    colNum = 0;\n    $table.find('tr').each(function(i, tr) {\n      return colNum = Math.max(colNum, $(tr).find('td').length);\n    });\n    index = $tr.find('td, th').index($td);\n    $newTr = $('<tr/>');\n    cellTag = 'td';\n    if (direction === 'after' && $tr.parent().is('thead')) {\n      $tr.parent().next('tbody').prepend($newTr);\n    } else if (direction === 'before' && $tr.parent().is('thead')) {\n      $tr.before($newTr);\n      $tr.parent().next('tbody').prepend($tr);\n      this._changeCellTag($tr, 'td');\n      cellTag = 'th';\n    } else {\n      $tr[direction]($newTr);\n    }\n    for (i = k = 1, ref = colNum; 1 <= ref ? k <= ref : k >= ref; i = 1 <= ref ? ++k : --k) {\n      $(\"<\" + cellTag + \"/>\").append(this.editor.util.phBr).appendTo($newTr);\n    }\n    return this.editor.selection.setRangeAtStartOf($newTr.find('td, th').eq(index));\n  };\n\n  TableButton.prototype.deleteCol = function($td) {\n    var $newTd, $table, $tr, index, noOtherCol, noOtherRow;\n    $tr = $td.parent('tr');\n    noOtherRow = $tr.closest('table').find('tr').length < 2;\n    noOtherCol = $td.siblings('td, th').length < 1;\n    if (noOtherRow && noOtherCol) {\n      return this.deleteTable($td);\n    } else if($tr.find('td, th').length==1){//mod-for-jl\n      return this.deleteTable($td);\n    }else{\n      index = $tr.find('td, th').index($td);\n      $newTd = ($td.next('td, th').length!=0)? $td.next('td, th'): $td;//mod-for-jl\n      if (!($newTd.length > 0)) {\n        $newTd = $tr.prev('td, th');\n      }\n      $table = $tr.closest('table');\n      $table.find('col').eq(index).remove();\n      $table.find('tr').each(function(i, tr) {\n        return $(tr).find('td, th').eq(index).remove();\n      });\n      this.refreshTableWidth($table);\n      return this.editor.selection.setRangeAtEndOf($newTd);\n    }\n  };\n\n  TableButton.prototype.insertCol = function($td, direction) {\n    var $col, $newCol, $newTd, $table, $tr, index, tableWidth, width;\n    if (direction == null) {\n      direction = 'after';\n    }\n    $tr = $td.parent('tr');\n    index = $tr.find('td, th').index($td);\n    $table = $td.closest('table');\n    $col = $table.find('col').eq(index);\n    $table.find('tr').each((function(_this) {\n      return function(i, tr) {\n        var $newTd, cellTag;\n        cellTag = $(tr).parent().is('thead') ? 'th' : 'td';\n        $newTd = $(\"<\" + cellTag + \"/>\").append(_this.editor.util.phBr);\n        return $(tr).find('td, th').eq(index)[direction]($newTd);\n      };\n    })(this));\n    $newCol = $('<col/>');\n    $col[direction]($newCol);\n    tableWidth = $table.width();\n    width = Math.max(parseFloat($col.attr('width')) / 2, 50 / tableWidth * 100);\n    $col.attr('width', width + '%');\n    $newCol.attr('width', width + '%');\n    this.refreshTableWidth($table);\n    $newTd = direction === 'after' ? $td.next('td, th') : $td.prev('td, th');\n    return this.editor.selection.setRangeAtStartOf($newTd);\n  };\n\n  TableButton.prototype.deleteTable = function($td) {\n    var $block, $table;\n    $table = $td.closest('.simditor-table');\n    $block = $table.next('p');\n    $block.html('<br>');\n    $table.remove();\n    if ($block.length > 0) {\n      return this.editor.selection.setRangeAtStartOf($block);\n    }\n  };\n\n  //mod-for-jl\n  TableButton.prototype.paintCell = function($td) { $td.addClass('header');};\n  TableButton.prototype.paintRow = function($td) { $td.parent('tr').find('td').each(function (i, td) {  $(td).addClass('header'); $(td).css({ 'text-align': 'center'});  })   };\n  TableButton.prototype.dissolveCell = function($td) { $td.removeClass('header');};\n  TableButton.prototype.dissolveRow = function($td) { $td.parent('tr').find('td').each(function (i, td) {  $(td).removeClass('header'); $(td).css({ 'text-align': 'left'});  })   };\n  TableButton.prototype.addBorder = function($td) { $td.closest('table').removeClass('sin-bordes'); };\n  TableButton.prototype.removeBorder = function($td) { $td.closest('table').addClass('sin-bordes'); };\n\n  TableButton.prototype.command = function(param) {\n    var $td;\n    $td = this.editor.selection.containerNode().closest('td, th');\n    if (!($td.length > 0)) {\n      return;\n    }\n    if (param === 'deleteRow') {\n      this.deleteRow($td);\n    } else if (param === 'insertRowAbove') {\n      this.insertRow($td, 'before');\n    } else if (param === 'insertRowBelow') {\n      this.insertRow($td);\n    } else if (param === 'deleteCol') {\n      this.deleteCol($td);\n    } else if (param === 'insertColLeft') {\n      this.insertCol($td, 'before');\n    } else if (param === 'insertColRight') {\n      this.insertCol($td);\n    } else if (param === 'paintRow') {//mod-for-jl\n      this.paintRow($td);\n    } else if (param === 'paintCell') {\n      this.paintCell($td);\n    } else if (param === 'dissolveRow') {\n      this.dissolveRow($td);\n    } else if (param === 'dissolveCell') {\n      this.dissolveCell($td);\n    } else if (param === 'addBorder') {\n      this.addBorder($td);\n    } else if (param === 'removeBorder') {\n      this.removeBorder($td);\n    } else if (param === 'deleteTable') {\n      this.deleteTable($td);\n    } else {\n      return;\n    }\n    return this.editor.trigger('valuechanged');\n  };\n\n  return TableButton;\n\n})(Button);\n\nSimditor.Toolbar.addButton(TableButton);\n\nStrikethroughButton = (function(superClass) {\n  extend(StrikethroughButton, superClass);\n\n  function StrikethroughButton() {\n    return StrikethroughButton.__super__.constructor.apply(this, arguments);\n  }\n\n  StrikethroughButton.prototype.name = 'strikethrough';\n\n  StrikethroughButton.prototype.icon = 'strikethrough';\n\n  StrikethroughButton.prototype.htmlTag = 'strike';\n\n  StrikethroughButton.prototype.disableTag = 'pre';\n\n  StrikethroughButton.prototype._activeStatus = function() {\n    var active;\n    active = document.queryCommandState('strikethrough') === true;\n    this.setActive(active);\n    return this.active;\n  };\n\n  StrikethroughButton.prototype.command = function() {\n    document.execCommand('strikethrough');\n    if (!this.editor.util.support.oninput) {\n      this.editor.trigger('valuechanged');\n    }\n    return $(document).trigger('selectionchange');\n  };\n\n  return StrikethroughButton;\n\n})(Button);\n\nSimditor.Toolbar.addButton(StrikethroughButton);\n\nAlignmentButton = (function(superClass) {\n  extend(AlignmentButton, superClass);\n\n  function AlignmentButton() {\n    return AlignmentButton.__super__.constructor.apply(this, arguments);\n  }\n\n  AlignmentButton.prototype.name = \"alignment\";\n\n  AlignmentButton.prototype.icon = 'align-left';\n\n  AlignmentButton.prototype.htmlTag = 'p, h1, h2, h3, h4, td, th';\n\n  AlignmentButton.prototype._init = function() {\n    this.menu = [\n      {\n        name: 'left',\n        text: this._t('alignLeft'),\n        icon: 'align-left',\n        param: 'left'\n      }, {\n        name: 'center',\n        text: this._t('alignCenter'),\n        icon: 'align-center',\n        param: 'center'\n      }, {\n        name: 'right',\n        text: this._t('alignRight'),\n        icon: 'align-right',\n        param: 'right'\n      }, {//mod-for-jl\n        name: 'justify',\n        text: 'Justify',\n        icon: 'align-justify',\n        param: 'justify'\n      }\n    ];\n    return AlignmentButton.__super__._init.call(this);\n  };\n\n  AlignmentButton.prototype.setActive = function(active, align) {\n    if (align == null) {\n      align = 'left';\n    }\n    if (align !== 'left' && align !== 'center' && align !== 'right' && align !== 'justify') {\n      align = 'left';\n    }\n    if (align === 'left') {\n      AlignmentButton.__super__.setActive.call(this, false);\n    } else {\n      AlignmentButton.__super__.setActive.call(this, active);\n    }\n    this.el.removeClass('align-left align-center align-right align-justify');\n    if (active) {\n      this.el.addClass('align-' + align);\n    }\n    this.setIcon('align-' + align);\n    return this.menuEl.find('.menu-item').show().end().find('.menu-item-' + align).hide();\n  };\n\n  AlignmentButton.prototype._status = function() {\n    this.nodes = this.editor.selection.nodes().filter(this.htmlTag);\n    if (this.nodes.length < 1) {\n      this.setDisabled(true);\n      return this.setActive(false);\n    } else {\n      this.setDisabled(false);\n      return this.setActive(true, this.nodes.first().css('text-align'));\n    }\n  };\n\n  AlignmentButton.prototype.command = function(align) {\n    if (align !== 'left' && align !== 'center' && align !== 'right' && align !== 'justify') {\n      throw new Error(\"simditor alignment button: invalid align \" + align);\n    }\n    this.nodes.css({\n      'text-align': align === 'left' ? '' : align\n    });\n    this.editor.trigger('valuechanged');\n    return this.editor.inputManager.throttledSelectionChanged();\n  };\n\n  return AlignmentButton;\n\n})(Button);\n\nSimditor.Toolbar.addButton(AlignmentButton);\n\nreturn Simditor;\n\n}));\n\n(function() {\n    'use strict'\n\n    angular\n    .module('app')\n    .factory('SideNavFactory', SideNavFactory);\n\n    function SideNavFactory() {\n\n        var factory = {\n            user: {\n                id: '',\n                first_name: '',\n                last_name: '',\n                cargo: '',\n                email: '',\n                photo: ''\n            },\n            userColor: '',\n            visible: false,\n            menu: [],\n            getMenu: function () {\n                return this.menu;\n            },\n            getUser: function () {\n                return this.user;\n            },\n            getVisible: function () {\n                return this.visible;\n            },\n            setMenu: function (menu) {\n                this.menu = menu;\n            },\n            setUser: function (user) {\n                this.user = user;\n            },\n            setVisible: function (visible) {\n                this.visible = visible;\n            }\n        };\n\n        return factory;\n\n    }\n\n})();\n(function() {\n    'use strict'\n\n    angular\n    .module('app')\n    .directive('acmeSidenav', SidenavDirective);\n\n    /** @ngInject */\n    function SidenavDirective() {\n        var directive = {\n            restrict: 'E',\n            templateUrl: 'app/components/sidenav/sidenav.html',\n            scope: {},\n            controller: ['$timeout', '$mdSidenav', 'SideNavFactory', '$location', 'Storage', 'Util', 'BreadcrumbFactory', '$log', SidenavController],\n            controllerAs: 'vm',\n            bindToController: true,\n            link: function(scope, elem) {\n                var $sidenav = elem\n\n                $sidenav.on('click', '.md-button-href', function () {\n                    $sidenav.find('.md-button-href').removeClass('active');\n                    angular.element(this).addClass('active');\n                })\n\n                $sidenav.on('click', '.md-button-toggle', function () {\n                    if ($sidenav.hasClass('collapsed')) {\n                        return false;\n                    }\n                    $sidenav.find('.sidenav-sublist').slideUp(300);\n                    $sidenav.find('.sidenav-list > li').removeClass('active');\n\n                    var $this = angular.element(this);\n                    $this.addClass('active');\n                    if(!$this.next().is(\":visible\")) {\n                        $this.next().slideToggle(300);\n                        $this.closest('li').addClass('active');\n                    }\n                })\n            }\n        }\n\n        return directive\n\n        /** @ngInject */\n        function SidenavController($timeout, $mdSidenav, SideNavFactory, $location, Storage, Util, BreadcrumbFactory, $log) {\n            var vm = this;\n            var color = ['info', 'success', 'danger', 'warning', 'primary'];\n\n            vm.user = {};\n            vm.menu = [];\n\n            vm.toggleLeft = buildDelayedToggler('left');\n\n            vm.send = function (url, submenu) {\n                if (typeof submenu == 'undefined') {\n                    if (Storage.exist('menu')) {\n                        var page = Util.getMenuOption(Storage.getSession('menu'), url);\n                        BreadcrumbFactory.setParent(page[0]);\n                        BreadcrumbFactory.setCurrent(page[1]);\n                    }\n                    Storage.setSession('last_route', url);\n                    // vm.toggleLeft();\n                    $location.path(url);\n                }\n                vm.reset();\n            }\n\n            vm.reset = function () {\n                angular.element('#toast-container-main').find('md-toast').fadeOut();\n            }\n\n            activate();\n\n            function activate() {\n                if(Storage.existUser()) {\n                    SideNavFactory.setUser(Storage.getUser());\n                    SideNavFactory.setMenu(Storage.getSession('menu'));\n                }\n                vm.menu = SideNavFactory.getMenu();\n                Storage.setSession('menu', vm.menu);\n\n                vm.active = $location.path().replace('/', '');\n                SideNavFactory.userColor = color[parseInt(Math.random()*color.length)];\n\n                $timeout(function () {\n                    angular.element('#sidenav').find('.md-button-href.active').parent().parent().prev().click();\n                }, 1000);\n            }\n\n            vm.getColor = function () {\n                return SideNavFactory.userColor;\n            }\n\n            vm.getName = function () {\n                var user = SideNavFactory.getUser();\n                return user.first_name + ' ' + user.last_name;\n            }\n\n            vm.getEmail = function () {\n                return SideNavFactory.getUser().email;\n            }\n\n            vm.getInitial = function () {\n                var firstName = SideNavFactory.getUser().first_name;\n                return firstName.length ? firstName[0].toUpperCase() : '?';\n            }\n\n            vm.getMenu = function () {\n                return SideNavFactory.getMenu();\n            }\n\n            /**\n            * Supplies a function that will continue to operate until the\n            * time is up.\n            */\n            function debounce(func, wait) {\n                var timer\n                return function debounced() {\n                    var context = vm,\n                    args = Array.prototype.slice.call(arguments);\n                    $timeout.cancel(timer);\n                    timer = $timeout(function() {\n                        timer = undefined;\n                        func.apply(context, args);\n                    }, wait || 10);\n                }\n            }\n            /**\n            * Build handler to open/close a SideNav when animation finishes\n            * report completion in console\n            */\n            function buildDelayedToggler(navID) {\n                return debounce(function() {\n                    $mdSidenav(navID)\n                    .toggle()\n                    .then(function () {\n                        $log.debug(\"toggle \" + navID + \" is done\");\n                    })\n                }, 200);\n            }\n        }\n    }\n})();\n\n(function() {\n    'use strict';\n\n    angular\n    .module('app')\n    .component('mdSelectDate', {\n        templateUrl: 'app/components/selectDate/selectDate.html',\n        controller: ['$scope', 'Datetime', SelectDateController],\n        controllerAs: 'vm',\n        bindings: {\n            ngModel: '=',\n            ngDisabled: '=',\n            ngRequired: '=',\n            ngLabel: '@',\n            yearIni: '@',\n            yearEnd: '@',\n            year: '@',\n            month: '@',\n            day: '@'\n        }\n    });\n\n    /** @ngInject */\n    function SelectDateController($scope, Datetime) {\n        var vm = this;\n\n        activate();\n\n        function activate() {\n            initDays();\n            initMonths();\n            initYears();\n\n            if (vm.ngModel && Datetime.isDate(new Date(vm.ngModel))) {\n                var date = new Date(vm.ngModel);\n                vm.day = date.getDate();\n                vm.month = date.getMonth() + 1;\n                vm.year = date.getFullYear();\n            }\n        }\n\n        function initDays() {\n            var days = [];\n            for (var i = 1; i <= 31; i++) {\n                days.push({\n                    name: i,\n                    value: i\n                });\n            }\n            vm.days = days;\n        }\n\n        function initMonths() {\n            var months = [];\n            for (var i = 0; i < 12; i++) {\n                months.push({\n                    name: Datetime.months[i],\n                    value: i + 1\n                });\n            }\n            vm.months = months;\n        }\n\n        function initYears() {\n            var year = parseInt(Datetime.now('YYYY'));\n            var years = [];\n            var yearIni = year - (vm.yearIni || 100);\n            var yearEnd = year - (vm.yearEnd || 0);\n            for (var i = yearEnd, l = yearIni; i >= l; i--) {\n                years.push({\n                    name: i,\n                    value: i\n                });\n            }\n            vm.years = years;\n            // if (typeof vm.year == 'undefined' && typeof vm.ngModel == 'undefined') {\n            //     vm.year = year - 30;\n            // }\n        }\n\n        $scope.$watch('vm.day', function (newValue, oldValue) {\n            oldValue = oldValue; //TODO: Esta linea no es necesaria\n            vm.ngModel = new Date(vm.year, vm.month-1, newValue);\n        });\n        $scope.$watch('vm.month', function (newValue, oldValue) {\n            oldValue = oldValue; //TODO: Esta linea no es necesaria\n            vm.ngModel = new Date(vm.year, newValue-1, vm.day);\n        });\n        $scope.$watch('vm.year', function (newValue, oldValue) {\n            oldValue = oldValue; //TODO: Esta linea no es necesaria\n            vm.ngModel = new Date(newValue, vm.month-1, vm.day);\n        });\n        $scope.$watch('vm.ngModel', function (newValue, oldValue) {\n            if (newValue && newValue != oldValue && Datetime.isDate(new Date(newValue))) {\n                var date = new Date(newValue);\n                vm.day = date.getDate();\n                vm.month = date.getMonth() + 1;\n                vm.year = date.getFullYear();\n            }\n        });\n    }\n\n})();\n\n(function() {\n    'use strict'\n\n    angular\n    .module('app')\n    .component('paletteFormly', {\n        templateUrl : 'app/components/paletteFormly/paletteFormly.html',\n        controller : PaletteFormlyController,\n        controllerAs: 'vm',\n        bindings: {\n            menu: '=',\n            funcionAgregar: '=',\n            options: '=',\n            node: '@'\n        }\n    });\n\n    function PaletteFormlyController(){\n        var vm = this;\n        //contador de templates\n        // var cont_templates = 0;\n\n        //cargamos funcion\n        vm.addItem = addItem;\n\n        //variable que contiene la lista de menus con templates cada uno\n        vm.elementos = [\n            {\n                \"expanded\": true,\n                \"titulo\" : \"DOCUMENTOS\",\n                \"submenu\": [\n                    { name: \"Datos generales\", tipo: \"datosGenerales\" },\n                    { name: \"Encabezado\", tipo: \"encabezado\" },\n                    { name: \"Asunto\" , tipo: \"inputt\" },\n                    // { name: \"Cite\", tipo: \"cite\" },\n                    { name: \"Documentos relacionados\", tipo: \"documentosRelacionados\" },\n                    { name: \"Documentos a anular\", tipo: \"documentosAnular\" },\n                    { name: \"Cc.:archivo\", tipo: \"ccArchivo\" },\n                    { name: \"Caja chica\", tipo: \"cajachica\" },\n                    { name: \"Certificacion comprometido\", tipo: \"certificacionComprometido\" },\n                    { name: \"Lista de contactos\", tipo: \"listaContactos\" },\n                    { name: \"Editor de texto\", tipo: \"editorTexto\" }\n                ]\n            },\n            {\n                \"expanded\": true,\n                \"titulo\" : \"TEXTOS\",\n                \"submenu\": [\n                    { name: \"Título\", tipo: \"titulo\" },\n                    { name: \"Subtítulo\", tipo: \"subtitulo\" },\n                    { name: \"Párrafo\", tipo: \"parrafo\" },\n                    { name: \"Lista\", tipo: \"lista\" }\n                ]\n            },\n            {\n                \"expanded\": true,\n                \"titulo\" : \"LAYOUTS\",\n                \"submenu\": [\n                    { name: \"Contenedor\", tipo: \"layout\" },\n                    { name: \"Espacio\", tipo: \"vacio\" }\n                ]\n            },\n            {\n                \"expanded\": true,\n                \"titulo\" : \"ELEMENTOS FORMULARIO\",\n                \"submenu\": [\n                    { name: \"Archivo\", tipo: \"archivo\" },\n                    { name: \"Campo de texto\" , tipo: \"input\" },\n                    { name: \"Selección radio\", tipo: \"radio\" },\n                    { name: \"Selección simple\", tipo: \"select\" },\n                    { name: \"Selección multiple\", tipo: \"select_multiple\" },\n                    { name: \"Area de texto\", tipo: \"textarea\" },\n                    { name: \"Checkbox\", tipo: \"checkbox\" },\n                    { name: \"Calendario\", tipo: \"datepicker\" },\n                    { name: \"Deslizador\", tipo: \"slider\" },\n                    { name: \"Interruptor\", tipo: \"switch\" },\n                    { name: \"Palabras clave\", tipo: \"chips\" }\n                ]\n            }\n        ];\n\n        function addItem(tipo){\n            if(angular.isDefined(vm.funcionAgregar)){\n                vm.funcionAgregar(tipo);\n            }\n        }\n\n    }\n  })();\n\n(function() {\n    'use strict'\n\n    angular\n    .module('app')\n    .directive('acmeNavbar', acmeNavbar);\n\n    /** @ngInject */\n    function acmeNavbar() {\n        var directive = {\n            restrict: 'E',\n            templateUrl: 'app/components/navbar/navbar.html',\n            scope: {},\n            controller: ['ExpirationTime', '$location', 'Storage', 'SideNavFactory', 'Util', 'DataService', '$window', 'restUrl', NavbarController],\n            controllerAs: 'vm',\n            bindToController: true\n        }\n\n        return directive\n\n        /** @ngInject */\n        function NavbarController(ExpirationTime, $location, Storage, SideNavFactory, Util, DataService, $window, restUrl) {\n            var vm = this;\n\n            vm.toggle = function () {\n                angular.element('#sidenav-main').toggleClass('collapsed');\n            }\n\n            vm.openMenu = function ($mdOpenMenu, ev) {\n                $mdOpenMenu(ev);\n            }\n\n            vm.profile = function () {\n                $location.path(\"profile\");\n            }\n\n            vm.settings = function () {\n                $location.path(\"configuracion\");\n            }\n\n            vm.getFirstName = function () {\n                if (Storage.existUser()) {\n                    return Storage.getUser().first_name;\n                }\n                return SideNavFactory.getUser().first_name;\n            }\n\n            vm.getColor = function () {\n                return SideNavFactory.userColor;\n            }\n\n            vm.getInitial = function () {\n                var firstName = SideNavFactory.getUser().first_name;\n                return firstName.length ? firstName[0].toUpperCase() : '?';\n            }\n\n            vm.logout = function () {\n              var codigo = $window.localStorage.getItem('oauth2_state');\n              if (codigo) {\n                  // this.$log.log('------------------------------codigo', codigo);\n                  DataService.get(restUrl + 'salir?codigo=' + codigo)\n                  .then(function (response) {\n                      $window.location.href = response.datos;\n                  });\n              } else {\n                  ExpirationTime.logout();\n              }\n            }\n\n            vm.fullscreen = function () {\n                angular.element('body').toggleClass('fullscreen');\n                Util.fullscreen();\n            }\n        }\n    }\n\n})();\n\n(function() {\n    'use strict'\n\n    angular\n    .module('app')\n    .component('menuCard', {\n        templateUrl : 'app/components/menuCard/menuCard.html',\n        controller : [MenuCardController],\n        controllerAs: 'vm',\n        bindings: {\n            items: '=',\n            titleTable: '=',\n            node: '@'\n        }\n    });\n\n    function MenuCardController(){\n    }\n  })();\n\n(function () {\n    'use strict';\n\n    angular\n        .module('app')\n        .constant('simditorConfig', {\n            placeholder: 'Ingrese contenido aquí...',\n            toolbar: [ 'underline', 'ols', '|', 'indent', 'outdent', 'alignment', '|', 'table', 'link', 'hr' ],\n            allowedTags: ['br', 'u', 'p', 'li', 'div'],\n            toolbarHidden: true\n        })\n        .directive('ngSimditor', ['$timeout', 'simditorConfig', function ($timeout, simditorConfig) {\n            Simditor.locale = 'en-US';  // eslint-disable-line no-undef\n            Simditor.i18n['en-US'] = {  // eslint-disable-line no-undef\n                'bold': 'Negrita',\n                'italic': 'Itálica',\n                'underline': 'Subrayar',\n                'color': 'Color',\n                'indent': 'Aumentar sangría',\n                'outdent': 'Quitar sangría',\n                'alignment': 'Alinear',\n                'table': 'Tabla',\n                'link': 'Enlace',\n                'hr': 'Línea',\n                'deleteRow': 'Eliminar fila',\n                'insertRowAbove': 'Insertar fila arriba',\n                'insertRowBelow': 'Insertar fila abajo',\n                'deleteColumn': 'Eliminar columna',\n                'insertColumnLeft': 'Insertar columna a la izquierda',\n                'insertColumnRight': 'Insertar columna a la derecha',\n                'paintRow': 'Pintar fila',\n                'paintCell': 'Pintar celda',\n                'dissolveRow': 'Despintar fila',\n                'dissolveCell': 'Despintar celda',\n                'deleteTable': 'Eliminar tabla',\n                'addBorder': 'Agregar bordes',\n                'removeBorder': 'Eliminar bordes',\n                'listDisc': 'Circulos llenos',\n                'listCircle': 'Circulos vacios',\n                'listSquare': 'Cuadrados llenos',\n                'listDecimal': '1, 2, 3, 4...',\n                'listDecimal0': '01, 02, 03, 04...',\n                'listUpperRoman': 'I, II, III, IV...',\n                'listLowerRoman': 'i, ii, iii, iv...',\n                'listUpperAlpha': 'A, B, C, D...',\n                'listLowerAlpha': 'a, b, c, d...',\n                'listGreek': 'Letras griegas',\n                'toggleList': 'Añadir/quitar Lista'\n            };\n\n            // Runs during compile\n            return {\n                // name: '',\n                // priority: 1,\n                // terminal: true,\n                scope: {\n                    content: '=',\n                    disabled: '=',\n                    save: '@'\n                }, // {} = isolate, true = child, false/undefined = no change\n                // controller: function($scope, $element, $attrs, $transclude) {},\n                // require: 'ngModel', // Array = multiple requires, ? = optional, ^ = check parent elements\n                restrict: 'E', // E = Element, A = Attribute, C = Class, M = Comment\n                template: '<textarea data-autosave=\"editor-content\"></textarea>',\n                // templateUrl: '',\n                replace: true,\n                // transclude: true,\n                // compile: function(tElement, tAttrs, function transclude(function(scope, cloneLinkingFn){ return function linking(scope, elm, attrs){}})),\n                link: function ($scope, iElm, iAttrs, controller) { // eslint-disable-line no-unused-vars\n                    var sc = $scope;\n                    var editor = new Simditor( // eslint-disable-line no-undef\n                        angular.extend({ textarea: iElm }, simditorConfig)\n                    );\n                    // console.log(editor);\n\n                    //cargar valor inicial si tiene\n                    $timeout(function() {\n                        editor.body[0].contentEditable = (angular.isDefined(sc.disabled))? !sc.disabled : true;\n                        if(angular.isDefined(sc.content))  editor.setValue(sc.content);\n                    })\n\n                    //actualizar el content\n                    var changed = function (ev) {  // eslint-disable-line no-unused-vars\n                        sc.content = editor.getValue();\n                    };\n\n                    editor.on('valuechanged', changed);\n\n                    editor.on('focus', function (ev) {  // eslint-disable-line no-unused-vars\n                        angular.element(iElm).prev().prev().prev().addClass('active-editor');\n                    });\n\n                    editor.on('blur', function (ev) {  // eslint-disable-line no-unused-vars\n                        $timeout(function () {\n                            angular.element(iElm).prev().prev().prev().removeClass('active-editor');\n                        }, 200);\n                    });\n                }\n            };\n        }]);\n\n})();\n\n(function() {\n    'use strict';\n\n    angular\n    .module('app')\n    .component('documentoIdentidad', {\n        templateUrl: 'app/components/documentoIdentidad/documentoIdentidad.html',\n        controller: ['$scope', 'DataService', 'Datetime', 'Message', DocumentoIdentidadController],\n        controllerAs: 'vm',\n        bindings: {\n            ngModel: '=',\n            ngDisabled: '=',\n            onlyCi: '@',\n            url: '='\n        }\n    });\n\n    /** @ngInject */\n    function DocumentoIdentidadController($scope, DataService, Datetime, Message) {\n        var vm = this;\n\n        vm.tipos = [\n            {\n                value: 'CI',\n                name: 'Cedula de identidad'\n            },\n            {\n                value: 'PASAPORTE',\n                name: 'Pasaporte'\n            }\n        ];\n\n        vm.tipo_documento = 'CI';\n        vm.search = search;\n        vm.isDisabled = isDisabled;\n\n        activate();\n\n        function activate() {\n            if (vm.ngModel) {\n                vm.model = vm.ngModel;\n                vm.fecha_nacimiento = new Date(vm.model.persona.fecha_nacimiento);\n                vm.complemento = vm.model.persona.complemento;\n                vm.nro_documento = vm.model.persona.nro_documento;\n                vm.tipo_documento = vm.model.persona.tipo_documento;\n            } else {\n                vm.model = {};\n            }\n        }\n\n        function isDisabled() {\n            return typeof vm.nro_documento == 'undefined' || !Datetime.isDate(vm.fecha_nacimiento);\n        }\n\n        function search() {\n            Message.loading(\"Buscando datos en el SEGIP\");\n            DataService.get(vm.url + vm.nro_documento + '?fecha_nacimiento=' + Datetime.format(vm.fecha_nacimiento, 'dd/MM/YYYY'))\n            .then(function(response) {\n                if (response) {\n                    vm.model.persona = response;\n                    vm.ngModel = vm.model;\n                } else {\n                    vm.model.persona = {};\n                    vm.ngModel = vm.model;\n                }\n            });\n        }\n\n        $scope.$watch('vm.tipo_documento', function (newValue) {\n            vm.model.tipo_documento = newValue;\n            vm.ngModel = vm.model;\n        });\n        $scope.$watch('vm.nro_documento', function (newValue) {\n            vm.model.nro_documento = newValue;\n            vm.ngModel = vm.model;\n        });\n        $scope.$watch('vm.complemento', function (newValue) {\n            vm.model.complemento = newValue;\n            vm.ngModel = vm.model;\n        });\n        $scope.$watch('vm.fecha_nacimiento', function (newValue) {\n            vm.model.fecha_nacimiento = newValue;\n            vm.ngModel = vm.model;\n        });\n\n    }\n\n})();\n\n(function() {\n    'use strict'\n\n    angular\n    .module('app')\n    .component('crudTable', {\n        templateUrl : 'app/components/crudTable/crudTable.html',\n        controller : ['$scope', 'DataService', 'Message', 'Modal', 'Util', '$timeout', 'ArrayUtil', 'Datetime', '$state', CrudTableController],\n        controllerAs: 'vm',\n        bindings: {\n            url: '=',\n            fields: '=',\n            fks: '=',\n            titleTable: '=',\n            template: '=',\n            permission: '=',\n            column: '=',\n            formly: '=',\n            editable: '=',\n            eventSave: '=',\n            dialogController: '=',\n            order: '=',\n            optionSelected: '=',\n            condiciones: '=',\n            buttons: '=',\n            buttonAgregar: '=',\n            idShow: '=',\n            include: '=',\n            queryExtra: '=',\n            usuario: '=',\n            informacionBienes: '=',\n            estadoSw: '=', // TODO solo funciona con estado= 'ACTIVO'|'INACTIVO'\n            onlyFields: '=',\n            searchPro: '=',\n            estadoChecks: '=',\n            estadoOpciones: '=',\n            items: '=?',\n            habilitarSeleccion: '=',\n            node: '@',\n            seleccionados:'='\n        }\n    });\n\n    function CrudTableController($scope, DataService, Message, Modal, Util, $timeout, ArrayUtil, Datetime, $state) {\n        var vm = this;\n        var bookmark;\n        var limit = 10;\n\n        vm.headers = [];\n        vm.items = null;\n        vm.item = null;\n        // vm.node = true; // Habilitar para nodejs\n        vm.tipo_busqueda='todos';\n        vm.campo_seleccionado={};\n        vm.busqueda_estado = [];\n\n        vm.prevent = prevent;\n        vm.estadoModificado = estadoModificado;\n        vm.add = add;\n        vm.edit = edit;\n        vm.delete = deleteItem;\n        vm.print = print;\n        vm.save = save;\n        vm.saveAll = saveAll;\n        vm.removeFilter = removeFilter;\n        vm.showFilter = showFilter;\n        vm.getItems = getItems;\n        vm.buttonEvent = buttonEvent;\n        vm.dataGrid = {};\n        vm.seleccionar = false;\n        vm.seleccionarTodos = seleccionarTodos;\n        vm.seleccionando = seleccionando;\n        // para permitir ver informacion pequeña de documentos\n        vm.sw_cite = ['/documentos', '/impresion', '/aprobacion', '/en_curso', '/firmar'].indexOf($state.current.url) !== -1;\n\n        vm.permissions = {\n            create: true,\n            read: true,\n            update: true,\n            delete: true,\n            print: false,\n            filter: true\n        }\n\n        vm.limitOptions = [limit, 25, 50];\n        // vm.limitOptions = [limit];\n\n        vm.options = {\n            rowSelection: false,\n            multiSelect: false,\n            autoSelect: true,\n            decapitate: false,\n            largeEditDialog: true,\n            boundaryLinks: true,\n            limitSelect: true,\n            pageSelect: false\n        }\n\n        vm.query = {\n            order: (vm.fields.indexOf('_fecha_modificacion'))? '-_fecha_modificacion': '',\n            limit: limit,\n            page: 1,\n            filter: ''\n        }\n\n        vm.filter = {\n            options: {\n                debounce: 500\n            }\n        };\n\n        activate();\n\n        function activate() {\n            getFields();\n        }\n\n        function seleccionando (){\n          if(angular.isFunction(vm.seleccionados)) $timeout(function(){ vm.seleccionados(existeSeleccionado()); });\n        }\n\n        function estadoModificado(item) {\n            item._usuario_modificacion = vm.usuario;\n            DataService.put(vm.url+Util.getId(item, vm.fieldsData), angular.copy(item));\n            if(vm.fields.indexOf('_usuario_modificacion')===-1) delete item._usuario_modificacion;\n        }\n\n        function seleccionarTodos() {\n            if(!vm.seleccionar) {\n                vm.items.data.map (function (item) {\n                    item.selected = true;\n                });\n            } else {\n                vm.items.data.map (function (item) {\n                    item.selected = false;\n                });\n            }\n            if(angular.isFunction(vm.seleccionados)) vm.seleccionados(existeSeleccionado());\n        }\n\n        function prevent(ev) {\n            ev.stopPropagation();\n        }\n\n        function getItems () {\n            if (vm.fieldsData) {\n                vm.promise = getData();\n            }\n        }\n\n        function add(event, item) {\n            var id = Util.getId(item, vm.fieldsData);\n            if (id) {\n                getItem(event, false, id);\n            } else {\n                item = {};\n                item._usuario_creacion = vm.usuario;\n                item._fecha_creacion = new Date();\n                item._fecha_modificacion = new Date();\n                openDialog(event, true, item);\n            }\n        }\n\n        function save (data) {\n\n            var obj = {};\n\n            for (var i in data) {\n                obj[i] = vm.dataGrid[data[i]];\n            }\n\n            DataService.save(vm.url, Util.parseSave(obj, vm.fieldsData))\n            .then(function(data) {\n                if (data) {\n                    Message.show(data.tipoMensaje,data.mensaje);\n                }\n            });\n        }\n\n\n        function saveAll () {\n            var data = vm.dataGrid,\n                c = 0,\n                length = vm.headers.length,\n                dataSave = [],\n                obj = {},\n                promises = [];\n\n            for (var i in data) {\n                var key = i.split('_');\n                key.shift();\n                key = key.join('_');\n                obj[key] = data[i];\n                c++;\n                if (c % length == 0) {\n                    dataSave.push(obj);\n                    promises.push(savePromise(obj));\n                    obj = {};\n                }\n            }\n            Promise.all(promises)\n            .then(function (response) {\n                for (var i in response) {\n                    if (response[i] === false) {\n                        Message.error('Se produjo un error al grabar todos los datos.');\n                        throw new Error('Error al grabar todos los datos');\n                    }\n                }\n                Message.success('Se guardaron todos los datos');\n            });\n        }\n\n        function savePromise(data) {\n            return new Promise(function (resolve, reject) {\n                DataService.save(vm.url, Util.parseSave(data, vm.fieldsData))\n                .then(function(data) {\n                    if (data) {\n                        resolve(true);\n                    } else {\n                        reject(false);\n                    }\n                }).catch(function () {\n                    reject(false);\n                });\n            });\n        }\n\n        function edit (event, item) {\n            vm.add(event, item);\n        }\n\n        function deleteItem (event, item) {\n            Modal.confirm('Se eliminará el registro de forma permanente, ¿Está seguro?.', function () {\n                DataService.delete( vm.url , Util.getId(item, vm.fieldsData))\n                .then(function() {\n                    Message.success('El registro se eliminó correctamente.');\n                    vm.getItems();\n                })\n                .catch(function () {\n                    Message.error();\n                });\n            }, null, event);\n        }\n\n        function getItem(event, add, id) {\n            DataService.get( vm.url, id + (vm.include ? '?include=' + vm.include: ''))\n            .then(function(data) {\n              if (data && data.datos[Util.getId(data, vm.fieldsData, true)]) {\n                    data.datos._usuario_modificacion = vm.usuario;\n                    data.datos._fecha_modificacion = new Date();\n                    openDialog(event, add, Util.filterItem(data.datos));\n                }\n            });\n        }\n\n        function openDialog(event, add, item) {\n            var config = {\n                event: event,\n                data: item,\n                title: add ? 'Agregar' : 'Editar',\n                add: add,\n                fields: vm.fieldsData,\n                column: vm.column || 1,\n                templateUrl : vm.template || 'app/components/crudTable/dialog.crudTable.html',\n                done : function (answer, $mdDialog) {\n                    if (answer == 'save') {\n                        delete item._fecha_creacion;\n                        delete item._fecha_modificacion;\n                        DataService.save( vm.url, Util.parseSave(item, vm.fieldsData))\n                        .then(function(data) {\n                            if (data) {\n                                Message.show(data.tipoMensaje,'', null, 0);\n                                $mdDialog.hide();\n                                vm.getItems();\n                                if (vm.eventSave) {\n                                    vm.eventSave(data);\n                                }\n                            }\n                        });\n                    }\n                }\n            };\n            if (vm.dialogController) {\n                config.controller = vm.dialogController;\n            }\n            Modal.show(config);\n        }\n\n        function getData() {\n            if (vm.include) {\n                vm.query.include = vm.include;\n            }\n            if (vm.queryExtra) {\n                for (var k in vm.queryExtra) {\n                    vm.query[k] = vm.queryExtra[k];\n                }\n            }\n            if(vm.onlyFields){\n                vm.query['fields'] = '';\n                for (var i = 0; i < vm.fields.length; i++) {\n                    vm.query['fields'] += vm.fields[i]+\",\";\n                }\n                vm.query['fields'] = vm.query['fields'].substring(0, vm.query['fields'].length-1);\n            }\n            if(vm.estadoChecks){\n                if(vm.busqueda_estado.length>0) vm.query['estado'] = vm.busqueda_estado.toString();\n                else delete vm.query['estado'];\n            }\n\n            if(vm.searchPro){\n                vm.query['searchPro'] = 1;\n                vm.query['tipoBus'] = vm.tipo_busqueda;\n                if(vm.tipo_busqueda!='todos' || vm.tipo_busqueda!='documento'){\n                    if(vm.tipo_busqueda=='campo'){\n                        vm.query['campoSel'] = vm.campo_seleccionado.name || vm.headers[1].name;\n                    }\n                }else {\n                    delete vm.query['tipoBus'];\n                    delete vm.query['campoSel'];\n                    delete vm.query['fFin'];\n                }\n                if(vm.check_fechas){\n                    if (!Datetime.isDate(vm.fecha_inicio))\n                        vm.fecha_inicio = new Date(Datetime.subtractDays(new Date(), 365));\n                    if(!Datetime.isDate(vm.fecha_final))\n                        vm.fecha_final = new Date();\n                    vm.query['fIni'] = vm.fecha_inicio;\n                    vm.query['fFin'] = new Date(Datetime.addDays(vm.fecha_final, 1));\n                    vm.query['fIni'].setHours(0);\n                    vm.query['fFin'].setHours(0);\n                }else {\n                    delete vm.query['fIni'];\n                    delete vm.query['fFin'];\n                }\n            }\n            return DataService.list( vm.url, vm.query)\n            .then(function(data) {\n                if (data) {\n                    var items = {};\n                    var datos = data.datos;\n\n                    items.count = datos.total;\n                    items.results = datos.resultado;\n                    items.data = filterItems(datos.resultado);\n                    vm.items = items;\n                    if(angular.isFunction(vm.seleccionados)) vm.seleccionados(existeSeleccionado());\n                }\n            });\n        }\n\n        function existeSeleccionado() {\n          var cont = 0;\n          var respuesta = false;\n          vm.items.data.map (function (item) {\n            if(item.selected === true) cont++;\n          });\n          if(cont > 0) respuesta = true;\n          return respuesta;\n        }\n\n        function getFields() {\n            DataService.fields(vm.url)\n            .then(function(data) {\n                if (data) {\n                    vm.fieldsData = Util.filterFields(data, vm.fields);\n                    vm.fieldsData = Util.addPropertiesFormly(vm.fieldsData, vm.formly);\n\n                    var arr = [\"_usuario_creacion\",\"_usuario_modificacion\",\"_fecha_creacion\",\"_fecha_modificacion\"];\n                    for (var i in vm.fieldsData) {\n                      var xfield = vm.fieldsData[i];\n                      var arrindex = arr.indexOf(xfield.key);\n                      if( arrindex != -1){\n                        xfield.templateOptions.required = false;\n                        xfield.templateOptions.disabled = true;\n                        if(arrindex == 2) xfield.templateOptions.label = \"Fecha de creación\";\n                        if(arrindex == 3) xfield.templateOptions.label = \"Fecha de modificación\";\n                      }else if(xfield.templateOptions.label == \"ID\"){\n                        xfield.templateOptions.required = false;\n                      }else if (xfield.key.indexOf(\"fid_\") == 0) {\n                        var object = {};\n                        var options = xfield.templateOptions.options;\n                        for (var k in options) {\n                          object[options[k].value] = options[k].name  ;\n                        }\n                        xfield.templateOptions.fkeys = object;\n                      }\n                    }\n\n                    addOptionSelected(vm.fieldsData, vm.optionSelected);\n                    DataService.setFormly(vm.fieldsData);\n\n                    setHeaders(vm.fieldsData);\n                    if (vm.editable) {\n                        vm.types = Util.getKeys(vm.fieldsData);\n                    }\n                    if (vm.permission) {\n                        vm.permissions = angular.merge(vm.permissions, vm.permission);\n                    }\n                    if (vm.condiciones) {\n                        vm.query = angular.merge(vm.query, vm.condiciones);\n                    }\n                    vm.getItems();\n                }\n            });\n        }\n\n        function addOptionSelected(data, options) {\n            for (var i in data) {\n                if (data[i].type == 'select') {\n                    var item = Util.searchField(options, data[i].key);\n                    if (item) {\n                        ArrayUtil.insert(data[i].templateOptions.options, 0, {\n                            name: item.text || 'Seleccione',\n                            value: item.value || ''\n                        });\n                    }\n                }\n            }\n        }\n\n        function filterItems(data) {\n            var fields = typeof vm.fields != 'undefined';\n            var fks = typeof vm.fks != 'undefined';\n            var array = [];\n            for (var i in data) {\n                for (var j in data[i]) {\n                    if (fields && vm.fields.indexOf(j) == -1) {\n                        delete data[i][j];\n                    } else {\n                        if (typeof vm.editable == 'undefined') {\n                            if (typeof data[i][j] == 'boolean') {\n                                data[i][j] = data[i][j] ? 'check_circle_success' : 'check_circle_gray';\n                            } else if (fks && vm.fks.indexOf(j) != -1) {\n                                if (Util.toType(data[i][j]) == 'array') {\n                                    var l = Util.lengthOptions(vm.fieldsData, j);\n                                    if (l > 1 && l == data[i][j].length) {\n                                        data[i][j] = 'Todos';\n                                    } else {\n                                        var text = [];\n                                        /*eslint-disable no-unused-vars*/\n                                        data[i][j].map(function (e, i) {\n                                          /*eslint-enable no-unused-vars*/\n                                           text.push(Util.getFkData(vm.fieldsData ,j, e));\n                                        });\n                                        data[i][j] = text.join(', ');\n                                    }\n                                } else {\n                                    data[i][j] = Util.getFkData(vm.fieldsData ,j, data[i][j]);\n                                }\n                            } else if (typeof data[i][j] == 'string' && !/[a-zA-Z]+/g.test(data[i][j]) && /^-?[0-9.]+\\-?[0-9]+\\-?[0-9]*$/g.test(data[i][j]) && data[i][j].length == 10) {\n                                data[i][j] = Util.formatDate(data[i][j]);\n                            } else if (Util.toType(data[i][j]) == 'array') {\n                                data[i][j] = data[i][j][0];\n                            } else if (typeof data[i][j] == 'string' && !/[a-zA-Z]+/g.test(data[i][j]) && /^(?:(?:([01]?\\d|2[0-3]):)?([0-5]?\\d):)?([0-5]?\\d)$/g.test(data[i][j]) && data[i][j].length == 8) {\n                              data[i][j] = formatTime(data[i][j])\n                            }\n                        }\n                    }\n                }\n                array.push(orderItem(data[i], vm.fieldsData, i));\n            }\n            return array;\n        }\n\n        function orderItem(data, fields, pos) {\n\n            if (typeof fields == 'undefined' || fields.length == 0) {\n                return data;\n            }\n\n            var item = {};\n\n            for (var i in fields) {\n                var field = fields[i].key\n                if (typeof data[field] != 'undefined') {\n                    if (vm.editable) {\n                        if (typeof data[field] == 'string' && !/[a-zA-Z]+/g.test(data[field]) && /^-?[0-9.]+\\-?[0-9]+\\-?[0-9]*$/g.test(data[field]) && data[field].length == 10) {\n                            var date = data[field].split('-');\n                            vm.dataGrid[pos + '_' + field] = new Date(date[0], date[1]-1, date[2]);\n                        } else {\n                            vm.dataGrid[pos + '_' + field] = data[field];\n                        }\n                        item[field] = pos + '_' + field;\n                    } else {\n                        item[field] = data[field];\n                    }\n                }\n            }\n\n            return item;\n        }\n\n        function formatTime(time) {\n            time = time.split(':')\n            return [time[0], time[1]].join(':')\n        }\n\n        function setHeaders(data) {\n            var headers = [];\n            var order = typeof vm.order == 'undefined';\n            for (var i in data) {\n                headers.push({\n                    name: data[i].key,\n                    title: data[i].templateOptions.label,\n                    order: order || (vm.order && vm.order.indexOf(data[i].key) != -1)\n                });\n            }\n            vm.headers = headers;\n        }\n\n        function print(event, item) {\n            DataService.pdf(vm.url + 'print/' + Util.getId(item, vm.fieldsData) + '/')\n            .then(function (data) {\n                Modal.show({\n                    event: event,\n                    data: data.url,\n                    title: 'Impresión',\n                    templateUrl : 'app/components/crudTable/dialog.pdf.html',\n                    controller: ['$scope', '$mdDialog', 'data', 'title', PdfController]\n                });\n            });\n        }\n\n        function PdfController($scope, $mdDialog, data, title) {\n            var vm = $scope;\n\n            vm.title = title;\n            vm.data = data;\n            vm.hide = $mdDialog.hide;\n            vm.cancel = $mdDialog.cancel;\n        }\n\n        function showFilter() {\n            vm.filter.show = true;\n            $timeout(function () {\n                angular.element('#crud-table-input').focus();\n            }, 300);\n        }\n\n        function removeFilter () {\n            vm.filter.show = false;\n            vm.query.filter = '';\n            vm.tipo_busqueda='todos';\n\n            if(vm.filter.form.$dirty) {\n                vm.filter.form.$setPristine();\n            }\n        }\n\n        $scope.$watch('vm.query.filter', function (newValue, oldValue) {\n            if(!oldValue) {\n                bookmark = vm.query.page;\n            }\n\n            if(newValue !== oldValue) {\n                vm.query.page = 1;\n            }\n\n            if(!newValue) {\n                vm.query.page = bookmark;\n            }\n\n            vm.getItems();\n        });\n\n        //New Bottons\n        function buttonEvent(event, item, callback) {\n            callback(event, Util.getId(item, vm.fieldsData));\n        }\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular\n        .module('app')\n        .constant('charColors', {\n            bo: {\n                rojo: 'rgba(211, 47, 47, 0.7)',\n                azul: 'rgba(48, 79, 254, 0.7)',\n                amarillo: 'rgba(255, 171, 0, 0.7)',\n                celeste: 'rgba(0, 184, 212, 0.7)',\n                lila: 'rgba(123, 31, 162, 0.7)',\n                naranja: 'rgba(230, 74, 25, 0.7)',\n                verde: 'rgba(104, 159, 56, 0.7)'\n            },\n            bg: {\n                rojo: 'rgba(211,47,47, 0.1)',\n                azul: 'rgba(48, 79, 254, 0.1)',\n                amarillo: 'rgba(255, 171, 0, 0.1)',\n                celeste: 'rgba(0, 184, 212, 0.1)',\n                lila: 'rgba(123, 31, 162, 0.1)',\n                naranja: 'rgba(230, 74, 25, 0.1)',\n                verde: 'rgba(104, 159, 56, 0.1)'\n            }\n        })\n        .directive('chartGraph', ['$timeout', '$window', function ($timeout, $window) {\n            var options_default = {\n                line: {\n                    scales: {\n                        yAxes: [{\n                            ticks: {\n                                beginAtZero:true\n                            }\n                        }],\n                        xAxes: [{\n                            ticks: {\n                                autoSkip: false\n                            }\n                        }]\n                    },\n                    legend: {\n                        labels: {\n                            boxWidth: 15\n                        }\n                    },\n                    tooltips: {\n                        mode: 'x-axis'\n                    }\n                },\n                bar: {\n                    legend: {\n                        labels: {\n                            boxWidth: 15\n                        }\n                    },\n                    scales: {\n                        yAxes: [{\n                            ticks: {\n                                beginAtZero:true\n                            }\n                        }],\n                        xAxes: [{\n                            ticks: {\n                                autoSkip: false\n                            }\n                        }]\n                    }\n\n                }\n            };\n            // Runs during compile\n            return {\n                scope: {\n                    ancho: '=',\n                    alto: '=',\n                    tipo: '=',\n                    datos: '=',\n                    actualizar: '=', // flag disparador del watch actualizar\n                    reiniciar: '=', // flag disparador del watch reiniciar\n                    opciones: '='\n                },\n                restrict: 'E', // E = Element, A = Attribute, C = Class, M = Comment\n                link: function (sc, elm, attrs, controller) { // eslint-disable-line no-unused-vars\n                    $timeout(function () {\n                        var canvas, xchart;\n                        elm.wrap('<div></div>');\n                        elm.parent().css('overflow','auto');\n                        // elm.parent().css('border','1px solid #c3c3c3');\n                        // elm.parent().css('box-shadow','3px 3px 3px 0 solid #e3e3e3');\n\n                        iniciar();\n                        /**\n                          Funcion que inicia o reinicia el componente chart\n                        */\n                        function isMobile() { return angular.isDefined($window.orientation); }\n\n                        function iniciar() {\n                            if(isMobile()){\n                                if(sc.ancho>750) sc.ancho=750;\n                                if(sc.alto>320) sc.alto=320;\n                            }\n                            elm.parent().css('width',((sc.ancho)||400));\n                            elm.parent().css('height',((sc.alto)||250));\n                            elm.html('<div class=\"chart-graph\" style=\"width:'+(sc.ancho-25 || 400)+'px;height:'+(sc.alto-25||250)+'px;\"><canvas></canvas></div>');\n                            canvas = elm.children('div').children('canvas');\n                            canvas.attr('width',(sc.ancho-20||400));\n                            canvas.attr('height',(sc.alto-20||250));\n                            xchart = new Chart(canvas, { // eslint-disable-line no-undef\n                                type: sc.tipo || 'line',\n                                data: sc.datos,\n                                options: sc.opciones || options_default[sc.tipo || 'line']\n                            });\n                        }\n                        /**\n                          Funcion que se debe activar cambiando solo datos o labels del objeto sc.datos\n                          vm.ch.datos.labels.shift();\n                          vm.ch.datos.labels.push(newRandom()+'-02-2017');\n                          vm.ch.datos.datasets[0].data.shift();\n                          vm.ch.datos.datasets[0].data.push(newRandom());\n                          o bien actuializar los arrays completos\n                          vm.chart.datos.labels = createLabels(anio,mes);\n                          vm.chart.datos.datasets[0].data = getDataRandom(vm.chart.datos.labels.length);\n                        */\n                        sc.$watch('actualizar', function () { if(angular.isDefined(sc.actualizar)) xchart.update(); })\n                        /**\n                          Funcion que reinicia el objeto xchart con los parametros ocnfigurados (mas que todo cuando se quiere cambiar de tipo)\n                        */\n                        sc.$watch('reiniciar', function () { if(angular.isDefined(sc.reiniciar)) iniciar(); });\n\n                    })\n                }\n            };\n        }]);\n\n})();\n\n'use strict';\n\nangular\n.module('app')\n.directive('ngMostrarThumb',['$window',function($window){\n  var helper={\n    support: !!($window.FileReader && $window.CanvasRenderingContext2D),\n    extension:function(pUrl){\n      return pUrl.slice(pUrl.lastIndexOf(\".\")+1);\n    }\n  }\n\n  return{\n    restrict:'A',\n    template:'<canvas/>',\n    link:function(scope,element,attributes){\n      var params=scope.$eval(attributes.ngMostrarThumb);\n      var canvas = element.find('canvas');\n      var imagenes=['jpg','png','jpeg','bmp','gif'];\n      // var documentos=['pdf'];\n      var extension=helper.extension(params.ruta);\n\n      if(imagenes.indexOf(extension)> -1){\n        // var reader = new FileReader();\n        var img = new Image();\n        img.src=params.ruta;\n        helper.extension(params.ruta);\n        img.onload=function(){\n          var width = params.width || this.width / this.height * params.height;\n          var height = params.height || this.height / this.width * params.width;\n          canvas.attr({width:width, height:height});\n          canvas[0].getContext('2d').drawImage(img,0,0,width,height);\n        }\n      }\n      // TODO: como se adjunta un pdf a canvas??, es necesario usar pdf.js??\n      // else if(documentos.indexOf(extension)> -1){\n      // }\n\n\n\n    }\n  };\n}]);\n\n'use strict';\n\nangular\n    .module('app')\n    .directive('ngThumb', ['$window', function($window) {\n        var helper = {\n            support: !!($window.FileReader && $window.CanvasRenderingContext2D),\n            isFile: function(item) {\n                return angular.isObject(item) && item instanceof $window.File;\n            },\n            isImage: function(file) {\n                var type =  '|' + file.type.slice(file.type.lastIndexOf('/') + 1) + '|';\n                return '|jpg|png|jpeg|bmp|gif|'.indexOf(type) !== -1;\n            }\n        };\n\n        return {\n            restrict: 'A',\n            template: '<canvas/>',\n            link: function(scope, element, attributes) {\n                if (!helper.support) return;\n\n                var params = scope.$eval(attributes.ngThumb);\n\n                if (!helper.isFile(params.file)) return;\n                if (!helper.isImage(params.file)) return;\n\n                var canvas = element.find('canvas');\n                var reader = new FileReader();\n\n                reader.onload = onLoadFile;\n                reader.readAsDataURL(params.file);\n\n                function onLoadFile(event) {\n                    var img = new Image();\n                    img.onload = onLoadImage;\n                    img.src = event.target.result;\n                }\n\n                function onLoadImage() {\n                    var width = params.width || this.width / this.height * params.height;\n                    var height = params.height || this.height / this.width * params.width;\n                    canvas.attr({ width: width, height: height });\n                    canvas[0].getContext('2d').drawImage(this, 0, 0, width, height);\n                }\n            }\n        };\n    }]);\n(function() {\n    'use strict'\n\n    angular\n    .module('app')\n    .component('cargadorArchivos', {\n        templateUrl : 'app/components/cargadorArchivos/cargadorArchivos.html',\n        controller : ['$scope', 'restUrl', 'DataService', 'Storage', 'FileUploader','Modal', CargadorArchivosController],\n        controllerAs: 'vm',\n        bindings: {\n            archivos: '=', // Lista de archivos subidos\n            permitidos: '=',\n            anchoMiniatura: '=',\n            altoMiniatura: '=',\n            soloImagenes: '=',\n            maxArchivosPermitidos: '=',\n            mostrar:'='\n        }\n    });\n\n    function CargadorArchivosController($scope, restUrl, DataService, Storage, FileUploader,Modal) {\n\n        var vm = this;\n        vm.uploader = new FileUploader({url: \"\"});\n        vm.restUrl=restUrl;\n        vm.fotosEliminar=[];\n\n        if(vm.archivos==null){\n            vm.archivos = vm.uploader.queue;\n        }else {\n            vm.uploader.queue = vm.archivos;\n        }\n        vm.formatos = vm.permitidos.replace(/(\\||,)/g, \" \").toUpperCase();\n        var uploader = vm.uploader;\n        uploader.filters.push({\n                name: 'fileFilter',\n                fn: function (item) {\n                    var type = '|' + item.type.slice(item.type.lastIndexOf('/') + 1) + '|';\n                    return vm.permitidos.indexOf(type) !== -1;\n                }\n            });\n\n        //funcion para unir el drop y select\n        vm.clickUp = function () {\n            angular.element('#input_seleccionar').trigger('click'); //angular way\n\n        };\n\n        vm.esImagen =  function(file) {\n                var type =  '|' + file.type.slice(file.type.lastIndexOf('/') + 1) + '|';\n                return '|jpg|png|jpeg|bmp|gif|'.indexOf(type) !== -1;\n        }\n\n        // Funcion que elimina un \"archivo\".\n        vm.eliminar = function(pArchivo){\n          // Despliega el modal de confirmacion para eliminar un elemento.\n          Modal.confirm('Se eliminará la foto, ¿Está seguro?.', function () {\n            var indice=vm.mostrar.indexOf(pArchivo);\n\n            // Si el elemento existe dentro del vector.\n            if (indice > -1) {\n              // Elimina el elemento, basado en su indice.\n              vm.mostrar.splice(indice, 1);\n              // Agrega el item eliminado a un vector.\n              vm.fotosEliminar.push(pArchivo);\n            }\n\n          });\n\n        }\n\n\n\n    } //Fin del controller\n\n\n  })();\n\n(function() {\n    'use strict'\n\n    angular\n    .module('app')\n    .factory('BreadcrumbFactory', BreadcrumbFactory)\n\n    function BreadcrumbFactory() {\n\n        var factory = {\n            parent: '',\n            current: '',\n            setParent: function (parent) {\n                this.parent = parent;\n            },\n            setCurrent: function (current) {\n                this.current = current;\n            },\n            getParent: function () {\n                return this.parent;\n            },\n            getCurrent: function () {\n                return this.current;\n            }\n        };\n\n        return factory;\n\n    }\n\n})();\n(function() {\n    'use strict';\n\n    angular\n    .module('app')\n    .component('breadcrumb', {\n        templateUrl : 'app/components/breadcrumb/breadcrumb.html',\n        controller : ['Storage', '$location', 'BreadcrumbFactory', 'Util', BreadcrumbController],\n        bindings: {\n            // parent: '=',\n            // current: '='\n        }\n    });\n\n    /** @ngInject */\n    function BreadcrumbController(Storage, $location, BreadcrumbFactory, Util) {\n        var vm = this;\n\n        vm.getParent = getParent;\n        vm.getCurrent = getCurrent;\n\n        activate();\n\n        function activate() {\n            if (Storage.exist('menu')) {\n                var page = Util.getMenuOption(Storage.getSession('menu'), $location.path().replace('/', ''));\n                BreadcrumbFactory.setParent(page[0]);\n                BreadcrumbFactory.setCurrent(page[1]);\n            }\n        }\n\n        function getParent() {\n            return BreadcrumbFactory.getParent();\n        }\n\n        function getCurrent() {\n            return BreadcrumbFactory.getCurrent();\n        }\n\n    }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n  .module('app')\n  .service('DataService', ['$http', 'Message', 'Util', '$sce', '$log', DataService]);\n\n\n\n  /** @ngInject */\n  function DataService($http, Message, Util, $sce, $log) {\n\n    var formly = null;\n    var errorConnection = 'No se pudo establecer conexión con el servidor.';\n    var error500 = 'Se produjo un error en el servidor, inténtelo más tarde.';\n    var error404 = 'No existe el recurso solicitado.';\n    var error403 = 'No tiene los permisos necesarios.';\n    var error401 = 'No se pudo realizar la operación.';\n\n    var service = {\n      list: list,\n      all: list,\n      delete: remove,\n      save: save,\n      get: get,\n      put: put,\n      patch: patch,\n      post: post,\n      postWithFiles: postWithFiles,\n      putWithFiles: putWithFiles,\n      fields: fields,\n      option: fields,\n      pdf: pdf,\n      file: file,\n      setFormly: setFormly\n    };\n\n    return service;\n\n    function list(url, query) {\n      return $http.get(url + (query ? '?' + Util.serialize(query) : ''))\n      .then(function (response) {\n        if(response.data){\n          return response.data;\n        }else{\n          $log.warn(\"list->respuesta sin datos\");\n        }\n      }).catch(function (error) {\n        msgError(error);\n      });\n    }\n\n    function save(url, data) {\n      return $http[data.id ? 'put' : 'post'](url + (data.id ? data.id + '/': ''), data)\n      .then(function (response) {\n        if(response.data){\n          return response.data;\n        } else {\n          $log.warn(\"save->respuesta sin datos\");\n        }\n      }).catch(function (error) {\n        msgError(error);\n      });\n    }\n\n    function put(url, data) {\n      return $http.put(url + (data.id ? data.id + '/': ''), data)\n      .then(function (response) {\n        if(response.data){\n          return response.data;\n        }else{\n          $log.warn(\"put->respuesta sin datos\");\n        }\n      }).catch(function (error) {\n        msgError(error);\n      });\n    }\n\n    function putWithFiles(url, data) {\n      var config = {\n        headers: {\n          'Content-Type': undefined\n        }\n      };\n      return $http.put(url, data, config)\n      .then(function (response) {\n        if(response.data){\n          return response.data;\n        }else{\n          $log.warn(\"putWithFiles->respuesta sin datos\");\n        }\n      }).catch(function (error) {\n        msgError(error);\n      });\n    }\n\n    function patch(url, data) {\n      return $http.patch(url + (data.id ? data.id + '/': ''), data)\n      .then(function (response) {\n        if(response.data){\n          return response.data;\n        }else{\n          $log.warn(\"patch->respuesta sin datos\");\n        }\n      }).catch(function (error) {\n        msgError(error);\n      });\n    }\n\n    function post(url, data) {\n      return $http.post(url, data)\n      .then(function (response) {\n        if(response.data){\n          return response.data;\n        }else{\n          $log.warn(\"post->respuesta sin datos\");\n        }\n      }).catch(function (error) {\n        msgError(error);\n      });\n    }\n\n    function postWithFiles(url, data) {\n      var config = {\n        headers: {\n          'Content-Type': undefined\n        }\n      };\n      return $http.post(url, data, config)\n      .then(function (response) {\n        if(response.data){\n          return response.data;\n        }else{\n          $log.warn(\"postWithFiles->respuesta sin datos\");\n        }\n      }).catch(function (error) {\n        msgError(error);\n      });\n    }\n\n    function remove(url, id) {\n      return $http.delete(url + id + '/')\n      .then(function (response) {\n        if(response.data){\n          return response.data;\n        }else{\n          $log.warn(\"remove->respuesta sin datos\");\n        }\n      }).catch(function (error) {\n        msgError(error);\n      });\n    }\n\n    function get(url, id) {\n      return $http.get(url + (id ? id + '/' : ''))\n      .then(function (response) {\n        if(response.data){\n          return response.data;\n        }else{\n          $log.warn(\"get->respuesta sin datos\");\n        }\n      }).catch(function (error) {\n        msgError(error);\n      });\n    }\n\n    function fields(url) {\n      return $http({method: 'OPTIONS', url: url})\n      .then(function (response) {\n        if(response.data){\n          return response.data;\n        }else{\n          $log.warn(\"fields->respuesta sin datos\");\n        }\n      }).catch(function (error) {\n        msgError(error);\n      });\n    }\n\n    function pdf(url, data) {\n      return $http.post(url, data || {}, {responseType:'arraybuffer'})\n      .then(function (response) {\n        if (response.data) {\n          var file = new Blob([response.data], {type: 'application/pdf'});\n          var fileURL = URL.createObjectURL(file);\n          return { data: response.data, url: $sce.trustAsResourceUrl(fileURL) };\n        }\n        return null;\n      }).catch(function (error) {\n        if(url.indexOf('/documento/firmar')==-1){\n          msgError(error);\n        }\n      });\n    }\n\n    function file(url, data, type) {\n      // return $http.get(url, data || {}, {responseType:'arraybuffer'})\n      return $http.get(url, data || {})\n      .then(function (response) {\n        if (response.data) {\n          // var blob = new Blob([response.data], { type: type || 'text/plain' }),\n          //     url = $window.URL || $window.webkitURL;\n          var blob = new Blob([response.data], { type: (type || 'text/plain') }, false);\n          blob = blob; // TODO: esta linea es innecesaria\n          // saveAs(blob, filename || 'file.txt');\n\n          // return url.createObjectURL(blob);\n        }\n        return true;\n      }).catch(function (error) {\n        msgError(error);\n      });\n    }\n\n    function setFormly(data) {\n      formly = data;\n    }\n\n    function parseError(error) {\n      var message = [];\n      if (error) {\n        if (error.detail || error.error || error.non_field_errors) {\n          return error.detail || error.error || error.non_field_errors;\n        }\n        for (var i in error) {\n          var label = i;\n          if (formly) {\n            formly.filter(function (el) {\n              if (el.key == i) {\n                label = el.templateOptions.label;\n              }\n            });\n          }\n          message.push('<strong>' + label + ':</strong> ' + (Util.toType(error[i]) == 'array' ? error[i].join(', ') : error[i]));\n        }\n        return message.join('<br>');\n      }\n      return null;\n    }\n\n    function msgError(error) {\n      if (error.status === 500) {\n        if(error.data.indexOf(\"SequelizeUniqueConstraintError:\") !== -1){\n          var xcad = error.data.substring(error.data.indexOf(\"«\"), error.data.indexOf(\"»\"));\n          var campo = xcad.substring(1,xcad.lastIndexOf(\"_\"));\n          Message.error(\"El campo \"+campo+\" ya existe, y no debe duplicarse.\");\n        }\n        else if(error.data.indexOf(\"SequelizeValidationError:\") !== -1){\n          var mensajeError=((error.data.split(\" \")).splice(3)).join(' ');\n          var indice=mensajeError.indexOf(\"<br>\");\n          mensajeError=mensajeError.substring(0,indice);\n          Message.error(mensajeError);\n        }\n        else\n        Message.error(error500);\n      } else if (error.status === 404) {\n        Message.error(error404);\n      } else if (error.status === 403) {\n        Message.error(error403);\n      } else if (error.status === 401) {\n        Message.error(error401);\n      } else if (error.status === 412) {\n        Message.show((error.data.tipoMensaje || 'ERROR'), (error.data.mensaje || 'No se pudo obtener una respuesta'));\n      } else {\n        Message.error(parseError(error.data) || errorConnection);\n      }\n    }\n\n  }\n\n})();\n\n(function() {\n    'use strict';\n\n    angular\n    .module('app')\n    .filter('datetime', ['Datetime', function(Datetime) {\n\n        return function(date, format) {\n\n            if (format) {\n                if (format == 'literal') {\n                    return Datetime.dateLiteral(date);\n                }\n                if (format == 'year') {\n                    return Datetime.now('YYYY');\n                }\n                if (format == 'timeLiteral') {\n                    return Datetime.timeLiteral(date);\n                }\n                if (format == 'HH:mm') {\n                    date = date.split(':');\n                    return [date[0], date[1]].join(':')\n                }\n            }\n\n            return date;\n        }\n    }]);\n})();\n(function() {\n  'use strict';\n\n  angular\n    .module('app')\n    .config(ThemeConfig);\n\n    /** @ngInject */\n    function ThemeConfig($mdThemingProvider) {\n        \n        $mdThemingProvider.theme('default')\n                .primaryPalette('teal') // red, pink, purple, deep-purple, indigo, blue, light-blue, cyan, teal, green, light-green, lime, yellow, amber, orange, deep-orange, brown, grey, blue-grey\n                .accentPalette('orange')\n               \n    }\n\n})();\n\n\n(function() {\n  'use strict';\n\n  angular\n    .module('app')\n    .run(runBlock);\n\n  /** @ngInject */\n    function runBlock(Storage, $location, $log, PageNoLogin, $window, Datetime, $mdDialog, RouteValidator, formlyConfig, MyFormlyConfig, ExpirationTime) {\n        RouteValidator.init();\n        MyFormlyConfig.init(formlyConfig);\n        var $container = angular.element('#container-main');\n        var $document = $window.document;\n\n        // Collapsed Panel\n        $container.on('click', '.btn-collapsed', function () {\n            var $el = angular.element(this)\n            $el.parent().parent().next().slideToggle()\n            $el.toggleClass('rotate')\n        })\n\n        var $toasts = angular.element('#toast-container-main')\n        $toasts.on('click', '.md-toast-close', function () {\n            angular.element(this).parent().parent().parent().fadeOut()\n        });\n\n        // Redirect\n        if (!Storage.existUser()) {\n            var path = $location.path();\n            // $log.log('Revisando el path', path);\n            if (!exist(path)) {\n                if (path.length) Storage.setSession('path', path.replace('/', ''));                \n                if (Storage.getSession('path') !== 'verificar') $location.path('login');\n            }\n        } else {\n            ExpirationTime.init();\n        }\n\n        function exist(path) {\n            var paths = PageNoLogin;\n            for (var i in paths) {\n                if (path.indexOf('/' + paths[i]) == 0 || path.indexOf('/' + paths[i] + '/') == 0) {\n                    return true;\n                }\n            }\n            return false;\n        }\n\n        //Fullscreen\n        function exitFullScreen () {\n            angular.element('body').removeClass('fullscreen');\n        }\n\n        angular.element($window.document).on('keyup', function(e) {\n            if (e.keyCode == 27) {\n                exitFullScreen();\n            }\n        });\n\n        $document.addEventListener(\"mozfullscreenchange\", function () {\n            if (!$document.mozFullScreen) {\n                exitFullScreen();\n            }\n        }, false);\n\n    }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('app')\n    .config(routerConfig);\n\n  /** @ngInject */\n  function routerConfig($stateProvider, $urlRouterProvider) {\n    $stateProvider\n      .state('home', {\n        url: '/',\n        templateUrl: 'app/modules/dashboard/main.html',\n        controller: 'MainController',\n        controllerAs: 'main'\n      })\n      .state('usuario', {\n        url: '/usuario',\n        templateUrl: 'app/modules/admin/usuarios/modules.admin.usuarios.html',\n        controller: 'UsuariosController',\n        controllerAs: 'usuarios'\n      })\n      .state('menu', {\n        url: '/menu',\n        templateUrl: 'app/modules/seguridad/menu/modules.seguridad.menu.html',\n        controller: 'MenuController',\n        controllerAs: 'menu'\n      })\n      .state('rol', {\n        url: '/rol',\n        templateUrl: 'app/modules/seguridad/rol/modules.seguridad.rol.html',\n        controller: 'RolController',\n        controllerAs: 'rol'\n      })\n      .state('login', {\n        url: '/login',\n        templateUrl: 'app/modules/admin/login/modules.admin.login.html',\n        controller: 'LoginController',\n        controllerAs: 'login'\n      })\n      .state('elegir', {\n        url: '/elegir',\n        templateUrl: 'app/modules/admin/virtual/virtual.html',\n        controller: 'VirtualController',\n        controllerAs: 'virtual'\n      })\n      .state('verificar', {\n        url: '/verificar',\n        templateUrl: 'app/modules/verificacion/modules.verificar.html',\n        controller: 'VerificarController',\n        controllerAs: 'verificar'\n      })\n      .state('profile', {\n        url: '/profile',\n        templateUrl: 'app/modules/admin/profile/modules.admin.profile.html',\n        controller: 'ProfileController',\n        controllerAs: 'profile'\n      })\n      .state('contactos', {\n        url: '/contactos',\n        templateUrl: 'app/modules/plantillasFormly/contactos/modules.plantillasFormly.contactos.html',\n        controller: 'ContactosController',\n        controllerAs: 'contactos'\n      })\n      .state('plantillas', {\n        url: '/plantillas',\n        templateUrl: 'app/modules/plantillasFormly/plantillas/modules.plantillasFormly.plantillas.html',\n        controller: 'PlantillasController',\n        controllerAs: 'plantillas'\n      })\n      .state('plantilla', {\n        url: '/plantilla/:idPlantilla',\n        templateUrl: 'app/modules/plantillasFormly/plantillas/plantilla/modules.plantillasFormly.plantillas.plantilla.html',\n        controller: 'PlantillaController',\n        controllerAs: 'plantilla'\n      })\n      .state('documentos', {\n        url: '/documentos',\n        templateUrl: 'app/modules/plantillasFormly/documentos/modules.plantillasFormly.documentos.html',\n        controller: 'DocumentosController',\n        controllerAs: 'documentos'\n      })\n      .state('documento', {\n        url: '/documento/:idDocumento',\n        templateUrl: 'app/modules/plantillasFormly/documentos/documento/modules.plantillasFormly.documentos.documento.html',\n        controller: 'DocumentoController',\n        controllerAs: 'documento'\n      })\n      .state('aprobacion', {\n        url: '/aprobacion',\n        templateUrl: 'app/modules/plantillasFormly/aprobacion/modules.plantillasFormly.aprobacion.html',\n        controller: 'AprobacionController',\n        controllerAs: 'aprobacion'\n      })\n      .state('impresion', {\n        url: '/impresion',\n        templateUrl: 'app/modules/plantillasFormly/impresion/modules.plantillasFormly.impresion.html',\n        controller: 'ImpresionController',\n        controllerAs: 'impresion'\n      })\n      .state('progreso', {\n        url: '/progreso',\n        templateUrl: 'app/modules/plantillasFormly/progreso/modules.plantillasFormly.progreso.html',\n        controller: 'ProgresoController',\n        controllerAs: 'progreso'\n      })\n      .state('enCurso', {\n        url: '/en_curso',\n        templateUrl: 'app/modules/plantillasFormly/enCurso/modules.plantillasFormly.enCurso.html',\n        controller: 'EnCursoController',\n        controllerAs: 'enCurso'\n      })\n      .state('firmar', {\n        url: '/firmar',\n        templateUrl: 'app/modules/plantillasFormly/firmar/modules.plantillasFormly.firmar.html',\n        controller: 'FirmarController',\n        controllerAs: 'firmar'\n      })\n      .state('vistaPdf', {\n        url: '/vista_pdf',\n        templateUrl: 'app/modules/plantillasFormly/vistaPdf/modules.plantillasFormly.vistaPdf.html',\n        controller: 'VistaPdfController',\n        controllerAs: 'vistaPdf'\n      })\n      .state('monitoreo', {\n        url: '/monitoreo',\n        templateUrl: 'app/modules/plantillasFormly/monitoreo/modules.plantillasFormly.monitoreo.html',\n        controller: 'MonitoreoController',\n        controllerAs: 'monitoreo'\n      })\n    $urlRouterProvider.otherwise('/');\n  }\n\n})();\n\n/* global moment:false */\n(function() {\n  'use strict';\n\n  angular\n    .module('app')\n    .constant('moment', moment)\n    .constant('appName', 'app')\n    .constant('PageNoLogin', ['login'])\n    .constant('authUrl', 'https://intranet.agetic.gob.bo/plantillas/ws/autenticar') // Auth\n    .constant('restUrl', 'https://intranet.agetic.gob.bo/plantillas/ws/api/v1/' ) // Rest Api Backend\n    .constant('backUrl', 'https://intranet.agetic.gob.bo/plantillas/ws') // Backend\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('app')\n    .config(config);\n\n  /** @ngInject */\n    function config($logProvider, $authProvider, restUrl, authUrl, appName, $mdDateLocaleProvider, moment, $httpProvider, $mdAriaProvider) {\n        // Enable log\n        $logProvider.debugEnabled(true);\n        // Globally disables all ARIA warnings.\n        $mdAriaProvider.disableWarnings();\n\n        // Config auth\n        $authProvider.loginUrl = authUrl;\n        // $authProvider.signupUrl = \"http://api.com/auth/signup\";\n        $authProvider.tokenName = \"token\";\n        $authProvider.tokenPrefix = appName;\n        $authProvider.storageType = 'sessionStorage';\n        // $authProvider.authToken = 'Bearer';\n\n        $mdDateLocaleProvider.formatDate = function(date) {\n            if (date) {\n                return moment(date).format('DD/MM/YYYY');\n            }\n            return null;\n        };\n\n        $mdDateLocaleProvider.parseDate = function(dateString) {\n            var m = moment(dateString, 'DD/MM/YYYY', true);\n            return m.isValid() ? m.toDate() : new Date(NaN);\n        };\n\n        $httpProvider.interceptors.push('HttpInterceptor');\n\n\n        //initialize get if not there\n        if (!$httpProvider.defaults.headers.get) {\n            $httpProvider.defaults.headers.get = {};\n        }\n        $httpProvider.defaults.headers.get['Cache-Control'] = 'private, no-cache, no-store, must-revalidate';\n        $httpProvider.defaults.headers.get['Pragma'] = 'no-cache';\n\n        //disable IE ajax request caching\n        $httpProvider.defaults.headers.get['If-Modified-Since'] = 'Mon, 26 Jul 1997 05:00:00 GMT';\n        // extra\n\n    }\n\n})();\n\nangular.module(\"app\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/components/breadcrumb/breadcrumb.html\",\"<ol class=breadcrumb><li ng-if=$ctrl.getParent()>{{$ctrl.getParent()}}</li><li class=active ng-if=$ctrl.getCurrent()>{{$ctrl.getCurrent()}}</li></ol>\");\n$templateCache.put(\"app/components/cargadorArchivos/cargadorArchivos.html\",\"<div layout=row layout-wrap><div flex><div ng-click=vm.clickUp() ng-show=vm.uploader.isHTML5 ng-if=\\\"vm.maxArchivosPermitidos > vm.uploader.queue.length\\\"><div class=caja-up nv-file-drop=\\\"\\\" nv-file-over=\\\"\\\" nv-file-select=\\\"\\\" uploader=vm.uploader><div layout=row layout-wrap layout-align=\\\"center center\\\"><div flex=30 style=text-align:right><md-icon class=md-display-1>attach_file</md-icon></div><div flex=70 class=md-body-1>Suelte los archivos aquí o haga click para añadir archivos<br>Solo se permiten archivos en formato: {{vm.formatos}}</div></div></div></div><input id=input_seleccionar type=file nv-file-select=\\\"\\\" uploader=vm.uploader multiple ng-show=!vm.uploader.isHTML5><table ng-if=!vm.soloImagenes><tbody><!-- TODO: Habilitar para los archivos antiguos (edicion y eliminacion)\\n    <tr ng-show=\\'item.mostrar\\' ng-repeat=\\\"item in vm.noticia_adjuntos\\\">\\n                    <td><a ng-href=\\'{{item.link}}\\'> {{item.nombre_publico}}</a></td>\\n                    <td>\\n                        <md-button class=\\\"md-icon-button md-accent md-very-small\\\" aria-label=\\\"Eliminar\\\" ng-click=\\\"vm.eliminarAdjuntos(item)\\\">\\n                            <md-icon class=\\\"md-very-small\\\">delete</md-icon>\\n                        </md-button>\\n                    </td>\\n                </tr>--><tr ng-repeat=\\\"item in vm.uploader.queue\\\"><td>{{item.file.name}}</td><td><md-button class=\\\"md-icon-button md-accent md-very-small\\\" aria-label=Eliminar ng-click=item.remove()><md-icon class=md-very-small>delete</md-icon></md-button></td></tr></tbody></table><span ng-repeat=\\\"item in vm.uploader.queue\\\" class=imagen ng-if=vm.soloImagenes>{{item.file.name}}<div ng-show=\\\"vm.uploader.isHTML5 && vm.esImagen(item.file)\\\" ng-thumb=\\\"{ file: item._file, height: vm.altoMiniatura, width: vm.anchoMiniatura }\\\"></div><md-button class=\\\"md-icon-button md-accent md-very-small\\\" aria-label=Eliminar ng-click=item.remove()><md-icon class=md-very-small>delete</md-icon></md-button></span><span ng-repeat=\\\"item in vm.mostrar\\\" class=imagen>{{item.nombre_publico}}<div ng-mostrar-thumb=\\\"{ ruta:\\'{{vm.restUrl}}{{item.ruta}}\\',height: vm.altoMiniatura, width: vm.anchoMiniatura }\\\"></div><md-button class=\\\"md-icon-button md-accent md-very-small\\\" aria-label=Eliminar ng-click=vm.eliminar(item)><md-icon class=md-very-small>delete</md-icon></md-button></span><md-progress-linear md-mode=determinate value={{vm.uploader.progress}}></md-progress-linear></div></div>\");\n$templateCache.put(\"app/components/crudTable/crudTable.html\",\"<md-card><md-toolbar class=\\\"md-table-toolbar md-default\\\" ng-show=vm.filter.show><div class=md-toolbar-tools><md-icon>search</md-icon><form flex name=vm.filter.form ng-class=\\\"{\\'flex-xs-70\\': vm.searchPro, \\'flex-sm-70\\': vm.searchPro}\\\"><div layout=column layout-gt-sm=row ng-class=\\\"{\\'crud-table-searchpro\\': vm.searchPro}\\\"><input type=text ng-class=\\\"{\\'crud-table-filter\\': !vm.searchPro, \\'flex\\': vm.searchPro}\\\" id=crud-table-input ng-model=vm.query.filter ng-model-options=vm.filter.options placeholder=\\\"Escriba su búsqueda aquí...\\\" ng-if=\\\"!vm.searchPro || vm.tipo_busqueda==\\'campo\\' || vm.tipo_busqueda==\\'todos\\' || vm.tipo_busqueda==\\'documento\\'\\\"><divider></divider><div class=date-pick ng-if=vm.check_fechas><md-datepicker ng-change=vm.getItems() ng-model=vm.fecha_inicio></md-datepicker><md-tooltip>Fecha inicio</md-tooltip></div><div class=date-pick ng-if=vm.check_fechas><md-datepicker ng-change=vm.getItems() ng-model=vm.fecha_final></md-datepicker><md-tooltip>Fecha fin</md-tooltip></div><div ng-if=vm.searchPro><md-checkbox ng-model=vm.check_fechas ng-change=vm.getItems() aria-label=check_fechas></md-checkbox><md-tooltip>Fechas</md-tooltip></div><divider></divider><label for=select-tipo ng-if=vm.searchPro>Tipo de búsqueda:</label><md-input-container flex class=\\\"select-tipo flex-gt-sm-10\\\" ng-if=vm.searchPro><md-select ng-model=vm.tipo_busqueda ng-change=\\\"vm.query.filter=\\'\\'; vm.getItems();\\\"><md-option class=opt-select-tipo ng-value=\\\"\\'todos\\'\\\">Todos</md-option><md-option class=opt-select-tipo ng-value=\\\"\\'campo\\'\\\">Campo</md-option><md-option class=opt-select-tipo ng-value=\\\"\\'documento\\'\\\">En documento</md-option></md-select></md-input-container><md-input-container flex class=\\\"select-tipo flex-gt-sm-10\\\" ng-if=\\\"vm.tipo_busqueda==\\'campo\\'\\\" ng-init=\\\"vm.campo_seleccionado=vm.headers[1]\\\"><md-select ng-model=vm.campo_seleccionado ng-change=vm.getItems()><md-option class=opt-select-tipo ng-value=h ng-repeat=\\\"h in vm.headers\\\" ng-if=\\\"h.title!=\\'ID\\'\\\">{{(h.title==\\'Nombre\\')? h.title+\\'(CITE)\\': h.title }}</md-option></md-select><md-tooltip>{{vm.campo_seleccionado.title}}</md-tooltip></md-input-container></div></form><md-button class=md-icon-button ng-click=vm.removeFilter()><md-icon>close</md-icon></md-button></div></md-toolbar><md-toolbar class=md-table-toolbar ng-show=!vm.filter.show><div class=md-toolbar-tools><md-icon>grid_on</md-icon><span>{{vm.titleTable}}</span><div flex></div><md-button class=md-icon-button ng-click=vm.showFilter() ng-if=vm.permissions.filter><md-tooltip>Filtrar registros</md-tooltip><md-icon>filter_list</md-icon></md-button><md-button class=md-icon-button ng-click=vm.saveAll() ng-if=vm.editable><md-tooltip>Guardar todo</md-tooltip><md-icon>playlist_add_check</md-icon></md-button><md-button class=md-icon-button ng-click=vm.getItems() id=btn-refresh-crudtable><md-tooltip>Actualizar</md-tooltip><md-icon>refresh</md-icon></md-button><md-button class=\\\"md-icon-button btn-collapsed\\\"><md-tooltip>Ocultar/Ver</md-tooltip><md-icon>keyboard_arrow_down</md-icon></md-button></div></md-toolbar><md-card-content ng-class=\\\"{\\'crud-table-content\\': vm.searchPro && vm.filter.show}\\\"><div class=btn-container ng-if=vm.permissions.create><md-button class=\\\"md-fab md-primary\\\" ng-click=vm.add($event) aria-label=Add><md-tooltip>Agregar nuevo registro</md-tooltip><md-icon>add</md-icon></md-button></div><div class=btn-container ng-if=\\\"!vm.permissions.create && vm.buttonAgregar\\\"><md-button class=\\\"md-fab md-primary\\\" ng-click=vm.buttonAgregar.onclick($event) aria-label=Add><md-tooltip>{{ vm.buttonAgregar.tooltip || \\'Agregar nuevo registro\\' }}</md-tooltip><md-icon>{{vm.buttonAgregar.icon}}</md-icon></md-button></div><md-table-container><table md-table ng-model=selected md-progress=promise ng-if=vm.permissions.read><thead md-head md-order=vm.query.order md-on-reorder=vm.getItems><tr md-row><th md-cell ng-if=vm.habilitarSeleccion><md-checkbox class=md-primary ng-model=vm.seleccionar ng-click=vm.seleccionarTodos()></md-checkbox></th><th md-column ng-if=\\\"vm.permissions.update || vm.permissions.update || vm.permissions.print || vm.buttons.length > 0 || vm.permissions.delete\\\">Acciones</th><th ng-repeat=\\\"header in vm.headers\\\" md-column ng-if=\\\"$index > 0 && !vm.idShow[header.name]\\\" md-order-by=\\\"{{header.order ? header.name : \\'\\'}}\\\"><span ng-if=!vm.estadoChecks>{{header.title}}</span> <span ng-if=vm.estadoChecks><span ng-if=\\\"header.name==\\'estado\\'\\\"><md-input-container class=\\\"select-sin-mb select-crud-estado\\\" ng-click=vm.prevent($event)><label>{{header.title}}</label><md-select ng-model=vm.busqueda_estado multiple ng-change=vm.getItems()><md-option ng-value=op.v ng-repeat=\\\"op in vm.estadoOpciones\\\">{{op.t}}</md-option></md-select></md-input-container></span><span ng-if=\\\"header.name!=\\'estado\\'\\\">{{header.title}}</span></span></th><th md-column ng-if=vm.informacionBienes>Bienes</th></tr></thead><tbody md-body class=\\\"{{vm.editable ? \\'formly-table-editable\\' : \\'\\'}}\\\"><tr md-row md-select=item ng-repeat=\\\"item in vm.items.data\\\" class=seleccionado><td md-cell ng-if=vm.habilitarSeleccion><md-checkbox class=md-primary ng-model=item.selected ng-click=vm.seleccionando(item)></md-checkbox></td><td md-cell class=\\\"text-center md-table-options\\\" ng-if=\\\"vm.permissions.update || vm.permissions.update || vm.permissions.print || vm.buttons.length > 0 || vm.permissions.delete\\\"><md-button class=\\\"md-icon-button boton-extra\\\" aria-label=Editar ng-click=\\\"vm.edit($event, item)\\\" ng-if=\\\"vm.permissions.update && !vm.editable\\\"><md-tooltip>Editar</md-tooltip><md-icon>mode_edit</md-icon></md-button><md-button class=\\\"md-icon-button boton-extra\\\" aria-label=Editar ng-click=vm.save(item) ng-if=\\\"vm.permissions.update && vm.editable\\\"><md-tooltip>Guardar registro</md-tooltip><md-icon>check</md-icon></md-button><md-button class=\\\"md-icon-button boton-extra\\\" aria-label=Editar ng-click=\\\"vm.print($event, item)\\\" ng-if=vm.permissions.print><md-tooltip>Imprimir</md-tooltip><md-icon>print</md-icon></md-button><span ng-repeat=\\\"button in vm.buttons\\\"><span ng-if=button.multiple><span ng-if=button.opcion[item[button.key_item]]><md-button class=md-icon-button ng-class=\\\"button.opcion[item[button.key_item]].xclass || \\'boton-extra\\'\\\" aria-label=button.opcion[item[button.key_item]].tooltip ng-click=\\\"vm.buttonEvent($event, item, button.opcion[item[button.key_item]].onclick)\\\"><md-tooltip>{{button.opcion[item[button.key_item]].tooltip}}</md-tooltip><md-icon>{{button.opcion[item[button.key_item]].icon}}</md-icon></md-button></span><span ng-if=\\\"button.opcion[\\'DEFAULT\\'] && !button.opcion[item[button.key_item]]\\\"><md-button class=md-icon-button ng-class=\\\"button.opcion[item[button.key_item]].xclass || \\'boton-extra\\'\\\" aria-label=\\\"button.opcion[\\'DEFAULT\\'].tooltip\\\" ng-click=\\\"vm.buttonEvent($event, item, button.opcion[\\'DEFAULT\\'].onclick)\\\"><md-tooltip ng-if=\\\"button.opcion[\\'DEFAULT\\'].tooltip\\\">{{button.opcion[\\'DEFAULT\\'].tooltip}}</md-tooltip><md-icon>{{button.opcion[\\'DEFAULT\\'].icon}}</md-icon></md-button></span></span><md-button class=\\\"md-icon-button boton-extra\\\" aria-label=button.tooltip ng-click=\\\"vm.buttonEvent($event, item, button.onclick)\\\" ng-if=\\\"!button.multiple && !button.tipo\\\"><md-tooltip>{{button.tooltip}}</md-tooltip><md-icon>{{button.icon}}</md-icon></md-button><md-button class=\\\"md-icon-button (item[button.campo]==true?\\'icono-activo\\':\\'\\')\\\" aria-label=button.tooltip ng-click=\\\"vm.buttonEvent($event, item, button.onclick)\\\" ng-if=\\\"!button.multiple && button.tipo==\\'icon\\'\\\"><md-icon>{{button.icon}}</md-icon></md-button>{{item[button.campo]}}</span><md-button class=\\\"md-icon-button boton-eliminar\\\" aria-label=Eliminar ng-click=\\\"vm.delete($event, item)\\\" ng-if=\\\"vm.permissions.delete && !item.id_documento\\\"><md-tooltip>Eliminar</md-tooltip><md-icon>delete</md-icon></md-button><md-button class=\\\"md-icon-button boton-eliminar\\\" aria-label=Eliminar ng-click=\\\"vm.delete($event, item)\\\" ng-if=\\\"vm.permissions.delete && item.id_documento && (item.estado==\\'NUEVO\\' || item.estado==\\'RECHAZADO\\')\\\"><md-tooltip>Eliminar</md-tooltip><md-icon>delete</md-icon></md-button><md-button class=md-icon-button aria-label=\\\"\\\" ng-if=\\\"vm.permissions.delete && item.id_documento && (item.estado!=\\'NUEVO\\' && item.estado!=\\'RECHAZADO\\')\\\"><md-icon></md-icon></md-button></td><td md-cell ng-repeat=\\\"(key, value) in item\\\" ng-if=\\\"$index > 0 && !vm.idShow[key] && key !== \\'selected\\' \\\"><div ng-if=vm.editable><div ng-switch on=vm.types[key].type><div ng-switch-when=input><md-input-container><label>{{vm.types[key].templateOptions.label}}</label><input ng-model=vm.dataGrid[value]></md-input-container></div><div ng-switch-when=textarea><md-input-container><label>{{vm.types[key].templateOptions.label}}</label><textarea ng-model=vm.dataGrid[value]></textarea></md-input-container></div><div ng-switch-when=select><md-input-container><md-select ng-model=vm.dataGrid[value]><label>{{vm.types[key].templateOptions.label}}</label><md-option ng-repeat=\\\"option in vm.types[key].templateOptions.options\\\" value={{option.value}}>{{option.name}}</md-option></md-select></md-input-container></div><div ng-switch-when=checkbox><md-checkbox ng-model=vm.dataGrid[value] aria-label={{vm.types[key].templateOptions.label}}></md-checkbox></div><div ng-switch-when=datepicker><md-datepicker ng-model=vm.dataGrid[value] md-placeholder={{vm.types[key].templateOptions.label}}></md-datepicker></div><div ng-switch-default>{{value}}</div></div></div><div ng-if=!vm.editable><div ng-switch on=value><div ng-switch-when=check_circle_success><md-icon class=bg-success>check_circle</md-icon></div><div ng-switch-when=check_circle_gray><md-icon class=bg-gray>check_circle</md-icon></div><div ng-switch-default><div ng-if=\\\"key.indexOf(\\'fecha\\') != -1\\\">{{value|date:\\'dd/MM/yyyy\\'}}</div><div ng-if=\\\"key.indexOf(\\'fid_\\') == 0\\\">{{vm.fieldsData[vm.fields.indexOf(key)].templateOptions.fkeys[value] || value}}</div><div ng-if=\\\"key.indexOf(\\'fecha\\') == -1 && key.indexOf(\\'fid_\\') != 0\\\"><div ng-if=\\\"!vm.estadoSw || (vm.estadoSw && key!=\\'estado\\' && key!=\\'impreso\\' )\\\"><span ng-if=\\\"vm.sw_cite && key==\\'nombre\\'\\\">{{value}}<tooltip doc=item></tooltip></span><div ng-if=\\\"!vm.sw_cite || key!=\\'nombre\\'\\\">{{value}}</div></div><div ng-if=\\\"vm.estadoSw && key==\\'estado\\'\\\"><md-switch ng-true-value=\\\"\\'ACTIVO\\'\\\" ng-false-value=\\\"\\'INACTIVO\\'\\\" ng-model=item.estado aria-label=estado ng-change=vm.estadoModificado(item)></md-switch></div><div ng-if=\\\"vm.estadoSw && key==\\'impreso\\'\\\"><md-switch ng-true-value=\\\"\\'SI\\'\\\" ng-false-value=\\\"\\'NO\\'\\\" ng-model=item.impreso aria-label=impreso ng-change=vm.estadoModificado(item)></md-switch></div></div></div></div></div></td></tr></tbody></table></md-table-container><md-table-pagination md-label=\\\"{page: \\'Página:\\', rowsPerPage: \\'Filas por página:\\', of: \\'de\\'}\\\" md-limit=vm.query.limit md-limit-options=vm.limitOptions md-page=vm.query.page md-total={{vm.items.count}} md-page-select=vm.options.pageSelect md-boundary-links=vm.options.boundaryLinks md-on-paginate=vm.getItems></md-table-pagination></md-card-content></md-card>\");\n$templateCache.put(\"app/components/crudTable/dialog.crudTable.html\",\"<md-dialog aria-label=Agregar/Editar ng-cloak class=\\\"formly-dialog formly-column-{{column}}\\\"><form ng-submit=\\\"answer(\\'save\\')\\\" id=data-form name=form novalidate><md-toolbar><div class=md-toolbar-tools><h2>{{title}}</h2><span flex></span><md-button class=\\\"md-icon-button md-toast-button-close\\\" ng-click=cancel()><md-icon aria-label=\\\"Close dialog\\\">close</md-icon></md-button></div></md-toolbar><md-dialog-content><div class=md-dialog-content><md-content layout-gt-sm=column layout-padding class=formly><formly-form model=data fields=fields options=options form=form></formly-form></md-content></div></md-dialog-content><md-dialog-actions layout=row><span flex></span><md-button class=md-raised ng-click=cancel()><md-icon>cancel</md-icon>Cancelar</md-button><md-button type=submit class=\\\"md-raised md-primary\\\" ng-disabled=form.$invalid><md-icon>check</md-icon>Guardar</md-button></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/components/crudTable/dialog.pdf.html\",\"<md-dialog aria-label=Imprimir ng-cloak class=\\\"formly-dialog formly-column-{{column}}\\\" style=\\\"width: 960px\\\"><md-toolbar><div class=md-toolbar-tools><h2>{{title}}</h2><span flex></span><md-button class=\\\"md-icon-button md-toast-button-close\\\" ng-click=cancel()><md-icon aria-label=\\\"Close dialog\\\">close</md-icon></md-button></div></md-toolbar><md-dialog-content><iframe src={{data}} style=\\\"width:100%; height:600px; border: none\\\" id=iframe-pdf-crud></iframe></md-dialog-content></md-dialog>\");\n$templateCache.put(\"app/components/documentoIdentidad/documentoIdentidad.html\",\"<div class=doc-identidad><md-input-container class=doc-identidad-tipo ng-if=\\\"vm.onlyCi === undefined || !vm.onlyCi\\\"><label>Tipo de documento</label><md-select ng-model=vm.tipo_documento required ng-disabled=vm.ngDisabled><md-option ng-repeat=\\\"option in vm.tipos\\\" value={{option.value}}>{{option.name}}</md-option></md-select></md-input-container><div class=\\\"alert alert-info doc-identidad-cedula-info\\\" ng-class=\\\"{display: vm.onlyCi}\\\" ng-if=\\\"vm.tipo_documento == \\'CI\\' && !vm.ngDisabled\\\"><md-icon>info_outline</md-icon>Ingrese número de documento, complemento y fecha de nacimiento para su búsqueda.</div><div layout=row class=form-horizontal><md-input-container><label>Número de documento</label><input ng-model=vm.nro_documento required ng-disabled=vm.ngDisabled></md-input-container><md-input-container ng-if=\\\"vm.tipo_documento == \\'CI\\'\\\"><label>Complemento</label><input ng-model=vm.complemento ng-disabled=vm.ngDisabled></md-input-container><md-select-date ng-model=vm.fecha_nacimiento ng-label=\\\"Fecha de nacimiento:\\\" ng-disabled=vm.ngDisabled ng-required=true></md-select-date><md-button class=\\\"md-raised md-primary doc-identidad-button\\\" ng-click=vm.search() ng-disabled=vm.isDisabled() ng-if=\\\"!vm.ngDisabled && vm.tipo_documento == \\'CI\\'\\\"><md-icon>search</md-icon>Buscar</md-button></div></div>\");\n$templateCache.put(\"app/components/menuCard/menuCard.html\",\"<md-card><md-toolbar class=md-table-toolbar ng-show=true><div class=md-toolbar-tools><md-icon>grid_on</md-icon><span>{{vm.titleTable}}</span><div flex></div><md-button class=\\\"md-icon-button btn-collapsed\\\"><md-tooltip>Ocultar/Ver</md-tooltip><md-icon>keyboard_arrow_down</md-icon></md-button></div></md-toolbar><md-card-content><div class=menuCard-list ng-repeat=\\\"item in vm.items\\\"><h4 class=menuCard-titulo ng-click=\\\"item.show=!item.show\\\">{{item.name}}</h4><div class=menuCard-animated-hide ng-if=!item.show layout=row layout-padding layout-fill layout-wrap ng-cloak><a class=menuCard-link ng-repeat=\\\"xitem in item.data\\\" ng-href=#/{{xitem.url}}><md-whiteframe md-whiteframe={{height}} layout layout-align=\\\"center center\\\" ng-init=\\\"height = 1\\\" ng-mouseenter=\\\"height = 3\\\" ng-mouseleave=\\\"height = 1\\\"><div layout=column layout-align=\\\"center center\\\"><md-icon class=md-display-3>{{xitem.icono || \\'details\\'}}</md-icon><span class=text-center>{{xitem.name}}</span></div></md-whiteframe></a></div></div></md-card-content></md-card>\");\n$templateCache.put(\"app/components/navbar/navbar.html\",\"<md-toolbar><div class=md-toolbar-tools><md-button class=md-icon-button ng-click=vm.toggle() aria-label=\\\"Menu collapse\\\" show-gt-md><md-tooltip>Mostrar/ocultar menú</md-tooltip><i class=md-icon>menu</i></md-button><!-- <span class=\\\"navbar-user-name\\\" flex>{{vm.getFirstName()}}</span> --> <span flex></span><md-button class=\\\"margin-0 md-icon-button btn-fullscreen\\\" ng-click=vm.fullscreen() aria-label=Fullscreen show-gt-md id=btn-fullscreen><md-icon>fullscreen</md-icon><md-icon>fullscreen_exit</md-icon><md-tooltip class=tooltip-fullscreen><span class=exit>Salir </span>Pantalla completa</md-tooltip></md-button><md-menu><!-- <md-button aria-label=\\\"interactions menu\\\" class=\\\"md-icon-button navbar-user-icon bg-{{vm.getColor()}}-user\\\" ng-click=\\\"vm.openMenu($mdOpenMenu, $event)\\\">\\n                {{vm.getInitial()}}\\n            </md-button> --><md-button class=\\\"margin-0 md-icon-button\\\" aria-label=Más ng-click=\\\"vm.openMenu($mdOpenMenu, $event)\\\"><md-tooltip>Más opciones</md-tooltip><md-icon>more_vert</md-icon></md-button><md-menu-content class=navbar-options><md-menu-item><md-button ng-click=vm.profile()><i class=md-icon>account_circle</i> Mi cuenta</md-button></md-menu-item><!-- <md-menu-item>\\n                    <md-button ng-click=\\\"vm.settings()\\\">\\n                        <i class=\\\"md-icon\\\">settings applications</i> Configuraciones\\n                    </md-button>\\n                </md-menu-item> --><!-- <md-menu-divider></md-menu-divider> --><md-menu-item style=\\\"width: 200px\\\"><md-button ng-click=vm.logout()><i class=md-icon>power_setting_new</i> Salir</md-button></md-menu-item></md-menu-content></md-menu><md-button class=md-icon-button aria-label=More style=\\\"display: none\\\"><i class=md-icon>more_vert</i></md-button></div></md-toolbar>\");\n$templateCache.put(\"app/components/paletteFormly/paletteFormly.html\",\"<div class=component-palette-formly md-autofocus><div class=md-accordion ng-repeat=\\\"data in vm.elementos\\\"><div class=header-accordion ng-click=\\\"data.expanded = !data.expanded\\\"><div layout layout-align=\\\"center center\\\"><span class=titulo>{{ data.titulo }}</span> <span flex=\\\"\\\"></span> <span ng-class=\\\"{expandCollapse:true, active: data.expanded}\\\"></span><!-- <md-icon ng-class=\\\"{expandCollapse2:true, active: data.expanded}\\\">keyboard_arrow_down</md-icon> --></div></div><div class=body-accordion ng-class=\\\"{dataContent:true, activeContent:data.expanded}\\\"><md-list-item class=submenu ng-repeat=\\\"item in data.submenu\\\"><div class=md-list-item-text layout=column flex dnd-draggable=item.tipo dnd-effect-allowed=move><div>{{ item.name }}</div></div><md-button class=\\\"md-fab md-primary md-mini button-mini\\\" ng-click=vm.addItem(item.tipo)><md-tooltip>Añadir {{ item.name }}</md-tooltip><md-icon>add</md-icon></md-button></md-list-item></div></div></div>\");\n$templateCache.put(\"app/components/selectDate/selectDate.html\",\"<div layout=row class=select-date><label>{{vm.ngLabel}}:</label><md-input-container><label>Día</label><md-select ng-model=vm.day ng-required=vm.ngRequired ng-disabled=vm.ngDisabled><md-option ng-repeat=\\\"option in vm.days\\\" value={{option.value}}>{{option.name}}</md-option></md-select></md-input-container><md-input-container><label>Mes</label><md-select ng-model=vm.month ng-required=vm.ngRequired ng-disabled=vm.ngDisabled><md-option ng-repeat=\\\"option in vm.months\\\" value={{option.value}}>{{option.name}}</md-option></md-select></md-input-container><md-input-container><label>Año</label><md-select ng-model=vm.year ng-required=vm.ngRequired ng-disabled=vm.ngDisabled><md-option ng-repeat=\\\"option in vm.years\\\" value={{option.value}}>{{option.name}}</md-option></md-select></md-input-container></div>\");\n$templateCache.put(\"app/components/sidenav/sidenav.html\",\"<md-sidenav class=md-sidenav-left md-component-id=left md-is-locked-open=\\\"$mdMedia(\\'gt-sm\\')\\\" id=sidenav><md-toolbar class=sidenav-title><h1 class=md-toolbar-tools><i class=\\\"md-icon sidenav-title-icon\\\">description</i> <span class=sidenav-title-text>PLANTILLAS</span></h1></md-toolbar><div class=sidenav-user><figure><img class=sidenav-user-photo src=\\\"\\\" alt=\\\"Image User\\\" hidden><div class=\\\"sidenav-user-default bg-{{vm.getColor()}}-user\\\"><!-- <i class=\\\"md-icon\\\">account_circle</i> --> {{vm.getInitial()}}</div></figure><h2 class=sidenav-user-name>{{vm.getName()}}<md-tooltip md-direction=bottom>{{vm.getName()}}</md-tooltip></h2><div class=sidenav-user-item>{{vm.getEmail()}}</div></div><ul class=sidenav-list><li ng-repeat=\\\"opcion in vm.getMenu()\\\"><md-button type=button class=\\\"md-button-toggle md-button md-button md-ink-ripple\\\" ng-click=\\\"vm.send(opcion.url, opcion.submenu.length)\\\"><i class=\\\"md-icon md-icon-option\\\">{{opcion.icon}}</i> <span class=md-icon-text>{{opcion.label}}</span> <i class=\\\"md-icon md-icon-arrow-down\\\" ng-if=opcion.submenu.length>keyboard_arrow_down</i></md-button><ul class=sidenav-sublist ng-if=opcion.submenu.length><li ng-repeat=\\\"sub in opcion.submenu\\\"><md-button type=button class=\\\"md-button md-button md-ink-ripple md-button-href {{vm.active == sub.url ? \\'active\\' : \\'\\'}}\\\" data-url={{sub.url}} ng-click=vm.send(sub.url)><span class=md-icon-text>{{sub.label}}</span></md-button></li></ul></li></ul></md-sidenav><md-button ng-click=vm.toggleLeft() class=md-icon-button hide-gt-md><i class=md-icon>menu</i></md-button>\");\n$templateCache.put(\"app/components/visorImagenes/visorImagenes.dialog.html\",\"<md-dialog aria-label=Ver/Editar ng-cloak class=\\\"formly-dialog formly-column-{{column}}\\\"><md-dialog-content class=md-dialog-content><div flex layout=row><img ng-src={{data}}></div></md-dialog-content></md-dialog>\");\n$templateCache.put(\"app/components/visorImagenes/visorImagenes.html\",\"<div layout=row layout-wrap ng-if=\\\"vm.imagenes.length > 0\\\"><div flex><h4>{{vm.titulo}}</h4><span ng-repeat=\\\"item in vm.imagenes\\\"><div class=contenedor-miniatura><img src={{vm.restUrl}}{{item.ruta}} alt={{item.nombre_publico}} class=miniatura style=\\\"width:{{vm.ancho}}px; height:{{vm.alto}}px\\\" ng-click=\\\"vm.mostrarImagen(vm.restUrl + item.ruta)\\\"><br><md-button class=\\\"md-icon-button md-accent md-very-small\\\" aria-label=Eliminar ng-click=vm.eliminarImagen(item) ng-if=vm.eliminar><md-icon class=md-very-small>delete</md-icon></md-button></div></span></div></div>\");\n$templateCache.put(\"app/factories/Documento/dialog.progreso.html\",\"<md-dialog aria-label=\\\"Ver progreso\\\" class=\\\"formly-dialog formly-column-{{column}} dialog-progreso\\\" style=\\\"max-width: 800px; width: 100%\\\"><md-toolbar><div class=md-toolbar-tools><h2><md-icon>dashboard</md-icon>Progreso del documento</h2><span flex></span><md-button class=md-icon-button aria-label=Cerrar ng-click=cerrar()><md-tooltip>Cerrar</md-tooltip><md-icon aria-label=\\\"Close dialog\\\">close</md-icon></md-button></div></md-toolbar><md-dialog-content class=md-dialog-content><timeline><timeline-event ng-repeat=\\\"it in data.datos\\\"><timeline-badge class=bg-{{it.bg_color}}><md-icon aria-label=description>{{it.icon}}</md-icon><md-tooltip>{{it.acc}}</md-tooltip></timeline-badge><timeline-panel ng-if=\\\"it.accion !== \\'ANULADO\\'\\\"><timeline-heading><h3>{{it.nombres}}</h3></timeline-heading><p><span class=ap-text-{{it.bg_color}}>{{it.acc}} {{it.acc==\\'Sin respuesta\\'? \\'desde \\': \\'\\'}} </span>el {{it.fecha_mos}} a las {{it.hora_mos}}</p><p ng-if=\\\"it.accion==\\'DERIVADO\\' && it.derivado\\\">A: <strong>{{it.derivado.nombres}}</strong></p><p ng-if=it.tipo_doc>Documento: {{it.tipo_doc}}</p><p ng-if=it.cite>CITE: <span class=ap-cursor-pointer ng-click=verDocumento(it.id_documento)>{{it.cite}}</span></p><p ng-if=\\\"it.accion==\\'RECHAZADO\\'\\\">{{it.observacion}}</p><p ng-if=\\\"it.accion==\\'DERIVADO\\'\\\">Proveído: {{it.observacion}}</p></timeline-panel><timeline-panel ng-if=\\\"it.accion==\\'ANULADO\\'\\\"><timeline-heading><h3>Anulación</h3></timeline-heading><p><strong>Del documento: </strong><span class=\\\"ap-text-{{it.bg_color}} ap-cursor-pointer\\\" ng-click=verDocumento(it.id_documento)>{{it.cite}}.</span><br><strong>Mediante: </strong><span class=ap-cursor-pointer ng-click=verDocumento(it.id_documento)>{{it.observacion}}.</span><br>El cual fue solicitado por <strong>{{it.nombres}}</strong> y aprobado por <strong>{{it.aprobado.nombres}}</strong> el {{it.fecha_mos}} a las {{it.hora_mos}}</p></timeline-panel></timeline-event></timeline></md-dialog-content><md-dialog-actions><div flex></div><md-button class=md-raised ng-click=cerrar()><md-icon>check</md-icon><span>Cerrar</span></md-button></md-dialog-actions></md-dialog>\");\n$templateCache.put(\"app/factories/Documento/dialogPDF.html\",\"<md-dialog aria-label=\\\"Documento PDF\\\" class=\\\"formly-dialog formly-column-{{column}} dialog-pdf\\\" style=\\\"max-width: 800px; width: 100%\\\"><md-toolbar><div class=md-toolbar-tools><h2><md-icon>picture_as_pdf</md-icon>Vista previa</h2><span flex></span><md-button class=md-icon-button aria-label=\\\"Ver pdf\\\" ng-click=verPdf() ng-show=data.flag_html><md-tooltip>Ver PDF</md-tooltip><md-icon aria-label=\\\"Close dialog\\\">picture_as_pdf</md-icon></md-button><md-button class=md-icon-button aria-label=\\\"Ver html\\\" ng-click=verHtml() ng-show=!data.flag_html><md-tooltip>Ver html</md-tooltip><md-icon aria-label=\\\"Close dialog\\\">code</md-icon></md-button><md-button class=md-icon-button aria-label=Cerrar ng-click=cerrar()><md-tooltip>Cerrar</md-tooltip><md-icon aria-label=\\\"Close dialog\\\">close</md-icon></md-button></div></md-toolbar><div class=dialog-firmas><div ng-repeat=\\\"(indice, item) in data.firmas\\\" class=\\\"{{(item.firmo===true?\\'firmado\\':\\'sin-firma\\')}}\\\">{{item.firmante}}<md-tooltip>{{item.firmante}}</md-tooltip></div></div><md-dialog-content class=md-dialog-content><div ng-show=data.flag_html bind-html-compile=data.html></div><iframe class=iframe-pdf src={{data.pdf}} style=\\\"width:100%; height:600px; border: none\\\" ng-if=\\\"data.show_pdf && !data.flag_html\\\" allowfullscreen></iframe><div id=canvasContainer ng-show=!data.flag_html></div></md-dialog-content><md-dialog-actions><span flex></span><md-button class=md-raised ng-click=cerrar()><md-icon>cancel</md-icon>Cancelar</md-button></md-dialog-actions></md-dialog>\");\n$templateCache.put(\"app/factories/Loading/Loading.html\",\"<md-dialog class=\\\"{{data.tipo || \\'loader-info\\' }} loader-padre\\\"><md-dialog-content><center><div class=loader-contenendor><div class=loader></div></div><p></p><h2>{{data.mensaje}}</h2><p></p></center></md-dialog-content></md-dialog>\");\n$templateCache.put(\"app/factories/Messages/layout.toast.html\",\"<md-toast class=md-toast-{{type}}><div class=md-toast-title><md-icon class=md-toast-icon>{{icon}}</md-icon>{{title}}<md-button class=\\\"md-toast-close md-icon-button\\\" aria-label=Close><md-icon class=md-icon>close</md-icon></md-button></div><div class=md-toast-message ng-bind-html=message></div></md-toast>\");\n$templateCache.put(\"app/factories/Panel/defaultPanelTemplate.html\",\"<md-card><md-content>Usando panel factory, introduzca su template</md-content></md-card>\");\n$templateCache.put(\"app/modules/dashboard/main.html\",\"<div class=container>Mi dashboard</div>\");\n$templateCache.put(\"app/modules/firmador/modules.firmador.html\",\"<md-dialog aria-label=\\\"Firmar Digitalmente\\\" class=\\\"formly-dialog formly-column-{{column}}\\\" style=\\\"max-width: 700px; width: 100%\\\"><md-toolbar><div class=md-toolbar-tools><h2><md-icon>done_all</md-icon>Firmar documentos</h2><span flex></span></div></md-toolbar><md-dialog-content class=md-dialog-content><div ng-if=\\\"iniciado === false\\\">Iniciando...</div><div ng-if=\\\"iniciado === true\\\"><div ng-if=!demofi_ejecutandose class=\\\"alert alert-warning\\\" ng-if=\\\"data.certificado === null\\\"><i class=\\\"fa fa-warning\\\"></i> <span>Demofi no se está ejecutando en su equipo o no tiene agregado el certificado de seguridad en su navegador.</span><br><ul><li><span>Visite el siguiente enlace para su instalación y/o configuración. Presione <a target=_blank href=http://test.local.agetic.gob.bo/firmador/#>aquí</a>.<help message=helpMessage.demofi_no_instalado></help></span></li><li><span>Para verificar que el certificado de seguridad de Demofi se encuentra instalado. Presione <a href=# ng-click=verificarServidor()>aquí</a>.</span></li></ul></div></div><div layout=row ng-if=demofi_ejecutandose><div flex layout-align=\\\"center center\\\"><img class=img-certificado src=assets/images/certificate.png></div><div flex=66><br><div ng-if=demofi_ejecutandose><span style=\\\"font-weight: bold\\\">TOKEN: </span><span ng-if=\\\"tokens.length == 0\\\">Conecte su token </span><span ng-repeat=\\\"tokenName in tokens\\\"><span>{{tokenName}}</span></span></div><br><div flex-gt-xs><md-input-container><label>PIN:</label><md-icon>vpn_key</md-icon><input name=pin type=password class=form-control ng-model=formData.pin ng-disabled=!token_conectado required></md-input-container><md-button class=\\\"md-raised md-primary\\\" ng-click=autenticar() ng-disabled=\\\"!token_conectado || autenticado \\\"><md-icon>verified_user</md-icon>Autenticar</md-button></div><md-input-container><label>CERTIFICADO DIGITAL:</label><md-icon>content_copy</md-icon><md-select ng-model=formData.certificado_seleccionado required ng-disabled=!autenticado><md-option ng-repeat=\\\"(index, cer) in certificados\\\" value={{cer}} ng-select=\\\"index == 1 && formData.uniqueValue\\\">{{cer.nombreComunSubject}}</md-option></md-select></md-input-container></div></div><h4 ng-if=\\\"documentosParaFirmar.length > 0\\\">Se firmarán los siguientes documentos:</h4><h4 ng-if=\\\"documentosParaFirmar.length == 0\\\">No se seleccionaron documentos para firmar</h4><span class=\\\"chip {{yaFirmo ? doc.class : \\'enCola\\'}}\\\" ng-repeat=\\\"doc in documentosParaFirmar\\\">{{doc.nombre}}</span><h4 ng-if=\\\"yaFirmo ==true\\\">Se firmaron <strong>{{firmados}}</strong> documentos de <strong>{{documentosParaFirmar.length}}</strong>.</h4></md-dialog-content><md-dialog-actions><div flex></div><md-button class=\\\"md-raised md-secondary\\\" ng-click=cancelar()><md-icon>cancel</md-icon><span>{{yaFirmo==true? \\'Listo\\': \\'Cancelar\\'}}</span></md-button><md-button class=\\\"md-raised md-primary\\\" ng-click=firmar() ng-disabled=\\\"(documentosParaFirmar.length == 0) || !token_conectado|| !autenticado || yaFirmo\\\"><md-icon>check</md-icon><span>Firmar</span></md-button></md-dialog-actions></md-dialog>\");\n$templateCache.put(\"app/modules/verificacion/modules.verificar.html\",\"<div class=container><div class=logo-agetic><img src=assets/images/logo.png class=text-button alt=AGETIC ng-click=verificar.irInicio()></div><md-card><md-tabs class=\\\"md-accent verificar-contenedor {{(verificar.datosDocumento?\\'ampliar\\':\\'\\')}}\\\" md-align-tabs=top md-selected=verificar.data.selectedIndex><md-tab name=verificar><md-tab-label><strong>Verificar</strong></md-tab-label><md-tab-body><md-button class=\\\"md-fab md-mini md-icon-button md-primary\\\" aria-label=home ng-click=verificar.irInicio()><md-icon>home</md-icon><md-tooltip>Volver al inicio</md-tooltip></md-button><form name=form ng-submit=verificar.buscar()><div class=md-padding layout layout-xs=column layout-align=center><md-input-container><label>Cite</label><input ng-model=verificar.datos.cite required></md-input-container><md-input-container><label>Codigo</label><input ng-model=verificar.datos.codigo required></md-input-container><center><md-button type=submit class=\\\"md-raised md-primary\\\" ng-disabled=form.$invalid>Verificar documento</md-button></center></div></form><div ng-if=verificar.datosDocumento layout layout-sm=column layout-xs=column class=visor-verificado flex-direction-sm=column><md-card flex-sm=50 flex-gt-sm=100 flex-gt-md=30 layout=row layout-sm layout-xs=4 layout-align=\\\"center center\\\"><section style=\\\"width:100%; height:100%\\\" ng-if=verificar.datosDocumento><md-toolbar class=\\\"md-hue-2 titulo-seccion-verificar\\\" layout-align=\\\"center center\\\"><div layout=row class=md-headline><h2 class=md-toolbar-tools><span md-colors=\\\"background: primary\\\">Firmantes del documento</span></h2></div></md-toolbar><md-list layout-padding class=lista-firmantes><md-list-item class=md-2-line ng-repeat=\\\"usuario in verificar.datosDocumento.firmantes\\\"><md-icon class=\\\"md-48 md-primary\\\">fingerprint</md-icon><div class=md-list-item-text><h3>{{usuario.firmante}}</h3><!-- <p>{{usuario.fechaFirma || \\'Fecha y hora no disponible\\'}}</p> --></div><md-divider md-inset hide-sm></md-divider><md-divider hide-gt-sm></md-divider></md-list-item></md-list></section></md-card><md-card flex-sm=50 flex-gt-sm=100 flex-gt-md=70 layout layout-align=\\\"center center\\\" layout-xs=4><section style=\\\"width:100%; height:100%\\\"><md-toolbar class=\\\"md-hue-2 titulo-seccion-verificar\\\" layout-align=\\\"center center\\\"><div layout=row class=md-headline><h2 class=md-toolbar-tools><span class=titulo-card-verificar>Documento firmado digitalmente {{verificar.esMovil}}</span></h2></div></md-toolbar><iframe ng-if=\\\"verificar.pdf && (verificar.esMovil==false || !verificar.esMovil)\\\" class=iframe-verificado-pdf src={{verificar.pdf}} allowfullscreen></iframe><div ng-if=\\\"verificar.pdf && verificar.esMovil==true\\\" id=canvasContainerVerificado></div></section></md-card></div></md-tab-body></md-tab><!-- <md-tab name=\\\"historial\\\">\\n        <md-tab-label>\\n          Historial\\n        </md-tab-label>\\n        <md-tab-body>\\n          historial de mis verificaciones\\n        </md-tab-body>\\n      </md-tab> --></md-tabs></md-card></div>\");\n$templateCache.put(\"app/components/formlyComponents/archivo/archivo.html\",\"<div ng-if=!to.multiple><md-button class=\\\"md-raised md-warn\\\" ng-click=vm.elegirPdf($event) ng-if=!model[options.key]>{{to.label}}</md-button><input ng-show=false type=file ng-model=model[options.key] base-sixty-four-input accept=.pdf on-after-validate=vm.onLoadModel><div ng-if=model[options.key]>Documento: {{ model[options.key].filename}} Peso: {{ vm.redondear(model[options.key].filesize/1024, 2)}} kb<md-icon ng-click=vm.showPdf(model[options.key].url) class=ap-cursor-pointer ng-if=model[options.key].url>picture_as_pdf<md-tooltip>Ver pdf</md-tooltip></md-icon><md-icon class=\\\"ap-text-warning ap-cursor-pointer\\\" ng-click=vm.limpiarPdf() ng-if=!to.disabled>delete<md-tooltip>Eliminar</md-tooltip></md-icon><br></div></div><div ng-if=to.multiple><md-button class=\\\"md-raised md-warn\\\" ng-click=vm.elegirPdf($event)>{{to.label}}</md-button><input ng-show=false type=file ng-model=model[options.key] base-sixty-four-input accept=.pdf on-after-validate=vm.onLoadModel multiple><div ng-repeat=\\\"pdf in model[options.key]\\\">Documento: {{ pdf.filename}} Peso: {{ vm.redondear(pdf.filesize/1024, 2)}} kb<md-icon ng-click=vm.showPdf(pdf.url) class=ap-cursor-pointer ng-if=pdf.url>picture_as_pdf<md-tooltip>Ver pdf</md-tooltip></md-icon><md-icon class=\\\"ap-text-warning ap-cursor-pointer\\\" ng-click=vm.limpiarPdf($index) ng-if=!to.disabled>delete</md-icon></div></div>\");\n$templateCache.put(\"app/components/formlyComponents/cajachica/cajachica.html\",\"<ng-form name=cajaChicaForm><div layout layout-align=\\\"start center\\\"><md-button class=\\\"md-fab md-mini md-icon-button md-primary\\\" aria-label=add ng-click=vm.addRow(model[options.key].tipo,1) ng-if=\\\"!to.disabled && model[options.key].tipo!=\\'PAGADO\\'\\\"><md-icon>add</md-icon><md-tooltip>Agregar fila</md-tooltip></md-button><md-autocomplete ng-if=\\\"!to.disabled && model[options.key].tipo==\\'PAGADO\\'\\\" flex=40 md-no-cache=true md-selected-item=vm.buscar.doc_seleccionado md-search-text=vm.buscar.doc md-items=\\\"item in vm.buscarDocumentos(vm.buscar.doc)\\\" md-selected-item-change=vm.cargarPartidas(item.nombre) md-item-text=item.nombre md-min-length=0 placeholder=\\\"Seleccione un cite para añadir\\\"><md-item-template><span>{{item.nombre}}</span></md-item-template><md-not-found>Escriba un cite válido.</md-not-found></md-autocomplete><md-autocomplete ng-if=\\\"(model[options.key].tipo==\\'COMPROMETIDO\\' || model[options.key].tipo==\\'MODIFICADO\\') && !to.disabled\\\" flex=40 md-no-cache=true md-selected-item=vm.buscar.par_seleccionado md-search-text=vm.buscar.par md-items=\\\"item in vm.buscarPartidas(vm.buscar.par)\\\" md-selected-item-change=vm.addRow(model[options.key].tipo) md-item-text=item.num_des md-min-length=0 ng-disabled=to.disabled placeholder=\\\"Partida ...\\\"><md-item-template><span>{{item.num_des}}</span></md-item-template><md-not-found>No se encontraron coincidencias para \\\"{{vm.buscar.par}}\\\".</md-not-found></md-autocomplete><span flex></span><md-input-container md-no-float flex=25><input type=text placeholder=\\\"Buscar... \\\" ng-model=vm.filter ng-disabled=false></md-input-container><md-input-container ng-if=\\\"to.tipo==\\'GESTION\\'\\\" flex=10><md-select ng-model=model[options.key].tipo ng-change=\\\"model[options.key].rows=[]\\\"><md-option value=INICIAL>INICIAR PARTIDAS</md-option><md-option value=MODIFICADO>MODIFICAR PARTIDAS</md-option></md-select></md-input-container></div><div layout layout-align=\\\"start center\\\" class=alert ng-class=\\\"\\'alert-\\'+vm.alert.tipo\\\" ng-show=vm.alert.show><md-icon>{{vm.alert.icono}}</md-icon><div flex>{{vm.alert.mensaje}}</div><md-icon class=ap-cursor-pointer ng-click=\\\"vm.alert.show=false\\\" ng-if=\\\"vm.alert.time==0\\\">close</md-icon></div><table class=\\\"table table-hover table-striped\\\"><thead><tr><th ng-if=!to.disabled></th><th ng-if=\\\"to.tipo==\\'PAGADO\\'\\\">Cite</th><th>Partida</th><th>{{to.tipo==\\'COMPROMETIDO\\' || to.tipo==\\'PAGADO\\'? \\'Detalle\\':\\'Descripción\\'}}</th><th ng-if=\\\"to.tipo==\\'PAGADO\\'\\\">Comprometido</th><th>{{to.tipo==\\'PAGADO\\'? \\'Pagado\\':\\'Monto\\'}}</th></tr></thead><tbody><tr ng-repeat=\\\"row in model[options.key].rows | filter: vm.filter\\\"><td class=buttons ng-if=!to.disabled layout-gt-sm><span ng-if=\\\"to.tipo==\\'COMPROMETIDO\\'\\\"><md-checkbox ng-model=row.pago_multiple></md-checkbox><md-tooltip>Pagado múltiple</md-tooltip></span><md-button class=md-icon-button aria-label=getSaldo ng-click=vm.deleteRow($index)><md-icon>delete</md-icon><md-tooltip>Eliminar fila</md-tooltip></md-button><md-button class=md-icon-button aria-label=delete ng-click=vm.obtenerSaldo(row.id_comprometido) ng-if=\\\"to.tipo==\\'PAGADO\\' && row.pago_multiple\\\"><md-icon>attach_money</md-icon><md-tooltip>Obtener saldo actual</md-tooltip></md-button></td><td ng-if=\\\"to.tipo==\\'PAGADO\\'\\\"><md-input-container><textarea ng-model=row.cite.nombre disabled></textarea></md-input-container></td><td><md-input-container ng-if=\\\"model[options.key].tipo==\\'INICIAL\\'\\\"><textarea ng-model=row.partida></textarea></md-input-container><md-input-container ng-if=\\\"model[options.key].tipo!=\\'INICIAL\\'\\\"><textarea ng-model=row.partida.num_des disabled></textarea></md-input-container></td><td><md-input-container><textarea ng-model=row.descripcion ng-disabled=\\\"to.tipo==\\'PAGADO\\' || to.disabled\\\"></textarea></md-input-container></td><td ng-if=\\\"to.tipo==\\'PAGADO\\'\\\"><md-input-container><input type=text ng-model=row.comprometido disabled></md-input-container><!-- <div class=\\\"saldo\\\" ng-if=\\\"row.saldo\\\"> Saldo={{row.saldo}} </div> --></td><td><md-input-container><input type=text ng-model=row.monto ng-blur=vm.calcularTotal(row)></md-input-container></td></tr></tbody><tfoot><tr><td ng-if=!to.disabled></td><td ng-if=\\\"to.tipo==\\'PAGADO\\'\\\"></td><td></td><td ng-if=\\\"to.tipo==\\'PAGADO\\'\\\"></td><td>Total</td><td><md-input-container><input type=text ng-model=model[options.key].monto_total disabled></md-input-container></td></tr></tfoot></table></ng-form>\");\n$templateCache.put(\"app/components/formlyComponents/ccArchivo/ccArchivo.html\",\"<md-input-container class=md-block><textarea ng-model=model[options.key] style=\\\"font-size: 10px; line-height: 11px\\\" rows=1></textarea></md-input-container>\");\n$templateCache.put(\"app/components/formlyComponents/certificacionComprometido/certificacionComprometido.html\",\"<ng-form name=certificacionComprometido><div class=\\\"ap-text-warning ap-text-center\\\" ng-if=!to.showItem>Esta sección no se mostrará en el PDF hasta que se apruebe y se le asigne un \\\"CITE\\\".</div><div class=certificacion-comprometido><h3>{{to.label}}</h3><table class=\\\"table table-hover table-striped\\\"><thead><tr><th>Partida</th><th>Saldo inicial</th><th>Monto comprometido</th><th>Saldo final</th></tr></thead><tbody><tr ng-repeat=\\\"row in model[options.key].rows\\\"><td></td><td></td><td></td><td></td></tr></tbody></table></div></ng-form>\");\n$templateCache.put(\"app/components/formlyComponents/cite/cite.html\",\"<div layout ng-if=\\\"!to.tipoMembrete || to.tipoMembrete==\\'sin membrete\\'\\\"><div flex layout layout-align=\\\"start end\\\" ng-if=\\\"(model[options.key] && model[options.key][\\'cite\\'])\\\">{{ model[options.key][\\'cite\\'] }}</div><div class=placeholder flex layout layout-align=\\\"start end\\\" ng-if=\\\"!(model[options.key] && model[options.key][\\'cite\\'])\\\">{{ to.labelCite }}</div><div flex layout layout-align=\\\"end end\\\" ng-if=\\\"(model[options.key] && model[options.key][\\'fecha\\'])\\\">{{ model[options.key][\\'fecha\\'] }}</div><div class=placeholder flex layout layout-align=\\\"end end\\\" ng-if=\\\"!(model[options.key] && model[options.key][\\'fecha\\'])\\\">{{ to.labelFecha }}</div></div><div ng-if=\\\"to.tipoMembrete==\\'externo\\'\\\"><div flex ng-if=\\\"(model[options.key] && model[options.key][\\'fecha\\'])\\\">{{ model[options.key][\\'fecha\\'] }}</div><div class=placeholder flex ng-if=\\\"!(model[options.key] && model[options.key][\\'fecha\\'])\\\">{{ to.labelFecha }}</div><div flex ng-if=\\\"(model[options.key] && model[options.key][\\'cite\\'])\\\">{{ model[options.key][\\'cite\\'] }}</div><div class=placeholder flex ng-if=\\\"!(model[options.key] && model[options.key][\\'cite\\'])\\\">{{ to.labelCite }}</div></div><br>\");\n$templateCache.put(\"app/components/formlyComponents/datosGenerales/datosGenerales.html\",\"<ng-form name=datosGeneralesForm><div class=\\\"ap-text-warning ap-text-center\\\" ng-if=!to.showItem>Esta sección no se mostrará al imprimir en PDF.</div><div ng-class=\\\"{\\'border-div\\': !to.showItem}\\\"><div layout ng-if=to.show.para><div ng-class=\\\"\\'flex-\\'+to.labelw\\\" layout=column><div class=label flex layout layout-align=\\\"start start\\\"><span class=ap-cursor-pointer ng-click=\\\"vm.openSelect($event, \\'para\\')\\\"><span>PARA:</span></span></div><md-input-container class=input-search ng-show=vm.show_para><label>Usuarios</label><md-select ng-model=\\\"model[options.key][\\'para\\']\\\" name=select_para required md-on-close=\\\"vm.buscar_para=\\'\\'; vm.show_para=false;\\\" data-md-container-class=select-search><md-select-header class=select-header><input ng-model=vm.buscar_para placeholder=\\\"Buscar destinatario ..\\\" class=\\\"header-searchbox md-text\\\"></md-select-header><md-optgroup label=usuarios><md-option ng-value=u ng-repeat=\\\"u in vm.usuarios_jefes | filter:vm.buscar_para\\\">{{ u.nombres+\\' \\'+u.apellidos }}</md-option></md-optgroup></md-select></md-input-container><div flex></div></div><div flex><div>{{ model[options.key][\\'para\\'].nombres+\\' \\'+model[options.key][\\'para\\'].apellidos }}<md-icon class=ap-text-success ng-if=\\\"vm.usuarios_check[model[options.key][\\'para\\'].id_usuario]\\\">check<md-tooltip>Aprobó</md-tooltip></md-icon></div><span>{{ model[options.key][\\'para\\'].cargo }}</span><div class=ap-ng-msg ng-messages=datosGeneralesForm.select_para.$error ng-show=\\\"datosGeneralesForm.$submitted || datosGeneralesForm.select_para.$touched\\\"><div ng-message=required>Debe elegir una opción haciendo click en PARA:</div></div></div></div><div layout ng-if=to.show.via><div ng-class=\\\"\\'flex-\\'+to.labelw\\\" layout=column><div class=label flex layout layout-align=\\\"start start\\\"><span class=ap-cursor-pointer ng-click=\\\"vm.openSelect($event, \\'via\\')\\\"><span>VÍA:</span></span></div><md-input-container class=input-search ng-show=vm.show_via><label>Usuarios</label><md-select ng-model=\\\"model[options.key][\\'via\\']\\\" name=select_via md-on-close=\\\"vm.buscar_via=\\'\\'; vm.show_via=false;\\\" data-md-container-class=select-search multiple><md-select-header class=select-header><input ng-model=vm.buscar_via type=search placeholder=\\\"Buscar ..\\\" class=\\\"header-searchbox md-text\\\"></md-select-header><md-optgroup label=usuarios><md-option ng-value=u ng-repeat=\\\"u in vm.usuarios_jefes | filter:vm.buscar_via\\\">{{ u.nombres+\\' \\'+u.apellidos }}</md-option></md-optgroup></md-select></md-input-container><div flex></div></div><div flex><div ng-repeat=\\\"p in model[options.key][\\'via\\']\\\"><div>{{ p.nombres+\\' \\'+p.apellidos }}<md-icon class=ap-text-success ng-if=vm.usuarios_check[p.id_usuario]>check<md-tooltip>Aprobó</md-tooltip></md-icon></div><span>{{ p.cargo }}<md-icon class=ap-cursor-pointer ng-click=\\\"vm.moverUsuario($index,\\'down\\')\\\" ng-if=\\\" $index!=(model[options.key][\\'via\\'].length-1) && !to.disabled \\\">arrow_downward<md-tooltip>Bajar</md-tooltip></md-icon><md-icon class=ap-cursor-pointer ng-click=\\\"vm.moverUsuario($index,\\'up\\')\\\" ng-if=\\\" $index!=0 && !to.disabled \\\">arrow_upward<md-tooltip>Subir</md-tooltip></md-icon></span></div><div class=ap-ng-msg ng-messages=datosGeneralesForm.select_via.$error ng-show=\\\"datosGeneralesForm.$submitted || datosGeneralesForm.select_via.$touched\\\"><div ng-message=required>Debe elegir una opción haciendo click en VÍA:</div></div></div></div><div layout ng-if=to.show.de><div ng-class=\\\"\\'flex-\\'+to.labelw\\\" layout=column><div class=label flex layout layout-align=\\\"start start\\\"><span class=ap-cursor-pointer ng-click=\\\"vm.openSelect($event, \\'de\\')\\\"><span>DE:</span></span></div><md-input-container class=input-search ng-show=vm.show_de><label>Usuarios</label><md-select ng-model=\\\"model[options.key][\\'de\\']\\\" name=select_de md-on-close=\\\"vm.buscar_de=\\'\\'; vm.show_de=false;\\\" data-md-container-class=select-search multiple required><md-select-header class=select-header><input ng-model=vm.buscar_de type=search placeholder=\\\"Buscar ..\\\" class=\\\"header-searchbox md-text\\\"></md-select-header><md-optgroup label=usuarios><md-option ng-value=u ng-repeat=\\\"u in vm.usuarios | filter:vm.buscar_de\\\">{{ u.nombres+\\' \\'+u.apellidos }}</md-option></md-optgroup></md-select></md-input-container><div flex></div></div><div flex><div ng-repeat=\\\"p in model[options.key][\\'de\\']\\\"><div>{{ p.nombres+\\' \\'+p.apellidos }}</div><span>{{ p.cargo }}</span></div><div class=ap-ng-msg ng-messages=datosGeneralesForm.select_de.$error ng-show=\\\"datosGeneralesForm.$submitted || datosGeneralesForm.select_de.$touched\\\"><div ng-message=required>Debe elegir una opción haciendo click en De:</div></div></div></div><div layout ng-if=to.show.ref><div ng-class=\\\"\\'flex-\\'+to.labelw\\\" layout=column><div class=label flex layout layout-align=\\\"start end\\\"><span>{{to.labelRef}}</span></div><div flex></div></div><div flex><md-input-container style=\\\"width: 100%\\\"><input name=ref ng-model=\\\"model[options.key][\\'ref\\']\\\" required md-no-asterisk><div ng-messages=datosGeneralesForm.ref.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container></div></div></div><div class=separador></div></ng-form>\");\n$templateCache.put(\"app/components/formlyComponents/documentosAnular/documentosAnular.html\",\"<ng-form name=docsAnular><div layout><div ng-class=\\\"\\'flex-\\'+to.labelw\\\" layout=column><div class=label flex layout layout-align=\\\"start start\\\"><span class=ap-cursor-pointer ng-click=\\\"vm.openSelect($event, \\'doc\\')\\\">{{to.label}} </span>&nbsp;&nbsp;&nbsp;</div><md-input-container class=input-search ng-show=vm.show_doc><label>Documentos</label><md-select ng-model=model[options.key] name=select_anular md-on-close=vm.closeSelectDoc() data-md-container-class=select-search multiple required><md-select-header class=select-header><input ng-model=vm.buscar_doc placeholder=\\\"Buscar ...\\\" class=\\\"header-searchbox md-text\\\"></md-select-header><md-optgroup label=documentos><md-option ng-value=d ng-repeat=\\\"d in vm.documentos\\\">{{d.nombre}}</md-option></md-optgroup></md-select></md-input-container><div flex></div></div><div class=docs flex><div layout layout-wrap><div ng-repeat=\\\"d in model[options.key]\\\"><md-icon class=\\\"ap-cursor-pointer md-mini\\\" ng-click=vm.mostrarPdf(d.id_documento)>description</md-icon><span class=ap-cursor-pointer ng-click=vm.mostrarPdf(d.id_documento)>{{ d.nombre }} {{ ( $index != (model[options.key].length-1) )? \\', \\' : \\'\\' }}</span></div></div><div class=ap-ng-msg ng-messages=docsAnular.select_anular.$error ng-show=\\\"docsAnular.$submitted || docsAnular.select_anular.$touched\\\"><div ng-message=required>Debe escojer al menos un documento para anular</div></div></div></div></ng-form>\");\n$templateCache.put(\"app/components/formlyComponents/documentosRelacionados/documentosRelacionados.html\",\"<ng-form name=docsRelForm><div layout><div ng-class=\\\"\\'flex-\\'+to.labelw\\\" layout=column><div class=label flex layout layout-align=\\\"start start\\\"><span class=ap-cursor-pointer ng-click=\\\"vm.openSelect($event, \\'doc\\')\\\">{{to.label}} </span>&nbsp;&nbsp;&nbsp;</div><md-input-container class=input-search ng-show=vm.show_doc><label>Documentos</label><md-select ng-model=model[options.key] name=select_doc md-on-close=vm.closeSelectDoc() data-md-container-class=select-search multiple><md-select-header class=select-header><input ng-model=vm.buscar_doc placeholder=\\\"Buscar ...\\\" class=\\\"header-searchbox md-text\\\"></md-select-header><md-optgroup label=documentos><md-option ng-value=d ng-repeat=\\\"d in vm.documentos\\\">{{d.nombre}}</md-option></md-optgroup></md-select></md-input-container><div flex></div></div><div class=docs flex><div layout layout-wrap><div ng-repeat=\\\"d in model[options.key]\\\"><md-icon class=\\\"ap-cursor-pointer md-mini\\\" ng-click=vm.mostrarPdf(d.id_documento)>description</md-icon><span class=ap-cursor-pointer ng-click=vm.mostrarPdf(d.id_documento)>{{ d.nombre }} {{ ( $index != (model[options.key].length-1) )? \\', \\' : \\'\\' }}</span></div></div><div class=ap-ng-msg ng-messages=docsRelForm.select_doc.$error ng-show=\\\"docsRelForm.$submitted || docsRelForm.select_doc.$touched\\\"><div ng-message=required>Debe escojer una opción haciendo click en Documentos adjuntos:</div></div></div></div></ng-form>\");\n$templateCache.put(\"app/components/formlyComponents/editorTexto/editorTexto.html\",\"<ng-simditor content=model[options.key] disabled></ng-simditor>\");\n$templateCache.put(\"app/components/formlyComponents/encabezado/encabezado.html\",\"<ng-form name=cabeceraForm><div layout ng-if=to.show.para><div ng-class=\\\"\\'flex-\\'+to.labelw\\\" layout=column><div class=label flex layout layout-align=\\\"start start\\\"><span class=ap-cursor-pointer ng-click=\\\"vm.openSelect($event, \\'para\\')\\\"><span>PARA:</span></span></div><md-input-container class=input-search ng-show=vm.show_para><label>Usuarios</label><md-select ng-model=\\\"model[options.key][\\'para\\']\\\" name=select_para md-on-close=\\\"vm.buscar_para=\\'\\'; vm.show_para=false;\\\" data-md-container-class=select-search multiple><md-select-header class=select-header><input ng-model=vm.buscar_para placeholder=\\\"Buscar destinatario ..\\\" class=\\\"header-searchbox md-text\\\"></md-select-header><md-optgroup label=usuarios><md-option ng-value=u ng-repeat=\\\"u in vm.usuarios_jefes | filter:vm.buscar_para\\\">{{ u.nombres+\\' \\'+u.apellidos }}</md-option></md-optgroup></md-select></md-input-container><div flex></div></div><div flex><div ng-repeat=\\\"p in model[options.key][\\'para\\']\\\" ng-init=\\\"p.mostrar_cargo= (p.mostrar_cargo==undefined)? true : p.mostrar_cargo\\\"><div>{{ p.nombres+\\' \\'+p.apellidos }} <span ng-if=!to.disabled><md-checkbox class=cargo ng-model=p.mostrar_cargo aria-label=cargo></md-checkbox><md-tooltip>{{(p.mostrar_cargo)? \\'Ocultar \\': \\'Mostrar \\'}}cargo</md-tooltip></span><md-icon class=ap-cursor-pointer ng-click=\\\"vm.moverUsuario($index,\\'down\\',\\'para\\')\\\" ng-if=\\\" $index!=(model[options.key][\\'para\\'].length-1) && !to.disabled \\\">arrow_downward<md-tooltip>Bajar</md-tooltip></md-icon><md-icon class=ap-cursor-pointer ng-click=\\\"vm.moverUsuario($index,\\'up\\',\\'para\\')\\\" ng-if=\\\" $index!=0 && !to.disabled \\\">arrow_upward<md-tooltip>Subir</md-tooltip></md-icon></div><span ng-if=p.mostrar_cargo>{{ p.cargo }}</span></div></div></div><div layout ng-if=to.show.via><div ng-class=\\\"\\'flex-\\'+to.labelw\\\" layout=column><div class=label flex layout layout-align=\\\"start start\\\"><span class=ap-cursor-pointer ng-click=\\\"vm.openSelect($event, \\'via\\')\\\"><span>VÍA:</span></span></div><md-input-container class=input-search ng-show=vm.show_via><label>Usuarios</label><md-select ng-model=\\\"model[options.key][\\'via\\']\\\" name=select_via md-on-close=\\\"vm.buscar_via=\\'\\'; vm.show_via=false;\\\" data-md-container-class=select-search multiple><md-select-header class=select-header><input ng-model=vm.buscar_via type=search placeholder=\\\"Buscar ..\\\" class=\\\"header-searchbox md-text\\\"></md-select-header><md-optgroup label=usuarios><md-option ng-value=u ng-repeat=\\\"u in vm.usuarios_jefes | filter:vm.buscar_via\\\">{{ u.nombres+\\' \\'+u.apellidos }}</md-option></md-optgroup></md-select></md-input-container><div flex></div></div><div flex><div ng-repeat=\\\"p in model[options.key][\\'via\\']\\\" ng-init=\\\"p.mostrar_cargo= (p.mostrar_cargo==undefined)? true : p.mostrar_cargo\\\"><div>{{ p.nombres+\\' \\'+p.apellidos }} <span ng-if=!to.disabled><md-checkbox class=cargo ng-model=p.mostrar_cargo aria-label=cargo></md-checkbox><md-tooltip>{{(p.mostrar_cargo)? \\'Ocultar \\': \\'Mostrar \\'}}cargo</md-tooltip></span><md-icon class=ap-cursor-pointer ng-click=\\\"vm.moverUsuario($index,\\'down\\',\\'via\\')\\\" ng-if=\\\" $index!=(model[options.key][\\'via\\'].length-1) && !to.disabled \\\">arrow_downward<md-tooltip>Bajar</md-tooltip></md-icon><md-icon class=ap-cursor-pointer ng-click=\\\"vm.moverUsuario($index,\\'up\\',\\'via\\')\\\" ng-if=\\\" $index!=0 && !to.disabled \\\">arrow_upward<md-tooltip>Subir</md-tooltip></md-icon></div><span ng-if=p.mostrar_cargo>{{ p.cargo }}</span></div></div></div><div layout ng-if=to.show.de><div ng-class=\\\"\\'flex-\\'+to.labelw\\\" layout=column><div class=label flex layout layout-align=\\\"start start\\\"><span class=ap-cursor-pointer ng-click=\\\"vm.openSelect($event, \\'de\\')\\\"><span>DE:</span></span></div><md-input-container class=input-search ng-show=vm.show_de><label>Usuarios</label><md-select ng-model=\\\"model[options.key][\\'de\\']\\\" name=select_de md-on-close=\\\"vm.buscar_de=\\'\\'; vm.show_de=false;\\\" data-md-container-class=select-search multiple><md-select-header class=select-header><input ng-model=vm.buscar_de type=search placeholder=\\\"Buscar ..\\\" class=\\\"header-searchbox md-text\\\"></md-select-header><md-optgroup label=usuarios><md-option ng-value=u ng-repeat=\\\"u in vm.usuarios | filter:vm.buscar_de\\\">{{ u.nombres+\\' \\'+u.apellidos }}</md-option></md-optgroup></md-select></md-input-container><div flex></div></div><div flex><div ng-repeat=\\\"p in model[options.key][\\'de\\']\\\" ng-init=\\\"p.mostrar_cargo= (p.mostrar_cargo==undefined)? true : p.mostrar_cargo\\\"><div>{{ p.nombres+\\' \\'+p.apellidos }} <span ng-if=!to.disabled><md-checkbox class=cargo ng-model=p.mostrar_cargo aria-label=cargo></md-checkbox><md-tooltip>{{(p.mostrar_cargo)? \\'Ocultar \\': \\'Mostrar \\'}}cargo</md-tooltip></span><md-icon class=ap-cursor-pointer ng-click=\\\"vm.moverUsuario($index,\\'down\\',\\'de\\')\\\" ng-if=\\\" $index!=(model[options.key][\\'de\\'].length-1) && !to.disabled \\\">arrow_downward<md-tooltip>Bajar</md-tooltip></md-icon><md-icon class=ap-cursor-pointer ng-click=\\\"vm.moverUsuario($index,\\'up\\',\\'de\\')\\\" ng-if=\\\" $index!=0 && !to.disabled \\\">arrow_upward<md-tooltip>Subir</md-tooltip></md-icon></div><span ng-if=p.mostrar_cargo>{{ p.cargo }}</span></div></div></div><div layout ng-if=to.show.ref><div ng-class=\\\"\\'flex-\\'+to.labelw\\\" layout=column><div class=label flex layout layout-align=\\\"start end\\\"><span>{{to.labelRef}}</span></div><div flex></div></div><div flex><md-input-container style=\\\"width: 100%\\\"><input name=ref ng-model=\\\"model[options.key][\\'ref\\']\\\" required md-no-asterisk><div ng-messages=cabeceraForm.ref.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container></div></div><div class=separador></div></ng-form>\");\n$templateCache.put(\"app/components/formlyComponents/inputt/inputt.html\",\"<div layout layout-align=\\\"start start\\\"><div class=label ng-class=\\\"[to.alineacion||\\'ap-text-right\\',\\'flex-\\'+to.labelw]\\\" ng-if=\\\"to.labelw>0\\\">{{to.labelx}}</div><div class=label ng-class=\\\"[to.alineacion||\\'ap-text-right\\']\\\" ng-if=\\\"to.labelw==0\\\">{{to.labelx}}</div><md-input-container flex><textarea ng-model=model[options.key] ng-required=to.required md-no-asterisk ng-disabled=to.disabled> </textarea><div ng-messages=fc.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container></div>\");\n$templateCache.put(\"app/components/formlyComponents/listaContactos/listaContactos.html\",\"<ng-form name=listaContactosForm><div layout><div ng-class=\\\"\\'flex-\\'+to.labelw\\\" layout=column><div class=label flex layout layout-align=\\\"start start\\\"><span class=ap-cursor-pointer ng-click=\\\"vm.abrirSelector($event, \\'contacto\\')\\\">{{to.label}} </span>&nbsp;&nbsp;&nbsp;</div><md-input-container class=input-search ng-show=vm.mostrarContacto><label>Contactos</label><md-select ng-model=model[options.key].lista name=seleccionarContacto md-on-close=vm.cerrarSelector() data-md-container-class=select-search multiple required><md-select-header class=select-header><input ng-model=vm.buscarContacto placeholder=Buscar... class=\\\"header-searchbox md-text\\\"></md-select-header><md-optgroup label=contactos><md-option ng-value=d ng-repeat=\\\"d in vm.contactos\\\"><div>{{d.grado}} {{d.nombres}} {{d.apellidos}}</div><div ng-if=d.cargo>{{d.cargo}} - {{d.sigla}}</div><div ng-if=\\\"!d.cargo || d.cargo === undefined\\\">{{d.sigla}}</div></md-option></md-optgroup></md-select></md-input-container><div flex></div></div><div class=docs flex><div layout=column layout-wrap><div ng-repeat=\\\"d in model[options.key].lista\\\" class=\\\"{{$index%2==0? \\'par\\':\\'impar\\'}}\\\"><div>{{ d.nombres }} {{ d.apellidos }}</div><div>{{d.cargo}}</div><div>{{d.sigla}}</div></div></div><div class=ap-ng-msg ng-messages=listaContactosForm.seleccionarContacto.$error ng-show=\\\"listaContactosForm.$submitted || listaContactosForm.select_doc.$touched\\\"><div ng-message=required>Debe escojer al menos un contacto</div></div></div></div></ng-form>\");\n$templateCache.put(\"app/components/formlyComponents/listas/listas.html\",\"<div layout><div flex ng-if=\\\"to.className==\\'ap-text-right\\' || to.className==\\'ap-text-center\\'\\\"></div><div><span>{{to.label}}</span><ul ng-if=\\\"to.tipo==\\'ul\\'\\\"><li ng-repeat=\\\"i in to.options\\\">{{i}}</li></ul><ol ng-if=\\\"to.tipo==\\'ol\\'\\\"><li ng-repeat=\\\"i in to.options\\\">{{i}}</li></ol></div><div flex ng-if=\\\"to.className==\\'ap-text-center\\'\\\"></div></div>\");\n$templateCache.put(\"app/components/formlyComponents/texto/texto.html\",\"<h1 ng-if=\\\"to.tipo==\\'h1\\'\\\" ng-class=\\\"[to.className,{\\'no-margin-top\\': !to.mTop },{ \\'no-margin-bot\\': !to.mBot }]\\\">{{to.label}}</h1><h2 ng-if=\\\"to.tipo==\\'h2\\'\\\" ng-class=\\\"[to.className,{\\'no-margin-top\\': !to.mTop },{ \\'no-margin-bot\\': !to.mBot }]\\\">{{to.label}}</h2><h3 ng-if=\\\"to.tipo==\\'h3\\'\\\" ng-class=\\\"[to.className,{\\'no-margin-top\\': !to.mTop },{ \\'no-margin-bot\\': !to.mBot }]\\\">{{to.label}}</h3><h4 ng-if=\\\"to.tipo==\\'h4\\'\\\" ng-class=\\\"[to.className,{\\'no-margin-top\\': !to.mTop },{ \\'no-margin-bot\\': !to.mBot }]\\\">{{to.label}}</h4><h5 ng-if=\\\"to.tipo==\\'h5\\'\\\" ng-class=\\\"[to.className,{\\'no-margin-top\\': !to.mTop },{ \\'no-margin-bot\\': !to.mBot }]\\\">{{to.label}}</h5><h6 ng-if=\\\"to.tipo==\\'h6\\'\\\" ng-class=\\\"[to.className,{\\'no-margin-top\\': !to.mTop },{ \\'no-margin-bot\\': !to.mBot }]\\\">{{to.label}}</h6><p ng-if=\\\"to.tipo==\\'p\\'\\\" ng-class=\\\"[to.className,{\\'no-margin-top\\': !to.mTop },{ \\'no-margin-bot\\': !to.mBot }]\\\">{{to.label}}</p>\");\n$templateCache.put(\"app/components/formlyComponents/vacio/vacio.html\",\"<div flex ng-style=to.style style=\\\"outline: 1px dashed #ddd\\\"></div>\");\n$templateCache.put(\"app/modules/admin/login/login.dialog.html\",\"<md-dialog aria-label=Agregar/Editar ng-cloak class=login-dialog><form id=data-form name=form ng-submit=\\\"answer(\\'login\\')\\\"><md-toolbar><div class=md-toolbar-tools><h2><md-icon>lock_outline</md-icon>Iniciar su sesión</h2><span flex></span></div></md-toolbar><md-dialog-content><div class=md-dialog-content><p class=\\\"bg-warning-user alert\\\">Su sesión ha expirado, debe iniciarla de nuevo.</p><md-content layout-gt-sm=column layout-padding style=\\\"overflow: initial\\\"><md-input-container><label>Nombre de usuario</label><md-icon>person</md-icon><input ng-model=data.username required></md-input-container><md-input-container><label>Contraseña</label><md-icon>lock</md-icon><input ng-model=data.password type=password required></md-input-container><md-button type=submit class=\\\"md-raised md-primary\\\" ng-disabled=form.$invalid>Iniciar sesión</md-button></md-content></div></md-dialog-content></form></md-dialog>\");\n$templateCache.put(\"app/modules/admin/login/modules.admin.login.html\",\"<md-toolbar style=\\\"display: none\\\"><div class=logo><img src=assets/images/logo.png></div></md-toolbar><div class=container><div class=logo-agetic><img src=assets/images/logo.png></div><md-card class=\\\"login-panel md-whiteframe-3dp\\\"><md-card-content><br><div layout=row layout-align=\\\"center center\\\"><img class=icon-image src=assets/images/icon_doc.png></div><br><div layout=row layout-align=\\\"center center\\\" class=md-headline>Inicio de sesión con:</div><br><form name=form ng-submit=login.login()><md-input-container><label>Nombre de usuario</label><md-icon>person</md-icon><input ng-model=login.username required></md-input-container><md-input-container><label>Contraseña</label><md-icon>lock</md-icon><input ng-model=login.password type=password required></md-input-container><md-button type=submit class=\\\"md-raised md-primary\\\" ng-disabled=form.$invalid>Iniciar con LDAP</md-button></form><!-- <br>\\r\\n            <div class=\\\"recuperar-pwd\\\" >\\r\\n              <span ng-click=\\\"login.abrirDialog()\\\">Recuperar contraseña</span>\\r\\n            </div> --><br></md-card-content></md-card></div>\");\n$templateCache.put(\"app/modules/admin/login/recuperar.dialog.html\",\"<md-dialog aria-label=Recuperar ng-cloak class=\\\"formly-dialog formly-column-{{column}}\\\" style=\\\"max-width: 800px; width: 100%\\\"><form ng-submit=recuperar() name=recuperarForm><md-toolbar><div class=md-toolbar-tools><h2><md-icon>autorenew</md-icon>Recuperar contraseña</h2><span flex></span> <span flex></span><md-button class=md-icon-button aria-label=Cerrar ng-click=cerrar($event)><md-tooltip>Cerrar</md-tooltip><md-icon aria-label=\\\"Close dialog\\\">close</md-icon></md-button></div></md-toolbar><md-dialog-content class=md-dialog-content><div class=md-dialog-content><md-input-container class=md-block flex-gt-sm><label>Usuario</label><input name=usuario ng-model=usuario type=text required><div ng-messages=recuperarForm.usuario.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block flex-gt-sm><label>Correo electronico</label><input name=email ng-model=email type=email required><div ng-messages=recuperarForm.email.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block flex-gt-sm><label>Número de documento de identidad</label><input name=numero_documento ng-model=numero_documento type=text required><div ng-messages=recuperarForm.numero_documento.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container><div class=informacion-recuperar><strong>Usuario:</strong> <span>Es el usuario con el que fue registrado en el sistema.</span><br><strong>Correo electronico:</strong> <span>El mismo con el que fue registrado</span><br><strong>Numero de documento de indentidad:</strong> <span>Escriba solo el número</span></div></div></md-dialog-content><md-dialog-actions><span flex></span><md-button type=submit class=\\\"md-raised md-primary\\\" ng-disabled=recuperarForm.$invalid><md-icon>check</md-icon><span>Recuperar</span></md-button><md-button class=md-raised ng-click=cerrar()><md-icon>cancel</md-icon>Cancelar</md-button></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/modules/admin/profile/modules.admin.profile.html\",\"<div class=profile><div class=profile-user-bg><div class=\\\"profile-user-photo bg-{{profile.getColor()}}-user\\\"><img src=\\\"\\\" alt=\\\"\\\" hidden><!-- <i class=\\\"md-icon\\\">account_circle</i> --> {{profile.getInitial()}}</div><div class=profile-data><h2 class=profile-user-name>{{profile.getName()}}</h2><h3 class=profile-user-item>{{profile.getEmail()}}</h3><!-- <ul class=\\\"profile-user-data\\\">\\r\\n\t\t\t\t<li>\\r\\n\t\t\t\t\t<span class=\\\"profile-data-number\\\">10</span>\\r\\n\t\t\t\t\t<span class=\\\"profile-data-details\\\">Dato 1</span>\\r\\n\t\t\t\t</li>\\r\\n\t\t\t\t<li>\\r\\n\t\t\t\t\t<span class=\\\"profile-data-number\\\">20</span>\\r\\n\t\t\t\t\t<span class=\\\"profile-data-details\\\">Dato 2</span>\\r\\n\t\t\t\t</li>\\r\\n\t\t\t\t<li>\\r\\n\t\t\t\t\t<span class=\\\"profile-data-number\\\">30</span>\\r\\n\t\t\t\t\t<span class=\\\"profile-data-details\\\">Dato 3</span>\\r\\n\t\t\t\t</li>\\r\\n\t\t\t</ul> --></div></div><div class=profile-statistics layout=row><div class=\\\"profile-char text-left\\\" flex ng-show=!profile.swEditarCuenta><div layout><md-button class=md-raised ng-click=\\\"profile.abrirEditar(\\'editar_notificaciones\\')\\\"><md-icon>edit</md-icon>Editar notificaciones</md-button><!-- <md-button class=\\\"md-raised\\\" ng-click=\\\"profile.abrirEditar(\\'editar_cuenta\\')\\\">\\r\\n\t\t\t\t\t\t<md-icon>edit</md-icon>\\r\\n\t\t\t\t\t\tEditar cuenta\\r\\n\t\t\t\t</md-button>\\r\\n\t\t\t\t<md-button class=\\\"md-raised\\\" ng-click=\\\"profile.abrirEditar(\\'editar_contrasena\\')\\\">\\r\\n\t\t\t\t\t\t<md-icon>edit</md-icon>\\r\\n\t\t\t\t\t\tEditar Contraseña\\r\\n\t\t\t\t</md-button> --><div flex></div></div><p><strong>Nombre de usuario: </strong>{{profile.getData(\\'username\\')}}</p><p><strong>Número de documento: </strong>{{profile.getData(\\'doc\\')}}</p><p><strong>Nombre(s): </strong>{{profile.getData(\\'first_name\\')}}</p><p><strong>Apellido(s): </strong>{{profile.getData(\\'last_name\\')}}</p><p><strong>Correo electrónico: </strong>{{profile.getData(\\'email\\')}}</p><!-- <p><strong>Último login: </strong>{{profile.getData(\\'last_login\\')}}</p> --><p><strong>Activo desde: </strong>{{profile.getData(\\'date_joined\\')}}</p></div><div class=profile-char-edit flex ng-show=\\\"profile.swEditarCuenta==\\'editar_notificaciones\\'\\\"><p>Recibir notificaciones vía:</p><md-radio-group layout ng-model=profile.ca.canal><md-radio-button value=SMS>SMS</md-radio-button><md-radio-button value=CORREO>CORREO ELECTRÓNICO</md-radio-button><md-radio-button value=SMS_CORREO>SMS Y CORREO ELECTRÓNICO</md-radio-button></md-radio-group><br><md-input-container ng-if=\\\"profile.ca.canal==\\'SMS\\' || profile.ca.canal==\\'SMS_CORREO\\'\\\"><label>Nro. de celular</label><input ng-model=profile.ca.celular></md-input-container><md-input-container ng-if=\\\"profile.ca.canal==\\'CORREO\\' || profile.ca.canal==\\'SMS_CORREO\\'\\\"><label>Correo electrónico</label><input ng-model=profile.ca.email disabled></md-input-container><p>De documentos que me:</p><div layout><md-checkbox ng-model=profile.ca.enviado ng-if=profile.getEsJefe()>envien</md-checkbox><md-checkbox ng-model=profile.ca.observado disabled>observen</md-checkbox><md-checkbox ng-model=profile.ca.aprobado>aprueben</md-checkbox><md-checkbox ng-model=profile.ca.derivado>deriven</md-checkbox></div><div layout><!-- <div flex></div> --><md-button class=\\\"md-raised md-primary\\\" ng-click=profile.editarConfiguracion()><md-icon>check</md-icon>Guardar</md-button><md-button class=md-raised ng-click=profile.cancelarEditar()><md-icon>cancel</md-icon>Cancelar</md-button><div flex></div></div></div><div class=profile-char-edit flex ng-show=\\\"profile.swEditarCuenta==\\'editar_cuenta\\'\\\"><form name=cuentaForm><div layout-gt-sm=row layout-align=\\\"center center\\\"><h3>Modificar cuenta de usuario</h3></div><div layout-gt-sm=row><md-input-container flex-gt-sm><label>Número de documento</label><input name=numero_documento ng-model=profile.numero_documento required><div ng-messages=cuentaForm.numero_documento.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container flex-gt-sm><label>Nombre de usuario</label><input name=nombre_usuario ng-model=profile.nombre_usuario required><div ng-messages=cuentaForm.nombre_usuario.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container flex-gt-sm><label>Correo eletrónico</label><input name=email ng-model=profile.email required type=email><div ng-messages=cuentaForm.email.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container></div><div layout-gt-sm=row><md-input-container flex-gt-sm=50><label>Nombre(s)</label><input name=nombres ng-model=profile.nombres required><div ng-messages=cuentaForm.nombres.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container flex-gt-sm><label>Apellidos</label><input name=apellidos ng-model=profile.apellidos required><div ng-messages=cuentaForm.apellidos.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container></div><div layout><div flex></div><md-button class=\\\"md-raised md-primary\\\" ng-click=profile.editarCuenta()><md-icon>check</md-icon>Guardar</md-button><md-button class=md-raised ng-click=profile.cancelarEditar()><md-icon>cancel</md-icon>Cancelar</md-button></div></form></div><div class=profile-char-edit flex ng-show=\\\"profile.swEditarCuenta==\\'editar_contrasena\\'\\\"><form name=cuentaPassForm><div layout><div flex=0 flex-gt-sm=30></div><div flex-gt-sm=40 layout=column layout-align=\\\"center stretch\\\"><h3>Modificar contraseña de usuario</h3><md-input-container flex><label>Contraseña actual</label><input name=contrasena ng-model=profile.contrasena required type=password><div ng-messages=cuentaPassForm.contrasena.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container flex><label>Contraseña nueva</label><input name=contrasena_nueva ng-model=profile.contrasena_nueva required type=password><div ng-messages=cuentaPassForm.contrasena_nueva.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container flex><label>Confirmar contraseña nueva</label><input name=contrasena_confirm ng-model=profile.contrasena_confirm required type=password><div ng-messages=cuentaPassForm.contrasena_confirm.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container><div layout><div flex></div><md-button class=\\\"md-raised md-primary\\\" ng-click=profile.editarCuenta()><md-icon>check</md-icon>Guardar</md-button><md-button class=md-raised ng-click=profile.cancelarEditar()><md-icon>cancel</md-icon>Cancelar</md-button></div></div></div></form></div></div></div>\");\n$templateCache.put(\"app/modules/admin/usuarios/dialog.usuario.html\",\"<md-dialog ng-cloak class=\\\"formly-dialog formly-column-{{column}}\\\" style=\\\"max-width: 800px; width: 100%\\\"><form ng-submit=registrarUsuario() name=usuarioForm><md-toolbar><div class=md-toolbar-tools><h2><md-icon>business</md-icon>{{data.id_usuario == null ? \\\"Nuevo usuario\\\" : \\\"Editar usuario\\\"}}</h2><span flex></span> <span flex></span><md-button class=md-icon-button aria-label=Cerrar ng-click=cerrar($event)><md-tooltip>Cerrar</md-tooltip><md-icon>close</md-icon></md-button></div></md-toolbar><md-dialog-content class=md-dialog-content><div layout=row><md-card style=width:50%><md-card-header><md-card-header-text><span class=md-title>Datos personales</span></md-card-header-text></md-card-header><md-card-content><md-input-container class=md-block flex-gt-sm><label>Nro documento de identidad</label><input ng-model=data.numero_documento type=text required></md-input-container><md-input-container class=md-block flex-gt-sm><label>Nombre(s)</label><input ng-model=data.nombres type=text required></md-input-container><md-input-container class=md-block flex-gt-sm><label>Apellidos</label><input ng-model=data.apellidos type=text required></md-input-container><md-input-container class=md-block flex-gt-sm><label>Cargo</label><input ng-model=data.cargo type=text required></md-input-container><md-input-container class=md-block flex-gt-sm><label>Correo electronico</label><input ng-model=data.email type=email required></md-input-container></md-card-content></md-card><md-card style=width:50%><md-card-header><md-card-header-text><span class=md-title>Datos de usuario</span></md-card-header-text></md-card-header><md-card-content><md-input-container class=md-block flex-gt-sm><label>Nombre de usuario</label><input ng-model=data.usuario type=text required></md-input-container><md-input-container class=md-block flex-gt-sm><label>Estado</label><md-select ng-model=data.estado name=estado required><md-option ng-value=\\\"\\'ACTIVO\\'\\\">ACTIVO</md-option><md-option ng-value=\\\"\\'INACTIVO\\'\\\">INACTIVO</md-option></md-select><div ng-messages=usuarioForm.estado.$error ng-show=usuarioForm.estado.$dirty><div ng-message=required>Debe seleccionar un estado</div></div></md-input-container><md-input-container class=md-block flex-gt-sm><label>Unidad</label><md-select ng-model=data.fid_unidad name=unidad><md-option ng-value=u.id_unidad ng-repeat=\\\"u in data.unidades\\\">{{u.abreviacion+\\' - \\'+u.nombre}}</md-option></md-select></md-input-container><h3>Roles</h3><md-input-container class=md-block flex-gt-sm ng-show=rol ng-repeat=\\\"rol in data.roles\\\"><md-checkbox ng-model=rol.valor aria-label={{rol.nombre}}>{{rol.nombre}}</md-checkbox></md-input-container></md-card-content></md-card></div></md-dialog-content><md-dialog-actions layout=row><span flex></span><md-button type=submit class=\\\"md-raised md-primary\\\" ng-disabled=usuarioForm.$invalid><md-icon>check</md-icon>Guardar</md-button><md-button class=md-raised ng-click=cerrar()><md-icon>cancel</md-icon>Cancelar</md-button></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/modules/admin/usuarios/edit.dialog.html\",\"<md-dialog aria-label=Agregar/Editar ng-cloak><form id=data-form name=form ng-submit=\\\"answer(\\'save\\')\\\"><md-toolbar><div class=md-toolbar-tools><h2>{{title}}</h2><span flex></span><md-button class=md-icon-button ng-click=cancel()><md-icon aria-label=\\\"Close dialog\\\">close</md-icon></md-button></div></md-toolbar><md-dialog-content><div class=md-dialog-content><md-content layout-gt-sm=column layout-padding style=\\\"overflow: initial\\\"><md-input-container><label>Nombre de usuario</label><input ng-model=data.username required></md-input-container><md-input-container ng-if=add><label>Contraseñssssa</label><input ng-model=data.password type=password required></md-input-container><md-input-container><label>Email</label><input ng-model=data.email type=email></md-input-container><md-input-container class=md-block flex-gt-sm><label>Nombre(s)</label><input ng-model=data.first_name></md-input-container><md-input-container class=md-block flex-gt-sm><label>Apellido(s)</label><input ng-model=data.last_name></md-input-container><input ng-model=data.id type=hidden> <input ng-model=data.is_active type=hidden></md-content></div></md-dialog-content><md-dialog-actions layout=row><span flex></span><md-button class=md-raised ng-click=\\\"answer(\\'cancel\\')\\\"><md-icon>cancel</md-icon>Cancelar</md-button><md-button type=submit class=\\\"md-raised md-primary\\\" ng-disabled=form.$invalid><md-icon>check</md-icon>Guardar</md-button></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/modules/admin/usuarios/modules.admin.usuarios.html\",\"<div class=container><crud-table url=usuarios.url title-table=usuarios.title fields=usuarios.fields usuario=usuarios.usuario template=usuarios.template dialog-controller=usuarios.dialogController permission=usuarios.permission></crud-table></div>\");\n$templateCache.put(\"app/modules/admin/virtual/virtual.html\",\"<div class=container><md-card-content><div layout layout-xs=column layout-sm=column layout-align=\\\"center center\\\"><div class=contenedorVirtual ng-repeat=\\\"item in virtual.usuariosVirtuales\\\"><div class=boton-circular layout-xs=row><md-tooltip>{{item.nombres}}</md-tooltip><img class=icon-circular-imagen src=assets/images/certificate.png ng-click=virtual.seleccionar(item)></div><div><div><strong>{{item.nombres}}</strong></div><div>{{item.cargo}}</div></div></div></div></md-card-content></div>\");\n$templateCache.put(\"app/modules/plantillasFormly/aprobacion/dialogPDF.html\",\"<md-dialog aria-label=Agregar/Editar ng-cloak class=\\\"formly-dialog formly-column-{{column}} dialog-aprobacion\\\" style=\\\"max-width: 800px; width: 100%\\\"><form name=obsForm><md-toolbar><div class=md-toolbar-tools><h2><md-icon>picture_as_pdf</md-icon>Documento creado por {{data.nombres +\\' \\'+ data.apellidos}}</h2><span flex></span><md-button class=md-icon-button aria-label=\\\"Ver pdf\\\" ng-click=verPdf() ng-show=data.flag_html><md-tooltip>Ver PDF</md-tooltip><md-icon aria-label=\\\"Close dialog\\\">picture_as_pdf</md-icon></md-button><md-button class=md-icon-button aria-label=\\\"Ver html\\\" ng-click=verHtml() ng-show=!data.flag_html><md-tooltip>Ver html</md-tooltip><md-icon aria-label=\\\"Close dialog\\\">code</md-icon></md-button><md-button class=md-icon-button aria-label=Cerrar ng-click=cerrar()><md-tooltip>Cerrar</md-tooltip><md-icon aria-label=\\\"Close dialog\\\">close</md-icon></md-button></div></md-toolbar><md-dialog-content class=md-dialog-content><div layout=column ng-if=\\\"!data.es_para && !data.es_derivar\\\"><md-input-container style=\\\"width=100%\\\"><label>{{ (data.accion==\\'derivar\\')? \\'Proveído\\': \\'Observaciones\\'}}</label><textarea name=obs ng-model=data.observaciones md-maxlength=250 rows=2 required></textarea></md-input-container></div><div layout=column ng-if=\\\"!data.es_derivar && data.es_para\\\"><md-tabs md-dynamic-height md-border-bottom md-selected=4 md-stretch-tabs=always md-pagination-wrapper><md-tab label=\\\"Aprobar y crear\\\" md-on-select=\\\"data.accion=\\'crear\\'\\\"><md-content class=md-padding></md-content></md-tab><md-tab label=\\\"Aprobar y derivar\\\" md-on-select=\\\"data.accion=\\'derivar\\'\\\"><md-content layout=column class=md-padding><md-input-container><label>Usuario</label><md-select name=user ng-model=data._usuario_seleccionado required><md-option ng-repeat=\\\"us in data.usuarios\\\" ng-value=us.id_usuario>{{us.nombres+\\' \\'+us.apellidos}}<br>-{{us.cargo}}-</md-option></md-select></md-input-container><md-input-container style=\\\"width=100%\\\"><label>Proveído</label><textarea name=obs ng-model=data.observaciones md-maxlength=250 rows=2 required></textarea></md-input-container></md-content></md-tab><md-tab label=\\\"Aprobar y cerrar\\\" md-on-select=\\\"data.accion=\\'cerrar\\'\\\"><md-content class=md-padding></md-content></md-tab><md-tab label=Observar md-on-select=\\\"data.accion=\\'observar\\'\\\"><md-content layout=column class=md-padding><md-input-container style=\\\"width=100%\\\"><label>Observaciones</label><textarea name=obs ng-model=data.observaciones md-maxlength=250 rows=2 required></textarea></md-input-container></md-content></md-tab></md-tabs></div><div layout=column ng-if=data.es_derivar><div>Proveído de {{ data.usuario_proveido}}<br>{{data.dc.observaciones}}<div><br></div></div><md-input-container><label>Usuario</label><md-select name=user ng-model=data._usuario_seleccionado required><md-option ng-repeat=\\\"us in data.usuarios\\\" ng-value=us.id_usuario>{{us.nombres+\\' \\'+us.apellidos}}<br>-{{us.cargo}}-</md-option></md-select></md-input-container><md-input-container style=\\\"width=100%\\\"><label>Proveído</label><textarea name=obs ng-model=data.observaciones md-maxlength=250 rows=2 required></textarea></md-input-container></div><div ng-if=data.sw_es_respuesta><div class=\\\"ap-text-center ap-text-warning\\\">Referencias:</div><div class=\\\"ap-text-center ap-text-warning\\\" ng-repeat=\\\"dg in data.docs_grupo\\\" ng-if=\\\"dg.id_documento!=data.dc.id_documento\\\">* {{dg.nombre_plantilla}} -- <span class=ap-cursor-pointer ng-click=verDocumento(dg.id_documento)>{{dg.nombre}}</span></div></div><div ng-show=data.flag_html bind-html-compile=data.html></div><iframe class=iframe-pdf src={{data.pdf}} style=\\\"width:100%; height:600px; border: none\\\" ng-if=\\\"data.show_pdf && !data.flag_html\\\" allowfullscreen></iframe><div id=canvasContainer ng-show=\\\"!data.show_pdf && !data.flag_html\\\"></div></md-dialog-content><md-dialog-actions><span flex></span><div ng-if=data.es_derivar><md-button class=\\\"ap md-raised bt-bg-warning\\\" ng-click=derivar() ng-disabled=\\\"obsForm.user.$invalid || obsForm.obs.$invalid\\\"><md-icon>check</md-icon>Derivar</md-button><md-button class=\\\"ap md-raised bt-bg-success\\\" ng-click=openSelect($event)><md-icon>error</md-icon>Crear documento</md-button><md-input-container style=\\\"transform: scale(0.01)\\\" ng-show=data.show_select><md-select name=plantilla ng-model=data._plantilla_seleccionada required ng-change=crear() md-on-close=\\\"data.show_select=false;\\\"><md-option ng-repeat=\\\"pla in data.plantillas_disponibles\\\" ng-value=pla>{{pla.nombre}} ({{pla.abreviacion}})</md-option></md-select></md-input-container></div><div ng-if=!data.es_derivar><md-button class=\\\"ap md-raised\\\" ng-class=\\\"{\\'bt-bg-success\\': data.es_para}\\\" ng-click=openSelect($event) ng-if=\\\"data.es_para && data.accion==\\'crear\\'\\\"><md-icon>error</md-icon>Crear documento</md-button><md-input-container style=\\\"transform: scale(0.01)\\\" ng-show=data.show_select><md-select name=plantilla ng-model=data._plantilla_seleccionada required ng-change=crear(true) md-on-close=\\\"data.show_select=false;\\\"><md-option ng-repeat=\\\"pla in data.plantillas_disponibles\\\" ng-value=pla>{{pla.nombre}} ({{pla.abreviacion}})</md-option></md-select></md-input-container><md-button class=\\\"ap md-raised\\\" ng-class=\\\"{\\'bt-bg-warning\\': data.es_para}\\\" ng-click=\\\"aprobar(\\'derivar\\')\\\" ng-disabled=obsForm.user.$invalid ng-if=\\\"data.es_para && data.accion==\\'derivar\\'\\\"><md-icon>check</md-icon>Derivar</md-button><md-button class=\\\"ap md-raised\\\" ng-class=\\\"{\\'bt-bg-info\\': data.es_para, \\'bt-bg-success\\': !data.es_para}\\\" ng-click=\\\"aprobar(\\'aprobar\\')\\\" ng-if=\\\"!data.es_para || data.accion==\\'cerrar\\'\\\"><md-icon>check</md-icon>Aprobar</md-button><md-button class=\\\"ap md-raised bt-bg-danger\\\" ng-click=observar() ng-disabled=obsForm.obs.$invalid ng-if=\\\"!data.es_para || data.accion==\\'observar\\'\\\"><md-icon>error</md-icon>Observar</md-button></div><md-button class=md-raised ng-click=cerrar()><md-icon>cancel</md-icon>Cancelar</md-button></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/modules/plantillasFormly/aprobacion/modules.plantillasFormly.aprobacion.html\",\"<div class=container><crud-table url=aprobacion.url title-table=aprobacion.titulo fields=aprobacion.fields usuario=aprobacion.usuario permission=aprobacion.permission buttons=aprobacion.buttons query-extra=aprobacion.queryExtra only-fields=true estado-checks=true estado-opciones=aprobacion.estadoOpciones></crud-table><br><br></div>\");\n$templateCache.put(\"app/modules/plantillasFormly/contactos/dialog.contactos.html\",\"<md-dialog ng-cloak class=\\\"formly-dialog formly-column-{{column}}\\\" style=\\\"max-width: 800px; width: 100%\\\"><form ng-submit=registrarContacto() name=contactoForm novalidate><md-toolbar><div class=md-toolbar-tools><h2><md-icon>business</md-icon>{{titulo}}</h2><span flex></span><md-button class=md-icon-button aria-label=Cerrar ng-click=cerrar()><md-tooltip>Cerrar</md-tooltip><md-icon>close</md-icon></md-button></div></md-toolbar><md-dialog-content><div layout><md-card flex><md-card-header><md-card-header-text><span class=md-title>Datos del contacto</span></md-card-header-text></md-card-header><md-card-content><md-input-container class=md-block><label>Grado</label><input ng-model=data.grado type=text><div ng-messages=contactoForm.grado.$error ng-show=contactoForm.grado.$dirty><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block><label>Nombres</label><input ng-model=data.nombres type=text required><div ng-messages=contactoForm.nombres.$error ng-show=contactoForm.nombres.$dirty><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block><label>Apellidos</label><input ng-model=data.apellidos type=text required><div ng-messages=contactoForm.apellidos.$error ng-show=contactoForm.apellidos.$dirty><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block><label>Cargo</label><input ng-model=data.cargo type=text><div ng-messages=contactoForm.cargo.$error ng-show=contactoForm.cargo.$dirty><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block><label>Teléfono/Celular</label><input ng-model=data.telefono type=text><div ng-messages=contactoForm.telefono.$error ng-show=contactoForm.telefono.$dirty><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block><label for=estado>Estado</label><md-select name=estado ng-model=data.estado placeholder=Estado required><md-option ng-value=item.id ng-repeat=\\\"item in estados\\\">{{ item.name }}</md-option></md-select><div ng-messages=contactoForm.estado.$error ng-show=contactoForm.estado.$dirty><div ng-message=required>Debe seleccionar una opción</div></div></md-input-container></md-card-content></md-card><md-card flex><md-card-header><md-card-header-text><span class=md-title>Datos de la entidad</span></md-card-header-text></md-card-header><md-card-content><md-input-container class=md-block><label>Entidad</label><input ng-model=data.entidad type=text required><div ng-messages=contactoForm.entidad.$error ng-show=contactoForm.entidad.$dirty><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block><label for=tipo_entidad>Tipo de entidad</label><md-select name=tipo_entidad ng-model=data.tipo_entidad placeholder=\\\"Tipo de entidad\\\" required><md-option ng-value=item.tipo_entidad ng-repeat=\\\"item in tiposEntidad\\\" ng-click=habilitarOtro(item)>{{ item.tipo_entidad }}</md-option></md-select><div ng-messages=contactoForm.tipo_entidad.$error ng-show=contactoForm.tipo_entidad.$dirty><div ng-message=required>Debe seleccionar una opción</div></div></md-input-container><md-input-container class=md-block ng-if=\\\"otroEditar==true\\\"><label>Tipo de entidad</label><input ng-model=data.otro_tipo type=text required><div ng-messages=contactoForm.otro_tipo.$error ng-show=contactoForm.otro_tipo.$dirty><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block><label>Sigla</label><input ng-model=data.sigla type=text><div ng-messages=contactoForm.sigla.$error ng-show=contactoForm.sigla.$dirty><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block><label>Dirección</label><input ng-model=data.direccion type=text required><div ng-messages=contactoForm.direccion.$error ng-show=contactoForm.direccion.$dirty><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block><label for=departamento>Departamento</label><md-select name=departamento ng-model=data.departamento placeholder=Departamento required><md-option ng-value=item.id ng-repeat=\\\"item in departamentos\\\">{{ item.name }}</md-option></md-select><div ng-messages=contactoForm.departamento.$error ng-show=contactoForm.departamento.$dirty><div ng-message=required>Debe seleccionar una opción</div></div></md-input-container></md-card-content></md-card></div></md-dialog-content><md-dialog-actions layout layout-padding><span flex></span><md-button type=submit class=\\\"md-raised md-primary\\\" ng-disabled=contactoForm.$invalid><md-icon>check</md-icon>Guardar</md-button><md-button type=button class=md-raised ng-click=cerrar()><md-icon>cancel</md-icon>Cancelar</md-button></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/modules/plantillasFormly/contactos/modules.plantillasFormly.contactos.html\",\"<div class=container><crud-table url=contactos.url title-table=contactos.titulo fields=contactos.fields usuario=contactos.usuario dialog-controller=contactos.dialogController permission=contactos.permission order=contactos.order template=contactos.template></crud-table></div>\");\n$templateCache.put(\"app/modules/plantillasFormly/documentos/documento.dialog.html\",\"<md-dialog aria-label=\\\"Elegir plantilla\\\" class=\\\"formly-dialog formly-column-{{column}}\\\" style=\\\"max-width: 600px; width: 100%\\\"><md-toolbar><div class=md-toolbar-tools><h2><md-icon>dashboard</md-icon>Elegir documento</h2><span flex></span></div></md-toolbar><p style=margin-left:10px>Seleccione un documento y haga click en aceptar:</p><md-input-container style=\\\"margin-left:10px !important\\\"><input ng-model=p.buscarPlantilla></md-input-container><md-dialog-content class=md-dialog-content><div flex layout><div flex></div><md-radio-group ng-model=plantilla_seleccionada><md-radio-button ng-repeat=\\\"p in plantillas_disponibles| filter:p.buscarPlantilla\\\" ng-value=p.id_plantilla_formly class=md-primary>{{p.nombre}} ({{p.abreviacion}})</md-radio-button></md-radio-group><div flex></div></div></md-dialog-content><md-dialog-actions><div flex></div><md-button class=\\\"md-raised md-primary\\\" ng-click=elegir()><md-icon>check</md-icon><span>Aceptar</span></md-button></md-dialog-actions></md-dialog>\");\n$templateCache.put(\"app/modules/plantillasFormly/documentos/modules.plantillasFormly.documentos.html\",\"<div class=container><crud-table url=documentos.url title-table=documentos.titulo fields=documentos.fields usuario=documentos.usuario permission=documentos.permission buttons=documentos.buttons button-agregar=documentos.buttonAgregar only-fields=true estado-checks=true estado-opciones=documentos.estadoOpciones></crud-table><br><br></div>\");\n$templateCache.put(\"app/modules/plantillasFormly/enCurso/modules.plantillasFormly.enCurso.html\",\"<div class=container><crud-table url=enCurso.url title-table=enCurso.titulo fields=enCurso.fields usuario=enCurso.usuario permission=enCurso.permission buttons=enCurso.buttons only-fields=true></crud-table><br><br></div>\");\n$templateCache.put(\"app/modules/plantillasFormly/firmar/modules.plantillasFormly.firmar.html\",\"<div class=container><div style=\\\"color:red; font-style:italic\\\">NOTA(S):<ol><li>Se debe priorizar el uso del firmador FIRMATIC.</li><li>La opción de firma con DEMOFI estará activo sólo de manera temporal y para casos especiales, mientras se realiza la transición al nuevo firmador FIRMATIC.</li></ol></div><crud-table url=firmar.url title-table=firmar.titulo fields=firmar.fields usuario=firmar.usuario permission=firmar.permission buttons=firmar.buttons only-fields=true items=firmar.items seleccionados=firmar.obtenerSeleccionados habilitar-seleccion=firmar.habilitarSeleccion></crud-table><md-button class=\\\"md-raised md-primary\\\" ng-click=firmar.firmarDocumentos() ng-disabled=!firmar.habilitarBotonFirma><md-icon>done_all</md-icon><md-tooltip md-direction=right>Firmar Digitalmente</md-tooltip>Firmar con DEMOFI</md-button><md-button class=\\\"md-raised md-primary\\\" ng-click=firmar.firmarDocumentos2() ng-disabled=!firmar.habilitarBotonFirma><md-icon>done_all</md-icon><md-tooltip md-direction=right>Firmar Digitalmente</md-tooltip>Firmar con FIRMATIC</md-button><br></div>\");\n$templateCache.put(\"app/modules/plantillasFormly/impresion/modules.plantillasFormly.impresion.html\",\"<div class=container><crud-table url=impresion.url title-table=impresion.titulo fields=impresion.fields usuario=impresion.usuario permission=impresion.permission buttons=impresion.buttons button-agregar=impresion.multiple query-extra=impresion.queryExtra estado-sw=true only-fields=true search-pro=true></crud-table><br><br></div>\");\n$templateCache.put(\"app/modules/plantillasFormly/impresion/multiple.dialog.html\",\"<md-dialog aria-label=\\\"Impresion multiple\\\" class=\\\"formly-dialog formly-column-{{column}}\\\" style=\\\"max-width: 600px; width: 100%\\\"><md-toolbar><div class=md-toolbar-tools><h2><md-icon>print</md-icon>Impresion multiple</h2><span flex></span><md-button class=\\\"md-icon-button md-toast-button-close\\\" ng-click=cancel()><md-icon aria-label=\\\"Close dialog\\\">close</md-icon></md-button></div></md-toolbar><md-dialog-content class=md-dialog-content><form name=multipleForm ng-submit=obtenerDocumento()><div flex layout><md-input-container class=md-block flex-gt-sm><label>Escríba el cite de un documento multiple</label><input ng-model=cite type=text required></md-input-container><md-button class=\\\"md-fab md-mini md-primary\\\" type=submit ng-disabled=multipleForm.$invalid><md-icon>search</md-icon></md-button><!-- <md-button class=\\\"md-fab md-mini md-primary\\\" ng-click=\\\"obtenerDocumento()\\\">\\n          <md-icon>search</md-icon>\\n        </md-button> --></div></form><iframe class=iframe-pdf src={{documentoAImprimir.url}} style=\\\"width:100%; height:600px; border: none\\\" ng-if=documentoAImprimir.url allowfullscreen></iframe></md-dialog-content></md-dialog>\");\n$templateCache.put(\"app/modules/plantillasFormly/monitoreo/dialogPresupuestoPDF.html\",\"<md-dialog aria-label=\\\"Documento PDF\\\" class=\\\"formly-dialog formly-column-{{column}} dialog-pdf\\\" style=\\\"max-width: 800px; width: 100%\\\"><md-toolbar><div class=md-toolbar-tools><h2><md-icon>picture_as_pdf</md-icon>Vista previa</h2><span flex></span><md-button class=md-icon-button aria-label=\\\"Ver pdf\\\" ng-click=verPdf() ng-show=data.flag_html><md-tooltip>Ver PDF</md-tooltip><md-icon aria-label=\\\"Close dialog\\\">picture_as_pdf</md-icon></md-button><md-button class=md-icon-button aria-label=\\\"Ver html\\\" ng-click=verHtml() ng-show=!data.flag_html><md-tooltip>Ver html</md-tooltip><md-icon aria-label=\\\"Close dialog\\\">code</md-icon></md-button><md-button class=md-icon-button aria-label=Cerrar ng-click=cerrar()><md-tooltip>Cerrar</md-tooltip><md-icon aria-label=\\\"Close dialog\\\">close</md-icon></md-button></div></md-toolbar><md-dialog-content class=md-dialog-content><iframe class=iframe-pdf src={{data.pdf}} style=\\\"width:100%; height:600px; border: none\\\" ng-if=\\\"data.show_pdf && !data.flag_html\\\" allowfullscreen></iframe><div id=canvasContainer ng-show=\\\"!data.show_pdf && !data.flag_html\\\"></div><div ng-if=false><p>Tu navegador web no puede visualizar archivos PDF. Pero tu puedes hacer <a ng-href={{data.pdf}} target=_blank>click aqui para descargar el PDF</a></p></div></md-dialog-content><md-dialog-actions><span flex></span><md-button class=md-raised ng-click=cerrar()><md-icon>cancel</md-icon>Cancelar</md-button></md-dialog-actions></md-dialog>\");\n$templateCache.put(\"app/modules/plantillasFormly/monitoreo/modules.plantillasFormly.monitoreo.html\",\"<div class=\\\"container container-monitoreo\\\"><md-card><md-toolbar class=md-table-toolbar><div class=md-toolbar-tools><md-icon>grid_on</md-icon><span>Monitoreo</span><div flex></div><md-button class=md-icon-button ng-click=monitoreo.refrescarChart()><md-tooltip>Actualizar</md-tooltip><md-icon>refresh</md-icon></md-button><md-button class=\\\"md-icon-button btn-collapsed\\\"><md-tooltip>Ocultar/Ver</md-tooltip><md-icon>keyboard_arrow_down</md-icon></md-button></div></md-toolbar><md-card-content><div layout=column layout-gt-sm style=\\\"margin-top: 15px\\\"><div><md-input-container><label>Gráfico</label><md-select ng-model=monitoreo.grafico placeholder=\\\"Selecciona que grafico ver\\\" ng-change=monitoreo.reiniciarChart()><md-option ng-value=g ng-repeat=\\\"g in monitoreo.graficos\\\">{{g.nombre}}</md-option></md-select></md-input-container><md-input-container ng-if=\\\"monitoreo.grafico.cod==4 || monitoreo.grafico.cod==7 || monitoreo.grafico.cod==8\\\"><label>Gestión</label><md-select ng-model=monitoreo.gestion ng-change=monitoreo.refrescarChart()><md-option ng-value=$index ng-repeat=\\\"a in monitoreo.gestiones\\\">{{a.gestion}}</md-option></md-select></md-input-container><md-input-container ng-if=\\\"[4, 5, 6, 7, 8, 9].indexOf(monitoreo.grafico.cod) == -1\\\"><label>Año</label><md-select ng-model=monitoreo.anio ng-change=monitoreo.refrescarChart()><md-option ng-value=$index ng-repeat=\\\"a in monitoreo.anios\\\">{{a}}</md-option></md-select></md-input-container><md-input-container ng-if=\\\"monitoreo.grafico.cod === 9\\\"><label>Año</label><md-select ng-model=monitoreo.anioContable ng-change=monitoreo.refrescarChart()><md-option ng-value=$index ng-repeat=\\\"a in monitoreo.aniosContables\\\">{{a}}</md-option></md-select></md-input-container><md-input-container ng-if=\\\"monitoreo.grafico.cod!==4 && monitoreo.grafico.cod!=5 && monitoreo.grafico.cod!=6 && monitoreo.grafico.cod!=7 && monitoreo.grafico.cod!=8 && monitoreo.grafico.cod!=9\\\"><label>Mes</label><md-select ng-model=monitoreo.mes ng-change=monitoreo.refrescarChart()><md-option ng-value=$index ng-repeat=\\\"m in monitoreo.meses\\\">{{m}}</md-option></md-select></md-input-container><md-input-container ng-if=\\\"monitoreo.grafico.cod===9\\\"><label>Tipo documento</label><md-select ng-model=monitoreo.tipoInformePago ng-change=monitoreo.refrescarChart()><md-option ng-value=$index ng-repeat=\\\"m in monitoreo.docsContables\\\">{{m}}</md-option></md-select></md-input-container><md-input-container class=input-search ng-if=\\\"monitoreo.grafico.cod==3\\\"><label>Usuarios</label><md-select ng-model=monitoreo.usuario ng-change=monitoreo.refrescarChart()><md-option ng-value=u.id_usuario ng-repeat=\\\"u in monitoreo.usuarios | filter:monitoreo.usuario_buscar\\\">{{u.usuario}}</md-option></md-select></md-input-container><md-input-container class=input-search ng-if=\\\"monitoreo.grafico.cod==3\\\"><label>Nombres</label><md-select ng-model=monitoreo.usuario ng-change=monitoreo.refrescarChart()><md-option ng-value=u.id_usuario ng-repeat=\\\"u in monitoreo.usuarios | filter:monitoreo.usuario_buscar\\\">{{u.nombres}} {{u.apellidos}}</md-option></md-select></md-input-container><div class=paginador ng-if=\\\"[0, 4, 5, 6, 7, 8, 9].indexOf(monitoreo.grafico.cod) == -1 \\\"><!-- <div class=\\\"paginador\\\" ng-if=\\\"monitoreo.grafico.cod!=0 && monitoreo.grafico.cod!=4 && monitoreo.grafico.cod!=5 && monitoreo.grafico.cod!=6 && monitoreo.grafico.cod!=7 && monitoreo.grafico.cod!=8\\\"> --><md-button ng-click=\\\"monitoreo.paginar(\\'aa\\')\\\" ng-disabled=\\\"monitoreo.page<=1\\\"><md-icon>first_page</md-icon></md-button><md-button ng-click=\\\"monitoreo.paginar(\\'a\\')\\\" ng-disabled=\\\"monitoreo.page<=1\\\"><md-icon>chevron_left</md-icon></md-button><md-input-container><label>Intervalo</label><input ng-model=monitoreo.page_text size=7 disabled></md-input-container><md-button ng-click=\\\"monitoreo.paginar(\\'s\\')\\\" ng-disabled=\\\"monitoreo.page*20>=monitoreo.page_tot\\\"><md-icon>chevron_right</md-icon></md-button><md-button ng-click=\\\"monitoreo.paginar(\\'ss\\')\\\" ng-disabled=\\\"monitoreo.page*20>=monitoreo.page_tot\\\"><md-icon>last_page</md-icon></md-button></div><md-input-container ng-if=\\\"monitoreo.grafico.cod==5\\\"><label>Fecha Inicial</label><md-datepicker ng-model=monitoreo.fechaInicial md-placeholder=\\\"Fecha Inicial\\\" ng-change=monitoreo.reiniciarChart()></md-datepicker></md-input-container><md-input-container ng-if=\\\"monitoreo.grafico.cod==5\\\"><label>Fecha Final</label><md-datepicker ng-model=monitoreo.fechaFinal md-placeholder=\\\"Fecha Final\\\" ng-change=monitoreo.reiniciarChart()></md-datepicker></md-input-container></div><div flex></div><div style=float:right ng-if=\\\"monitoreo.grafico.cod==4 \\\"><md-button class=\\\"md-fab md-primary\\\" ng-csv=monitoreo.filasPresupuesto() field-separator=| csv-header=monitoreo.cabeceraPresupuesto() filename=Presupuesto.csv><md-icon>library_books</md-icon><md-tooltip md-direction=left>Exportar a CSV</md-tooltip></md-button><md-button class=\\\"md-fab md-primary\\\" ng-click=monitoreo.generarPDF()><md-icon>picture_as_pdf</md-icon><md-tooltip md-direction=left>Exportar a PDF</md-tooltip></md-button></div><div style=float:right ng-if=\\\"monitoreo.grafico.cod===9 \\\"><md-button class=\\\"md-fab md-primary\\\" ng-csv=monitoreo.filasPresupuesto() field-separator=| csv-header=monitoreo.cabeceraPresupuesto() filename=\\\"{{monitoreo.generarNombre(\\'ABC\\')}}.csv\\\"><md-icon>library_books</md-icon><md-tooltip md-direction=left>Exportar a CSV</md-tooltip></md-button></div></div><div layout layout-align=\\\"center start\\\" ng-if=\\\"[4, 5, 6, 7, 8, 9].indexOf(monitoreo.grafico.cod) == -1\\\"><chart-graph ancho=1000 alto=500 tipo=monitoreo.chart.tipo datos=monitoreo.chart.datos actualizar=monitoreo.chart.actualizar reiniciar=monitoreo.chart.reiniciar></chart-graph></div><!--Presupuesto--><div ng-if=\\\"monitoreo.grafico.cod==4\\\"><div flex style=float:right><md-checkbox ng-repeat=\\\"header in monitoreo.headers\\\" ng-model=header.mostrar aria-label=Mostrar/Ocultar ng-if=!header.mostrar>{{header.title}}</md-checkbox></div><md-table-container><table md-table ng-model=selected md-progress=promise><thead md-head><tr md-row><th ng-repeat=\\\"header in monitoreo.headers\\\" md-column ng-if=header.mostrar><span><md-checkbox ng-model=header.mostrar aria-label=Mostrar/Ocultar></md-checkbox><md-tooltip md-direction=bottom>Ocultar esta columna</md-tooltip><md-button ng-click=\\\"monitoreo.ordenarPor = header.name;  monitoreo.ordenInverso = !monitoreo.ordenInverso\\\">{{header.title}}<md-icon ng-show=\\\"monitoreo.ordenarPor == header.name && !monitoreo.ordenInverso\\\">keyboard_arrow_down</md-icon><md-icon ng-show=\\\"monitoreo.ordenarPor == header.name && monitoreo.ordenInverso\\\">keyboard_arrow_up</md-icon></md-button></span><md-input-container class=md-block flex-gt-sm ng-show=\\\"header.name === \\'numero\\'\\\"><input ng-model=monitoreo.busqueda.numero></md-input-container><md-input-container class=md-block flex-gt-sm ng-show=\\\"header.name === \\'descripcion\\'\\\"><input ng-model=monitoreo.busqueda.descripcion></md-input-container><div style=\\\"height: 65px; width: 20px; border: 0px solid red\\\" ng-show=\\\"header.name !== \\'descripcion\\' && header.name !== \\'numero\\'\\\"></div></th></tr></thead><tbody md-body><tr md-row md-select=item ng-repeat=\\\"item in monitoreo.items | orderBy:monitoreo.ordenarPor:monitoreo.ordenInverso | filter:monitoreo.busqueda\\\"><td md-cell ng-if=\\\"monitoreo.mostrarOcultar(\\'numero\\')\\\" style=\\\"text-align: right\\\">{{item.numero.replace(\\',00\\', \\'\\') }}</td><td md-cell ng-if=\\\"monitoreo.mostrarOcultar(\\'descripcion\\')\\\">{{item.descripcion}}</td><td md-cell ng-if=\\\"monitoreo.mostrarOcultar(\\'inicial\\')\\\" style=\\\"text-align: right\\\">{{item.inicial}}</td><td md-cell ng-if=\\\"monitoreo.mostrarOcultar(\\'comprometido\\')\\\" style=\\\"text-align: right\\\">{{item.comprometido}}</td><td md-cell ng-if=\\\"monitoreo.mostrarOcultar(\\'pagado\\')\\\" style=\\\"text-align: right\\\">{{item.pagado}}</td><td md-cell ng-if=\\\"monitoreo.mostrarOcultar(\\'modificado\\')\\\" style=\\\"text-align: right\\\">{{item.modificado}}</td><td md-cell ng-if=\\\"monitoreo.mostrarOcultar(\\'vigente\\')\\\" style=\\\"text-align: right\\\">{{item.vigente}}</td><td md-cell ng-if=\\\"monitoreo.mostrarOcultar(\\'saldo\\')\\\" style=\\\"text-align: right\\\">{{item.saldo}}</td></tr></tbody></table></md-table-container></div><!--Documentos por estado y usuario--><div ng-if=\\\"monitoreo.grafico.cod==5\\\"><md-table-container><table md-table ng-model=selected md-progress=promise><thead md-head><tr md-row><th md-column><md-button ng-click=\\\"monitoreo.ordenarPor = \\'nombres\\'; monitoreo.ordenInverso = !monitoreo.ordenInverso\\\">Usuario<md-icon ng-show=\\\"monitoreo.ordenarPor == \\'nombres\\' && !monitoreo.ordenInverso\\\">keyboard_arrow_down</md-icon><md-icon ng-show=\\\"monitoreo.ordenarPor == \\'nombres\\' && monitoreo.ordenInverso\\\">keyboard_arrow_up</md-icon></md-button></th><th md-column><md-button ng-click=\\\"monitoreo.ordenarPor = \\'CREADO\\'; monitoreo.ordenInverso = !monitoreo.ordenInverso\\\">Creados<md-icon ng-show=\\\"monitoreo.ordenarPor == \\'CREADO\\' && !monitoreo.ordenInverso\\\">keyboard_arrow_down</md-icon><md-icon ng-show=\\\"monitoreo.ordenarPor == \\'CREADO\\' && monitoreo.ordenInverso\\\">keyboard_arrow_up</md-icon></md-button></th><th md-column><md-button ng-click=\\\"monitoreo.ordenarPor=\\'ENVIADO\\'; monitoreo.ordenInverso = !monitoreo.ordenInverso\\\">Enviados<md-icon ng-show=\\\"monitoreo.ordenarPor == \\'ENVIADO\\' && !monitoreo.ordenInverso\\\">keyboard_arrow_down</md-icon><md-icon ng-show=\\\"monitoreo.ordenarPor == \\'ENVIADO\\' && monitoreo.ordenInverso\\\">keyboard_arrow_up</md-icon></md-button></th><th md-column><md-button ng-click=\\\"monitoreo.ordenarPor=\\'DERIVADO\\'; monitoreo.ordenInverso = !monitoreo.ordenInverso\\\">Derivados<md-icon ng-show=\\\"monitoreo.ordenarPor == \\'DERIVADO\\' && !monitoreo.ordenInverso\\\">keyboard_arrow_down</md-icon><md-icon ng-show=\\\"monitoreo.ordenarPor == \\'DERIVADO\\' && monitoreo.ordenInverso\\\">keyboard_arrow_up</md-icon></md-button></th><th md-column><md-button ng-click=\\\"monitoreo.ordenarPor=\\'APROBADO\\'; monitoreo.ordenInverso = !monitoreo.ordenInverso\\\">Aprobados<md-icon ng-show=\\\"monitoreo.ordenarPor == \\'APROBADO\\' && !monitoreo.ordenInverso\\\">keyboard_arrow_down</md-icon><md-icon ng-show=\\\"monitoreo.ordenarPor == \\'APROBADO\\' && monitoreo.ordenInverso\\\">keyboard_arrow_up</md-icon></md-button></th><th md-column><md-button ng-click=\\\"monitoreo.ordenarPor=\\'RECHAZADO\\'; monitoreo.ordenInverso = !monitoreo.ordenInverso\\\">Rechazados<md-icon ng-show=\\\"monitoreo.ordenarPor == \\'RECHAZADO\\' && !monitoreo.ordenInverso\\\">keyboard_arrow_down</md-icon><md-icon ng-show=\\\"monitoreo.ordenarPor == \\'RECHAZADO\\' && monitoreo.ordenInverso\\\">keyboard_arrow_up</md-icon></md-button></th><th md-column><md-button ng-click=\\\"monitoreo.ordenarPor=\\'CERRADO\\'; monitoreo.ordenInverso = !monitoreo.ordenInverso\\\">Cerrados<md-icon ng-show=\\\"monitoreo.ordenarPor == \\'CERRADO\\' && !monitoreo.ordenInverso\\\">keyboard_arrow_down</md-icon><md-icon ng-show=\\\"monitoreo.ordenarPor == \\'CERRADO\\' && monitoreo.ordenInverso\\\">keyboard_arrow_up</md-icon></md-button></th><th md-column><md-button ng-click=\\\"monitoreo.ordenarPor=\\'ELIMINADO\\'; monitoreo.ordenInverso = !monitoreo.ordenInverso\\\">Eliminados<md-icon ng-show=\\\"monitoreo.ordenarPor == \\'ELIMINADO\\' && !monitoreo.ordenInverso\\\">keyboard_arrow_down</md-icon><md-icon ng-show=\\\"monitoreo.ordenarPor == \\'ELIMINADO\\' && monitoreo.ordenInverso\\\">keyboard_arrow_up</md-icon></md-button></th></tr></thead><tbody md-body><tr md-row md-select=item ng-repeat=\\\"item in monitoreo.estados | orderBy:monitoreo.ordenarPor:monitoreo.ordenInverso \\\"><td md-cell>{{item.nombres}} {{item.apellidos}}</td><td md-cell style=\\\"text-align: left; padding-left:20px; background-color: rgb({{255-item.CREADO}}, 255 ,{{255+item.CREADO}})\\\">{{item.CREADO}}</td><td md-cell style=\\\"text-align: left; padding-left:20px; background-color: rgb({{255-item.ENVIADO}}, 255 , {{255+item.ENVIADO}})\\\">{{item.ENVIADO}}</td><td md-cell style=\\\"text-align: left; padding-left:20px; background-color: rgb({{255-item.DERIVADO}}, 255 ,{{255+item.DERIVADO}})\\\">{{item.DERIVADO}}</td><td md-cell style=\\\"text-align: left; padding-left:20px; background-color: rgb({{255-item.APROBADO}}, 255 ,{{255+item.APROBADO}})\\\">{{item.APROBADO}}</td><td md-cell style=\\\"text-align: left; padding-left:20px; background-color: rgb({{255-item.RECHAZADO}}, 255 ,{{255+item.RECHAZADO}})\\\">{{item.RECHAZADO}}</td><td md-cell style=\\\"text-align: left; padding-left:20px; background-color: rgb({{255-item.CERRADO}}, 255 ,{{255+item.CERRADO}})\\\">{{item.CERRADO}}</td><td md-cell style=\\\"text-align: left; padding-left:20px; background-color: rgb({{255-item.ELIMINADO}}, 255 ,{{255+item.ELIMINADO}})\\\">{{item.ELIMINADO}}</td></tr></tbody></table></md-table-container></div><!--Documentos pendientes por usuario--><div ng-if=\\\"monitoreo.grafico.cod==6\\\"><md-table-container><table md-table ng-model=selected md-progress=promise><thead md-head><tr md-row><th md-column><md-button ng-click=\\\"monitoreo.ordenarPor=\\'nombres\\'; monitoreo.ordenInverso = !monitoreo.ordenInverso\\\">Usuario<md-icon ng-show=\\\"monitoreo.ordenarPor == \\'nombres\\' && !monitoreo.ordenInverso\\\">keyboard_arrow_down</md-icon><md-icon ng-show=\\\"monitoreo.ordenarPor == \\'nombres\\' && monitoreo.ordenInverso\\\">keyboard_arrow_up</md-icon></md-button></th><th md-column><md-button ng-click=\\\"monitoreo.ordenarPor=\\'ENVIADO\\'; monitoreo.ordenInverso = !monitoreo.ordenInverso\\\">Enviados<md-icon ng-show=\\\"monitoreo.ordenarPor == \\'ENVIADO\\' && !monitoreo.ordenInverso\\\">keyboard_arrow_down</md-icon><md-icon ng-show=\\\"monitoreo.ordenarPor == \\'ENVIADO\\' && monitoreo.ordenInverso\\\">keyboard_arrow_up</md-icon></md-button></th><th md-column><md-button ng-click=\\\"monitoreo.ordenarPor=\\'RECHAZADO\\'; monitoreo.ordenInverso = !monitoreo.ordenInverso\\\">Rechazados<md-icon ng-show=\\\"monitoreo.ordenarPor == \\'RECHAZADO\\' && !monitoreo.ordenInverso\\\">keyboard_arrow_down</md-icon><md-icon ng-show=\\\"monitoreo.ordenarPor == \\'RECHAZADO\\' && monitoreo.ordenInverso\\\">keyboard_arrow_up</md-icon></md-button></th><th md-column><md-button ng-click=\\\"monitoreo.ordenarPor=\\'DERIVADO\\'; monitoreo.ordenInverso = !monitoreo.ordenInverso\\\">Derivados<md-icon ng-show=\\\"monitoreo.ordenarPor == \\'DERIVADO\\' && !monitoreo.ordenInverso\\\">keyboard_arrow_down</md-icon><md-icon ng-show=\\\"monitoreo.ordenarPor == \\'DERIVADO\\' && monitoreo.ordenInverso\\\">keyboard_arrow_up</md-icon></md-button></th><th md-column><md-button ng-click=\\\"monitoreo.ordenarPor=\\'total\\'; monitoreo.ordenInverso = !monitoreo.ordenInverso\\\">Total pendientes<md-icon ng-show=\\\"monitoreo.ordenarPor == \\'total\\' && !monitoreo.ordenInverso\\\">keyboard_arrow_down</md-icon><md-icon ng-show=\\\"monitoreo.ordenarPor == \\'total\\' && monitoreo.ordenInverso\\\">keyboard_arrow_up</md-icon></md-button></th></tr></thead><tbody md-body><tr md-row md-select=item ng-repeat=\\\"item in monitoreo.pendientes | orderBy:monitoreo.ordenarPor:monitoreo.ordenInverso \\\"><td md-cell>{{item.nombres}} {{item.apellidos}}</td><td md-cell>{{item.ENVIADO}}</td><td md-cell>{{item.RECHAZADO}}</td><td md-cell>{{item.DERIVADO}}</td><td md-cell>{{item.total}}</td></tr></tbody></table></md-table-container></div><!--Comprometido--><div ng-if=\\\"monitoreo.grafico.cod==7\\\"><md-table-container><table md-table ng-model=selected md-progress=promise><thead md-head><tr md-row><th md-column><md-button ng-click=\\\"monitoreo.ordenarPor=\\'numero\\'; monitoreo.ordenInverso = !monitoreo.ordenInverso\\\">Número<md-icon ng-show=\\\"monitoreo.ordenarPor == \\'numero\\' && !monitoreo.ordenInverso\\\">keyboard_arrow_down</md-icon><md-icon ng-show=\\\"monitoreo.ordenarPor == \\'numero\\' && monitoreo.ordenInverso\\\">keyboard_arrow_up</md-icon></md-button><md-input-container class=md-block flex-gt-sm><input ng-model=monitoreo.busqueda.numero></md-input-container></th><th md-column><md-button ng-click=\\\"monitoreo.ordenarPor=\\'descripcion\\'; monitoreo.ordenInverso = !monitoreo.ordenInverso\\\">Descripción<md-icon ng-show=\\\"monitoreo.ordenarPor == \\'descripcion\\' && !monitoreo.ordenInverso\\\">keyboard_arrow_down</md-icon><md-icon ng-show=\\\"monitoreo.ordenarPor == \\'descripcion\\' && monitoreo.ordenInverso\\\">keyboard_arrow_up</md-icon></md-button><md-input-container class=md-block flex-gt-sm><input ng-model=monitoreo.busqueda.descripcion></md-input-container></th><th md-column><md-button ng-click=\\\"monitoreo.ordenarPor=\\'monto\\'; monitoreo.ordenInverso = !monitoreo.ordenInverso\\\">Monto<md-icon ng-show=\\\"monitoreo.ordenarPor == \\'monto\\' && !monitoreo.ordenInverso\\\">keyboard_arrow_down</md-icon><md-icon ng-show=\\\"monitoreo.ordenarPor == \\'monto\\' && monitoreo.ordenInverso\\\">keyboard_arrow_up</md-icon></md-button><div style=\\\"height: 65px; width: 20px; border: 0px solid red\\\"></div></th><th md-column><md-button ng-click=\\\"monitoreo.ordenarPor=\\'cite\\'; monitoreo.ordenInverso = !monitoreo.ordenInverso\\\">Documento relacionado<md-icon ng-show=\\\"monitoreo.ordenarPor == \\'cite\\' && !monitoreo.ordenInverso\\\">keyboard_arrow_down</md-icon><md-icon ng-show=\\\"monitoreo.ordenarPor == \\'cite\\' && monitoreo.ordenInverso\\\">keyboard_arrow_up</md-icon></md-button><div style=\\\"height: 65px; width: 20px; border: 0px solid red\\\"></div></th><th md-column><md-button ng-click=\\\"monitoreo.ordenarPor=\\'_fecha_creacion\\'; monitoreo.ordenInverso = !monitoreo.ordenInverso\\\">Fecha del comprometido<md-icon ng-show=\\\"monitoreo.ordenarPor == \\'_fecha_creacion\\' && !monitoreo.ordenInverso\\\">keyboard_arrow_down</md-icon><md-icon ng-show=\\\"monitoreo.ordenarPor == \\'_fecha_creacion\\' && monitoreo.ordenInverso\\\">keyboard_arrow_up</md-icon></md-button><md-input-container class=md-block flex-gt-sm><input ng-model=monitoreo.busqueda._fecha_creacion></md-input-container></th></tr></thead><tbody md-body><tr md-row md-select=item ng-repeat=\\\"item in monitoreo.comprometido | orderBy:monitoreo.ordenarPor:monitoreo.ordenInverso | filter:monitoreo.busqueda\\\"><td md-cell style=\\\"text-align: right\\\">{{item.numero}}</td><td md-cell>{{item.descripcion}}</td><td md-cell style=\\\"text-align: right\\\">{{item.monto}}</td><td md-cell><md-button ng-click=monitoreo.vistaPrevia(item.id_documento)>{{item.cite}}</md-button></td><td md-cell>{{item._fecha_creacion |date:\\'dd/MM/yyyy\\'}}</td></tr></tbody></table></md-table-container></div><!--Pagado--><div ng-if=\\\"monitoreo.grafico.cod==8\\\"><md-table-container><table md-table ng-model=selected md-progress=promise><thead md-head><tr md-row><th md-column><md-button ng-click=\\\"monitoreo.ordenarPor=\\'numero\\'; monitoreo.ordenInverso = !monitoreo.ordenInverso\\\">Número<md-icon ng-show=\\\"monitoreo.ordenarPor == \\'numero\\' && !monitoreo.ordenInverso\\\">keyboard_arrow_down</md-icon><md-icon ng-show=\\\"monitoreo.ordenarPor == \\'numero\\' && monitoreo.ordenInverso\\\">keyboard_arrow_up</md-icon></md-button><md-input-container class=md-block flex-gt-sm><input ng-model=monitoreo.busqueda.numero></md-input-container></th><th md-column><md-button ng-click=\\\"monitoreo.ordenarPor=\\'descripcion\\'; monitoreo.ordenInverso = !monitoreo.ordenInverso\\\">Descripción<md-icon ng-show=\\\"monitoreo.ordenarPor == \\'descripcion\\' && !monitoreo.ordenInverso\\\">keyboard_arrow_down</md-icon><md-icon ng-show=\\\"monitoreo.ordenarPor == \\'descripcion\\' && monitoreo.ordenInverso\\\">keyboard_arrow_up</md-icon></md-button><md-input-container class=md-block flex-gt-sm><input ng-model=monitoreo.busqueda.descripcion></md-input-container></th><th md-column><md-button ng-click=\\\"monitoreo.ordenarPor=\\'monto\\'; monitoreo.ordenInverso = !monitoreo.ordenInverso\\\">Monto<md-icon ng-show=\\\"monitoreo.ordenarPor == \\'monto\\' && !monitoreo.ordenInverso\\\">keyboard_arrow_down</md-icon><md-icon ng-show=\\\"monitoreo.ordenarPor == \\'monto\\' && monitoreo.ordenInverso\\\">keyboard_arrow_up</md-icon></md-button><div style=\\\"height: 65px; width: 20px; border: 0px solid red\\\"></div></th><th md-column><md-button ng-click=\\\"monitoreo.ordenarPor=\\'cite_ref\\'; monitoreo.ordenInverso = !monitoreo.ordenInverso\\\">Documento relacionado<md-icon ng-show=\\\"monitoreo.ordenarPor == \\'cite_ref\\' && !monitoreo.ordenInverso\\\">keyboard_arrow_down</md-icon><md-icon ng-show=\\\"monitoreo.ordenarPor == \\'cite_ref\\' && monitoreo.ordenInverso\\\">keyboard_arrow_up</md-icon></md-button><div style=\\\"height: 65px; width: 20px; border: 0px solid red\\\"></div></th><th md-column><md-button ng-click=\\\"monitoreo.ordenarPor=\\'_fecha_creacion\\'; monitoreo.ordenInverso = !monitoreo.ordenInverso\\\">Fecha del comprometido<md-icon ng-show=\\\"monitoreo.ordenarPor == \\'_fecha_creacion\\' && !monitoreo.ordenInverso\\\">keyboard_arrow_down</md-icon><md-icon ng-show=\\\"monitoreo.ordenarPor == \\'_fecha_creacion\\' && monitoreo.ordenInverso\\\">keyboard_arrow_up</md-icon></md-button><md-input-container class=md-block flex-gt-sm><input ng-model=monitoreo.busqueda._fecha_creacion></md-input-container></th></tr></thead><tbody md-body><tr md-row md-select=item ng-repeat=\\\"item in monitoreo.pagado | orderBy:monitoreo.ordenarPor:monitoreo.ordenInverso | filter:monitoreo.busqueda\\\"><td md-cell style=\\\"text-align: right\\\">{{item.numero}}</td><td md-cell>{{item.descripcion}}</td><td md-cell style=\\\"text-align: right\\\">{{item.monto}}</td><td md-cell><md-button ng-click=monitoreo.vistaPrevia(item.id_documento)>{{item.cite_ref}}</md-button></td><td md-cell>{{item._fecha_creacion |date:\\'dd/MM/yyyy\\'}}</td></tr></tbody></table></md-table-container></div><div ng-if=\\\"monitoreo.grafico.cod===9\\\"><div class=infoContable><div><strong>IPV</strong>: Informe de pago de viáticos</div><div><strong>IPBS</strong>: Informe de pago de bienes y servicios</div><div><strong>IPSPCL-A</strong>: Informe de pago de servicios personales y consultorias de linea</div></div><div flex style=float:right><md-checkbox ng-repeat=\\\"header in monitoreo.headers\\\" ng-model=header.mostrar aria-label=Mostrar/Ocultar ng-if=!header.mostrar>{{header.title}}</md-checkbox></div><md-table-container><table md-table ng-model=selected md-progress=promise><thead md-head><tr md-row><th ng-repeat=\\\"header in monitoreo.headers\\\" md-column ng-if=header.mostrar><span><md-checkbox ng-model=header.mostrar aria-label=Mostrar/Ocultar></md-checkbox><md-tooltip md-direction=bottom>Ocultar esta columna</md-tooltip><md-button ng-click=\\\"monitoreo.ordenarPor = header.name;  monitoreo.ordenInverso = !monitoreo.ordenInverso\\\">{{header.title}}<md-icon ng-show=\\\"monitoreo.ordenarPor == header.name && !monitoreo.ordenInverso\\\">keyboard_arrow_down</md-icon><md-icon ng-show=\\\"monitoreo.ordenarPor == header.name && monitoreo.ordenInverso\\\">keyboard_arrow_up</md-icon></md-button></span><md-input-container class=md-block flex-gt-sm ng-show=\\\"header.name === \\'cite\\'\\\"><input ng-model=monitoreo.busqueda.cite></md-input-container><md-input-container class=md-block flex-gt-sm ng-show=\\\"header.name === \\'detalle\\'\\\"><input ng-model=monitoreo.busqueda.detalle></md-input-container><div style=\\\"height: 65px; width: 20px; border: 0px solid red\\\" ng-show=\\\"header.name !== \\'detalle\\' && header.name !== \\'cite\\'\\\"></div></th></tr></thead><tbody md-body><tr md-row md-select=item ng-repeat=\\\"item in monitoreo.items | orderBy:monitoreo.ordenarPor:monitoreo.ordenInverso | filter:monitoreo.busqueda\\\"><td md-cell ng-if=\\\"monitoreo.mostrarOcultar(\\'cite\\')\\\" style=\\\"text-align: right\\\">{{item.cite}}</td><td md-cell ng-if=\\\"monitoreo.mostrarOcultar(\\'detalle\\')\\\">{{item.detalle}}</td><td md-cell ng-if=\\\"monitoreo.mostrarOcultar(\\'c31\\')\\\" style=\\\"text-align: right\\\">{{item.c31}}</td><td md-cell ng-if=\\\"monitoreo.mostrarOcultar(\\'importe\\')\\\" style=\\\"text-align: right\\\">{{item.importe}}</td></tr></tbody></table></md-table-container></div><br><br></md-card-content></md-card></div>\");\n$templateCache.put(\"app/modules/plantillasFormly/plantillas/modules.plantillasFormly.plantillas.html\",\"<div class=container><crud-table url=plantillas.url title-table=plantillas.titulo fields=plantillas.fields usuario=plantillas.usuario permission=plantillas.permission buttons=plantillas.buttons query-extra=plantillas.queryExtra button-agregar=plantillas.buttonAgregar estado-sw=plantillas.estadoSw only-fields=true></crud-table></div>\");\n$templateCache.put(\"app/modules/plantillasFormly/vistaPdf/modules.plantillasFormly.vistaPdf.html\",\"<div class=container><div layout layout-align=\\\"center start\\\"><md-card flex-gt-sm=50 flex><md-toolbar><div class=md-toolbar-tools><h2><md-icon>picture_as_pdf</md-icon>Vista previa</h2><span flex></span><md-button class=md-icon-button aria-label=\\\"Ver pdf\\\" ng-click=vistaPdf.verPdf() ng-show=vistaPdf.flag_html><md-tooltip>Ver PDF</md-tooltip><md-icon aria-label=\\\"Close dialog\\\">picture_as_pdf</md-icon></md-button><md-button class=md-icon-button aria-label=\\\"Ver html\\\" ng-click=vistaPdf.verHtml() ng-show=!vistaPdf.flag_html><md-tooltip>Ver html</md-tooltip><md-icon aria-label=\\\"Close dialog\\\">code</md-icon></md-button></div></md-toolbar><md-card-content><div ng-show=vistaPdf.flag_html bind-html-compile=vistaPdf.html></div><iframe class=iframe-pdf src={{vistaPdf.pdf}} style=\\\"width:100%; height:600px; border: none\\\" ng-if=\\\"vistaPdf.show_pdf && !vistaPdf.flag_html\\\" allowfullscreen></iframe><div id=canvasContainer ng-show=\\\"!vistaPdf.show_pdf && !vistaPdf.flag_html\\\"></div></md-card-content></md-card></div></div>\");\n$templateCache.put(\"app/modules/seguridad/menu/modules.seguridad.menu.html\",\"<div class=container><crud-table url=menu.url title-table=menu.titulo fields=menu.fields usuario=menu.usuario></crud-table></div>\");\n$templateCache.put(\"app/modules/seguridad/rol/dialog.rol.html\",\"<md-dialog ng-cloak class=\\\"formly-dialog formly-column-{{column}}\\\" style=\\\"max-width: 800px; width: 100%\\\"><form ng-submit=registrarRol() name=rolForm novalidate><md-toolbar><div class=md-toolbar-tools><h2><md-icon>business</md-icon>{{data.id_rol == null ? \\\"Agregar\\\" : \\\"Editar\\\"}}</h2><span flex></span><md-button class=md-icon-button aria-label=Cerrar ng-click=cerrar()><md-tooltip>Cerrar</md-tooltip><md-icon>close</md-icon></md-button></div></md-toolbar><md-dialog-content><div layout><md-card flex><md-card-header><md-card-header-text><span class=md-title>Datos del rol</span></md-card-header-text></md-card-header><md-card-content><md-input-container class=md-block><label>Nombre</label><input ng-model=data.nombre type=text required><div ng-messages=rolForm.nombre.$error ng-show=rolForm.nombre.$dirty><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block><label>Descripcion</label><input ng-model=data.descripcion type=text required><div ng-messages=rolForm.descripcion.$error ng-show=rolForm.descripcion.$dirty><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block><label>Peso</label><input ng-model=data.peso type=text required><div ng-messages=rolForm.peso.$error ng-show=rolForm.peso.$dirty><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block><label for=estado>Estado</label><md-select name=estado ng-model=data.estado placeholder=Estado required><md-option ng-value=item.id ng-repeat=\\\"item in estados\\\">{{ item.name }}</md-option></md-select><div ng-messages=rolForm.estado.$error ng-show=rolForm.estado.$dirty><div ng-message=required>Debe seleccionar una opción</div></div></md-input-container><md-input-container class=md-block><label for=fecha_creacion>Fecha de creación</label><md-datepicker ng-model=data._fecha_creacion disabled></md-datepicker></md-input-container><md-input-container class=md-block><label for=fecha_creacion>Fecha de modificación</label><md-datepicker ng-model=data._fecha_modificacion disabled></md-datepicker></md-input-container></md-card-content></md-card><md-card flex><md-card-header><md-card-header-text><span class=md-title>Menus del rol</span></md-card-header-text></md-card-header><md-card-content><div ng-repeat=\\\"m in menus\\\"><h3 ng-if=\\\"m.fid_menu_padre===null\\\">{{m.nombre}}</h3><md-input-container class=md-block ng-if=\\\"m.fid_menu_padre!==null\\\"><md-checkbox ng-model=m.checked aria-label={{m.nombre}}>{{m.nombre}}</md-checkbox></md-input-container></div></md-card-content></md-card></div></md-dialog-content><md-dialog-actions layout layout-padding><span flex></span><md-button type=submit class=\\\"md-raised md-primary\\\" ng-disabled=rolForm.$invalid><md-icon>check</md-icon>Guardar</md-button><md-button type=button class=md-raised ng-click=cerrar()><md-icon>cancel</md-icon>Cancelar</md-button></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/modules/seguridad/rol/modules.seguridad.rol.html\",\"<div class=container><crud-table url=rol.url title-table=rol.titulo fields=rol.fields usuario=rol.usuario id-show=rol.idShow dialog-controller=rol.dialogController template=rol.template></crud-table></div>\");\n$templateCache.put(\"app/modules/plantillasFormly/documentos/documento/dialogError.html\",\"<md-dialog aria-label=Error class=formly-dialog-error style=\\\"max-width: 800px; width: 100%\\\"><md-toolbar><div class=md-toolbar-tools><h2><md-icon>error</md-icon>Error</h2><span flex></span> <span flex></span><md-button class=md-icon-button aria-label=Cerrar ng-click=cerrar()><md-tooltip>Cerrar</md-tooltip><md-icon aria-label=\\\"Close dialog\\\">close</md-icon></md-button></div></md-toolbar><md-dialog-content class=md-dialog-content><div ng-if=\\\"data.tipo==\\'formu\\'\\\">Debe completar los datos de todos los campos requeridos del documento para poder enviarlo.<br><br>Los campos requeridos tienen un (*) y se muestran con una linea roja.</div><div ng-if=\\\"data.tipo==\\'timeZone\\'\\\">Esta plantilla tiene fechas para llenar y la zona horaria de su ordenador no es la correcta.<br><br>Por favor configure la zona horaria a UTC-4, La Paz - Bolivia, para evitar futuros errores de impresión.<br><br>Si usted no sabe configurar la zona horaria, puede pedir ayuda al personal de soporte técnico.</div><br></md-dialog-content><md-dialog-actions><span flex></span><md-button class=md-raised ng-click=cerrar()><md-icon>check</md-icon>Aceptar</md-button></md-dialog-actions></md-dialog>\");\n$templateCache.put(\"app/modules/plantillasFormly/documentos/documento/modules.plantillasFormly.documentos.documento.html\",\"<div class=container-plantilla><section layout><md-content flex><div class=\\\"header botones\\\" layout layout-align=\\\"start center\\\"><md-button class=\\\"md-fab md-primary\\\" ng-click=documento.guardarDocumento() ng-if=!documento.sw_enviado><md-icon>save</md-icon><md-tooltip md-direction=right>Guardar documento</md-tooltip></md-button><md-button class=\\\"md-fab md-primary\\\" ng-click=documento.volverAtras() ng-if=documento.sw_enviado><md-icon>reply</md-icon><md-tooltip md-direction=right>Volver atras</md-tooltip></md-button><md-button class=\\\"md-fab md-primary\\\" ng-click=documento.vistaPrevia()><md-icon>remove_red_eye</md-icon><md-tooltip md-direction=right>Vista previa</md-tooltip></md-button><!-- <md-button class=\\\"md-fab md-primary\\\" ng-click=\\\"documento.firmar()\\\" >\\r\\n                    <md-icon>done_all</md-icon>\\r\\n                    <md-tooltip md-direction=\\\"right\\\"> Firmar Digitalmente</md-tooltip>\\r\\n                </md-button> --><md-button class=\\\"md-fab md-primary\\\" ng-click=documento.copearDocumento() ng-if=\\\"documento.id_documento!=0\\\"><md-icon>content_copy</md-icon><md-tooltip md-direction=right>Duplicar documento sin cite</md-tooltip></md-button><!-- <p>\\r\\n                  {{documento.enviarEjecutandose}} <br>\\r\\n                  bbb\\r\\n                  {{!documento.enviarEjecutandose}} <br>\\r\\n                  aaa\\r\\n                </p> --><md-button class=\\\"md-fab md-primary\\\" ng-click=documento.guardarDocumento(true) ng-if=!documento.sw_enviado ng-disabled=\\\"documento.enviarEjecutandose ==1? true:false\\\"><md-icon>send</md-icon><md-tooltip md-direction=right>{{ (documento.id_documento==0)? \\'Guardar y enviar documento\\' : \\'Enviar documento\\' }}</md-tooltip></md-button><div flex></div><md-input-container><label for=documento-nombre>Nombre del documento</label><input ng-model=documento.doc.nombre size=50 maxlength=250 ng-disabled=documento.sw_enviado required></md-input-container><div flex><md-button class=\\\"md-fab md-warning\\\" ng-click=documento.verObservaciones($event) ng-if=documento.sw_rechazado><md-icon>find_in_page</md-icon><md-tooltip md-direction=right>Ver observaciones</md-tooltip></md-button></div><div flex ng-if=!documento.sw_enviado></div></div><div class=documento-edit><div class=\\\"header header-doc\\\" ng-if=\\\"documento.sw_grupo && documento.docs_grupo.length > 0\\\"><div class=\\\"ap-text-center ap-text-warning\\\">Referencias:</div><div class=\\\"ap-text-center ap-text-warning\\\" ng-repeat=\\\"dg in documento.docs_grupo\\\" ng-if=\\\"dg.id_documento!=documento.id_documento\\\">* {{dg.nombre_plantilla}} -- <span class=ap-cursor-pointer ng-click=documento.verDocumento(dg.id_documento)>{{dg.nombre}}</span></div></div><div class=pagina ng-if=documento.load><form name=documento.formu novalidate><img class=img-membrete ng-src={{documento.url_img}} ng-if=documento.url_img><formly-form class=view-formly-form model=documento.model_actual fields=documento.form_actual></formly-form></form></div></div></md-content></section></div>\");\n$templateCache.put(\"app/modules/plantillasFormly/documentos/documento/observacion.panel.html\",\"<md-card style=\\\"max-width: 400px\\\"><md-card-title><md-card-title-text><span class=md-headline>Observaciones</span><!-- <span class=\\\"md-subhead\\\">Extra Large</span> --></md-card-title-text></md-card-title><md-card-content>{{ observacion }}</md-card-content><md-card-actions layout=row layout-align=\\\"end center\\\"><md-button ng-click=closePanel()>Aceptar</md-button></md-card-actions></md-card>\");\n$templateCache.put(\"app/modules/plantillasFormly/plantillas/plantilla/item.panel.html\",\"<md-card class=animated style=\\\"max-width: 400px; min-width: 300px\\\"><md-card-title><md-card-title-text><span class=md-headline>{{titulos[item.val.element[0].type] || item.val.element[0].type}}</span><!-- <span class=\\\"md-subhead\\\">Extra Large</span> --></md-card-title-text></md-card-title><md-card-content ng-switch on=item.val.element[0].type style=\\\"max-height: 280px; overflow-y: auto; padding-top: 10px\\\"><div class=\\\"container container-elementos\\\"><div ng-switch-when=input layout=column><md-input-container><label>Nombre</label><input type=text ng-model=item.val.element[0].templateOptions.label></md-input-container><md-checkbox ng-model=item.val.element[0].templateOptions.required aria-label=Requerido>Requerido ?</md-checkbox><label>Validación</label><md-select ng-model=item.val.element[0].templateOptions.pattern><md-option ng-value=v.pattern ng-repeat=\\\"v in validaciones\\\">{{ v.name }}</md-option></md-select></div><div ng-switch-when=radio layout=column><md-input-container><label>Nombre</label><input type=text ng-model=item.val.element[0].templateOptions.label></md-input-container><md-checkbox ng-model=item.val.element[0].templateOptions.required aria-label=Requerido>Requerido ?</md-checkbox><md-checkbox ng-model=item.val.element[0].templateOptions.vertical aria-label=vertical>Orientacion vertical ?</md-checkbox><label>Opciones</label><md-chips ng-model=item.val.element[0].opciones></md-chips></div><div ng-switch-when=select layout=column><md-input-container><label>Nombre</label><input type=text ng-model=item.val.element[0].templateOptions.label></md-input-container><md-checkbox ng-model=item.val.element[0].templateOptions.required aria-label=Requerido>Requerido ?</md-checkbox><md-checkbox ng-model=item.val.element[0].templateOptions.showItem>Mostrar en PDF</md-checkbox><label>Opciones</label><md-chips ng-model=item.val.element[0].opciones></md-chips></div><div ng-switch-when=textarea layout=column><md-input-container><label>Nombre</label><input type=text ng-model=item.val.element[0].templateOptions.label></md-input-container><md-input-container><label>Altura</label><input type=number ng-model=item.val.element[0].templateOptions.rows></md-input-container><md-checkbox ng-model=item.val.element[0].templateOptions.required aria-label=Requerido>Requerido ?</md-checkbox><md-checkbox ng-model=item.val.element[0].templateOptions.interlineado aria-label=Interlineado-de-parrafos>Quitar interlineado de parrafos ?</md-checkbox><!-- <label>Alineación</label>\\n                <md-radio-group layout layout-wrap class=\\\"radio-parrafo\\\" ng-model=\\\"item.val.element[0].className\\\">\\n                    <md-radio-button ng-value=\\\"\\'ap-text-left\\'\\\"> <md-icon>format_align_left</md-icon> </md-radio-button>\\n                    <md-radio-button ng-value=\\\"\\'ap-text-center\\'\\\"> <md-icon>format_align_center</md-icon> </md-radio-button>\\n                    <md-radio-button ng-value=\\\"\\'ap-text-right\\'\\\"> <md-icon>format_align_right</md-icon> </md-radio-button>\\n                    <md-radio-button ng-value=\\\"\\'ap-text-justify\\'\\\"> <md-icon>format_align_justify</md-icon> </md-radio-button>\\n                </md-radio-group> --></div><div ng-switch-when=checkbox layout=column><md-input-container><label>Nombre</label><input type=text ng-model=item.val.element[0].templateOptions.label></md-input-container></div><div ng-switch-when=switch layout=column><md-input-container><label>Nombre</label><input type=text ng-model=item.val.element[0].templateOptions.label></md-input-container></div><div ng-switch-when=datepicker layout=column><md-input-container><label>Nombre</label><input type=text ng-model=item.val.element[0].templateOptions.label></md-input-container><md-checkbox ng-model=item.val.element[0].templateOptions.required aria-label=Requerido>Requerido ?</md-checkbox></div><div ng-switch-when=slider layout=column><md-input-container><label>Nombre</label><input type=text ng-model=item.val.element[0].templateOptions.label></md-input-container><md-input-container><label>Step</label><input type=text ng-model=item.val.element[0].templateOptions.step></md-input-container><md-input-container><label>Min</label><input type=number ng-model=item.val.element[0].templateOptions.min></md-input-container><md-input-container><label>Max</label><input type=number ng-model=item.val.element[0].templateOptions.max></md-input-container><md-checkbox ng-model=item.val.element[0].templateOptions.discrete aria-label=Discreto>Discreto ?</md-checkbox></div><div ng-switch-when=chips layout=column><md-input-container><label>Nombre</label><input type=text ng-model=item.val.element[0].templateOptions.label></md-input-container><md-input-container><label>Placeholder</label><input type=text ng-model=item.val.element[0].templateOptions.placeholder></md-input-container><md-input-container><label>2do Placeholder</label><input type=text ng-model=item.val.element[0].templateOptions.secondaryPlaceholder></md-input-container><md-checkbox ng-model=item.val.element[0].templateOptions.required aria-label=Requerido>Requerido ?</md-checkbox></div><div ng-switch-when=texto layout=column><!-- <label ng-if=\\\"item.val.element[0].templateOptions.tipo!==\\'p\\'\\\">Tipo</label>\\n                <md-radio-group layout layout-wrap class=\\\"radio-parrafo\\\" ng-model=\\\"item.val.element[0].templateOptions.tipo\\\" ng-if=\\\"item.val.element[0].templateOptions.tipo!==\\'p\\'\\\">\\n                    <md-radio-button ng-value=\\\"\\'h1\\'\\\"> h1 </md-radio-button>\\n                    <md-radio-button ng-value=\\\"\\'h2\\'\\\"> h2 </md-radio-button>\\n                    <md-radio-button ng-value=\\\"\\'h3\\'\\\"> h3 </md-radio-button>\\n                    <md-radio-button ng-value=\\\"\\'h4\\'\\\"> h4 </md-radio-button>\\n                    <md-radio-button ng-value=\\\"\\'h5\\'\\\"> h5 </md-radio-button>\\n                    <md-radio-button ng-value=\\\"\\'h6\\'\\\"> h6 </md-radio-button>\\n                </md-radio-group> --><label>Alineación</label><md-radio-group layout layout-wrap class=radio-parrafo ng-model=item.val.element[0].templateOptions.className><md-radio-button ng-value=\\\"\\'ap-text-left\\'\\\"><md-icon>format_align_left</md-icon></md-radio-button><md-radio-button ng-value=\\\"\\'ap-text-center\\'\\\"><md-icon>format_align_center</md-icon></md-radio-button><md-radio-button ng-value=\\\"\\'ap-text-right\\'\\\"><md-icon>format_align_right</md-icon></md-radio-button><md-radio-button ng-value=\\\"\\'ap-text-justify\\'\\\" ng-if=\\\"item.val.element[0].templateOptions.tipo===\\'p\\'\\\"><md-icon>format_align_justify</md-icon></md-radio-button></md-radio-group><label>Espacios</label><div layout layout-wrap class=radio-parrafo><md-checkbox ng-model=item.val.element[0].templateOptions.mTop>Espacio superior</md-checkbox><md-checkbox ng-model=item.val.element[0].templateOptions.mBot>Espacio inferior</md-checkbox></div><md-input-container ng-if=\\\"item.val.element[0].templateOptions.tipo!==\\'p\\'\\\"><label>Texto</label><input ng-model=item.val.element[0].templateOptions.label></md-input-container><md-input-container ng-if=\\\"item.val.element[0].templateOptions.tipo===\\'p\\'\\\"><label>Texto</label><textarea ng-model=item.val.element[0].templateOptions.label rows=3 md-no-resize=true max-rows=3>\\n                    </textarea></md-input-container></div><div ng-switch-when=lista layout=column><md-input-container class=ap-input-ns><label>Texto</label><input ng-model=item.val.element[0].templateOptions.label></md-input-container><label>Tipo de lista</label><md-radio-group layout layout-wrap class=radio-parrafo ng-model=item.val.element[0].templateOptions.tipo><md-radio-button ng-value=\\\"\\'ol\\'\\\">Lista ordenada</md-radio-button><md-radio-button ng-value=\\\"\\'ul\\'\\\">Lista no ordenada</md-radio-button></md-radio-group><label>Alineación</label><md-radio-group layout layout-wrap class=radio-parrafo ng-model=item.val.element[0].templateOptions.className><md-radio-button ng-value=\\\"\\'ap-text-left\\'\\\"><md-icon>format_align_left</md-icon></md-radio-button><md-radio-button ng-value=\\\"\\'ap-text-center\\'\\\"><md-icon>format_align_center</md-icon></md-radio-button><md-radio-button ng-value=\\\"\\'ap-text-right\\'\\\"><md-icon>format_align_right</md-icon></md-radio-button></md-radio-group><label>Elementos</label><md-chips ng-model=item.val.element[0].opciones></md-chips><br></div><div ng-switch-when=inputt layout=column><md-input-container class=ap-input-ns><label>Texto</label><input ng-model=item.val.element[0].templateOptions.labelx></md-input-container><md-checkbox ng-model=item.val.element[0].templateOptions.required aria-label=Requerido>Requerido ?</md-checkbox><label>Alineación</label><md-radio-group layout layout-wrap class=radio-parrafo ng-model=item.val.element[0].templateOptions.alineacion><md-radio-button ng-value=\\\"\\'ap-text-left\\'\\\"><md-icon>format_align_left</md-icon></md-radio-button><md-radio-button ng-value=\\\"\\'ap-text-center\\'\\\"><md-icon>format_align_center</md-icon></md-radio-button><md-radio-button ng-value=\\\"\\'ap-text-right\\'\\\"><md-icon>format_align_right</md-icon></md-radio-button></md-radio-group><label>Espacio de texto = {{item.val.element[0].templateOptions.labelw}}</label><md-slider flex min=0 max=80 ng-model=item.val.element[0].templateOptions.labelw step=5 aria-label=remdes-width></md-slider><br></div><div ng-switch-when=cite layout=column><!-- <md-input-container class=\\\"ap-input-ns\\\">\\n                    <label>Texto cite</label>\\n                    <input ng-model=\\\"item.val.element[0].templateOptions.labelCite\\\">\\n                </md-input-container>\\n                <md-input-container class=\\\"ap-input-ns\\\">\\n                    <label>Texto fecha</label>\\n                    <input ng-model=\\\"item.val.element[0].templateOptions.labelFecha\\\">\\n                </md-input-container> --><md-input-container><label>Tipo de membrete</label><md-select ng-model=item.val.element[0].templateOptions.tipoMembrete><md-option ng-value=\\\"\\'sin membrete\\'\\\">Sin membrete</md-option><md-option ng-value=\\\"\\'externo\\'\\\">Membrete externo</md-option><md-option ng-value=\\\"\\'legal\\'\\\">Membrete legal</md-option></md-select></md-input-container><br><md-input-container><label>Tipo de hoja</label><md-select ng-model=item.val.element[0].templateOptions.tipoHoja ng-click=controlTipoHoja><md-option ng-value=\\\"\\'Letter\\'\\\">Carta</md-option><md-option ng-value=\\\"\\'Oficio\\'\\\">Oficio</md-option><md-option ng-value=\\\"\\'A4\\'\\\">A4</md-option><md-option ng-value=\\\"\\'Externo\\'\\\">Nota Externa</md-option><md-option ng-value=\\\"\\'Legal\\'\\\">Nota Legal</md-option></md-select></md-input-container><!-- <br> --><!-- <label>Tipo de membrete</label>\\n                <md-radio-group layout layout-wrap class=\\\"radio-parrafo\\\" ng-model=\\\"item.val.element[0].templateOptions.tipoMembrete\\\">\\n                    <md-radio-button ng-value=\\\"\\'sin membrete\\'\\\"> Sin membrete </md-radio-button>\\n                    <md-radio-button ng-value=\\\"\\'externo\\'\\\"> membrete externo </md-radio-button>\\n                </md-radio-group> --><!-- <md-checkbox ng-model=\\\"item.val.element[0].templateOptions.tipoMembrete\\\" aria-label=\\\"Vertical\\\"> Vertical </md-checkbox> --><label>Tipo de cite</label><md-radio-group layout layout-wrap ng-model=item.val.element[0].templateOptions.tipo><md-radio-button flex value=general>General</md-radio-button><md-radio-button flex value=unidad>Unidad</md-radio-button></md-radio-group><label>Numeración de pagina</label><md-radio-group layout layout-wrap ng-model=item.val.element[0].templateOptions.numeracionPagina><md-radio-button flex value=true>Si</md-radio-button><md-radio-button flex value=false>No</md-radio-button></md-radio-group><!-- <label>¿Se puede generar de manera multiple?</label>\\n                <md-radio-group layout layout-wrap ng-model=\\\"item.val.element[0].templateOptions.generacionMultiple\\\">\\n                  <md-radio-button flex value=\\\"true\\\"> Si </md-radio-button>\\n                  <md-radio-button flex value=\\\"false\\\"> No </md-radio-button>\\n                </md-radio-group> --></div><div ng-switch-when=layout layout=column><label>Número de elementos</label><md-radio-group layout layout-wrap class=radio-parrafo ng-model=\\\"item.val.element[0].elementAttributes[\\'num-cols\\']\\\"><md-radio-button ng-value=\\\"\\'2\\'\\\">2</md-radio-button><md-radio-button ng-value=\\\"\\'3\\'\\\">3</md-radio-button><md-radio-button ng-value=\\\"\\'4\\'\\\">4</md-radio-button></md-radio-group></div><div ng-switch-when=vacio layout=column><md-input-container class=ap-input-ns><label>Altura en cm (0, 30)</label><input ng-model=item.val.element[0].templateOptions.height></md-input-container></div><div ng-switch-when=datosGenerales layout=column><md-checkbox ng-model=item.val.element[0].templateOptions.aprobarPorDireccion>Aprobar por dirección</md-checkbox><div layout layout-wrap class=radio-parrafo><md-checkbox ng-model=item.val.element[0].templateOptions.show.via>Via</md-checkbox><md-checkbox ng-model=item.val.element[0].templateOptions.show.ref>Ref</md-checkbox><md-checkbox ng-model=item.val.element[0].templateOptions.showItem>Mostrar en PDF</md-checkbox></div><md-input-container class=ap-input-ns><label>Texto referencia</label><input ng-model=item.val.element[0].templateOptions.labelRef></md-input-container></div><div ng-switch-when=encabezado layout=column><div layout layout-wrap class=radio-parrafo><md-checkbox ng-model=item.val.element[0].templateOptions.show.via>Via</md-checkbox><md-checkbox ng-model=item.val.element[0].templateOptions.show.ref>Ref</md-checkbox></div><md-input-container class=ap-input-ns><label>Texto referencia</label><input ng-model=item.val.element[0].templateOptions.labelRef></md-input-container></div><div ng-switch-when=documentosRelacionados layout=column><md-input-container class=ap-input-ns><label>Texto</label><input ng-model=item.val.element[0].templateOptions.label></md-input-container><!-- <label>Espacio de texto = {{item.val.element[0].templateOptions.labelw-5}}</label>\\n                    <md-slider flex min=\\\"5\\\" max=\\\"80\\\" ng-model=\\\"item.val.element[0].templateOptions.labelw\\\" step=\\\"5\\\" aria-label=\\\"remdes-width\\\">\\n                </md-slider> --></div><div ng-switch-when=documentosAnular layout=column><md-input-container class=ap-input-ns><label>Texto</label><input ng-model=item.val.element[0].templateOptions.label></md-input-container></div><div ng-switch-when=archivo layout=column><md-input-container class=ap-input-ns><label>Texto</label><input ng-model=item.val.element[0].templateOptions.label></md-input-container><md-checkbox ng-model=item.val.element[0].templateOptions.multiple>Multiple ?</md-checkbox></div><div ng-switch-when=cajachica layout=column><md-input-container><label>Acción</label><md-select ng-model=item.val.element[0].templateOptions.tipo><md-option value=GESTION>GESTION PARTIDAS</md-option><md-option value=COMPROMETIDO>COMPROMETIDO</md-option><md-option value=PAGADO>PAGADO</md-option></md-select></md-input-container><!-- <md-checkbox ng-model=\\\"item.val.element[0].templateOptions.show.cite\\\"> Cite ?  </md-checkbox>\\n                <md-checkbox ng-model=\\\"item.val.element[0].templateOptions.show.pagado\\\"> Pagado ?  </md-checkbox>\\n\\n                <label>Partidas</label>\\n                <md-chips ng-model=\\\"item.val.element[0].templateOptions.partidas\\\"></md-chips>\\n                <label>Acciones</label>\\n                <md-chips ng-model=\\\"item.val.element[0].templateOptions.acciones\\\"></md-chips> --><!-- <md-input-container class=\\\"ap-input-ns\\\">\\n                    <label>Texto</label>\\n                    <input ng-model=\\\"item.val.element[0].templateOptions.label\\\">\\n                </md-input-container> --><!-- <md-checkbox ng-model=\\\"item.val.element[0].templateOptions.multiple\\\"> Multiple ?  </md-checkbox> --></div><div ng-switch-when=certificacionComprometido layout=column><md-input-container class=ap-input-ns><label>Titulo</label><input ng-model=item.val.element[0].templateOptions.label></md-input-container></div><div ng-switch-when=listaContactos layout=column><md-input-container class=ap-input-ns><label>Título</label><input ng-model=item.val.element[0].templateOptions.label></md-input-container></div><div ng-switch-default layout=column>Falta codigo para este</div></div></md-card-content><md-card-actions layout=row layout-align=\\\"end center\\\"><md-button class=md-primary ng-click=xeditItem()>Aceptar</md-button><!-- <md-button ng-click=\\\"xremoveItem()\\\"> Eliminar </md-button> --><md-button ng-click=xcancelEditItem()>Cancelar</md-button></md-card-actions></md-card>\");\n$templateCache.put(\"app/modules/plantillasFormly/plantillas/plantilla/modules.plantillasFormly.plantillas.plantilla.html\",\"<div class=container-plantilla><section layout><md-content flex class=documento><div class=header-plantillas layout layout-align=\\\"start center\\\"><md-button class=\\\"md-fab md-primary\\\" ng-click=plantilla.guardarPlantilla()><md-icon>save</md-icon><md-tooltip md-direction=right>{{ (plantilla.id_plantilla==0)? \\'Guardar plantilla\\' : \\'Modificar plantilla\\' }}</md-tooltip></md-button><md-menu><md-button aria-label=\\\"open menu\\\" class=\\\"md-fab md-primary\\\" md-menu-origin ng-click=$mdOpenMenu($event)><md-icon>location_searching</md-icon><md-tooltip md-direction=right>Ver json de estructura</md-tooltip></md-button><md-menu-content class=menu-content-json width=4 style=\\\"max-width: 400px\\\"><h3>Cuerpo json del formulario</h3><pre>{{plantilla.data | json}}</pre></md-menu-content></md-menu><md-button class=\\\"md-fab md-primary\\\" ng-click=plantilla.vistaPrevia() ng-if=!plantilla.vista_previa><md-icon>visibility</md-icon><md-tooltip md-direction=right>Vista previa</md-tooltip></md-button><md-button class=\\\"md-fab md-primary\\\" ng-click=\\\"plantilla.vista_previa=false\\\" ng-if=plantilla.vista_previa><md-icon>visibility_off</md-icon><md-tooltip md-direction=right>Cancelar vista previa</md-tooltip></md-button><md-menu ng-if=plantilla.vista_previa><md-button aria-label=\\\"open menu\\\" class=\\\"md-fab md-primary\\\" md-menu-origin ng-click=$mdOpenMenu($event)><md-icon>location_searching</md-icon><md-tooltip md-direction=right>Ver json de valores</md-tooltip></md-button><md-menu-content class=menu-content-json width=4 style=\\\"max-width: 400px\\\"><h3>Cuerpo json de valores</h3><pre>{{plantilla.form_model | json}}</pre></md-menu-content></md-menu><md-button class=\\\"md-fab md-primary\\\" ng-click=plantilla.verPdf() ng-if=plantilla.vista_previa><md-icon>picture_as_pdf</md-icon><md-tooltip md-direction=right>Ver pdf</md-tooltip></md-button><div flex=10 ng-if=!plantilla.vista_previa></div><md-input-container><label for=plantilla-nombre>Nombre de la plantilla</label><input ng-model=plantilla.nombre size=50 ng-disabled=plantilla.existe_documento required></md-input-container><!-- <md-input-container>\\n                    <label for=\\\"plantilla-abreviacion\\\">Abreviación</label>\\n                    <input ng-model=\\\"plantilla.abreviacion\\\" required ng-disabled=\\\"plantilla.existe_documento\\\" ng-keyup=\\\"plantilla.abreviacion=plantilla.abreviacion.toUpperCase()\\\">\\n                </md-input-container> --><div flex><!-- <md-button class=\\\"md-fab md-primary\\\" ng-click=\\\"plantilla.togglePalette($event)\\\" >\\n                        <md-icon>\\n                            reorder\\n                        </md-icon>\\n                        <md-tooltip>\\n                            Abrir paleta\\n                        </md-tooltip>\\n                    </md-button> --></div></div><div class=pagina ng-if=plantilla.vista_previa><form name=plantilla.formu_prueba novalidate><img class=img-membrete ng-src={{plantilla.url_img}} ng-if=plantilla.url_img><formly-form class=view-formly-form model=plantilla.form_model fields=plantilla.form_previo></formly-form></form></div><div class=pagina ng-if=!plantilla.vista_previa><img class=img-membrete ng-src={{plantilla.url_img}} ng-if=plantilla.url_img><md-card-content class=lista dnd-list=plantilla.items dnd-drop=\\\"plantilla.dropCallback(index, item)\\\"><p class=content-drop ng-if=\\\"plantilla.items.length == 0\\\">Arrastre alg&uacute;n elemento en esta secci&oacute;n o haga clic en el bot&oacute;n \\'+\\' de alg&uacute;n elemento</p><div class=div-{{item.val.element[0].type}} ng-repeat=\\\"item in plantilla.items\\\" ng-show=!item.notvisualize><div class=column layout layout-align=\\\"center center\\\" ng-switch on=item.val.element[0].type><div flex ng-switch-when=layout><div ng-class=\\\"\\'sublista-\\'+item.val.element[0].elementAttributes[\\'num-cols\\']\\\" dnd-list=item.val.element[0].fieldGroup dnd-drop=\\\"plantilla.dropLayoutCallback(index, item, $index)\\\"><div ng-class=\\\"\\'div-li-\\'+item.val.element[0].elementAttributes[\\'num-cols\\']\\\" ng-if=\\\"item.val.element[0].fieldGroup.length==0\\\" class=layout-drop>&nbsp;&nbsp;&nbsp;Puede arrastrar alg&uacute;n elemento en esta secci&oacute;n</div><div ng-class=\\\"\\'div-li-\\'+item.val.element[0].elementAttributes[\\'num-cols\\']\\\" ng-repeat=\\\"subitem in item.val.element[0].fieldGroup\\\" ng-mouseover=\\\"layoutIndex=$parent.$index\\\"><div layout layout-align=\\\"center center\\\" ng-switch on=subitem.val.element[0].type ng-show=!subitem.notvisualize><!-- <pre>{{subitem | json}}</pre> --><div flex ng-switch-when=layout>No puede añadir contenedores dentro de contenedores</div><div flex ng-switch-default><formly-form class=view-formly-form model=subitem.val.model fields=subitem.val.element></formly-form></div><div layout=column><md-icon class=\\\"ap-text-success ap-cursor-pointer\\\" dnd-draggable=subitem.val.element[0] dnd-effect-allowed=move dnd-dragstart=\\\"plantilla.startLayoutCallback($index, subitem, layoutIndex)\\\" dnd-dragend=plantilla.endLayoutCallback(layoutIndex) ng-click=\\\"plantilla.openMenu(subitem, $event, $index, layoutIndex)\\\"><md-tooltip>Click para editar o puede arrastrar</md-tooltip>blur_on</md-icon><md-icon class=\\\"ap-cursor-pointer ap-text-error\\\" ng-click=\\\"plantilla.removeItem(item, $index, layoutIndex)\\\"><md-tooltip>Eliminar</md-tooltip>delete</md-icon></div></div></div></div></div><div flex ng-switch-default><formly-form class=view-formly-form model=item.val.model fields=item.val.element></formly-form></div><div layout=column><md-icon class=ap-cursor-pointer dnd-draggable=item.val.element[0] dnd-effect-allowed=move dnd-dragstart=\\\"plantilla.startCallback($index, item)\\\" dnd-dragend=plantilla.endCallback() ng-click=\\\"plantilla.openMenu(item, $event, $index)\\\"><md-tooltip>Click para editar o puede arrastrar</md-tooltip>blur_on</md-icon><md-icon class=\\\"ap-cursor-pointer ap-text-error\\\" ng-click=\\\"plantilla.removeItem(item, $index)\\\" ng-if=\\\"item.val.element[0].type!=\\'cite\\'\\\"><md-tooltip>Eliminar</md-tooltip>delete</md-icon></div></div></div></md-card-content></div><div flex></div><br><br><br><br><br><br><br><br><br><br><br></md-content><md-sidenav class=\\\"md-sidenav-right ap-sidenav-right md-whiteframe-1dp\\\" md-component-id=right md-disable-backdrop md-is-locked-open=\\\"$mdMedia(\\'gt-sm\\')\\\"><md-content><!-- <md-card-title-text>\\n                    <span class=\\\"md-headline\\\">Paleta</span>\\n                </md-card-title-text> --><palette-formly funcion-agregar=plantilla.funcionAgregar></palette-formly></md-content></md-sidenav></section></div>\");}]);"]}