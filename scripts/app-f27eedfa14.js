!function(){"use strict";angular.module("app",["ngSanitize","ui.router","ngMaterial","md.data.table","formlyMaterial","satellizer","dndLists","angularFileUpload","leaflet-directive","rzModule","angular-timeline","naif.base64","angular-bind-html-compile","ngCsv"])}(),function(){"use strict";function e(e,t,o,n,i,a,r,l,d,s,c,m,u){function p(){0==R.id_plantilla?(R.implicados=[],R.items=[T(e.newTemplate("cite"))],R.data=[e.newTemplate("cite")],R.nombre="Nueva plantilla"):l.get(d+"plantillasFormly/plantilla_formly/"+R.id_plantilla).then(function(e){R.nombre=e.datos.nombre,R.abreviacion=e.datos.abreviacion,R.form_model=angular.fromJson(e.datos.plantilla_valor),R.items=v(angular.fromJson(e.datos.plantilla)),R.data=angular.fromJson(e.datos.plantilla);for(var t=0;t<R.data.length;t++)"datosGenerales"==R.data[t].type&&(R.existe_datosGenerales=!0),"certificacionComprometido"==R.data[t].type&&(R.existe_certificacionComprometido=!0);return A(R.data[0]),l.get(d+"plantillasFormly/documento/?abreviacion="+R.abreviacion)}).then(function(e){e.datos.total>0&&(R.existe_documento=!0)})}function f(e){a.log("evento toggle-> ",e),r("right").toggle()}function g(){R.form_previo=e.dataToView(R.data),angular.isObject(R.form_model)&&(R.form_model=e.clearModel(R.data,R.form_model)),R.vista_previa=!0}function h(){var e,o=angular.copy(R.form_model);if(R.nombre){for(var n in o)n.indexOf("editorTexto")===-1&&n.indexOf("textarea")===-1?delete o[n]:""==o[n]&&delete o[n];var a={nombre:R.nombre,plantilla:angular.toJson(R.data),plantilla_valor:angular.toJson(o),_usuario_creacion:G.id};e=R.existe_documento?R.abreviacion:u.generarAbreviacion(R.nombre),l.get(d+"plantillasFormly/plantilla_formly/abreviacion/"+e).then(function(e){if(e&&angular.isDefined(e.datos))return e.datos;throw new Error("sin respuesta")}).then(function(o){var n,r,s,c=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],m={A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,I:9,J:10,K:11,L:12,M:13,N:14,O:15,P:16,Q:17,R:18,S:19,T:20,U:21,V:22,W:23,X:24,Y:25,Z:26};if(r=-1,s=!1,o.rows.count){n=o.rows.rows[0].abreviacion.split("-"),r=m[n[1]];for(var u=0;u<o.rows.rows.length;u++)n=o.rows.rows[u].abreviacion.split("-"),o.rows.rows[u].num=n[1],m[n[1]]>r&&(r=m[n[1]]),o.rows.rows[u].abreviacion==R.abreviacion&&(s=!0);r++,e+="-"+c[r]}R.id_plantilla>0&&o.row.rows[0]&&o.row.rows[0].id_plantilla_formly==R.id_plantilla&&(e=R.abreviacion),R.id_plantilla>0&&s&&(e=R.abreviacion),0==R.id_plantilla&&r==-1&&1==o.row.count&&(e+="-A"),a.abreviacion=e,0==R.id_plantilla?(a._usuario_creacion=G.id,l.post(d+"plantillasFormly/plantilla_formly",a).then(function(e){t.show(e.tipoMensaje,e.mensaje),i.path("plantillas")})):(a._usuario_modificacion=G.id,l.put(d+"plantillasFormly/plantilla_formly/"+R.id_plantilla,a).then(function(e){t.show(e.tipoMensaje,e.mensaje),i.path("plantillas")}))})}else t.error("Debe llenar nombre y abreviacion")}function v(t){for(var o=[],n=0;n<t.length;n++)if("layout"!==t[n].type)o.push(T(t[n]));else{for(var i=[],a=0;a<t[n].fieldGroup.length;a++)i.push(T(e.getConfigItem(t[n].fieldGroup[a])));t[n].fieldGroup=i,o.push(T(t[n]))}return o}function b(e,t){t.notvisualize=!0,N=e}function y(){null!==M?(N<M&&M--,c.mover(R.items,N,M),c.mover(R.data,N,M),delete R.items[M].notvisualize,N=null,M=null):(null!==U?"layout"!==R.items[N].val.element[0].type?L.length<z?(0==L.length&&(U=0),c.mover(R.items,N,U,L),c.mover(R.data,N,U,V),delete L[U].notvisualize):(delete R.items[N].notvisualize,t.error("No puede añadir mas elementos")):(delete R.items[N].notvisualize,t.error("No puede añadir contenedores dentro de contenedores")):delete R.items[N].notvisualize,N=null,U=null)}function _(o,n){if(j)j=!1;else if(null==N&&null==$){var i=n;try{var a="La plantilla solo puede tener un elemento ";if(R.existe_datosGenerales&&"datosGenerales"==i)throw Error(a+i);if(R.existe_certificacionComprometido&&"certificacionComprometido"==i)throw Error(a+i);"datosGenerales"==i&&(R.existe_datosGenerales=!0),"certificacionComprometido"==i&&(R.existe_certificacionComprometido=!0),n=e.newTemplate(i);var r=T(n);0==R.data.length&&(o=0),c.insert(R.items,o,r),c.insert(R.data,o,e.getConfigItem(n)),delete R.data[o].validation}catch(l){"Error"==l.name&&t.error(l.message)}}else M=o}function w(e,t,o){t.notvisualize=!0,$=e,q=R.items[o].val.element[0].fieldGroup,B=R.data[o].fieldGroup}function x(){null!==U?(L===q?($<U&&U--,c.mover(q,$,U),c.mover(B,$,U),delete q[U].notvisualize):(0==L.length&&(U=0),c.mover(q,$,U,L),c.mover(B,$,U,V),delete L[U].notvisualize),$=null,U=null):(null!==M?(c.mover(q,$,M,R.items),c.mover(B,$,M,R.data),delete R.items[M].notvisualize):delete q[$].notvisualize,$=null,M=null)}function k(o,n,i){if(j=!0,L=R.items[i].val.element[0].fieldGroup,V=R.data[i].fieldGroup,z=R.items[i].val.element[0].elementAttributes["num-cols"],null==$&&null==N){var a=n;n=e.newTemplate(a);var r=T(n);"layout"!=a?L.length<z?(0==L.length&&(o=0),c.insert(L,o,r),c.insert(V,o,e.getConfigItem(n)),delete V[o].validation):t.error("No puede añadir mas elementos"):t.error("No puede añadir contenedores dentro de contenedores")}else U=o}function C(o){try{if(R.existe_datosGenerales&&"datosGenerales"==o)throw Error("La plantilla solo puede tener un elemento "+o);if(R.existe_certificacionComprometido&&"certificacionComprometido"==o)throw Error("La plantilla solo puede tener un elemento "+o);"datosGenerales"==o&&(R.existe_datosGenerales=!0),"certificacionComprometido"==o&&(R.existe_certificacionComprometido=!0);var n=e.newTemplate(o),i=T(n);R.items.push(i),R.data.push(e.getConfigItem(n)),delete R.data[R.data.length-1].validation}catch(a){"Error"==a.name&&t.error(a.message)}}function D(t,o,n){var i;if(angular.isDefined(o)&&o(n),t.init=e.getConfigItem(t.val.element[0]),"radio"==t.val.element[0].type||"select"==t.val.element[0].type){t.val.element[0].opciones=[];for(i in t.val.element[0].templateOptions.options)t.val.element[0].opciones.push(t.val.element[0].templateOptions.options[i].value);t.val.element[0].opciones.push=function(){Array.prototype.push.apply(this,arguments),t.val.element[0].templateOptions.options.push({value:arguments[0],id:arguments[0]})},t.val.element[0].opciones.splice=function(){Array.prototype.splice.apply(this,arguments),t.val.element[0].templateOptions.options.splice(arguments[0],arguments[1])}}if("lista"==t.val.element[0].type){t.val.element[0].opciones=[];for(i in t.val.element[0].templateOptions.options)t.val.element[0].opciones.push(t.val.element[0].templateOptions.options[i]);t.val.element[0].opciones.push=function(){Array.prototype.push.apply(this,arguments),t.val.element[0].templateOptions.options.push(arguments[0])},t.val.element[0].opciones.splice=function(){Array.prototype.splice.apply(this,arguments),t.val.element[0].templateOptions.options.splice(arguments[0],arguments[1])}}}function A(e){var t=e.templateOptions;switch(t.tipoMembrete){case"sin membrete":R.url_img=null;break;case"externo":R.url_img=m+"public/membrete.png";break;default:R.url_img=null}}function O(t,o,n){var i,a;if(angular.isUndefined(n)){if(i=R.items.splice(o,R.data.length),i.shift(),a=T(),a.val.element.push(e.getConfigItem(t.val.element[0])),i.unshift(a),R.items=R.items.concat(i),R.data[o]=e.getConfigItem(t.val.element[0]),"layout"==R.data[o].type){for(var r=[],l=0;l<R.data[o].fieldGroup.length;l++)r.push(e.getConfigItem(R.data[o].fieldGroup[l].val.element[0])),delete r[r.length-1].validation;R.data[o].fieldGroup=r}delete R.data[o].validation,"cite"==R.data[o].type&&A(R.data[o])}else i=R.items[n].val.element[0].fieldGroup.splice(o,R.data[n].fieldGroup.length),i.shift(),a=T(),a.val.element.push(e.getConfigItem(t.val.element[0])),i.unshift(a),R.items[n].val.element[0].fieldGroup=R.items[n].val.element[0].fieldGroup.concat(i),R.data[n].fieldGroup[o]=e.getConfigItem(t.val.element[0]),delete R.data[n].fieldGroup[o].validation,"cite"==R.data[n].fieldGroup[o].type&&A(R.data[n].fieldGroup[o])}function I(e,t,o){angular.isUndefined(o)?("datosGenerales"==R.data[t].type&&(R.existe_datosGenerales=!1),"certificacionComprometido"==R.data[t].type&&(R.existe_certificacionComprometido=!1),R.items.splice(t,1),R.data.splice(t,1)):("datosGenerales"==R.data[o].fieldGroup[t].type&&(R.existe_datosGenerales=!1),"certificacionComprometido"==R.data[t].type&&(R.existe_certificacionComprometido=!1),R.items[o].val.element[0].fieldGroup.splice(t,1),R.data[o].fieldGroup.splice(t,1))}function E(e){e.val.element.shift(),e.val.element.push(e.init)}function T(e){return{val:{element:e?[e]:[],model:{}},init:{}}}function P(e,t,o,n){var i={item:e,index:o,index_l:n},a={event:t,data:i,clickOutsideToClose:!1,escapeToClose:!1,controller:["$scope","$mdPanel","data","mdPanelRef",S],templateUrl:"app/modules/plantillasFormly/plantillas/plantilla/item.panel.html"};s.show(a)}function S(e,t,o,n){function i(){R.editItem(o.item,o.index,o.index_l),l()}function a(){R.removeItem(o.item,o.index,o.index_l),l()}function r(){R.cancelEditItem(o.item),l()}function l(){n&&n.close().then(function(){n.destroy()})}var d=e;d.item=o.item,d.input_valid=null,d.validaciones=null,d.titulos={datosGenerales:"Datos generales",inputt:"Asunto",editorTexto:"Editor de texto",documentosRelacionados:"Documentos relacionados",titulo:"Título",subtitulo:"Subtítulo",parrafo:"Párrafo",lista:"Lista",layout:"Contenedor",vacio:"Espacio",input:"Campo de texto ",radio:"Selección radio",select:"Selección simple",select_multiple:"Selección multiple",textarea:"Area de texto",checkbox:"Checkbox",datepicker:"Calendario",slider:"Deslizador","switch":"Interruptor",chips:"Palabras clave",cajachica:"Caja chica",certificacionComprometido:"Certificación comprometido",listaContactos:"Lista de contactos"},d.xeditItem=i,d.xremoveItem=a,d.xcancelEditItem=r,R.openEditItem(d.item),d.validaciones=[{name:"Ninguno",pattern:""},{name:"Solo texto",pattern:"([a-zA-Zñáéíóú]+ ?)+"},{name:"Solo números",pattern:"\\d+"},{name:"Texto y números",pattern:"([a-zA-Z0-9ñáéíóú]+ ?)+"},{name:"Hora 24hrs",pattern:"^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$"},{name:"Email",pattern:'^(([^<>()\\[\\]\\\\.,;:\\s@"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$'}]}function F(){0==e.sizeObj(R.formu_prueba.$error)?u.showPdf(angular.toJson(R.data),angular.toJson(R.form_model),"prueba"):e.recursiveShowError(R.formu_prueba.$error)}var R=this,N=null,M=null,$=null,U=null,j=!1,q=null,B=null,L=null,V=null,z=null,G=o.getUser();R.id_plantilla=n.idPlantilla,R.form_model={},R.items=[],R.data=[],R.existe_documento=!1,R.existe_datosGenerales=!1,R.existe_certificacionComprometido=!1,R.url_img=null,R.funcionAgregar=C,R.editItem=O,R.removeItem=I,R.openEditItem=D,R.cancelEditItem=E,R.dropCallback=_,R.endCallback=y,R.startCallback=b,R.dropLayoutCallback=k,R.endLayoutCallback=x,R.startLayoutCallback=w,R.guardarPlantilla=h,R.vistaPrevia=g,R.verPdf=F,R.openMenu=P,R.togglePalette=f,p()}e.$inject=["UtilFormly","Message","Storage","$stateParams","$location","$log","$mdSidenav","DataService","restUrl","Panel","ArrayUtil","backUrl","Documento"],angular.module("app").controller("PlantillaController",e)}(),function(){"use strict";function e(e,t,o,n,i,a,r,l,d,s,c,m){function u(){P.enviarEjecutandose=0,0==P.id_documento?null!=a.getSession("pl")?(g(a.getSession("pl")),P.sw_enviado=!1,p(),P.load=!0,m.initAutoSave(_,!1),n.show("INFORMACION","No olvide guardar sus cambios cada 40 minutos, de lo contrario se perderán.")):l.path("documentos"):e.get(t+"plantillasFormly/documento/"+P.id_documento).then(function(e){if(a.setSession("pl",e.datos),e.datos._usuario_creacion!=S.id&&l.path("documentos"),g(e.datos,!0),P.sw_rechazado="RECHAZADO"==e.datos.estado,P.sw_enviado="NUEVO"!=e.datos.estado&&!P.sw_rechazado,i.disableForm(P.form_actual,P.sw_enviado),P.sw_enviado){var t={via_actual:e.datos.via_actual,para:angular.fromJson(e.datos.para),via:angular.fromJson(e.datos.via)};a.setSession("flujo_doc",t)}m.initAutoSave(_,P.sw_enviado),n.show("INFORMACION","No olvide guardar sus cambios cada 40 minutos, de lo contrario se perderán."),p(),P.load=!0})}function p(){for(var e,t=!0,o=angular.fromJson(P.doc.plantilla),n=0;n<o.length;n++){if("layout"==o[n].type)for(var i=0;i<o[n].fieldGroup.length;i++)"datepicker"==P.form_actual[n].fieldGroup[i].type&&(e=(new Date).getTimezoneOffset(),t=240==e);else"datepicker"==P.form_actual[n].type&&(e=(new Date).getTimezoneOffset(),t=240==e);if(!t)break}t||P.sw_enviado||k("timeZone")}function f(){o.confirm("¿Esta seguro de que quiere crear otro documento igual a este?",function(){var o=angular.copy(P.model_actual);delete o["cite-0"],o["listaContactos-0"]&&o["listaContactos-0"].contacto&&delete o["listaContactos-0"].contacto;var i={nombre:P.doc.nombre_plantilla,nombre_plantilla:P.doc.nombre_plantilla,abreviacion:P.doc.abreviacion,plantilla:P.doc.plantilla,plantilla_valor:angular.toJson(o),observaciones:null},r={nombre:i.nombre,abreviacion:i.abreviacion,plantilla:i.plantilla};e.post(t+"plantillasFormly/plantilla_formly/verificar",r).then(function d(d){d.datos.valido===!0?(a.setSession("pl",i),l.path("documento/0")):n.show("ERROR","La plantilla ya no existe o no se encuetra activa. El documento no se puede duplicar.")})})}function g(o,n){P.model_actual=null==o.plantilla_valor?{}:angular.fromJson(o.plantilla_valor),n?P.form_actual=i.dataToView(angular.fromJson(o.plantilla),P.model_actual):P.form_actual=i.dataToView(angular.fromJson(o.plantilla)),v(P.form_actual[0]),P.doc.nombre=n?o.nombre:o.nombre+" - "+S.first_name+" "+S.last_name,P.doc.nombre_plantilla=n?o.nombre_plantilla:o.nombre,P.doc.abreviacion=o.abreviacion,P.doc.plantilla=o.plantilla,P.doc.observaciones=n?o.observaciones:null,P.sw_es_respuesta=o.documento_padre||!1,P.sw_es_respuesta&&(P.doc.documento_padre=o.documento_padre),P.sw_grupo=o.grupo||!1,P.sw_grupo&&e.get(t+"plantillasFormly/documento/?fields=id_documento,nombre,nombre_plantilla&estado=DERIVADO,CERRADO,APROBADO&sort=_fecha_creacion&grupo="+o.grupo).then(function(e){P.docs_grupo=e.datos.resultado})}function h(e){c.showPdfId(e,!1)}function v(e){var t=e.templateOptions||"sin membrete";switch(t.tipoMembrete){case"sin membrete":P.url_img=null;break;case"externo":P.url_img=d+"public/membrete.png"}}function b(e,t){if(t){var o,n,i,a;for(o=n="para",e[o]=angular.toJson([P.model_actual["datosGenerales-0"][n].id_usuario]),o=n="via",i=P.model_actual["datosGenerales-0"][n]||[],e[o]=[],a=0;a<i.length;a++)e[o].push(i[a].id_usuario);for(e[o]=angular.toJson(e[o].reverse()),o=n="de",i=P.model_actual["datosGenerales-0"][n],e[o]=[],a=0;a<i.length;a++)e[o].push(i[a].id_usuario);e[o]=angular.toJson(e[o]),o="referencia",n="ref",e[o]=P.model_actual["datosGenerales-0"][n]}}function y(e){for(var t,o=0;o!=-1&&(t=e["archivo-"+o],!angular.isUndefined(t));)angular.isUndefined(t.length)&&(e["archivo-"+o]=[t]),o++;return angular.toJson(e)}function _(o,i){if(!(P.enviarEjecutandose>1)){var r={nombre:P.doc.nombre,nombre_plantilla:P.doc.nombre_plantilla,abreviacion:P.doc.abreviacion,plantilla:P.doc.plantilla,plantilla_valor:y(angular.copy(P.model_actual))};P.sw_es_respuesta&&(r.documento_padre=P.doc.documento_padre),P.sw_enviado||b(r,o),0==P.id_documento?r._usuario_creacion=S.id:(r._usuario_modificacion=S.id,r.id=P.id_documento),r.sw={enviar:o,enviado:P.sw_enviado,es_respuesta:P.sw_es_respuesta},e.save(t+"plantillasFormly/documento/",r).then(function(e){i?0==P.id_documento&&l.path("documento/"+e.datos.id_documento):(n.show(e.tipoMensaje,e.mensaje),l.path("documentos"),a.removeSession("pl")),P.enviarEjecutandose=0})}}function w(e){P.enviarEjecutandose+=1,e?0==i.sizeObj(P.formu.$error)?_(e):(i.recursiveShowError(P.formu.$error),n.show("ERROR","Debe llenar todos los campos marcados con rojo porque son requeridos".toUpperCase()),k("formu"),P.enviarEjecutandose=0):_()}function x(){if(!(P.enviarEjecutandose>1)){var o={nombre:P.doc.nombre,nombre_plantilla:P.doc.nombre_plantilla,abreviacion:P.doc.abreviacion,plantilla:P.doc.plantilla,plantilla_valor:y(angular.copy(P.model_actual))};P.sw_es_respuesta&&(o.documento_padre=P.doc.documento_padre),P.sw_enviado||b(o,!0),0==P.id_documento?o._usuario_creacion=S.id:(o._usuario_modificacion=S.id,o.id=P.id_documento),o.sw={enviar:!0,enviado:P.sw_enviado,es_respuesta:P.sw_es_respuesta},e.save(t+"plantillasFormly/documento/",o).then(function(e){0==P.id_documento&&l.path("documento/"+e.datos.id_documento),P.enviarEjecutandose=0})}}function k(e){var t={data:e,templateUrl:"app/modules/plantillasFormly/documentos/documento/dialogError.html",controller:["data","$scope","$mdDialog",C]};o.show(t)}function C(e,t,o){var n=t;n.data={tipo:e},n.cerrar=function(){o.cancel()}}function D(){l.path("documentos")}function A(){0==i.sizeObj(P.formu.$error)?c.showPdf(P.doc.plantilla,angular.toJson(P.model_actual),P.doc.nombre):(n.show("INFORMACION","Antes de visualizar el documento debe llenar todos los campos requeridos."),i.recursiveShowError(P.formu.$error))}function O(){var e={data:"",templateUrl:"app/modules/firmador/modules.firmador.html",controller:["data","$scope","$mdDialog","Util","DemofiService",I]};o.show(e)}function I(e,t,o,n,i){function a(){s.iniciando===!1&&(s.iniciando=!0,i.listTokens().then(function(e){s.iniciando=!1,s.iniciado=!0,s.demofi_ejecutandose=!0,s.tokens=e.datos,s.token_conectado=e.datos.length>0})["catch"](function(){s.iniciando=!1,s.iniciado=!0,s.token_conectado=!1,s.demofi_ejecutandose=!1}))}function r(){s.mostrar_progress=!0,s.autenticando=!0,i.login(s.pin).then(function(e){s.mostrar_progress=!1,s.autenticando=!1,e.finalizado===!0&&(s.boton_autenticar_habilitado=!1,s.autenticado=!0,i.listCertificates().then(function(e){s.certificados=e.datos,s.certificados[0]&&(s.certificado_seleccionado=s.certificados[0])}))})["catch"](function(){s.mostrar_progress=!1,s.autenticando=!1,s.pin=void 0,s.autenticado=!1,s.boton_autenticar_habilitado=!0})}function l(){i.verificarServidor()}function d(){o.cancel()}var s=t;s.data={},s.iniciado=!1,s.pin=void 0,s.tokens=[],s.certificados=[],s.iniciado=!1,s.iniciando=!1,s.certificado_seleccionado=void 0,s.autenticado=!1,s.autenticando=!1,s.demofi_ejecutandose=!1,s.token_conectado=!1,s.boton_autenticar_habilitado=!1,s.mostrar_progress=!1,s.data.html=e.html,s.data.pdf=e.pdf,s.data.flag_html=!0,s.data.show_pdf=!e.esDispositivoMovil,e.esDispositivoMovil&&n.loadCanvas(e.pdf_buffer,"#canvasContainer"),s.verificarTokenConectado=a,s.autenticar=r,s.cancelar=d,s.verificarServidor=l,a()}function E(e){var t={observacion:P.doc.observaciones||"El documento esta mal"},o={event:e,data:t,controller:["$scope","data","mdPanelRef",T],templateUrl:"app/modules/plantillasFormly/documentos/documento/observacion.panel.html"};s.show(o)}function T(e,t,o){function n(){o&&o.close().then(function(){o.destroy()})}var i=e;i.observacion=t.observacion,i.closePanel=n}var P=this,S=a.getUser();P.id_documento=r.idDocumento,P.load=!1,P.model_actual={},P.form_actual=[],P.doc={},P.sw_enviado=!0,P.sw_rechazado=!1,P.url_img=null,P.cargarPlantilla=g,P.guardarDocumento=w,P.enviarMultiple=x,P.vistaPrevia=A,P.firmar=O,P.volverAtras=D,P.verObservaciones=E,P.verDocumento=h,P.copearDocumento=f,u()}e.$inject=["DataService","restUrl","Modal","Message","UtilFormly","Storage","$stateParams","$location","backUrl","Panel","Documento","ExpirationTime"],angular.module("app").controller("DocumentoController",e)}(),function(){"use strict";function e(e,t){function o(e,t,o,n,a,r,l){function d(){m.data.id_rol?a.get(r+"seguridad/menu?limit=1000&estado=ACTIVO").then(function(e){return m.menus=e.datos.resultado,a.get(r+"seguridad/rol/"+m.data.id_rol+"/menu")}).then(function(e){m.rol_menus=e.datos;for(var t=0;t<m.rol_menus.length;t++)for(var o=0;o<m.menus.length;o++)m.rol_menus[t].fid_menu==m.menus[o].id_menu&&(m.menus[o].checked="ACTIVO"==m.rol_menus[t].estado,o=m.menus.length)}):a.get(r+"seguridad/menu?limit=1000&estado=ACTIVO").then(function(e){m.menus=e.datos.resultado})}function s(){var e={rol:{id_rol:m.data.id_rol,nombre:m.data.nombre,descripcion:m.data.descripcion,peso:m.data.peso,estado:m.data.estado},menus:[]};if(m.data.id_rol){e.rol._usuario_modificacion=i.id,e.menus_nuevos=[];for(var o=0;o<m.menus.length;o++){for(var d=!1,s=0;s<m.rol_menus.length;s++)m.menus[o].id_menu==m.rol_menus[s].fid_menu&&(m.rol_menus[s].estado=m.menus[o].checked?"ACTIVO":"INACTIVO",m.rol_menus[s]._usuario_modificacion=i.id,delete m.rol_menus[s]._fecha_creacion,delete m.rol_menus[s]._fecha_modificacion,e.menus.push(angular.fromJson(angular.toJson(m.rol_menus[s]))),d=!0,s=m.rol_menus.length);!d&&m.menus[o].checked&&e.menus_nuevos.push(m.menus[o].id_menu)}a.put(r+"seguridad/rol/"+m.data.id_rol+"/menu",e).then(function(e){t.show(e.tipoMensaje,e.mensaje),n.hide(),l(function(){angular.element("#btn-refresh-crudtable").click()},500)})}else{for(e.rol._usuario_creacion=i.id,o=0;o<m.menus.length;o++)m.menus[o].checked&&e.menus.push(m.menus[o].id_menu);a.post(r+"seguridad/rol/0/menu",e).then(function(e){t.show(e.tipoMensaje,e.mensaje),n.hide(),l(function(){angular.element("#btn-refresh-crudtable").click()},500)})}}function c(){n.cancel()}var m=o;m.cerrar=c,m.registrarRol=s,m.data=e,m.estados=[{id:"ACTIVO",name:"ACTIVO"},{id:"INACTIVO",name:"INACTIVO"}],m.data.id_rol||(m.data._fecha_creacion=new Date),m.data._fecha_modificacion=new Date,d()}var n=this,i=t.getUser();n.usuario=i.id,n.url=e+"seguridad/rol/",n.fields=["id_rol","nombre","descripcion","peso","estado","_fecha_creacion","_fecha_modificacion"],n.titulo="Roles",n.dialogController=["data","Message","$scope","$mdDialog","DataService","restUrl","$timeout",o],n.template="app/modules/seguridad/rol/dialog.rol.html"}e.$inject=["restUrl","Storage"],angular.module("app").controller("RolController",e)}(),function(){"use strict";function e(e,t){var o=this;o.url=t+"seguridad/menu/",o.fields=["id_menu","fid_menu_padre","nombre","descripcion","orden","ruta","icono","estado","_fecha_creacion","_fecha_modificacion"],o.titulo="Menús";var n=e.getUser();o.usuario=n.id}e.$inject=["Storage","restUrl"],angular.module("app").controller("MenuController",e)}(),function(){"use strict";function e(e,t,o,n,i,a,r,l){var d=this,s=n.getSession("datos_enviar");null==s?a.path("/documentos"):t.pdf(o+"plantillasFormly/documentoPDF/",{cite:s.nombre}).then(function(e){e&&(s.pdf=e.url,s.pdf_buffer=e.data,d.html=s.html,d.pdf=s.pdf,d.flag_html=!0,s.esDocumentoExterno&&(d.flag_html=!1),d.show_pdf=!s.esDispositivoMovil,s.esDispositivoMovil&&l.loadCanvas(s.pdf_buffer,"#canvasContainer"),d.verHtml=function(){d.flag_html=!0},d.verPdf=function(){d.flag_html=!1},d.load=!0)}),e.mostrarPdf=function(e,t){t?r.showPdfx(e):r.showPdfId(e,!1)}}e.$inject=["$scope","DataService","restUrl","Storage","$sce","$location","Documento","Util"],angular.module("app").controller("VistaPdfController",e)}(),function(){"use strict";function e(e,t,o){function n(e){i(e,0)}function i(e,t){o.path("plantilla/"+t)}var a=this;a.titulo="Bandeja de plantillas",a.url=e+"plantillasFormly/plantilla_formly/";var r=t.getUser();a.usuario=r.id,a.estadoSw=!0,a.permission={create:!1,update:!1,"delete":!0},a.fields=["id_plantilla_formly","nombre","abreviacion","estado","_fecha_creacion","_fecha_modificacion"],a.buttons=[{tooltip:"Editar",icon:"checked",onclick:i}],a.buttonAgregar={tooltip:"Añadir",icon:"add",onclick:n}}e.$inject=["restUrl","Storage","$location"],angular.module("app").controller("PlantillasController",e)}(),function(){"use strict";function e(e,t,o,n,i,a,r){function l(){C.chart={},C.graficos=[{cod:0,nombre:"Cantidad de documentos por mes",labelChart:"# Visitas por día",tipoChart:"line"},{cod:4,nombre:"Presupuesto",labelChart:"Presupuesto",tipoChart:"presupuesto"},{cod:5,nombre:"Documentos por estado y usuario",labelChart:"estados",tipoChart:"estados"},{cod:6,nombre:"Documentos pendientes por usuario",labelChart:"pendientes",tipoChart:"pendientes"},{cod:7,nombre:"Comprometido",labelChart:"Comprometido",tipoChart:"comprometido"},{cod:8,nombre:"Pagado",labelChart:"Pagado",tipoChart:"pagado"},{cod:9,nombre:"Reporte contable",labelChart:"Reporte contable",tipoChart:"reporteContable"}],C.grafico=C.graficos[0],C.mes=D.getMonth(),C.meses=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],C.docsContables=["IPBS","IPV","IPSPCL-A"],C.tipoInformePago=1,C.anio=D.getFullYear()-A,C.anios=[],C.aniosContables=[];for(var e=A-1;e<I;e++)C.anios.push(e+1);for(var n=O-1;n<D.getFullYear();n++)C.aniosContables.push(n+1);C.anioContable=C.aniosContables.length-1,t.get(o+"seguridad/usuario/?fields=id_usuario,usuario,nombres,apellidos&order=nombres&estado=ACTIVO").then(function(e){C.usuarios=e.datos.resultado,C.usuario=C.usuarios[0].id_usuario}),t.get(o+"presupuesto/gestiones").then(function(e){C.gestiones=e.datos,C.gestionActual=C.anio+A,C.gestion=0})}function d(){C.busqueda={},C.ordenInverso=!1,C.chart.tipo=C.grafico.tipoChart,C.gestion=0,"presupuesto"===C.chart.tipo?(C.ordenarPor="descripcion",s(C.gestionActual-C.gestion)):"estados"===C.chart.tipo?(C.ordenarPor="nombres",g(C.fechaInicial,C.fechaFinal)):"pendientes"===C.chart.tipo?(C.ordenarPor="nombres",h()):"comprometido"===C.chart.tipo?(C.ordenarPor="descripcion",v(C.gestionActual-C.gestion)):"pagado"===C.chart.tipo?(C.ordenarPor="descripcion",b(C.gestionActual-C.gestion)):"reporteContable"===C.chart.tipo?(C.ordenarPor="-cite",c(C.tipoInformePago,C.anioContable)):(C.chart.datos={labels:[],datasets:[{label:C.grafico.labelChart+" total.",data:[],backgroundColor:e.bg.amarillo,borderColor:e.bo.amarillo,borderWidth:1},{label:C.grafico.labelChart+" con relación.",data:[],backgroundColor:e.bg.verde,borderColor:e.bo.verde,borderWidth:1},{label:C.grafico.labelChart+" sin relación.",data:[],backgroundColor:e.bg.azul,borderColor:e.bo.azul,borderWidth:1}]},C.chart.reiniciar=!C.chart.reiniciar,C.page=1,C.page_cant=20,C.page_text=""+((C.page-1)*C.page_cant+1)+"-"+C.page*C.page_cant,C.page_tot=1,x())}function s(e){t.get(o+"presupuesto/saldos?gestion="+e).then(function(e){C.headers=[{name:"numero",title:"Número",mostrar:!0},{name:"descripcion",title:"Descripción",mostrar:!0},{name:"inicial",title:"Inicial",mostrar:!0},{name:"comprometido",title:"Comprometido",mostrar:!0},{name:"pagado",title:"Pagado",mostrar:!0},{name:"modificado",title:"Modificado",mostrar:!0},{name:"vigente",title:"Vigente",mostrar:!0},{name:"saldo",title:"Saldo",mostrar:!0}],C.items=[],e.datos.map(function(e){C.items.push({comprometido:a("number")(parseFloat(e.comprometido),2).replace(/,/g,"").replace(".",","),descripcion:null==e.descripcion?"-":e.descripcion,inicial:a("number")(parseFloat(e.inicial),2).replace(/,/g,"").replace(".",","),modificado:a("number")(parseFloat(e.modificado),2).replace(/,/g,"").replace(".",","),numero:isNaN(e.numero)?e.numero:a("number")(parseFloat(e.numero),2).replace(/,/g,"").replace(".",","),pagado:a("number")(parseFloat(e.pagado),2).replace(/,/g,"").replace(".",","),saldo:a("number")(parseFloat(e.saldo),2).replace(/,/g,"").replace(".",","),vigente:a("number")(parseFloat(e.vigente),2).replace(/,/g,"").replace(".",",")})})})}function c(e,n){var i={tipoInforme:C.docsContables[e],gestion:C.aniosContables[n]};t.post(o+"reportes/contables",i).then(function(e){C.headers=[{name:"cite",title:"Cite",mostrar:!0},{name:"detalle",title:"Detalle",mostrar:!0},{name:"c31",title:"C-31",mostrar:!0},{name:"importe",title:"Importe",mostrar:!0}],C.items=e.datos.documentos})}function m(){var e="reporte_"+C.docsContables[C.tipoInformePago];return e}function u(){for(var e=[],t=0;t<C.headers.length;t++)C.headers[t].mostrar&&e.push(C.headers[t].title);return e}function p(){return C.filas=[],C.items.map(function(e){for(var t={},o=0;o<C.headers.length;o++)C.headers[o].mostrar&&(isNaN(e[C.headers[o].name])?t[C.headers[o].name]=e[C.headers[o].name]:t[C.headers[o].name]=a("number")(e[C.headers[o].name],2));C.filas.push(t)}),C.filas}function f(e){for(var t=0;t<C.headers.length;t++)if(C.headers[t].name===e)return C.headers[t].mostrar;return!0}function g(e,n){t.get(o+"monitoreo/estados?fechaInicial="+e+"&&fechaFinal="+n).then(function(e){C.estados=e.datos})}function h(){t.get(o+"monitoreo/pendientes").then(function(e){C.pendientes=[],e.datos[0].map(function(e){C.pendientes.push({nombres:e.nombres,apellidos:e.apellidos,ENVIADO:e.ENVIADO,RECHAZADO:e.RECHAZADO,DERIVADO:e.DERIVADO,total:e.ENVIADO+e.RECHAZADO+e.DERIVADO})})})}function v(e){t.get(o+"presupuesto/comprometido?gestion="+e).then(function(e){C.comprometido=[],e.datos.map(function(e){C.comprometido.push({_fecha_creacion:a("date")(e._fecha_creacion,"dd/MM/yyyy"),cite:e.cite,descripcion:null==e.descripcion?"-":e.descripcion,id_documento:e.id_documento,monto:a("number")(parseFloat(e.monto),2).replace(/,/g,"").replace(".",","),numero:e.numero})})})}function b(e){t.get(o+"presupuesto/pagado?gestion="+e).then(function(e){C.pagado=[],e.datos.map(function(e){C.pagado.push({_fecha_creacion:a("date")(e._fecha_creacion,"dd/MM/yyyy"),cite:e.cite,descripcion:null==e.descripcion?"-":e.descripcion,id_documento:e.id_documento,monto:a("number")(parseFloat(e.monto),2).replace(/,/g,"").replace(".",","),numero:e.numero})})})}function y(e){r.showPdfId(e)}function _(){var e={};e.cabecera=u(),e.filas=p(),e.gestion=C.anio+A;var a={doc:{}};a.esDispositivoMovil=angular.isDefined(i.orientation),t.pdf(o+"presupuesto/pdf",e).then(function(e){a.pdf=e.url,a.pdf_buffer=e.data;var t={data:a,templateUrl:"app/modules/plantillasFormly/monitoreo/dialogPresupuestoPDF.html",controller:["data","$scope","$mdDialog","Util",w]};n.show(t)})}function w(e,t,o,n){var i=t;i.data={},i.data.html=e.html,i.data.pdf=e.pdf,i.data.flag_html=!1,i.data.show_pdf=!e.esDispositivoMovil,e.esDispositivoMovil&&n.loadCanvas(e.pdf_buffer,"#canvasContainer"),i.cerrar=function(){o.cancel()},i.verHtml=function(){i.data.flag_html=!0},i.verPdf=function(){i.data.flag_html=!1}}function x(){if(C.busqueda={},C.ordenInverso=!1,"presupuesto"===C.chart.tipo)C.ordenarPor="descripcion",s(C.gestionActual-C.gestion);else if("estados"===C.chart.tipo)C.ordenarPor="nombres",g(C.fechaInicial,C.fechaFinal);else if("pendientes"===C.chart.tipo)C.ordenarPor="nombres",h();else if("comprometido"===C.chart.tipo)C.ordenarPor="descripcion",v(C.gestionActual-C.gestion);else if("pagado"===C.chart.tipo)C.ordenarPor="descripcion",b(C.gestionActual-C.gestion);else if("reporteContable"===C.chart.tipo)C.ordenarPor="cite",c(C.tipoInformePago,C.anioContable);else{var e=C.anio+A,n=C.mes+1,i=[o+"monitoreo/global/?anio="+e+"&mes="+n,o+"monitoreo/usuario/?anio="+e+"&mes="+n+"&page="+C.page,o+"monitoreo/documento/?anio="+e+"&mes="+n+"&page="+C.page,o+"monitoreo/"+C.usuario+"/documento/?anio="+e+"&mes="+n];t.get(i[C.grafico.cod]).then(function(e){C.chart.datos.labels=e.datos.nombres,C.chart.datos.datasets[0].data=e.datos.global,C.chart.datos.datasets[1].data=e.datos.relacionado,C.chart.datos.datasets[2].data=e.datos.no_relacionado,C.chart.actualizar=!C.chart.actualizar,C.page_tot=e.datos.total})}}function k(e){"aa"==e&&(C.page=1),"a"==e&&C.page--,"s"==e&&C.page++,"ss"==e&&(C.page=Math.ceil(C.page_tot/C.page_cant)),C.page_text=""+((C.page-1)*C.page_cant+1)+"-"+(C.page*C.page_cant>C.page_tot?C.page_tot:C.page*C.page_cant),x()}var C=this,D=new Date,A=1990,O=2018,I=2130;l(),d(),C.refrescarChart=x,C.reiniciarChart=d,C.paginar=k,C.mostrarOcultar=f,C.generarPDF=_;var E=new Date,T=E.getFullYear(),P=E.getMonth();C.fechaInicial=new Date(T,P,1),C.fechaFinal=new Date,C.cabeceraPresupuesto=u,C.generarNombre=m,C.filasPresupuesto=p,C.consultarComprometido=v,C.consultarPagado=b,C.vistaPrevia=y,C.busqueda={}}e.$inject=["charColors","DataService","restUrl","Modal","$window","$filter","Documento"],angular.module("app").controller("MonitoreoController",e)}(),function(){"use strict";function e(e,t,o,n){function i(e,t){o.showProgressAll(e,t)}function a(e,t){o.showPdfId(t)}function r(e){var t={event:e,templateUrl:"app/modules/plantillasFormly/impresion/multiple.dialog.html",controller:["$scope","$mdDialog","DataService","Message","restUrl",l]};n.show(t)}function l(e,t,o,n,i){function a(){return angular.isUndefined(l.cite)||""==l.cite?void n.warning("Debe escribir un número de cite"):void o.pdf(i+"plantillasFormly/multiple",{
cite:l.cite}).then(function(e){e&&(l.documentoAImprimir=e)})["catch"](function(){})}function r(){t.cancel()}var l=e;l.obtenerDocumento=a,l.cancel=r}var d=this;d.titulo="Imprimir documentos",d.url=e+"plantillasFormly/documento/";var s=t.getUser();d.usuario=s.id,d.queryExtra={estado:"APROBADO,CERRADO,DERIVADO"},d.permission={create:!1,update:!1,"delete":!1},d.fields=["id_documento","nombre","nombre_plantilla","fecha","impreso","_usuario_modificacion","_fecha_creacion","_fecha_modificacion"],d.buttons=[{tooltip:"Ver",icon:"remove_red_eye",onclick:a},{tooltip:"Ver Historial",icon:"timeline",onclick:i}],d.multiple={tooltip:"Impresion multiple",icon:"print",onclick:r}}e.$inject=["restUrl","Storage","Documento","Modal"],angular.module("app").controller("ImpresionController",e)}(),function(){"use strict";function e(e,t,o,n,i,a,r,l,d,s,c){function m(e){w.habilitarBotonFirma=e}function u(e,t){o.showPdfId(t)}function p(e,t){o.showProgressAll(e,t)}function f(){var e={data:{data:w.items.data,cuenta:w.cuenta},clickOutsideToClose:!1,templateUrl:"app/modules/firmador/modules.firmador.html",controller:["data","$scope","$mdDialog","Util","DemofiService","DataService","$window","Message","$timeout","Storage",_]};n.show(e)}function g(t){var o={obtenidos:[],noObtenidos:[]},n=t.map(function(t){return new Promise(function(n){return a.pdf(e+"documento/firmar",{cite:t.nombre,id_documento:t.id_documento}).then(function(e){if(!e||!e.data)throw Error("No se pudo obtener el documento");return y(e.data)}).then(function(e){return o.obtenidos.push({base64:"data:application/pdf;base64,"+e,name:t.id_documento+".pdf"}),n()})["catch"](function(e){return o.noObtenidos.push({documento:t.nombre,error:e}),n()})})});return Promise.all(n).then(function(){return Promise.resolve(o)})["catch"](function(e){return Promise.reject(e)})}function h(t){var o={total:t.length||0,guardado:[],noGuardado:[]},n=t.map(function(t){return new Promise(function(n){var i=t.name;return angular.isUndefined(w.docDic[i])?(o.noGuardado.push(i.replace(".pdf","")),n()):a.post(e+"documento/firmado/",{base64:t.base64,id_documento:w.docDic[i]}).then(function(e){if("EXITO"!==e.tipoMensaje)throw Error(e.mensaje);return o.guardado.push(i),n()})["catch"](function(){return o.noGuardado.push(t.name),n()})})});return Promise.all(n).then(function(){return Promise.resolve(o)})["catch"](function(e){return Promise.reject(e)})}function v(){var e={data:{mensaje:"Verificando firmador...",tipo:"info"}};s.show(e);var t=w.verificarSeleccionados(w.items.data),o={seleccionados:t.length,obtenidos:0,firmados:0,guardados:0};r.verificarEstado().then(function(e){if(e.activo===!1)throw Error(e.mensaje);return s.cambiar({mensaje:"Obteniendo documentos ...",tipo:"warning"}),g(t)}).then(function(e){if(!e)throw Error("No se pudieron obtener documentos.");if(0===!e.obtenidos.length)throw Error("No se obtuvieron documentos firmar");return o.obtenidos=e.obtenidos.length||0,s.cambiar({mensaje:"Firmando documentos ...",tipo:"info"}),r.firmarPdf(e.obtenidos,x.doc)}).then(function(e){if(!e||200!==e.status)throw Error("No se pudo firmar el documento, revise que el firmador se encuentra en ejecución.");return s.cambiar({mensaje:"Guardando documentos firmados ...",tipo:"success"}),o.firmados=e.data.files.length||0,h(e.data.files)}).then(function(e){if(0===e.guardado.length&&o.seleccionados.length>0)throw Error("No se guardo ningun documento.");o.guardados=e.guardado.length||0,o.seleccionados===o.guardados?d.success(o.seleccionados+" documentos firmados y guardados correctamente."):d.show("INFORMACION","De "+o.seleccionados+" se firmaron "+o.firmados+" y se guardaron "+o.guardados),s.cerrar(),c(function(){angular.element("#btn-refresh-crudtable").click()})})["catch"](function(e){d.error(e.message),s.cerrar()})}function b(e){var t=[];return w.docDic={},e.map(function(e){null!=e.selected&&e.selected&&(e.firmado=!1,t.push(e),w.docDic[e.id_documento+".pdf"]=e.id_documento)}),t}function y(e){for(var t=i.defer(),o="",n=new Uint8Array(e),a=n.byteLength,r=0;r<a;r++)o+=String.fromCharCode(n[r]);return t.resolve(l.btoa(o)),t.promise}function _(t,o,n,a,r,l,d,s,c,m){function u(){k.iniciando===!1&&(k.iniciando=!0,r.listTokens().then(function(e){k.iniciando=!1,k.iniciado=!0,k.demofi_ejecutandose=!0,k.tokens=e.datos,k.token_conectado=e.datos.length>0})["catch"](function(){k.iniciando=!1,k.iniciado=!1,k.token_conectado=!0,k.demofi_ejecutandose=!1,k.cancelar()}))}function p(){k.mostrar_progress=!0,k.autenticando=!0,r.login(k.formData.pin).then(function(e){if(k.mostrar_progress=!1,k.autenticando=!1,!e.finalizado||0==e.finalizado)throw Error("Error al autenticarse");return s.success("Acceso al token exitoso."),k.boton_autenticar_habilitado=!1,k.autenticado=!0,r.listCertificates()}).then(function(e){if(!e.datos)throw Error("Error al obtener los certificados del token.");if(k.certificados=e.datos,k.certificados=k.filtrarCertificadosValidos(e.datos),0===k.certificados.length)throw Error("No se encontraron certificados válidos.");1===k.certificados.length&&c(function(){k.formData.certificado_seleccionado=k.certificados[0]}),s.success("Certificados obtenidos correctamente.")})["catch"](function(e){k.mostrar_progress=!1,k.autenticando=!1,k.pin=void 0,k.autenticado=!1,k.boton_autenticar_habilitado=!0,s.error(e.mensaje||e.message)})}function f(){r.verificarServidor()}function g(){k.yaFirmo===!0&&c(function(){angular.element("#btn-refresh-crudtable").click()}),n.cancel()}function h(){k.documentos.map(function(e){null!=e.selected&&e.selected&&(e.firmado=!1,k.documentosParaFirmar.push(e))})}function v(e,t){var o=!1;return t.doc==e.ci&&(o=!0),o}function b(e,t,o){return t<e.length?void _(e[t],o).then(function(){e[t].firmado=!0,e[t]["class"]="firmado",t++,k.firmados++,b(e,t,o)})["catch"](function(){e[t].firmado=!1,e[t]["class"]="error",t++,b(e,t,o)}):(k.firmados===e.length&&k.cancelar(),void s.success(k.firmados+" documento(s) firmado(s) y guardado(s) correctamente."))}function y(){var e=angular.fromJson(k.formData.certificado_seleccionado).alias,t=k.validarFirmador(angular.fromJson(k.formData.certificado_seleccionado),k.cuenta),o=k.documentosParaFirmar;if(k.yaFirmo=!0,k.alias=e,!t||t===!1)return void s.error("El dispositivo de firma no corresponde al usuario");var n=0;b(o,n,e)}function _(t,o){var n=t.nombre.replace(/\//g,"")+".pdf",i={};return new Promise(function(a,d){return l.pdf(e+"documento/firmar",{cite:n,id_documento:t.id_documento}).then(function(e){if(!e||!e.data)throw Error("No se pudo obtener el documento");return i.codigo_archivo=n,w(e.data)}).then(function(e){if(i.pdf_base64=e,!e)throw Error("No se pudo obtener el documento");return r.sign(i,o)}).then(function(o){if(!o.datos||!o.finalizado||0==o.finalizado)throw Error("No se pudo firmar el documento, revise que el firmador se encuentra en ejecución.");if(n!==o.datos.nombre_archivo)throw Error("No existe integridad de datos, es posible que tenga un intruso en su red.");return l.post(e+"documento/firmado/",{base64:o.datos.pdf_base64,id_documento:t.id_documento})}).then(function(e){if(!e)throw Error("No se pudo guardar el documento firmado.");if("EXITO"!==e.tipoMensaje)throw Error("No se pudo guardar el documento firmado.");return a(e)})["catch"](function(e){return d(e.message||e)})})}function w(e){for(var t=i.defer(),o="",n=new Uint8Array(e),a=n.byteLength,r=0;r<a;r++)o+=String.fromCharCode(n[r]);return t.resolve(d.btoa(o)),t.promise}function x(e){var t=[];return 0==e.length?t:(e.map(function(e){"true"==e.esFirmaBolivia&&"true"==e.esValido&&t.push(e)}),t)}var k=o;k.documentos=t.data,k.cuenta=t.cuenta,k.Storage=m,k.documentosParaFirmar=[],k.formData={},k.formData.pin=void 0,k.tokens=[],k.certificados=[],k.firmados=0,k.iniciado=!1,k.iniciando=!1,k.certificado_seleccionado=void 0,k.autenticado=!1,k.autenticando=!1,k.demofi_ejecutandose=!1,k.token_conectado=!1,k.boton_autenticar_habilitado=!1,k.mostrar_progress=!1,k.verificarTokenConectado=u,k.autenticar=p,k.cancelar=g,k.verificarServidor=f,k.firmar=y,k.validarFirmador=v,k.yafirmo=!1,k.filtrarCertificadosValidos=x,u(),h()}var w=this,x=t.getUser();w.cuenta=x,w.usuario=x.id,w.titulo="Documentos para firma digital",w.url=e+"documento/firmar",w.firmarDocumentos=f,w.items={},w.habilitarSeleccion=!0,w.permission={create:!1,update:!1,"delete":!1},w.fields=["id_documento","nombre","nombre_plantilla","estado","fecha","_fecha_creacion","_fecha_modificacion"],w.estadoOpciones=[{v:"cerra",t:"CERRADO"}],w.buttons=[{tooltip:"Ver",icon:"remove_red_eye",onclick:u},{tooltip:"Ver Historial",icon:"timeline",onclick:p}],w.habilitarBotonFirma=!1,w.obtenerSeleccionados=m,w.verificarSeleccionados=b,w.arrayBufferToBase64=y,w.obtenerDocumentos=g,w.firmarDocumentos2=v,w.guardarDocumentosFirmados=h,w.docDic={}}e.$inject=["restUrl","Storage","Documento","Modal","$q","DataService","FirmaticService","$window","Message","Loading","$timeout"],angular.module("app").controller("FirmarController",e)}(),function(){"use strict";function e(e,t,o){function n(e,t){o.showPdfId(t)}function i(e,t){o.showProgressAll(e,t)}var a=this,r=t.getUser();a.usuario=r.id,a.titulo="Documentos en curso",a.url=e+"plantillasFormly/documento/"+r.id+"/encurso",a.permission={create:!1,update:!1,"delete":!1},a.fields=["id_documento","nombre","nombre_plantilla","estado","fecha","_fecha_creacion","_fecha_modificacion"],a.buttons=[{tooltip:"Ver",icon:"remove_red_eye",onclick:n},{tooltip:"Ver Historial",icon:"timeline",onclick:i}]}e.$inject=["restUrl","Storage","Documento"],angular.module("app").controller("EnCursoController",e)}(),function(){"use strict";function e(e,t,o,n,i,a,r){function l(o,n){e.get(t+"plantillasFormly/documento/?id_documento="+n+"&fields=_usuario_creacion").then(function(e){e.datos.resultado[0]._usuario_creacion==u.id?i.path("documento/"+n):r.showPdfId(n)})}function d(e,t){r.showProgressAll(e,t)}function s(e){var t={event:e,templateUrl:"app/modules/plantillasFormly/documentos/documento.dialog.html",controller:["$scope","$mdDialog","DataService","Message","restUrl","Storage",c]};a.show(t)}function c(e,t,o,n,a,r){function l(){o.get(a+s.urlBase).then(function(e){s.plantillas_disponibles=e.datos.resultado,s.plantilla_seleccionada=e.datos.resultado[0].id_plantilla_formly})}function d(){o.get(a+"plantillasFormly/plantilla_formly/"+s.plantilla_seleccionada).then(function(e){r.setSession("pl",e.datos),i.path("documento/0"),t.cancel()})}var s=e;s.elegir=d,s.urlBase="plantillasFormly/plantilla_formly/?fields=id_plantilla_formly,nombre,abreviacion&sort=nombre&estado=ACTIVO&limit=10000",l()}var m=this;m.titulo="Bandeja de documentos";var u=o.getUser();m.usuario=u.id,m.url=t+"plantillasFormly/documento/"+u.id+"/misdocumentos/",m.permission={create:!1,update:!1,"delete":!0},m.fields=["id_documento","nombre","nombre_plantilla","fecha","estado","impreso","_fecha_creacion","_fecha_modificacion"],m.estadoOpciones=[{v:"nuevo",t:"NUEVO"},{v:"envia",t:"ENVIADO"},{v:"cerra",t:"CERRADO"},{v:"deriv",t:"DERIVADO"},{v:"derive",t:"DERIVE"},{v:"respondi",t:"RESPONDI"}],u.es_jefe&&(m.estadoOpciones.push({v:"aprobe",t:"APROBE"}),m.estadoOpciones.push({v:"rechace",t:"RECHACE"})),m.buttons=[{multiple:!0,key_item:"estado",opcion:{NUEVO:{tooltip:"Editar",icon:"checked",onclick:l},ENVIADO:{tooltip:"Editar",icon:"checked",onclick:l},CERRADO:{tooltip:"Editar",icon:"checked",onclick:l},DERIVADO:{tooltip:"Editar",icon:"checked",onclick:l},DEFAULT:{tooltip:"Ver",icon:"remove_red_eye",onclick:l}}},{tooltip:"Ver Historial",icon:"timeline",onclick:d}],m.buttonAgregar={tooltip:"Añadir",icon:"add",onclick:s}}e.$inject=["DataService","restUrl","Storage","Datetime","$location","Modal","Documento"],angular.module("app").controller("DocumentosController",e)}(),function(){"use strict";function e(e,t){function o(e,t,o,n,i,a,r){function l(){var e=m.data;1==m.otroEditar&&(e.tipo_entidad=e.otro_tipo),m.data.id_contacto?i.put(a+"plantillasFormly/contacto/"+m.data.id_contacto,e).then(function(e){t.show(e.tipoMensaje,e.mensaje),n.hide(),r(function(){angular.element("#btn-refresh-crudtable").click()},500)}):i.post(a+"plantillasFormly/contacto",e).then(function(e){t.show(e.tipoMensaje,e.mensaje),n.hide(),r(function(){angular.element("#btn-refresh-crudtable").click()},500)})}function d(){i.get(a+"plantillasFormly/contactos/tiposEntidad").then(function(e){m.tiposEntidad=e.datos,m.tiposEntidad.push({tipo_entidad:"Otros...",otro:!0})})}function s(e){angular.isDefined(e.otro)&&1==e.otro?m.otroEditar=!0:m.otroEditar=!1}function c(){n.cancel()}var m=o;m.obtenerTiposEntidad=d,m.cerrar=c,m.registrarContacto=l,m.habilitarOtro=s,m.data=e,m.titulo="Editar",m.otroEditar=!1,m.departamentos=[{id:"BENI",name:"BENI"},{id:"CHUQUISACA",name:"CHUQUISACA"},{id:"COCHABAMBA",name:"COCHABAMBA"},{id:"LA PAZ",name:"LA PAZ"},{id:"ORURO",name:"ORURO"},{id:"PANDO",name:"PANDO"},{id:"POTOSI",name:"POTOSI"},{id:"SANTA CRUZ",name:"SANTA CRUZ"},{id:"TARIJA",name:"TARIJA"}],m.estados=[{id:"ACTIVO",name:"ACTIVO"},{id:"INACTIVO",name:"INACTIVO"}],null==m.data.id_contacto&&(m.titulo="Agregar",m.data.estado="ACTIVO",m.data.departamento="LA PAZ"),m.obtenerTiposEntidad()}var n=this,i=t.getUser();n.usuario=i.id,n.titulo="Bandeja de contactos",n.url=e+"plantillasFormly/contacto/",n.fields=["id_contacto","grado","nombres","apellidos","entidad","tipo_entidad","estado","_fecha_creacion","_fecha_modificacion"],n.permission={"delete":!1},n.order="estado",n.dialogController=["data","Message","$scope","$mdDialog","DataService","restUrl","$timeout",o],n.template="app/modules/plantillasFormly/contactos/dialog.contactos.html"}e.$inject=["restUrl","Storage"],angular.module("app").controller("ContactosController",e)}(),function(){"use strict";function e(e,t,o,n,i,a,r,l,d,s){function c(o,n){e.get(t+"plantillasFormly/documento/?id_documento="+n+"&fields=_usuario_creacion").then(function(e){e.datos.resultado[0]._usuario_creacion==g.id?i.path("documento/"+n):d.showPdfId(n)})}function m(e,t){d.showProgressAll(e,t)}function u(o,n){var i={doc:{}};i.doc={};var s;e.get(t+"plantillasFormly/documento/"+n).then(function(e){s=e,i.model_actual=angular.fromJson(s.datos.plantilla_valor);var t=i.model_actual;t["cite-0"]&&t["cite-0"].fecha&&(t["cite-0"].fecha=l.format(t["cite-0"].fecha,"dd de MMM de YYYY")),i.form_actual=r.dataToView(angular.fromJson(s.datos.plantilla),i.model_actual),i.doc.nombre=s.datos.nombre,i.doc.plantilla=s.datos.plantilla}).then(function(){return e.post(t+"plantillasFormly/generarDocumento/",i)}).then(function(o){return i={html:o.datos.html,nombre:o.datos.nombre},i.esDispositivoMovil=d.isMobile(),e.pdf(t+"plantillasFormly/documentoPDF/",{cite:i.nombre})}).then(function(e){if(e){i.pdf=e.url,i.pdf_buffer=e.data;var t={data:{id:s.datos.id_documento,dc:s.datos,cuenta:g,pdf:i},templateUrl:"app/modules/plantillasFormly/aprobacion/dialogPDF.html",controller:["data","$scope","$mdDialog","DataService","restUrl","$timeout","Storage","Datetime","Documento","Message","Util",p]};a.show(t)}})}function p(e,t,o,n,r,l,d,c,m,u,p){function f(){angular.isString(k.data.dc.para)&&(k.data.dc.para=angular.fromJson(k.data.dc.para)),k.data.es_derivar="DERIVADO"==k.data.dc.estado,k.data.es_para=k.data.dc.para.indexOf(e.cuenta.id)!=-1&&!k.data.es_derivar,k.data.sw_es_respuesta=k.data.dc.grupo||!1,k.data.sw_es_respuesta&&n.get(r+"plantillasFormly/documento/?fields=id_documento,nombre,nombre_plantilla&estado=DERIVADO,CERRADO,APROBADO&sort=_fecha_creacion&grupo="+k.data.dc.grupo).then(function(e){k.data.docs_grupo=e.datos.resultado}),e.pdf.esDispositivoMovil&&p.loadCanvas(e.pdf.pdf_buffer,"#canvasContainer"),n.get(r+"seguridad/usuario/"+k.data.dc._usuario_creacion).then(function(e){if(k.data.nombres=e.datos.nombres,k.data.apellidos=e.datos.apellidos,k.data.es_para||k.data.es_derivar)return n.get(r+"seguridad/usuario/"+g.id+"/informacion")}).then(function(e){if(e&&(k.data.accion="observar",k.data.usuarios=e.datos.resultado),k.data.es_derivar||k.data.es_para)return n.get(r+"plantillasFormly/plantilla_formly/?fields=id_plantilla_formly,nombre,abreviacion&sort=nombre&estado=ACTIVO&limit=10000")}).then(function(e){e&&(k.data.plantillas_disponibles=e.datos.resultado)}),k.data.es_derivar&&n.get(r+"historialFlujo/"+k.data.dc.id_documento+"/ultimo").then(function(e){k.data.usuario_proveido=e.datos.nombres+" "+e.datos.apellidos})}function h(t){var c={usuario:g.id},m="crear"==t,p="Espere...";k.data.es_para&&(c.usuario_derivar=k.data._usuario_seleccionado,"aprobar"==t&&(t="aprobar y cerrar",p=" Aprobando y cerrando...",c.derivar=!1),"derivar"==t&&(t="aprobar y derivar",p="Aprobando y derivando...",c.observaciones=k.data.observaciones,c.derivar=!0),m&&(t="aprobar y luego crear documento",c.usuario_derivar=c.usuario,c.observaciones="",c.derivar=!0)),a.confirm("¿Esta seguro de que quiere "+t+"?",function(){var t={data:{mensaje:p,tipo:"info"}};s.show(t),s.cambiar({tipo:"info"}),n.put(r+"plantillasFormly/documento/"+e.id+"/aprobar",c).then(function(t){u.show(t.tipoMensaje,t.mensaje),m?(n.get(r+"plantillasFormly/plantilla_formly/"+k.data._plantilla_seleccionada.id_plantilla_formly).then(function(t){t.datos.documento_padre=e.id,t.datos.grupo=e.dc.grupo,d.setSession("pl",t.datos),i.path("documento/0"),o.cancel(),s.cerrar()}),l(function(){angular.element("#btn-refresh-crudtable").click()}),x()):(l(function(){angular.element("#btn-refresh-crudtable").click()}),x(),s.cerrar())})})}function v(){var t={usuario:g.id,observaciones:k.data.observaciones,observado_por:g.first_name+" "+g.last_name};a.confirm("¿Esta seguro de que quiere observar?",function(){n.put(r+"plantillasFormly/documento/"+e.id+"/rechazar",t).then(function(e){u.show(e.tipoMensaje,e.mensaje),l(function(){angular.element("#btn-refresh-crudtable").click()}),x()})})}function b(){a.confirm("¿Esta seguro de que quiere derivar?",function(){var t={usuario:g.id,destino:k.data._usuario_seleccionado,observaciones:k.data.observaciones};n.put(r+"plantillasFormly/documento/"+e.id+"/derivar",t).then(function(e){u.show(e.tipoMensaje,e.mensaje),l(function(){angular.element("#btn-refresh-crudtable").click()}),x()})})}function y(e){angular.element(e.currentTarget).next().children()[0].click(),k.data.show_select=!0}function _(t){n.get(r+"plantillasFormly/documento/?documento_padre="+e.id).then(function(l){if(0==l.datos.total)angular.isDefined(t)&&t?h("crear"):a.confirm("¿Esta seguro de que quiere crear "+k.data._plantilla_seleccionada.nombre+"?",function(){n.get(r+"plantillasFormly/plantilla_formly/"+k.data._plantilla_seleccionada.id_plantilla_formly).then(function(t){t.datos.documento_padre=e.id,t.datos.grupo=e.dc.grupo,d.setSession("pl",t.datos),i.path("documento/0"),o.cancel()}),x()});else{var s=l.datos.resultado[0],m="";m+="El documento ya tiene respuesta!!<br>",m+="Si quiere crear otra tiene que borrar la actual <br>",m+="Nombre: "+s.nombre+" <br>",m+="Tipo de documento: "+s.nombre_plantilla+" <br>",m+="Estado: "+s.estado+" <br>",m+="Fecha de creación: "+c.format(s._fecha_creacion)+" <br>",a.alert(m),i.path("documentos")}})}function w(e){m.showPdfId(e,!1)}function x(){o.cancel()}var k=t;k.data={},k.data.dc=e.dc,k.data.observaciones,k.data.show_select=!1,k.data.datosEnviar=e.dc.datosEnviar,k.data.html=e.pdf.html,k.data.pdf=e.pdf.pdf,k.data.flag_html=!0,k.data.show_pdf=!e.pdf.esDispositivoMovil,k.cerrar=x,k.aprobar=h,k.observar=v,k.derivar=b,k.openSelect=y,k.crear=_,k.verDocumento=w,k.mostrarPdf=function(e,t){t?m.showPdfx(e):m.showPdfId(e,!1)},k.verHtml=function(){k.data.flag_html=!0},k.verPdf=function(){k.data.flag_html=!1},f()}var f=this;f.titulo="Documentos pendientes";var g=n.getUser();f.usuario=g.id,f.url=t+"plantillasFormly/documento/"+g.id+"/todo/",f.vistaPrevia=u,f.permission={create:!1,update:!1,"delete":!0},f.estadoOpciones=[{v:"deriv",t:"DERIVADO"},{v:"recha",t:"RECHAZADO"}],g.es_jefe&&f.estadoOpciones.push({v:"envia",t:"ENVIADO"}),f.fields=["id_documento","nombre","nombre_plantilla","fecha","estado","_fecha_creacion","_fecha_modificacion"],f.buttons=[{multiple:!0,key_item:"estado",opcion:{RECHAZADO:{tooltip:"Editar",icon:"checked",onclick:c},DEFAULT:{tooltip:"Ver",icon:"remove_red_eye",onclick:u}}},{tooltip:"Ver Historial",icon:"timeline",onclick:m}]}e.$inject=["DataService","restUrl","backUrl","Storage","$location","Modal","UtilFormly","Datetime","Documento","Loading"],angular.module("app").controller("AprobacionController",e)}(),function(){"use strict";function e(e,t){var o=this;o.usuariosVirtuales=[{id_usuario:163,nombres:"correspondencia",cargo:"Responsable de Correspondencia"},{id_usuario:164,nombres:"correspondencia1",cargo:"Responsable de Correspondencia"},{id_usuario:165,nombres:"correspondencia2",cargo:"Responsable de Correspondencia"}],o.seleccionar=function(e){console.log("HOLA",e)}}e.$inject=["$location","Message"],angular.module("app").controller("VirtualController",e)}(),function(){"use strict";function e(e,t,o,n,i,a,r){function l(e){r.log("Sin servicio",e)}function d(e,t,o,n,i,a,r,l,d){function s(){var t=[],o=[];r.get(l+"seguridad/rol").then(function(n){if(t=n.datos.resultado,f){var i=e.usuario_rol;t.forEach(function(e,n){var a={id_rol:e.id_rol,nombre:e.nombre,valor:!1};null!=i&&i.length>0?i.forEach(function(r,l){e.id_rol==r.rol.id_rol&&(a.valor=!0),l==i.length-1&&(o.push(a),n==t.length-1&&(p.data.roles=o))}):p.data.roles=t})}else t.forEach(function(e,n){var i={id_rol:e.id_rol,nombre:e.nombre,valor:!1};o.push(i),n==t.length-1&&(p.data.roles=o)})}),r.get(l+"seguridad/unidad?fields=id_unidad,nombre,abreviacion").then(function(e){p.data.unidades=e.datos.resultado})}function m(){i.cancel()}function u(){var e=[];for(var o in p.data.roles)1==p.data.roles[o].valor&&e.push(p.data.roles[o].id_rol);var n=[];for(var a in p.data.oficinas)1==p.data.oficinas[a].valor&&n.push(p.data.oficinas[a].id_oficina);var s={usuario:p.data.usuario,fid_unidad:p.data.fid_unidad,contrasena:" ",numero_documento:p.data.numero_documento,nombres:p.data.nombres,apellidos:p.data.apellidos,cargo:p.data.cargo,email:p.data.email,estado:p.data.estado,roles:e,oficinas:n};f?(s.id_usuario=p.data.id_usuario,s._usuario_modificacion=c.id,s._fecha_modificacion=new Date):(s._usuario_creacion=c.id,s._fecha_creacion=new Date),f?r.put(l+"seguridad/usuario/"+s.id_usuario,s).then(function(e){t.success(),void 0!=e&&(i.hide(),d(function(){angular.element("#btn-refresh-crudtable").click()},500))}):r.post(l+"seguridad/usuario",s).then(function(e){t.success(),void 0!=e&&(i.hide(),d(function(){angular.element("#btn-refresh-crudtable").click()},500))})}var p=o;p.data=e,p.cerrar=m,p.registrarUsuario=u;var f=!!e.id_usuario;s()}var s=this;s.title="Usuarios",s.url=e+"seguridad/usuario/",s.fields=["id_usuario","usuario","numero_documento","nombres","apellidos","cargo","email","estado","_fecha_creacion","_fecha_modificacion"],s.dialogController=["data","Message","$scope","$mdConstant","$mdDialog","Modal","DataService","restUrl","$timeout",d],s.template="app/modules/admin/usuarios/dialog.usuario.html";var c=a.getUser();s.usuario=c.id,s.permission={create:!0,update:!0,"delete":!1},s.buttonAgregar={tooltip:"Syncronizar todos los datos con ldap",icon:"cached",onclick:l}}e.$inject=["restUrl","Modal","DataService","Util","Message","Storage","$log"],angular.module("app").controller("UsuariosController",e)}(),function(){"use strict";function e(e,t,o,n,i,a){var r=this;r.getColor=function(){return t.userColor},r.getName=function(){var e=t.getUser();return e.first_name+" "+e.last_name},r.getEmail=function(){return t.getUser().email},r.getInitial=function(){var e=t.getUser().first_name;return e.length?e[0].toUpperCase():"?"},r.getData=function(e){var n=t.getUser()[e];return["last_login","date_joined"].indexOf(e)!=-1?o.datetimeLiteral(new Date(n)):n},r.getEsJefe=function(){return t.getUser().es_jefe||!1},r.abrirEditar=function(e){"editar_notificaciones"==e?n.get(i+"notificacion/conf_notificacion/?fields=id_conf_notificacion,canal,enviado,celular,observado,aprobado,derivado&fid_usuario="+r.getData("id")).then(function(t){r.swEditarCuenta=e,r.ca=t.datos.resultado[0],r.ca.email=r.getEmail()}):n.get(i+"seguridad/usuario/",r.getData("id")).then(function(t){t.datos&&(r.numero_documento=t.datos.numero_documento,r.nombre_usuario=t.datos.usuario,r.email=t.datos.email,r.nombres=t.datos.nombres,r.apellidos=t.datos.apellidos,"editar_cuenta"==e&&(r.contrasena=t.datos.contrasena),r.swEditarCuenta=e)})},r.editarCuenta=function(){var o={id_usuario:r.getData("id"),numero_documento:r.numero_documento,usuario:r.nombre_usuario,email:r.email,nombres:r.nombres,apellido_paterno:r.apellidos,_usuario_modificacion:r.getData("id")},l=!0;"editar_cuenta"==r.swEditarCuenta?o.contrasena=r.contrasena:"editar_contrasena"==r.swEditarCuenta&&(r.contrasena_nueva!==r.contrasena_confirm&&(a.error("Las contraseña a confirmar no coincide con la contraseña nueva!!"),l=!1),o.verificarContrasena=r.contrasena,o.contrasena=r.contrasena_nueva),l&&n.put(i+"seguridad/usuario/"+r.getData("id"),o).then(function(o){if(o.datos){r.numero_documento=null,r.nombre_usuario=null,r.email=null,r.nombres=null,r.apellidos=null,r.contrasena=null,r.contrasena_nueva=null,r.contrasena_confirm=null;var n={id:o.datos.id_usuario,username:o.datos.usuario,first_name:o.datos.nombres,last_name:o.datos.apellido_paterno+" "+o.datos.apellido_materno,cargo:o.datos.cargo,doc:o.datos.numero_documento,email:o.datos.email,date_joined:o.datos._fecha_creacion};t.setUser(n),e.setUser(n),r.swEditarCuenta=null,a.show(o.tipoMensaje,o.mensaje)}})},r.editarConfiguracion=function(){var e=angular.copy(r.ca);n.put(i+"notificacion/conf_notificacion/"+e.id_conf_notificacion,e).then(function(e){a.show(e.tipoMensaje,e.mensaje),r.swEditarCuenta=null})},r.cancelarEditar=function(){r.numero_documento=null,r.nombre_usuario=null,r.email=null,r.nombres=null,r.apellidos=null,r.contrasena=null,r.contrasena_nueva=null,r.contrasena_confirm=null,r.swEditarCuenta=null}}e.$inject=["Storage","SideNavFactory","Datetime","DataService","restUrl","Message"],angular.module("app").controller("ProfileController",e)}(),function(){"use strict";function e(e,t,o,n,i,a,r,l,d,s,c,m,u,p,f){function g(){angular.element("body").addClass("no-login"),angular.element("body").removeClass("principal"),null!=d.localStorage.getItem("error")&&void 0!=d.localStorage.getItem("error")&&(o.error(d.localStorage.getItem("error")),d.localStorage.removeItem("error"))}function h(){e.login({username:_.username,password:_.password}).then(function(e){console.log("Revisando la respuesta",e);var o=e.data.datos.user,d=e.data.datos.menu,s=e.data.datos.roles;angular.element("body").removeClass("no-login"),angular.element("body").addClass("principal");var c=i.getSession("path");if(o.es_jefe=!1,null==c){var m=10;s.forEach(function(e){e.rol.peso<m&&0!==e.rol.peso&&(m=e.rol.peso),"JEFE"==e.rol.nombre&&(o.es_jefe=!0)}),c=["documentos","aprobacion","aprobacion","impresion","documentos","documentos"][m]}if(n.setUser(o),i.setUser(o),n.setMenu(d),i.setSession("menu",n.getMenu()),c){var p=c.replace("/",""),f=r.getMenuOption(i.getSession("menu"),p);l.setParent(f[0]),l.setCurrent(f[1]),a(function(){var e=angular.element("#sidenav");e.find(".md-button-href").removeClass("active"),e.find(".sidenav-sublist").hide(),e.find(".md-button-href[data-url='"+p+"']").addClass("active").parent().parent().prev().click()})}u.init(),angular.element("#toast-container-main").find("md-toast").fadeOut(),t.path(c&&c.indexOf("login")==-1?c:"/")})["catch"](function(e){400!=e.status&&401!=e.status||o.error("Nombre de usuario y/o contraseña no válidos."),412==e.status&&o.show(e.data.tipoMensaje,e.data.mensaje),e.status==-1&&o.error("Servidor no Disponible.")})}function v(e,t,o,n,i){var a=e;a.usuario=null,a.email=null,a.numero_documento=null,a.recuperar=function(){var e={usuario:a.usuario,email:a.email,numero_documento:a.numero_documento};o.put(i+"seguridad/recuperar/",e).then(function(e){n.show(e.tipoMensaje,e.mensaje),a.cerrar()})},a.cerrar=function(){t.cancel()}}function b(){var e=_.backUrl+"codigo";f.get(e).then(function(e){e&&(d.localStorage.setItem("oauth2_state",e.datos.codigo),d.location.href=e.datos.url)})["catch"](function(e){o.error(e)})}function y(){t.path("verificar")}var _=this;_.login=h,_.iniciarSesion=b,_.irAVerificar=y,_.backUrl=p,i.destroySession(),g(),_.abrirDialog=function(e){var t={event:e,title:"Recuperar contraseña",templateUrl:"app/modules/admin/login/recuperar.dialog.html",controller:["$scope","$mdDialog","DataService","Message","restUrl",v]};m.show(t)}}e.$inject=["$auth","$location","Message","SideNavFactory","Storage","$timeout","Util","BreadcrumbFactory","$window","Datetime","$mdDialog","Modal","ExpirationTime","backUrl","DataService"],angular.module("app").controller("LoginController",e)}(),function(){"use strict";function e(e){var t=this,o=e;o.vm=t,o.$watch("to.height",function(e){e<0?o.to.style.height="0cm":e>30?o.to.style.height="30cm":o.to.style&&(o.to.style.height=o.to.height+"cm")})}e.$inject=["$scope"],angular.module("app").controller("fcVacioController",e)}(),function(){"use strict";function e(e,t,o,n){function i(e,t){switch(angular.element(e.currentTarget).parent().next().children()[1].click(),t){case"contacto":l.mostrarContacto=!0}}function a(){l.buscarContacto="",l.mostrarContacto=!1}var r,l=this,d=e;d.vm=l,l.buscarContacto="",l.mostrarContacto=!1,l.contactos=[],l.abrirSelector=i,l.cerrarSelector=a,angular.isUndefined(d.model[d.options.key])&&(d.model[d.options.key]={}),angular.isUndefined(d.model[d.options.key].lista)&&(d.model[d.options.key].lista=[]),d.$watch("vm.buscarContacto",function(){var e,i=[];for(l.contactos=[],r=d.model[d.options.key].lista||[],e=0;e<r.length;e++)l.contactos.push(r[e]);""!=l.buscarContacto&&t.get(o+"plantillasFormly/contactos?filter="+l.buscarContacto).then(function(t){for(l.contactos=[],i=t.datos.resultado,e=0;e<r;e++)l.contactos.push(r[e]);for(e=0;e<i.length;e++)n.buscarObj(r,"id_contacto",i[e].id_contacto)||l.contactos.push(i[e])})})}e.$inject=["$scope","DataService","restUrl","ArrayUtil"],angular.module("app").controller("fcListaContactosController",e)}(),function(){"use strict";function e(e,t,o,n,i,a,r){function l(){var e,n,a,l,s,c,f,g,h=angular.isUndefined(u.model[u.options.key]);if(e={id_usuario:p.id,nombres:p.first_name,apellidos:p.last_name,cargo:p.cargo},angular.element("input.header-searchbox").on("keydown",function(e){e.stopPropagation()}),h)u.model[u.options.key]={},u.model[u.options.key].de=[e];else if(c=u.model[u.options.key].para||{id_usuario:-1},s=u.model[u.options.key].de||{id_usuario:-1},f=u.model[u.options.key].via||{id_usuario:-1},m.usuarios_check={},g=i.getSession("flujo_doc"),null!=g){if(angular.isDefined(g.via))for(a=0;a<g.via.length;a++)g.via[a]!==g.via_actual&&(m.usuarios_check[g.via[a]]=!0);u.model["cite-0"]&&u.model["cite-0"].cite&&(m.usuarios_check[g.para[0]]=!0)}t.get(o+"seguridad/usuario_rol/").then(function(t){if(m.usuarios=[],m.usuarios_jefes=[],l=t.datos,h)for(a=0;a<l.length;a++)n=d(l[a]),m.usuarios.push(e.id_usuario==n.id_usuario?e:n),m.usuarios_jefes.push(n);else for(a=0;a<l.length;a++)n=d(l[a]),c&&r.buscarObj(c,"id_usuario",n.id_usuario)?(m.usuarios_jefes.push(r.buscarObj(c,"id_usuario",n.id_usuario,!0)),m.usuarios.push(n)):f&&r.buscarObj(f,"id_usuario",n.id_usuario)?(m.usuarios_jefes.push(r.buscarObj(f,"id_usuario",n.id_usuario,!0)),m.usuarios.push(n)):r.buscarObj(s,"id_usuario",n.id_usuario)?m.usuarios.push(r.buscarObj(s,"id_usuario",n.id_usuario,!0)):(m.usuarios_jefes.push(n),m.usuarios.push(n))})}function d(e){return{id_usuario:e.id_usuario,nombres:e.nombres,apellidos:e.apellidos,cargo:e.cargo}}function s(e,t,o){var n=u.model[u.options.key][o||"via"];"down"==t?r.mover(n,e,e+1):"up"==t&&r.mover(n,e,e-1)}function c(e,t){switch(angular.element(e.currentTarget).parent().next().children()[1].click(),t){case"para":m.show_para=!0;break;case"via":m.show_via=!0;break;case"de":m.show_de=!0}}var m=this,u=e;u.vm=m;var p=i.getUser();m.buscar_para="",m.buscar_via="",m.buscar_de="",m.show_para=!1,m.show_via=!1,m.show_de=!1,m.openSelect=c,m.moverUsuario=s,n(l)}e.$inject=["$scope","DataService","restUrl","$timeout","Storage","Datetime","ArrayUtil"],angular.module("app").controller("fcEncabezadoController",e)}(),function(){
"use strict";function e(e,t,o,n,i){function a(e,t){switch(angular.element(e.currentTarget).parent().next().children()[1].click(),t){case"doc":s.show_doc=!0}}function r(){s.buscar_doc="",s.show_doc=!1}function l(e){i.showPdfId(e)}var d,s=this,c=e;c.vm=s,s.buscar_doc="",s.show_doc=!1,s.documentos=[],s.openSelect=a,s.mostrarPdf=l,s.closeSelectDoc=r,c.$watch("vm.buscar_doc",function(){var e,i;for(s.documentos=[],d=c.model[c.options.key]||[],e=0;e<d.length;e++)s.documentos.push(d[e]);""!=s.buscar_doc&&t.get(o+"plantillasFormly/documento?fields=id_documento,nombre,fecha&estado=APROBADO,CERRADO,DERIVADO&page=1&order=-fecha&limit=20&searchPro=1&tipoBus=campo&campoSel=nombre&filter="+s.buscar_doc).then(function(t){for(s.documentos=[],i=t.datos.resultado,e=0;e<d.length;e++)s.documentos.push(d[e]);for(e=0;e<i.length;e++)n.buscarObj(d,"id_documento",i[e].id_documento)||s.documentos.push(i[e])})})}e.$inject=["$scope","DataService","restUrl","ArrayUtil","Documento"],angular.module("app").controller("fcDocumentosRelacionadosController",e)}(),function(){"use strict";function e(e,t,o,n,i){function a(e,t){switch(angular.element(e.currentTarget).parent().next().children()[1].click(),t){case"doc":s.show_doc=!0}}function r(){s.buscar_doc="",s.show_doc=!1}function l(e){i.showPdfId(e)}var d,s=this,c=e;c.vm=s,s.buscar_doc="",s.show_doc=!1,s.documentos=[],s.openSelect=a,s.mostrarPdf=l,s.closeSelectDoc=r,c.$watch("vm.buscar_doc",function(){var e,i;for(s.documentos=[],d=c.model[c.options.key]||[],e=0;e<d.length;e++)s.documentos.push(d[e]);""!=s.buscar_doc&&t.get(o+"plantillasFormly/documento?fields=id_documento,nombre,fecha&estado=APROBADO,CERRADO,DERIVADO&page=1&order=-fecha&limit=20&searchPro=1&tipoBus=campo&campoSel=nombre&filter="+s.buscar_doc).then(function(t){for(s.documentos=[],i=t.datos.resultado,e=0;e<d.length;e++)s.documentos.push(d[e]);for(e=0;e<i.length;e++)n.buscarObj(d,"id_documento",i[e].id_documento)||s.documentos.push(i[e])})})}e.$inject=["$scope","DataService","restUrl","ArrayUtil","Documento"],angular.module("app").controller("fcDocumentosAnularController",e)}(),function(){"use strict";function e(e,t,o,n,i,a,r){function l(){var e,n,a,l,s,c,f,g,h,v,b,y,_=angular.isUndefined(u.model[u.options.key]);if(e={id_usuario:p.id,nombres:p.first_name,apellidos:p.last_name,cargo:p.cargo},angular.element("input.header-searchbox").on("keydown",function(e){e.stopPropagation()}),_)u.model[u.options.key]={},u.model[u.options.key].de=[e];else if(f=u.model[u.options.key].para||{id_usuario:-1},c=u.model[u.options.key].de||{id_usuario:-1},g=u.model[u.options.key].via||{id_usuario:-1},m.usuarios_check={},v=i.getSession("flujo_doc"),angular.isDefined(v)&&null!=v){if(null!=v.via)for(a=0;a<v.via.length;a++)v.via[a]!==v.via_actual&&(m.usuarios_check[v.via[a]]=!0);u.model["cite-0"]&&u.model["cite-0"].cite&&(m.usuarios_check[v.para[0]]=!0)}t.get(o+"seguridad/usuario_rol/").then(function(t){if(m.usuarios=[],m.usuarios_jefes=[],s=t.datos,_)for(a=0;a<s.length;a++){for(n=d(s[a]),y=!1,l=0;l<s[a].usuario_rol.length;l++)h=s[a].usuario_rol[l].rol.nombre,"JEFE"!==h&&"CORRESPONDENCIA"!=h||(y=!0);m.usuarios.push(e.id_usuario==n.id_usuario?e:n),y&&e.id_usuario!=n.id_usuario&&m.usuarios_jefes.push(n)}else for(a=0;a<s.length;a++){if(b=!1,y=!1,n=d(s[a]),n.id_usuario==f.id_usuario&&(m.usuarios_jefes.push(f),b||m.usuarios.push(n),b=!0,y=!0),g&&r.buscarObj(g,"id_usuario",n.id_usuario)&&(m.usuarios_jefes.push(r.buscarObj(g,"id_usuario",n.id_usuario,!0)),b||m.usuarios.push(n),b=!0,y=!0),r.buscarObj(c,"id_usuario",n.id_usuario)&&(m.usuarios.push(r.buscarObj(c,"id_usuario",n.id_usuario,!0)),b=!0),b||m.usuarios.push(n),b=!1,!y)for(l=0;l<s[a].usuario_rol.length;l++)h=s[a].usuario_rol[l].rol.nombre,"JEFE"!==h&&"CORRESPONDENCIA"!=h||(b=!0);b&&e.id_usuario!=n.id_usuario&&!y&&m.usuarios_jefes.push(n)}})}function d(e){return{id_usuario:e.id_usuario,nombres:e.nombres,apellidos:e.apellidos,cargo:e.cargo}}function s(e,t){var o=u.model[u.options.key].via;"down"==t?r.mover(o,e,e+1):"up"==t&&r.mover(o,e,e-1)}function c(e,t){switch(angular.element(e.currentTarget).parent().next().children()[1].click(),t){case"para":m.show_para=!0;break;case"via":m.show_via=!0;break;case"de":m.show_de=!0}}var m=this,u=e;u.vm=m;var p=i.getUser();m.buscar_para="",m.buscar_via="",m.buscar_de="",m.show_para=!1,m.show_via=!1,m.show_de=!1,m.openSelect=c,m.moverUsuario=s,n(l)}e.$inject=["$scope","DataService","restUrl","$timeout","Storage","Datetime","ArrayUtil"],angular.module("app").controller("fcDatosGeneralesController",e)}(),function(){"use strict";function e(e,t){var o=this,n=e;n.vm=o,n.model[n.options.key]&&n.model[n.options.key].fecha&&(n.model[n.options.key].fecha=t.format(n.model[n.options.key].fecha,"dd de MMM de YYYY"))}e.$inject=["$scope","Datetime"],angular.module("app").controller("fcCiteController",e)}(),function(){"use strict";function e(e,t,o){function n(){angular.isUndefined(r.model[r.options.key])&&(r.model[r.options.key]=i(l.first_name+" "+l.last_name),r.model[r.options.key]+="\nCc.:archivo")}function i(e){e=e.replace(/[^a-zA-Z ]/g,"");for(var t=e.toUpperCase(),o=t.split(" "),n="",i=0;i<o.length;i++)n+=o[i][0];return n}var a=this,r=e;r.vm=a;var l=o.getUser();t(n)}e.$inject=["$scope","$timeout","Storage"],angular.module("app").controller("fcConCopiaArchivoController",e)}(),function(){"use strict";function e(e,t,o,n){function i(){h=b.options.templateOptions,v.documentos=[],angular.isUndefined(b.model[b.options.key])?(b.model[b.options.key]={rows:[],monto_total:0},b.model[b.options.key].tipo="GESTION"==h.tipo?"MODIFICADO":h.tipo):r(),g=b.model[b.options.key]}function a(e){var t=n+"presupuesto/partidas/";return e&&(t+="?filter="+e),o.get(t).then(function(e){return e.datos||[]})}function r(e){e&&(e.monto=d(e.monto)?parseFloat(e.monto).toFixed(2):"0.00"),b.model[b.options.key].monto_total=0,b.model[b.options.key].rows.forEach(function(e){d(e.monto)&&(b.model[b.options.key].monto_total+=l(e.monto))}),b.model[b.options.key].monto_total=parseFloat(b.model[b.options.key].monto_total).toFixed(2)}function l(e){return parseFloat(parseFloat(e).toFixed(2))}function d(e){return/(?:\d*\.)?\d+/.test(e)}function s(e){var t=n+"presupuesto/partidas/?saldo="+e;o.get(t).then(function(e){e&&("EXITO"==e.tipoMensaje&&f("info"," El saldo actual del comprometido es "+e.datos.monto),"ADVERTENCIA"==e.tipoMensaje&&f("warning"," "+e.mensaje))})}function c(e){if(e){var t=n+"presupuesto/partidas/?cite="+e;o.get(t).then(function(e){if(e)if("EXITO"==e.tipoMensaje){if(g.rows){v.ids_comprometidos={},g.rows.forEach(function(e){v.ids_comprometidos[e.id_comprometido]=!e.pago_multiple});for(var t in e.datos)e.datos.hasOwnProperty(t)&&!v.ids_comprometidos[t]&&(g.rows.push({cite:angular.copy(v.buscar.doc_seleccionado),partida:angular.copy(e.datos[t].partida),descripcion:angular.copy(e.datos[t].descripcion),id_comprometido:angular.copy(e.datos[t].id),comprometido:angular.copy(e.datos[t].monto),pago_multiple:angular.copy(e.datos[t].pago_multiple),monto:"0.00"}),v.ids_comprometidos[t]=!e.datos[t].pago_multiple);0==Object.keys(e.datos)&&f("warning","El documento ya no tiene partidas disponibles.")}}else"ADVERTENCIA"==e.tipoMensaje&&f("warning",e.mensaje);v.buscar.doc_seleccionado=null})}}function m(e){var t=n+"plantillasFormly/documento?fields=id_documento,nombre,fecha&estado=APROBADO,CERRADO,DERIVADO&page=1&order=-fecha&limit=20";return e&&(t+="&searchPro=1&tipoBus=campo&campoSel=nombre&filter="+e),o.get(t).then(function(e){return e&&(v.documentos=e.datos.resultado),e.datos.resultado||[]})}function u(e,t){"MODIFICADO"==e||"COMPROMETIDO"==e?t?v.buscar.par_seleccionado?g.rows.push({partida:angular.copy(v.buscar.par_seleccionado),monto:"0.00"}):f("warning","Seleccione una partida para adicionar"):v.buscar.par_seleccionado&&g.rows.push({partida:angular.copy(v.buscar.par_seleccionado),monto:"0.00"}):"INICIAL"==e&&g.rows.push({monto:"0.00"}),r()}function p(e){g.rows.splice(e,1),r()}function f(e,t,o){var n={info:"info",warning:"warning"};v.alert.show=!0,v.alert.tipo=e,v.alert.mensaje=t,v.alert.icono=n[e],v.alert.time=o||0}var g,h,v=this,b=e;b.vm=v,v.buscar={},v.alert={},v.addRow=u,v.deleteRow=p,v.buscarDocumentos=m,v.buscarPartidas=a,v.cargarPartidas=c,v.obtenerSaldo=s,v.calcularTotal=r,t(i)}e.$inject=["$scope","$timeout","DataService","restUrl"],angular.module("app").controller("fcCajaChicaController",e)}(),function(){"use strict";function e(e,t,o){function n(){s.form_nuevo=angular.isUndefined(c.model[c.options.key]),s.form_nuevo||c.to.multiple||(c.model[c.options.key]=c.model[c.options.key][0])}function i(e){o.showPdfx(e)}function a(e){angular.element(e.currentTarget).next().click()}function r(e,t){t.forEach(function(e,t,o){"application/pdf"!=e.filetype&&(o.splice(t,1),c.to.multiple?c.model[c.options.key].splice(t,1):delete c.model[c.options.key])})}function l(e){c.to.multiple?e?c.model[c.options.key].splice(e,1):c.model[c.options.key].splice(0,1):delete c.model[c.options.key]}function d(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}var s=this,c=e;c.vm=s,s.elegirPdf=a,s.limpiarPdf=l,s.showPdf=i,s.redondear=d,s.onLoadModel=r,t(n)}e.$inject=["$scope","$timeout","Documento"],angular.module("app").controller("fcArchivoController",e)}(),function(){"use strict";function e(e,t){function o(e,o){var n={archivo:e,format:"pades"};angular.isUndefined(o)||(n.ci=o);var a={headers:{"Content-Type":"application/json"}},r=i+"/sign";return t(function(e,t){axios.post(r,n,a).then(function(t){return e(t)})["catch"](function(e){return t({finalizado:!1,message:(e.response.data.message||e.response.data)+" (Error en el firmador.)"})})})}function n(){var o={activo:!1,mensaje:""};return t(function(t){axios.get(i).then(function(n){return 200===n.status?o.activo=!0:e.log("Error no definido"),t(o)})["catch"](function(e){return o.activo=!1,e.message.indexOf(!1)&&(o.mensaje="El servicio del firmador no se encuentra iniciado."),t(o)})})}var i="https://localhost:4637",a={firmarPdf:o,verificarEstado:n};return a}e.$inject=["$log","$q"],angular.module("app").service("FirmaticService",["$log","$q",e])}(),function(){"use strict";function e(e,t,o,n,i,a,r){function l(e,t){return i.show({template:"./demofi.modal.html",controller:"./demofi.modal.controller",data:{solicitudes:e,config:t},size:"lg"})}function d(){var e=800,t=400,o=a.outerHeight/2+a.screenY-t/2,n=a.outerWidth/2+a.screenX-e/2;a.open(g,"_blank","toolbar=no,status=no,menubar=no,scrollbars=yes,left="+n+", top="+o+", width="+e+", height="+t+", visible=none","")}function s(){var e=g+"/tokens";return f(e)}function c(e){var t=g+"/start?pin="+e;return f(t)}function m(){var e=g+"/certs";return f(e)}function u(e,o){var n={nombre_archivo:e.codigo_archivo,pdf_base64:e.pdf_base64,alias:o};return t(function(e,t){axios.post(g+"/sign",n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){e(t.data)})["catch"](function(e){t({finalizado:!1,mensaje:"Demofi no se esta ejecutando en su equipo"+e})})})}function p(){var e=g+"/finish";return f(e)}function f(e){return t(function(t,o){axios.get(e).then(function(e){return e.data.finalizado===!1?void o(e.data):void t(e.data)})["catch"](function(e){e?(r.error("Demofi no se esta ejecutando en su equipo."),o({finalizado:!1,mensaje:"Demofi no se esta ejecutando en su equipo"})):(r.error("No se puede conectar con Demofi. Verifique que el programa se este ejecutando en su maquina."),o({finalizado:!1,mensaje:"No se puede conectar con Demofi. Verifique que el programa se este ejecutando en su maquina."}))})})}var g="https://localhost:3200",h={openModal:l,verificarServidor:d,listTokens:s,login:c,listCertificates:m,sign:u,logout:p};return h}e.$inject=["$log","$q","$http","$compile","Modal","$window","Message"],angular.module("app").service("DemofiService",["$log","$q","$http","$compile","Modal","$window","Message",e])}(),function(){"use strict";function e(e,t,o,n,i,a,r){function l(){angular.element("body").addClass("no-login"),angular.element("body").removeClass("principal")}function d(){c.datosDocumento&&(c.datosDocumento={},c.pdf=null,c.pdf_buffer=null),c.datos.codigo=c.datos.codigo.toUpperCase(),o.post(t+"verificar",c.datos).then(function(e){e&&"ERROR"!==e.tipoMensaje&&(c.datosDocumento=e.datos,c.datos.token=e.datos.token),e&&o.pdf(t+"pdfVerificado",c.datos).then(function(e){e&&(c.pdf=e.url,c.pdf_buffer=e.data,c.esMovil&&a.loadCanvas(e.data,"#canvasContainerVerificado"))})})["catch"](function(t){e.error(t)})}function s(){r.path("login")}l();var c=this;c.currentNavItem="verificar",c["goto"]=function(e){c.status="Go to "+e},c.data={selectedIndex:0},c.next=function(){c.data.selectedIndex=Math.min(c.data.selectedIndex+1,2)},c.previous=function(){c.data.selectedIndex=Math.max(c.data.selectedIndex-1,0)},c.esMovil=i.isMobile(),c.buscar=d,c.irInicio=s}e.$inject=["Message","backUrl","DataService","$log","Documento","Util","$location"],angular.module("app").controller("VerificarController",e)}(),function(){"use strict";function e(){}angular.module("app").controller("MainController",e)}(),function(){"use strict";function e(){function e(e){return m(this.templates[e].template)}function t(e){return Object.keys(e).length}function o(e){for(var t in e)for(var n=0;n<e[t].length;n++)angular.isDefined(e[t][n].$submitted)?(e[t][n].$submitted=!0,o(e[t][n].$error)):e[t][n].$setTouched&&e[t][n].$setTouched(!0)}function n(e,t){for(var o,n={},a={},r=0;r<e.length;r++)if("layout"==e[r].type)for(var l=0;l<e[r].fieldGroup.length;l++)o=c(e[r].fieldGroup[l]),i(o,a,t,n);else o=c(e[r]),i(o,a,t,n);return n}function i(e,t,o,n){angular.isUndefined(t[e.type])?(t[e.type]=1,e.key=e.type+"-0"):(e.key=e.type+"-"+t[e.type],t[e.type]++),angular.isDefined(o[e.key])&&(n[e.key]=angular.copy(o[e.key]))}function a(e,t){for(var o=0;o<e.length;o++)if("datepicker"==e[o].type){var n=e[o].templateOptions.label;t.hasOwnProperty(n)&&(t[n]=new Date(t[n]))}}function r(e,t){for(var o,n=[],i={},a=0;a<e.length;a++)if("layout"==e[a].type){var r=m(e[a]),l=" flex-"+parseInt(100/r.elementAttributes["num-cols"]);delete r.type,delete r.elementAttributes["num-cols"],r.fieldGroup=[];for(var s=0;s<e[a].fieldGroup.length;s++)o=c(e[a].fieldGroup[s]),o.className+=l,d(o,i,t),r.fieldGroup.push(o);n.push(r)}else o=c(e[a]),d(o,i,t),n.push(o);return n}function l(e,t){angular.forEach(e,function(e){if(angular.isDefined(e.fieldGroup))for(var o=0;o<e.fieldGroup.length;o++)e.fieldGroup[o].templateOptions&&(e.fieldGroup[o].templateOptions.disabled=t);else e.templateOptions&&(e.templateOptions.disabled=t)})}function d(e,t,o){if(angular.isUndefined(t[e.type])?(t[e.type]=1,e.key=e.type+"-0"):(e.key=e.type+"-"+t[e.type],t[e.type]++),"radio"===e.type&&(e.templateOptions.className="layout layout-wrap"),"datepicker"===e.type&&angular.isDefined(o)&&angular.isDefined(o[e.key])&&(o[e.key]=new Date(o[e.key])),"textarea"===e.type&&(e.templateOptions.grow=!0),e.templateOptions){var n={messages:{}};if(e.templateOptions.required&&(n.messages.required='"Debe llenar este campo."'),"input"===e.type){var i={"([a-zA-Zñáéíóú]+ ?)+":'"El campo debe contener solo palabras separadas por un espacio."',"\\d+":'"El campo debe contener solo números."',"([a-zA-Z0-9ñáéíóú]+ ?)+":'"El campo debe contener palabras y números separadas por un espacio."','^(([^<>()\\[\\]\\\\.,;:\\s@"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$':'"El campo debe ser un email válido."',"^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$":'"El campo debe ser una hora en formato hh:mm (ej. 08:47)"'};e.templateOptions.pattern&&(n.messages.pattern=i[e.templateOptions.pattern]),n.show=!0,e.validation=n}}}function s(e,t){for(var o=t.columnas||1,n="flex-gt-sm-"+parseInt(100/o),i=parseInt(e.length/o)+1,a=[],r=0;r<i;r++)a.push({elementAttributes:{"layout-gt-sm":"row",layout:"column","layout-align-gt-sm":"start end"},fieldGroup:[]});r=0;for(var l=0;r<e.length;){for(var d=0;r<e.length&&d<o;){if(e[r].className=n,""===e[r].templateOptions.label||null===e[r].templateOptions.label?e[r].key=e[r].templateOptions.placeholder:e[r].key=e[r].templateOptions.label,"radio"===e[r].type&&(e[r].templateOptions.className="layout layout-wrap"),t.deshabilitar?e[r].templateOptions.disabled=!0:e[r].templateOptions.disabled=!1,t.todoMayuscula&&"input"===e[r].type){var s='model["'+e[r].key+'"] = model["'+e[r].key+'"].toUpperCase()';e[r].templateOptions.onKeyup=s}t.validacion&&("input"!==e[r].type&&"datepicker"!==e[r].type||(e[r].validation={messages:{required:'"Debe llenar este campo."'}})),a[l].fieldGroup.push(c(e[r])),r++,d++}l++}return a}function c(e){if("layout"==e.type)return m(e);var t={type:e.type,key:e.key,className:m(e.className),templateOptions:m(e.templateOptions),validation:m(e.validation)};return t}function m(e){return angular.fromJson(angular.toJson(e))}function u(){p.templates={input:{template:{type:"input",key:"inputText",templateOptions:{type:"text",label:"Campo de texto",disabled:!1}}},radio:{template:{type:"radio",key:"inputRadio",templateOptions:{label:"Selección simple",labelProp:"value",valueProp:"id",vertical:!1,options:[{value:"opción 1",id:"opcion 1"},{value:"opción 2",id:"opcion 2"}]}}},select:{template:{type:"select",key:"inputSelect",templateOptions:{label:"Lista de selección",multiple:!1,labelProp:"value",valueProp:"id",showItem:!0,options:[{value:"opción 1",id:"opcion 1"},{value:"opción 2",id:"opcion 2"}]}}},select_multiple:{template:{type:"select",key:"inputSelect",templateOptions:{label:"Lista de selección",multiple:!0,labelProp:"value",valueProp:"id",options:[{value:"opción 1",id:"opcion 1"},{value:"opción 2",id:"opcion 2"}]}}},textarea:{template:{type:"textarea",key:"inputTextArea",templateOptions:{label:"Area de texto",rows:2,grow:!1}}},checkbox:{template:{type:"checkbox",key:"inputCheckBox",templateOptions:{label:"Casilla de verificación",disabled:!1}}},datepicker:{template:{type:"datepicker",key:"inputDatePicker",templateOptions:{label:"Calendario"}}},slider:{template:{type:"slider",key:"inputSlider",templateOptions:{label:"Deslizador",min:1,max:5,step:.5,discrete:!0}}},"switch":{template:{type:"switch",key:"inputSwitch",templateOptions:{label:"Interruptor"}}},chips:{template:{type:"chips",key:"inputChips",templateOptions:{label:"Palabras clave",placeholder:"+palabras",secondaryPlaceholder:"Añadir palabras",deleteButtonLabel:"Borrar",deleteHint:"Borrar palabra"}}},titulo:{template:{type:"texto",key:"texto",templateOptions:{label:"Título",tipo:"h2",className:"ap-text-left",mTop:!0,mBot:!0}}},subtitulo:{template:{type:"texto",key:"texto",templateOptions:{label:"Subtítulo",tipo:"h3",className:"ap-text-left",mTop:!0,mBot:!0}}},parrafo:{template:{type:"texto",key:"parrafo",templateOptions:{label:"Texto del párrafo, texto del párrafo, texto del párrafo, texto del párrafo, texto del párrafo, texto del párrafo, texto del párrafo, texto del párrafo.",tipo:"p",className:"ap-text-justify",mTop:!0,mBot:!0}}},lista:{template:{type:"lista",key:"lista",templateOptions:{label:"Lista de elementos",className:"ap-text-left",tipo:"ol",showItem:!0,options:["Elemento 1","Elemento 2"]}}},datosGenerales:{template:{type:"datosGenerales",key:"datosGenerales",templateOptions:{labelw:10,labelRef:"REF.:",showItem:!0,show:{para:!0,via:!0,de:!0,ref:!0}}}},encabezado:{template:{type:"encabezado",key:"encabezado",templateOptions:{labelw:10,labelRef:"REF.:",show:{para:!0,via:!0,de:!0,ref:!0}}}},documentosRelacionados:{template:{type:"documentosRelacionados",key:"documentosRelacionados",templateOptions:{labelw:10,label:"Referencias:"}}},listaContactos:{template:{type:"listaContactos",key:"listaContactos",templateOptions:{labelw:20,label:"Lista de contactos:"}}},documentosAnular:{template:{type:"documentosAnular",key:"documentosAnular",templateOptions:{labelw:10,label:"Referencias:"}}},ccArchivo:{template:{type:"ccArchivo",key:"ccArchivo",templateOptions:{labelw:10,label:"CC/Archivo:"}}},archivo:{template:{type:"archivo",key:"archivo",templateOptions:{label:"Elegir PDF"}}},cite:{template:{type:"cite",templateOptions:{labelCite:"CITE",labelFecha:"FECHA",tipo:"general",numeracionPagina:"false",tipoHoja:"Letter"}}},inputt:{template:{type:"inputt",templateOptions:{labelw:20,labelx:"Asunto:"}}},editorTexto:{template:{type:"editorTexto",templateOptions:{label:"jojojo"}}},layout:{template:{type:"layout",elementAttributes:{"num-cols":"2","layout-align":"start end",layout:"row"},fieldGroup:[]}},vacio:{template:{type:"vacio",templateOptions:{height:1,style:{}}}},cajachica:{template:{type:"cajachica",templateOptions:{tipo:"GESTION"}}},certificacionComprometido:{template:{type:"certificacionComprometido",templateOptions:{label:"Certificación de presupuesto comprometido"}}}}}var p={getConfigItem:c,parse:m,listToForm:s,filterDates:a,newTemplate:e,dataToView:r,sizeObj:t,recursiveShowError:o,disableForm:l,clearModel:n};return u(),p}angular.module("app").factory("UtilFormly",e)}(),function(){"use strict";function e(e,t){function o(e,t){return e.replace(/\{([\w\.]*)\}/g,function(e,o){for(var n=o.split("."),i=t[n.shift()],a=0,r=n.length;a<r;a++)i=i[n[a]];return"undefined"!=typeof i&&null!==i?i:""})}function n(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function i(e){return/^[\],:{}\s]*$/.test(e.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))}function a(e,t){return e.length>t?e.substring(0,Math.min(t,e.length))+"...":e}function r(e){return e.replace(/(<([^>]+)>)/gi,"")}function l(e,t){var o=e.first.defaultValue,i=e.second.defaultValue;e.first.position=e.first.position||0,e.second.position=e.second.position||1;var a=n(t[e.first.position]);return"undefined"!=a&&(a==e.first.type?(o=t[e.first.position],i=n(t[e.second.position])==e.second.type?t[e.second.position]:e.second.defaultValue):a==e.second.type&&(o=n(t[e.second.position])==e.first.type?t[e.second.position]:e.first.defaultValue,i=t[e.first.position])),{first:o,second:i}}function d(t,n){if("string"==typeof n)angular.element.get(n,function(n){var i=e.open("","print");i.document.write(o(I,{body:t,css:n})),i.document.close(),i.focus(),i.print(),i.close()});else{var i=e.open("","print");i.document.write(o(I,{body:t,css:n})),i.document.close(),i.focus(),i.print(),i.close()}return!0}function s(t){e.open(t,"print")}function c(){O.fullscreenElement||O.mozFullScreenElement||O.webkitFullscreenElement||O.msFullscreenElement?O.exitFullscreen?O.exitFullscreen():O.msExitFullscreen?O.msExitFullscreen():O.mozCancelFullScreen?O.mozCancelFullScreen():O.webkitExitFullscreen&&O.webkitExitFullscreen():O.documentElement.requestFullscreen?O.documentElement.requestFullscreen():O.documentElement.msRequestFullscreen?O.documentElement.msRequestFullscreen():O.documentElement.mozRequestFullScreen?O.documentElement.mozRequestFullScreen():O.documentElement.webkitRequestFullscreen&&O.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}function m(e,t){if("undefined"==typeof t||0==t.length)return e;var o=[];for(var n in t){var i=u(e,t[n]);i&&o.push(i)}return o}function u(e,t){for(var o in e)if(e[o].key==t)return e[o];return null}function p(e,t){if("undefined"==typeof t||0==t.length)return e;for(var o in e){var n=u(t,e[o].key);n&&(e[o]=angular.element.extend(!0,{},e[o],n))}return e}function f(e){return Object.keys(e).length}function g(e,o){var i=t.get("Datetime"),a={};for(var r in e)"date"==n(e[r])?a[r]=i.format(e[r],"YYYY-MM-dd"):"string"!=typeof e[r]||"true"!=e[r]&&"false"!=e[r]?a[r]=e[r]:a[r]="true"==a[r];return a.id=h(a,o),a}function h(e,t,o){if(e)for(var n in t)if(t[n].templateOptions.label&&"ID"==t[n].templateOptions.label)return o?t[n].key:e[t[n].key];return null}function v(e,t,o){return e.filter(function(e){e.key==t&&e.templateOptions.options&&e.templateOptions.options.filter(function(e){e.value==o&&(o=e.name)})}),o}function b(e){var t=[];for(var o in e)t.push(o+"="+e[o]);return t.join("&")}function y(e,t){var o=[];for(var n in e){if(t)for(var i in e[n])null!=e[n][i]&&void 0!=e[n][i]&&""!=e[n][i]||delete e[n][i];Object.keys(e[n]).length>0&&o.push(n+"="+angular.toJson(e[n]))}return o.join("&")}function _(e,t){for(var o in e)if("undefined"!=typeof e[o].submenu){var n=e[o].submenu;for(var i in n)if(n[i].url==t)return[e[o].label,n[i].label]}for(var a in e)if(e[a].url==t)return[e[a].label,!1];return[!1,!1]}function w(e,t){for(var o in e)if(e[o].key==t&&e[o].templateOptions&&e[o].templateOptions.options)return e[o].templateOptions.options.length;return 0}function x(e){return e=e.split("-"),[e[2],e[1],e[0]].join("/")}function k(e){var o=t.get("Datetime");for(var n in e)"string"==typeof e[n]&&(o.isDate(e[n])?/^[0-9]\s*$/.test(e[n])||(e[n]=new Date):!/[a-zA-Z]+/g.test(e[n])&&/^(?:(?:([01]?\d|2[0-3]):)?([0-5]?\d):)?([0-5]?\d)$/g.test(e[n])&&8==e[n].length&&(e[n]=C(e[n])));return e}function C(e){return e=e.split(":"),[e[0],e[1]].join(":")}function D(e){var t={};return e.map(function(e){t[e.key]=e}),t}function A(e,o){function n(e){var t=e.getViewport(a),n=document.createElement("canvas"),i=n.getContext("2d"),r={canvasContext:i,viewport:t};n.height=t.height,n.width=t.width,n.style="width:100%; height:100%;",document.querySelector(o).appendChild(n),e.render(r)}function i(e){for(var t=1;t<=e.numPages;t++)e.getPage(t).then(n)}PDFJS.workerSrc=t.get("backUrl")+"flibs/pdfjs/pdf.worker.js";var a=1.5;PDFJS.disableWorker=!0,PDFJS.getDocument(e).then(i)}var O=e.document,I='<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><title>Document</title><style>{css}</style></head><body>{body}</body></html>',E={toType:n,isJson:i,getParams:l,print:d,fullscreen:c,nano:o,popup:s,filterFields:m,addPropertiesFormly:p,size:f,getFkData:v,serialize:b,serializeToJson:y,getMenuOption:_,searchField:u,lengthOptions:w,formatDate:x,filterItem:k,getKeys:D,getId:h,parseSave:g,truncate:a,loadCanvas:A,stripHTML:r};return E}e.$inject=["$window","$injector"],angular.module("app").factory("Util",["$window","$injector",e])}(),function(){"use strict";function e(e,t){function o(e){u("user",e)}function n(){return p("user")}function i(){return h("user")}function a(){f("user")}function r(){return v.getItem(t+"_token")}function l(e,o){v.setItem(t+"_"+e,angular.toJson(o))}function d(e){return angular.fromJson(v.getItem(t+"_"+e))}function s(e){v.removeItem(t+"_"+e)}function c(){for(var e in v)v.removeItem(e)}function m(e){return"undefined"!=typeof v.getItem(t+"_"+e)&&null!=v.getItem(t+"_"+e)&&"undefined"!=v.getItem(t+"_"+e)}function u(e,o){b.setItem(t+"_"+e,angular.toJson(o))}function p(e){return angular.fromJson(b.getItem(t+"_"+e))}function f(e){b.removeItem(t+"_"+e)}function g(){for(var e in b)b.removeItem(e)}function h(e){return"undefined"!=typeof b.getItem(t+"_"+e)&&null!=b.getItem(t+"_"+e)&&"undefined"!=b.getItem(t+"_"+e)}t=t||"app";var v=e.localStorage,b=e.sessionStorage,y={get:d,set:l,remove:s,destroy:c,exist:m,getSession:p,setSession:u,removeSession:f,destroySession:g,existSession:h,setUser:o,getUser:n,existUser:i,removeUser:a,getToken:r};return y}e.$inject=["$window","appName"],angular.module("app").factory("Storage",["$window","appName",e])}(),function(){"use strict";function e(e,t,o,n){function i(){e.$on("$stateChangeStart",a)}function a(e,i,a,l){if("^"!==l.url&&"/login"!==i.url&&"/verificar"!==i.url){var d=t.getUser(),s=null!==d,c=t.getSession("menu"),m=!0;if("/login"===l.url&&"/login"!==i.url&&!s)return o.error("Usted no esta autorizado para acceder a la vista."),void e.preventDefault();if(m="/"===i.url,"/profile"===i.url&&(m=!0),"/vista_pdf"===i.url&&(m=!0),s&&!m)for(var u=0;u<c.length;u++)for(var p=0;p<c[u].submenu.length;p++)r(c[u].submenu[p].url,i.url)&&(m=!0);if("/documento/:idDocumento"!==i.url&&n.stopAutoSave(),!s||!m)return o.error("Usted no esta autorizado para acceder a la vista."),void e.preventDefault()}}function r(e,t){var o={plantillas:{"/plantillas":!0,"/plantilla/:idPlantilla":!0},usuario:{"/usuario":!0,"/elegir":!0},rol:{"/rol":!0},menu:{"/menu":!0},documentos:{"/documentos":!0,"/documento/:idDocumento":!0},aprobacion:{"/aprobacion":!0},progreso:{"/progreso":!0},impresion:{"/impresion":!0},en_curso:{"/en_curso":!0},firmar:{"/firmar":!0},monitoreo:{"/monitoreo":!0},contactos:{"/contactos":!0}};return!(!angular.isDefined(o[e])||!angular.isDefined(o[e][t]))&&o[e][t]}var l={init:i};return l}e.$inject=["$rootScope","Storage","Message","ExpirationTime"],angular.module("app").factory("RouteValidator",["$rootScope","Storage","Message","ExpirationTime",e])}(),function(){"use strict";function e(e,t){function o(o){var i=null;i=o.event?e.newPanelPosition().relativeTo(o.event.currentTarget).addPanelPosition(e.xPosition.ALIGN_END,e.yPosition.BELOW):e.newPanelPosition().absolute().center();var a="app/factories/Panel/defaultPanelTemplate.html",r={attachTo:angular.element(t[0].body),controller:o.controller||["$scope","$log",n],templateUrl:o.templateUrl||a,panelClass:"md-panel",position:i,locals:{data:o.data||""},openFrom:o.event,clickOutsideToClose:!!angular.isUndefined(o.clickOutsideToClose)||o.clickOutsideToClose,escapeToClose:!!angular.isUndefined(o.clickOutsideToClose)||o.clickOutsideToClose,focusOnOpen:!0};o.event&&(r.targetEvent=o.event),e.open(r)}function n(e,t){t.info("hola desde controller default, introduzca su controller")}var i={show:o};return i}e.$inject=["$mdPanel","$document"],angular.module("app").factory("Panel",["$mdPanel","$document",e])}(),function(){"use strict";function e(){function e(e){e.setType({name:"texto",templateUrl:"app/components/formlyComponents/texto/texto.html"}),e.setType({name:"lista",templateUrl:"app/components/formlyComponents/listas/listas.html"}),e.setType({name:"vacio",templateUrl:"app/components/formlyComponents/vacio/vacio.html",controller:"fcVacioController"}),e.setType({name:"cite",templateUrl:"app/components/formlyComponents/cite/cite.html",controller:"fcCiteController"}),e.setType({name:"inputt",templateUrl:"app/components/formlyComponents/inputt/inputt.html"}),e.setType({name:"editorTexto",templateUrl:"app/components/formlyComponents/editorTexto/editorTexto.html"}),e.setType({name:"datosGenerales",templateUrl:"app/components/formlyComponents/datosGenerales/datosGenerales.html",controller:"fcDatosGeneralesController"}),e.setType({name:"encabezado",templateUrl:"app/components/formlyComponents/encabezado/encabezado.html",controller:"fcEncabezadoController"}),e.setType({name:"documentosRelacionados",templateUrl:"app/components/formlyComponents/documentosRelacionados/documentosRelacionados.html",controller:"fcDocumentosRelacionadosController"}),e.setType({name:"documentosAnular",templateUrl:"app/components/formlyComponents/documentosAnular/documentosAnular.html",controller:"fcDocumentosAnularController"}),e.setType({name:"ccArchivo",templateUrl:"app/components/formlyComponents/ccArchivo/ccArchivo.html",controller:"fcConCopiaArchivoController"}),e.setType({name:"archivo",templateUrl:"app/components/formlyComponents/archivo/archivo.html",controller:"fcArchivoController"}),e.setType({name:"cajachica",templateUrl:"app/components/formlyComponents/cajachica/cajachica.html",controller:"fcCajaChicaController"}),e.setType({name:"certificacionComprometido",templateUrl:"app/components/formlyComponents/certificacionComprometido/certificacionComprometido.html"}),e.setType({name:"listaContactos",templateUrl:"app/components/formlyComponents/listaContactos/listaContactos.html",controller:"fcListaContactosController"})}var t={init:e};return t}angular.module("app").factory("MyFormlyConfig",e)}(),function(){"use strict";function e(e){function t(t){var n={controller:t.dialogController||t.controller||["$scope","$mdDialog","data","fields","title","add","column","done",o],templateUrl:t.templateUrl||"",parent:angular.element("body"),clickOutsideToClose:"undefined"==typeof t.clickOutsideToClose||t.clickOutsideToClose,escapeToClose:"undefined"==typeof t.escapeToClose||t.escapeToClose,locals:{data:t.data||"",fields:t.fields||"",title:t.title||"",add:t.add||"",column:t.column||1,done:t.done||function(){}}};t.event&&(n.targetEvent=t.event),e.show(n).then(function(){},function(){t.close&&t.close()})}function o(e,t,o,n,i,a,r,l){
var d=e;d.data=o,d.fields=n,d.title=i,d.add=a,d.column=r,d.hide=t.hide,d.cancel=t.cancel,d.answer=function(e){l(e,t)}}function n(t,o){var n=e.alert().clickOutsideToClose(!0).title("Alerta").htmlContent(t).ariaLabel("Alerta").ok("Aceptar");o&&n.targetEvent(o),e.show(n)}function i(t,o,n,i){var a=e.confirm().title("Confirmar").textContent(t).ariaLabel("Confirmar").ok("Aceptar").cancel("Cancelar");i&&a.targetEvent(i),e.show(a).then(function(){o&&o()},function(){n&&n()})}var a={show:t,alert:n,confirm:i};return a}e.$inject=["$mdDialog"],angular.module("app").factory("Modal",["$mdDialog",e])}(),function(){"use strict";function e(e){function t(e,t,o,n){var i={EXITO:"check",ERROR:"error",ADVERTENCIA:"warning",INFORMACION:"info"},r={EXITO:"La operación se realizó correctamente.",ERROR:"Ocurrió un error al procesar su operación.",ADVERTENCIA:"Ocurrió algo inesperado al procesar su operación.",INFORMACION:"La operacion se realizó correctamente, pero hay alguna infromación que no se muestra"},l={EXITO:"Correcto",ERROR:"Error",ADVERTENCIA:"Advertencia",INFORMACION:"Información"},d={EXITO:"success",ERROR:"danger",ADVERTENCIA:"warning",INFORMACION:"info"},s={icon:i[e],message:t||r[e],title:o||l[e],type:d[e],timeout:n};a(s)}function o(e,t,o){var n={icon:"check",message:e||"La operación se realizó correctamente.",title:t||"Correcto",type:"success",timeout:o};a(n)}function n(e,t,o){var n={icon:"error",message:e||"Ocurrió un error al procesar su operación.",title:t||"Error",type:"danger",timeout:o};a(n)}function i(e,t,o){var n={icon:"warning",message:e||"Ocurrió algo inesperado al procesar su operación.",title:t||"Advertencia",type:"warning",timeout:o};a(n)}function a(t){e.show({controller:r,templateUrl:"app/factories/Messages/layout.toast.html",parent:angular.element("#toast-container-main"),hideDelay:"undefined"!=typeof t.timeout?0==t.timeout?31536e6:t.timeout:5e3,position:"top right",locals:t})}function r(e,t,o,n,i,a){var r=e;r.icon=o,r.message=n,r.title=i,r.type=a,r.close=function(){t.hide()}}r.$inject=["$scope","$mdToast","icon","message","title","type"];var l={success:o,warning:i,error:n,show:t};return l}e.$inject=["$mdToast"],angular.module("app").factory("Message",["$mdToast",e])}(),function(){"use strict";function e(e){function t(t){t.data&&(l=t.data);var o={controller:t.dialogController||t.controller||["$scope","$mdDialog","data","fields","title","add","column",i],templateUrl:t.templateUrl||"app/factories/Loading/Loading.html"||"",parent:angular.element("body"),escapeToClose:!1,locals:{data:l,fields:t.fields||"",title:t.title||"",add:t.add||"",column:t.column||1}};t.event&&(o.targetEvent=t.event),e.show(o).then(function(){},function(){t.close&&t.close()})}function o(){e.hide()}function n(e){e.mensaje&&(l.mensaje=e.mensaje),e.tipo&&(l.tipo=r[e.tipo])}function i(e,t,o,n,i,a,r){var l=e;l.data=o,l.fields=n,l.title=i,l.add=a,l.column=r,l.hide=t.hide}var a={show:t,cerrar:o,cambiar:n},r={warning:"loader-warning",error:"loader-error",success:"loader-success",info:"loader-info"},l={mensaje:"Cargando...",tipo:r.warning};return a}e.$inject=["$mdDialog"],angular.module("app").factory("Loading",["$mdDialog",e])}(),function(){"use strict";function e(e,t,o){function n(e){if(e.url.indexOf(o)!==-1){var n={flag:!0,token:t.getToken()};e.headers.validacion=i(angular.toJson(n))}return e}function i(e){if(/([^\u0000-\u00ff])/.test(e))throw new Error("Can't base64 encode non-ASCII characters.");for(var t,o,n,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,r=[];a<e.length;){switch(t=e.charCodeAt(a),n=a%3){case 0:r.push(i.charAt(t>>2));break;case 1:r.push(i.charAt((3&o)<<4|t>>4));break;case 2:r.push(i.charAt((15&o)<<2|t>>6)),r.push(i.charAt(63&t))}o=t,a++}return 0==n?(r.push(i.charAt((3&o)<<4)),r.push("==")):1==n&&(r.push(i.charAt((15&o)<<2)),r.push("=")),r.join("")}var a={request:n};return a}e.$inject=["$q","Storage","restUrl"],angular.module("app").factory("HttpInterceptor",["$q","Storage","restUrl",e])}(),function(){"use strict";function e(e,t,o,n,i,a,r,l){function d(){angular.isUndefined(h.interval)&&(h.time=60*s(),h.interval=o(function(){h.time--,10==h.time&&i.url().indexOf("/documento/")&&angular.isDefined(h.autoSaveInterval)&&h.guardar(!1,!0),(h.time<=0||0==i.url().indexOf("/login"))&&p(!0)},1e3))}function s(){return angular.isDefined(n.getPayload())?n.getPayload().tiempo:0}function c(){angular.isDefined(h.interval)&&(o.cancel(h.interval),h.interval=void 0)}function m(){angular.isDefined(h.autoSaveInterval)&&(o.cancel(h.autoSaveInterval),h.autoSaveInterval=void 0)}function u(e,t){h.guardar=angular.isFunction(e)?e:function(e,t){},angular.isUndefined(h.autoSaveInterval)&&(h.autoSaveInterval=o(function(){h.guardar(!1,!0)},6e5)),t&&m(),f()}function p(e){h.stopInterval(),e&&t.warning("Su sesión ha sido cerrada automáticamente después de "+s()+" minutos, tiempo que dura la sesión.",null,0),n.logout().then(function(){i.path("login"),a.hide()})}function f(){angular.isDefined(h.interval)&&r.get(l+"refrescar").then(function(e){angular.isDefined(e)&&(n.setToken(e.token),h.time=60*s())})}var g={interval:void 0,time:null,init:d,stopInterval:c,refreshToken:f,guardar:void 0,autoSaveInterval:void 0,initAutoSave:u,stopAutoSave:m,getExpirationTime:s,logout:p},h=g;return g}e.$inject=["Storage","Message","$interval","$auth","$location","$mdDialog","DataService","restUrl"],angular.module("app").factory("ExpirationTime",["Storage","Message","$interval","$auth","$location","$mdDialog","DataService","restUrl",e])}(),function(){"use strict";function e(e,t,o,n,i,a,r,l,d,s){function c(e){e=e.replace(/[^a-zA-Z ]/g,"");for(var t=e.toUpperCase(),o=t.split(" "),n="",i=0;i<o.length;i++)"DE"!==o[i]&&"PARA"!==o[i]&&"Y"!==o[i]&&"LA"!==o[i]&&angular.isDefined(o[i][0])&&(n+=o[i][0]);return n}function m(e){var t={nombre:e,html:"<p>Este es un documento externo, no puede transformarse en texto.</p>"},o=l.absUrl();t.esDocumentoExterno=!0,o=o.substring(0,o.indexOf("#/")+2),d.setSession("datos_enviar",t),r.open(o+"vista_pdf")}function u(o,n){e.get(t+"plantillasFormly/documento/"+o).then(function(e){p(e.datos.plantilla,e.datos.plantilla_valor,e.datos.nombre,n,o)})}function p(o,c,m,u,p){var f=!!angular.isUndefined(u)||u,h={doc:{}};h.model_actual=angular.fromJson(c);var v=h.model_actual;v["cite-0"]&&v["cite-0"].fecha&&(v["cite-0"].fecha=n.format(v["cite-0"].fecha,"dd de MMM de YYYY")),h.form_actual=i.dataToView(angular.fromJson(o),v),h.doc.nombre=m,h.doc.plantilla=o,e.post(t+"plantillasFormly/generarDocumento/",h).then(function(o){if(h={html:o.datos.html,nombre:o.datos.nombre},h.esDispositivoMovil=_.isMobile(),f)e.pdf(t+"plantillasFormly/documentoPDF/",{cite:h.nombre}).then(function(o){if(o)return h.pdf=o.url,h.pdf_buffer=o.data,null!==p&&p?(s.log("Obteniendo firmas"),e.get(t+"documento/firmado/"+p)):void 0}).then(function(e){e&&(h.firmas=e.datos||[]);var t={data:h,templateUrl:"app/factories/Documento/dialogPDF.html",controller:["data","$scope","$mdDialog","Util",g]};a.show(t)});else{var n=l.absUrl();n=n.substring(0,n.indexOf("#/")+2),d.setSession("datos_enviar",h),r.open(n+"vista_pdf")}})}function f(){return angular.isDefined(r.orientation)||navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)}function g(e,t,o,n){s.log("CHECK DATA ",e);var i=t;i.data={},i.data.html=e.html,i.data.pdf=e.pdf,i.data.flag_html=!0,i.data.firmas=e.firmas||[],i.data.show_pdf=!e.esDispositivoMovil,e.esDispositivoMovil&&n.loadCanvas(e.pdf_buffer,"#canvasContainer"),i.mostrarPdf=function(e,t){t?m(e):u(e,!1)},i.cerrar=function(){o.cancel()},i.verHtml=function(){i.data.flag_html=!0},i.verPdf=function(){i.data.flag_html=!1}}function h(o,n){e.get(t+"historialFlujo/"+n).then(function(e){if(e){v(e.datos);var t={event:o,data:{id:n,datos:e.datos},templateUrl:"app/factories/Documento/dialog.progreso.html",controller:["$scope","$mdDialog","data",y]};a.show(t)}})}function v(e){e.forEach(function(e){switch(e.fecha_mos=n.dateLiteral(e._fecha_creacion),e.hora_mos=n.time(e._fecha_creacion),e.accion){case"ENVIADO":e.acc="Envió",e.icon="send",e.bg_color="envio";break;case"APROBADO":e.acc="Aprobó",e.icon="done_all",e.bg_color="success";break;case"RECHAZADO":e.acc="Observó",e.icon="error",e.bg_color="danger",e.observacion=e.observacion.substring(e.observacion.indexOf("Observaciones:"),e.observacion.length);break;case"DERIVADO":e.acc="Derivó",e.icon="trending_down",e.bg_color="envio";break;case"CERRADO":e.acc="Cerró",e.icon="assignment_turned_in",e.bg_color="warning";break;case"CREADO":e.acc="Respondió",e.icon="undo",e.bg_color="success";break;case"ELIMINADO":e.acc="Eliminó",e.icon="clear",e.bg_color="danger";break;case"FIRMO":e.acc="Firmó",e.icon="fingerprint",e.bg_color="firmo";break;case"ANULADO":e.acc="Anuló",e.icon="cancel",e.bg_color="danger";break;default:e.acc="Sin respuesta",e.icon="visibility",e.bg_color="bold"}})}function b(o,n){e.get(t+"historialFlujo/"+n+"/proceso").then(function(e){if(e){v(e.datos);var t={event:o,data:{id:n,datos:e.datos},templateUrl:"app/factories/Documento/dialog.progreso.html",controller:["$scope","$mdDialog","data",y]};a.show(t)}})}function y(e,t,o){function n(){t.cancel()}function i(e){u(e,!1)}var a=e;a.data=o,a.cerrar=n,a.verDocumento=i}var _={showPdfId:u,showPdf:p,showPdfx:m,showProgress:h,showProgressAll:b,generarAbreviacion:c,isMobile:f};return _}e.$inject=["DataService","restUrl","backUrl","Datetime","UtilFormly","Modal","$window","$location","Storage","$log"],angular.module("app").factory("Documento",e)}(),function(){"use strict";function e(){function e(e,t,o){for(var n,i=0,a=t.length;i<a;i++)n=new RegExp(t[i],"g"),e=e.replace(n,o[i]);return e}function t(e,t,o,n){var i=e[t];e.splice(t,1),angular.isDefined(n)?n.splice(o,0,i):e.splice(o,0,i)}function o(e,t,o){e.splice(t,0,o)}function n(e,t,o,n){for(var i=0;i<e.length;i++)if(e[i][t]==o)return!n||e[i];return!!n&&null}var i={replace:e,insert:o,mover:t,buscarObj:n};return i}function t(e,t){function o(e,t){var o=e[0].split(t||"-");return new Date(o[0],o[1]-1,o[2])}function n(e,t){return[e.getFullYear(),e.getMonth()+1,e.getDate()].join(t||"-")}function i(){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),1)}function a(e){e=e||1;var t=new Date,o=t.getDate(),n=t.getMonth(),i=t.getFullYear();return o<e&&(n--,n<0&&(n=11,i--)),new Date(i,n,e)}function r(t){return"string"==e.toType(t)&&(t=h(t)),l(t)}function l(t){return"date"==e.toType(t)&&!isNaN(t.getTime())}function d(e){return g(e)<(new Date).getTime()}function s(e,t){return g(e)>p(new Date,t)}function c(e){return g(e)>(new Date).getTime()}function m(e,t){return g(e)<u(new Date,t)}function u(e,t){return g(e)+24*(t||0)*60*60*1e3}function p(e,t){return g(e)-24*(t||0)*60*60*1e3}function f(e,t){return g(e)-g(t)}function g(t){return"string"==e.toType(t)&&(t=h(t)),t.getTime()}function h(e){return e=e.split("/"),"dd/MM/YYYY"==M?new Date(e[2],e[1]-1,e[0]):"MM/dd/YYYY"==M?new Date(e[2],e[0]-1,e[1]):new Date(e[0],e[1]-1,e[2])}function v(e){M=e}function b(e){return A(new Date,e||M)}function y(e){return C(e,"dd de MMM del YYYY")}function _(e){return C(e,"HH:mm")}function w(e,t){var o="";if("number"==typeof e)return 0==e?"":(o=e<60?e+"s":e<3600?Math.floor(e/60)+"m "+(e%60>0?e%60+"s":""):Math.floor(e/3600)+"h "+(e%3600>0?Math.floor(e/60)+"m ":"")+(e%60>0?e%60+"s":""),(t||"")+o);if(0==e.length)return"";e=e.split(":");var n=e[0],i=e[1];return parseInt(n)>0&&(o+=parseInt(n)+"h "),parseInt(i)>0&&(o+=parseInt(i)+"m "),3==e.length&&parseInt(e[2])>0&&(o+=parseInt(e[2])+"s"),(t||"")+o}function x(e){e=e.split(":");var t=e[0],o=e[1],n=0;return parseInt(t)>0&&(n+=3600*parseInt(t)),parseInt(o)>0&&(n+=60*parseInt(o)),3==e.length&&parseInt(e[2])>0&&(n+=parseInt(e[2])),n}function k(e){return C(e,"dddd dd de MMM del YYYY a la(s) HH:mm")}function C(e,t){var o=new Date(e);return r(o)?A(o,t||M):e}function D(t,o){var n=e.toType(t);if("date"==n)return t;if("string"==n){o=o||M;var i=t.indexOf("/")!=-1?"/":"-";t=t.split(i),"dd/MM/YYYY"!=o&&"dd-MM-YYYY"!=o||(t=t[1]+i+t[0]+i+t[2]),"YYYY/dd/MM"!=o&&"YYYY-dd-MM"!=o||(t=t[0]+i+t[1]+i+t[0])}return new Date(t)}function A(e,o){o=o||M,e=D(e,o);var n=o.indexOf("MMM")!=-1;return t.replace(o,["dddd","ddd","dd",n?"MMM":"MM","YYYY","HH","mm","ss"],[j[e.getDay()],U[e.getDay()],(e.getDate()<10?"0":"")+e.getDate(),n?$[e.getMonth()]:(e.getMonth()+1<10?"0":"")+(e.getMonth()+1),e.getFullYear(),(e.getHours()<10?"0":"")+e.getHours(),(e.getMinutes()<10?"0":"")+e.getMinutes(),(e.getSeconds()<10?"0":"")+e.getSeconds()])}function O(e){var t=new Date,o=P(e,t);if(o>31)return y(e);if(o>7){var n=parseInt(o/7);return"Hace "+n+" semana"+(n>1?"s":"")}if(o>=1)return C(e,"ddd a la(s) HH:mm");var i=T(e,t);if(F(e,i))return"Ayer a la(s) "+_(e);if(i>=1)return"Hace "+i+" hora"+(i>1?"s":"");var a=E(e,t);if(a>=1)return"Hace "+a+" minuto"+(a>1?"s":"");var r=I(e,t);return"Hace "+r+" segundo"+(r>1?"s":"")}function I(e,t,o){return S(e,t,"s",o)}function E(e,t,o){return S(e,t,"i",o)}function T(e,t,o){return S(e,t,"h",o)}function P(e,t,o){return S(e,t,"d",o)}function S(e,t,o,n){var i={s:1e3,i:6e4,h:36e5,d:864e5},a=parseInt((D(t).getTime()-D(e).getTime())/i[o]);return"undefined"!=typeof n&&n!==!1?Math.abs(a):a}function F(e,t){if(r(e)){e=e.split(" ");var o=e[1].split(":");return t>=parseInt(o[0])}return!1}function R(e){return[e.getDate(),e.getMonth()+1,e.getFullYear()].join("/")}function N(e){return[e.getFullYear(),e.getMonth()+1,e.getDate()].join("-")}var M="dd/MM/YYYY",$=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],U=["dom","lun","mar","mié","jue","vie","sáb"],j=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],q={isDate:r,isValid:l,isLessThan:d,isLessThanDays:s,isGreaterThan:c,isGreaterThanDays:m,addDays:u,subtractDays:p,diff:f,milliseconds:g,convert:h,setFormatDate:v,now:b,dateLiteral:y,time:_,timeLiteral:w,datetimeLiteral:k,format:C,getSeconds:x,standar:D,replace:A,last:O,secondsBetweenTwoDates:I,minutesBetweenTwoDates:E,hoursBetweenTwoDates:T,daysBetweenTwoDates:P,betweenTwoDates:S,isYesterday:F,parseDate:R,parseDateDjango:N,dateMonth:i,parse:n,formatDate:M,months:$,days:U,getPrevDateMonth:a,date:o,dayslong:j};return q}t.$inject=["Util","ArrayUtil"],angular.module("app").factory("Datetime",["Util","ArrayUtil",t]).factory("ArrayUtil",e)}(),function(){"use strict";function e(e,t,o){var n={request:function(e){return angular.element("#loading-progress").show(),e},requestError:function(e){return angular.element("#loading-progress").hide(),e},response:function(t){return angular.element("#loading-progress").hide(),t||e.when(t)},responseError:function(n){if(401===n.status||403===n.status){var i=o.get("Storage"),a=o.get("ExpirationTime");i.setSession("path",t.path()),a.logout()}return e.reject(n)}};return n}e.$inject=["$q","$location","$injector"],angular.module("app").factory("AuthInterceptor",e).config(["$httpProvider",function(e){e.interceptors.push("AuthInterceptor")}])}(),function(){"use strict";function e(e,t,o,n,i,a){function r(e,t,o){function n(){o.hide()}var i=t;i.cerrar=n,i.data=e?e:{}}var l=this;l.restUrl=t,l.eliminarImagen=function(e){a.confirm("Se eliminará la foto, ¿Está seguro/a?.",function(){var t=l.imagenes.indexOf(e);t>-1&&(l.imagenes.splice(t,1),l.imagenesEliminar.push(e))})},l.mostrarImagen=function(e){var t={data:e,templateUrl:"app/components/visorImagenes/visorImagenes.dialog.html",controller:["data","$scope","$mdDialog",r]};a.show(t)}}angular.module("app").component("visorImagenes",{templateUrl:"app/components/visorImagenes/visorImagenes.html",controller:["$scope","restUrl","DataService","Storage","FileUploader","Modal",e],controllerAs:"vm",bindings:{titulo:"=",imagenes:"=",ancho:"=",alto:"=",eliminar:"=",imagenesEliminar:"="}})}(),function(){"use strict";function e(e,t){function o(e){var t="";return t+='<md-card class="ap-tooltip"><md-card-content>',t+=e,t+="</md-card-content></md-card>"}var n={scope:{doc:"="},restrict:"E",link:function(n,i,a,r){i.hide(),e.get(t+"plantillasFormly/documento/"+n.doc.id_documento+"/info").then(function(e){if(e){var t=i.parent().parent().parent().parent().parent().parent().parent();t.append(o(e.datos));var n=t.children("md-card");n.hide(),i.parent().mouseover(function(){n.show(),i.parent().css("cursor","pointer")}),i.parent().mouseout(function(){n.hide(),i.parent().css("cursor","normal")})}})}};return n}angular.module("app").directive("tooltip",["DataService","restUrl",e])}(),/*!
* Simditor v2.3.6
* http://simditor.tower.im/
* 2015-12-21
*/
function(e,t){"function"==typeof define&&define.amd?define("simditor",["jquery","simple-module","simple-hotkeys","simple-uploader"],function(o,n,i,a){return e.Simditor=t(o,n,i,a)}):"object"==typeof exports?module.exports=t(require("jquery"),require("simple-module"),require("simple-hotkeys"),require("simple-uploader")):e.Simditor=t(jQuery,SimpleModule,simple.hotkeys,simple.uploader)}(this,function(e,t,o,n){var i,a,r,l,d,s,c,m,u,p,f,g,h,v,b,y,_,w,x,k,C,D,A,O,I,E,T,P,S,F,R,N,M,$=function(e,t){function o(){this.constructor=e}for(var n in t)U.call(t,n)&&(e[n]=t[n]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e},U={}.hasOwnProperty,j=[].indexOf||function(e){for(var t=0,o=this.length;t<o;t++)if(t in this&&this[t]===e)return t;return-1},q=[].slice;return I=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.pluginName="Selection",o.prototype._range=null,o.prototype._startNodes=null,o.prototype._endNodes=null,o.prototype._containerNode=null,o.prototype._nodes=null,o.prototype._blockNodes=null,o.prototype._rootNodes=null,o.prototype._init=function(){return this.editor=this._module,this._selection=document.getSelection(),this.editor.on("selectionchanged",function(e){return function(t){return e.reset(),e._range=e._selection.getRangeAt(0)}}(this)),this.editor.on("blur",function(e){return function(t){return e.reset()}}(this))},o.prototype.reset=function(){return this._range=null,this._startNodes=null,this._endNodes=null,this._containerNode=null,this._nodes=null,this._blockNodes=null,this._rootNodes=null},o.prototype.clear=function(){var e;try{this._selection.removeAllRanges()}catch(t){e=t}return this.reset()},o.prototype.range=function(e){var t;return e?(this.clear(),this._selection.addRange(e),this._range=e,t=this.editor.util.browser.firefox||this.editor.util.browser.msie,!this.editor.inputManager.focused&&t&&this.editor.body.focus()):!this._range&&this.editor.inputManager.focused&&this._selection.rangeCount&&(this._range=this._selection.getRangeAt(0)),this._range},o.prototype.startNodes=function(){return this._range&&(this._startNodes||(this._startNodes=function(t){return function(){var o;return o=e(t._range.startContainer).parentsUntil(t.editor.body).get(),o.unshift(t._range.startContainer),e(o)}}(this)())),this._startNodes},o.prototype.endNodes=function(){var t;return this._range&&(this._endNodes||(this._endNodes=this._range.collapsed?this.startNodes():(t=e(this._range.endContainer).parentsUntil(this.editor.body).get(),t.unshift(this._range.endContainer),e(t)))),this._endNodes},o.prototype.containerNode=function(){return this._range&&(this._containerNode||(this._containerNode=e(this._range.commonAncestorContainer))),this._containerNode},o.prototype.nodes=function(){return this._range&&(this._nodes||(this._nodes=function(t){return function(){var o;return o=[],t.startNodes().first().is(t.endNodes().first())?o=t.startNodes().get():(t.startNodes().each(function(n,i){var a,r,l,d,s,c,m;return r=e(i),t.endNodes().index(r)>-1?o.push(i):r.parent().is(t.editor.body)||(c=t.endNodes().index(r.parent()))>-1?(a=c&&c>-1?t.endNodes().eq(c-1):t.endNodes().last(),l=r.parent().contents(),m=l.index(r),d=l.index(a),e.merge(o,l.slice(m,d).get())):(l=r.parent().contents(),s=l.index(r),e.merge(o,l.slice(s).get()))}),t.endNodes().each(function(n,i){var a,r,l;return a=e(i),a.parent().is(t.editor.body)||t.startNodes().index(a.parent())>-1?(o.push(i),!1):(r=a.parent().contents(),l=r.index(a),e.merge(o,r.slice(0,l+1)))})),e(e.unique(o))}}(this)())),this._nodes},o.prototype.blockNodes=function(){if(this._range)return this._blockNodes||(this._blockNodes=function(e){return function(){return e.nodes().filter(function(t,o){return e.editor.util.isBlockNode(o)})}}(this)()),this._blockNodes},o.prototype.rootNodes=function(){if(this._range)return this._rootNodes||(this._rootNodes=function(t){return function(){return t.nodes().filter(function(o,n){var i;return i=e(n).parent(),i.is(t.editor.body)||i.is("blockquote")})}}(this)()),this._rootNodes},o.prototype.rangeAtEndOf=function(t,o){var n,i,a,r,l,d;if(null==o&&(o=this.range()),o&&o.collapsed)return t=e(t)[0],a=o.endContainer,r=this.editor.util.getNodeLength(a),i=o.endOffset===r-1,l=e(a).contents().last().is("br"),n=o.endOffset===r,!!(i&&l||n)&&(t===a||!!e.contains(t,a)&&(d=!0,e(a).parentsUntil(t).addBack().each(function(t,o){var n,i,a,r;if(r=e(o).parent().contents().filter(function(){return!(this!==o&&3===this.nodeType&&!this.nodeValue)}),n=r.last(),a=n.get(0)===o,i=n.is("br")&&n.prev().get(0)===o,!a&&!i)return d=!1,!1}),d))},o.prototype.rangeAtStartOf=function(t,o){var n,i;if(null==o&&(o=this.range()),o&&o.collapsed)return t=e(t)[0],i=o.startContainer,0===o.startOffset&&(t===i||!!e.contains(t,i)&&(n=!0,e(i).parentsUntil(t).addBack().each(function(t,o){var i;if(i=e(o).parent().contents().filter(function(){return!(this!==o&&3===this.nodeType&&!this.nodeValue)}),i.first().get(0)!==o)return n=!1}),n))},o.prototype.insertNode=function(t,o){if(null==o&&(o=this.range()),o)return t=e(t)[0],o.insertNode(t),this.setRangeAfter(t,o)},o.prototype.setRangeAfter=function(t,o){if(null==o&&(o=this.range()),null!=o)return t=e(t)[0],o.setEndAfter(t),o.collapse(!1),this.range(o)},o.prototype.setRangeBefore=function(t,o){if(null==o&&(o=this.range()),null!=o)return t=e(t)[0],o.setEndBefore(t),o.collapse(!1),this.range(o)},o.prototype.setRangeAtStartOf=function(t,o){return null==o&&(o=this.range()),t=e(t).get(0),o.setEnd(t,0),o.collapse(!1),this.range(o)},o.prototype.setRangeAtEndOf=function(t,o){var n,i,a,r,l,d,s;return null==o&&(o=this.range()),i=e(t),t=i[0],i.is("pre")?(a=i.contents(),a.length>0?(r=a.last(),d=r.text(),l=this.editor.util.getNodeLength(r[0]),"\n"===d.charAt(d.length-1)?o.setEnd(r[0],l-1):o.setEnd(r[0],l)):o.setEnd(t,0)):(s=this.editor.util.getNodeLength(t),3!==t.nodeType&&s>0&&(n=e(t).contents().last(),n.is("br")?s-=1:3!==n[0].nodeType&&this.editor.util.isEmptyNode(n)&&(n.append(this.editor.util.phBr),t=n[0],s=0)),o.setEnd(t,s)),o.collapse(!1),this.range(o)},o.prototype.deleteRangeContents=function(e){var t,o,n,i;return null==e&&(e=this.range()),i=e.cloneRange(),n=e.cloneRange(),i.collapse(!0),n.collapse(!1),o=this.rangeAtStartOf(this.editor.body,i),t=this.rangeAtEndOf(this.editor.body,n),!e.collapsed&&o&&t?(this.editor.body.empty(),e.setStart(this.editor.body[0],0),e.collapse(!0),this.range(e)):e.deleteContents(),e},o.prototype.breakBlockEl=function(t,o){var n;return null==o&&(o=this.range()),n=e(t),o.collapsed?(o.setStartBefore(n.get(0)),o.collapsed?n:n.before(o.extractContents())):n},o.prototype.save=function(t){var o,n,i;if(null==t&&(t=this.range()),!this._selectionSaved)return n=t.cloneRange(),n.collapse(!1),i=e("<span/>").addClass("simditor-caret-start"),o=e("<span/>").addClass("simditor-caret-end"),n.insertNode(o[0]),t.insertNode(i[0]),this.clear(),this._selectionSaved=!0},o.prototype.restore=function(){var e,t,o,n,i,a,r;return!!this._selectionSaved&&(i=this.editor.body.find(".simditor-caret-start"),e=this.editor.body.find(".simditor-caret-end"),i.length&&e.length?(a=i.parent(),r=a.contents().index(i),t=e.parent(),o=t.contents().index(e),a[0]===t[0]&&(o-=1),n=document.createRange(),n.setStart(a.get(0),r),n.setEnd(t.get(0),o),i.remove(),e.remove(),this.range(n)):(i.remove(),e.remove()),this._selectionSaved=!1,n)},o}(t),p=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.pluginName="Formatter",o.prototype.opts={allowedTags:[],allowedAttributes:{},allowedStyles:{}},o.prototype._init=function(){return this.editor=this._module,this._allowedTags=e.merge(["br","span","a","img"," strong","strike","u","p","ol","li","blockquote","pre","code","h1","h2","h3","h4","hr"],this.opts.allowedTags),this._allowedAttributes=e.extend({img:["src","alt","width","height","data-non-image"],a:["href","target"],code:["class"]},this.opts.allowedAttributes),this._allowedStyles=e.extend({p:["margin-left","text-align"],h1:["margin-left","text-align"],h2:["margin-left","text-align"],h3:["margin-left","text-align"],h4:["margin-left","text-align"]},this.opts.allowedStyles),this.editor.body.on("click","a",function(e){return!1})},o.prototype.decorate=function(e){return null==e&&(e=this.editor.body),this.editor.trigger("decorate",[e]),e},o.prototype.undecorate=function(e){return null==e&&(e=this.editor.body.clone()),this.editor.trigger("undecorate",[e]),e},o.prototype.autolink=function(t){var o,n,i,a,r,l,d,s,c,m,u,p,f;for(null==t&&(t=this.editor.body),d=[],i=function(o){return o.contents().each(function(o,n){var a,r;if(a=e(n),!a.is("a")&&!a.closest("a, pre",t).length)return!a.is("iframe")&&a.contents().length?i(a):(r=a.text())&&/https?:\/\/|www\./gi.test(r)?d.push(a):void 0})},i(t),c=/(https?:\/\/|www\.)[\w\-\.\?&=\/#%:,@\!\+]+/gi,a=0,l=d.length;a<l;a++){for(n=d[a],p=n.text(),m=[],s=null,r=0;null!==(s=c.exec(p));)u=p.substring(r,s.index),m.push(document.createTextNode(u)),r=c.lastIndex,f=/^(http(s)?:\/\/|\/)/.test(s[0])?s[0]:"http://"+s[0],o=e('<a href="'+f+'" rel="nofollow"></a>').text(s[0]),m.push(o[0]);m.push(document.createTextNode(p.substring(r))),n.replaceWith(e(m))}return t},o.prototype.format=function(t){var o,n,i,a,r,l,d,s,c,m;if(null==t&&(t=this.editor.body),t.is(":empty"))return t.append("<p>"+this.editor.util.phBr+"</p>"),t;for(c=t.contents(),i=0,r=c.length;i<r;i++)d=c[i],this.cleanNode(d,!0);for(m=t.contents(),a=0,l=m.length;a<l;a++)s=m[a],o=e(s),o.is("br")?("undefined"!=typeof n&&null!==n&&(n=null),o.remove()):this.editor.util.isBlockNode(s)?o.is("li")?n&&n.is("ul, ol")?n.append(s):(n=e("<ul/>").insertBefore(s),n.append(s)):n=null:(n&&!n.is("ul, ol")||(n=e("<p/>").insertBefore(s)),n.append(s),this.editor.util.isEmptyNode(n)&&n.append(this.editor.util.phBr));return t},o.prototype.cleanNode=function(t,o){var n,i,a,r,l,d,s,c,m,u,p,f,g,h,v,b,y,_;if(a=e(t),a.length>0){if(3===a[0].nodeType)return y=a.text().replace(/(\r\n|\n|\r)/gm,""),void(y?(_=document.createTextNode(y),a.replaceWith(_)):a.remove());if(c=a.is("iframe")?null:a.contents(),m=this.editor.util.isDecoratedNode(a),a.is(this._allowedTags.join(","))||m){if(a.is("a")&&(i=a.find("img")).length>0&&(a.replaceWith(i),a=i,c=null),a.is("td")&&(n=a.find(this.editor.util.blockNodes.join(","))).length>0&&(n.each(function(t){return function(t,o){return e(o).contents().unwrap()}}(this)),c=a.contents()),a.is("img")&&a.hasClass("uploading")&&a.remove(),!m){for(d=this._allowedAttributes[a[0].tagName.toLowerCase()],v=e.makeArray(a[0].attributes),u=0,f=v.length;u<f;u++)s=v[u],"style"!==s.name&&(null!=d&&(b=s.name,j.call(d,b)>=0)||a.removeAttr(s.name));this._cleanNodeStyles(a),a.is("span")&&0===a[0].attributes.length&&a.contents().first().unwrap()}}else 1!==a[0].nodeType||a.is(":empty")?(a.remove(),c=null):a.is("div, article, dl, header, footer, tr")?(a.append("<br/>"),c.first().unwrap()):a.is("table")?(r=e("<p/>"),a.find("tr").each(function(t,o){return r.append(e(o).text()+"<br/>")}),a.replaceWith(r),c=null):a.is("thead, tfoot")?(a.remove(),c=null):a.is("th")?(l=e("<td/>").append(a.contents()),a.replaceWith(l)):c.first().unwrap();if(o&&null!=c&&!a.is("pre"))for(p=0,g=c.length;p<g;p++)h=c[p],this.cleanNode(h,!0);return null}},o.prototype._cleanNodeStyles=function(t){var o,n,i,a,r,l,d,s,c;if(s=t.attr("style")){if(t.removeAttr("style"),o=this._allowedStyles[t[0].tagName.toLowerCase()],!(o&&o.length>0))return t;for(c={},r=s.split(";"),n=0,i=r.length;n<i;n++)d=r[n],d=e.trim(d),a=d.split(":"),(a.length=2)&&(l=a[0],j.call(o,l)>=0&&(c[e.trim(a[0])]=e.trim(a[1])));return Object.keys(c).length>0&&t.css(c),t}},o.prototype.clearHtml=function(t,o){var n,i,a;return null==o&&(o=!0),n=e("<div/>").append(t),i=n.contents(),a="",i.each(function(t){return function(n,r){var l,d;return 3===r.nodeType?a+=r.nodeValue:1===r.nodeType&&(l=e(r),d=l.is("iframe")?null:l.contents(),d&&d.length>0&&(a+=t.clearHtml(d)),o&&n<i.length-1&&l.is("br, p, div, li,tr, pre, address, artticle, aside, dl, figcaption, footer, h1, h2,h3, h4, header"))?a+="\n":void 0}}(this)),a},o.prototype.beautify=function(t){var o;return o=function(e){return!!(e.is("p")&&!e.text()&&e.children(":not(br)").length<1)},t.each(function(t,n){var i,a;return i=e(n),a=i.is(':not(img, br, col, td, hr, [class^="simditor-"]):empty'),(a||o(i))&&i.remove(),i.find(':not(img, br, col, td, hr, [class^="simditor-"]):empty').remove()})},o}(t),y=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.pluginName="InputManager",o.prototype._modifierKeys=[16,17,18,91,93,224],o.prototype._arrowKeys=[37,38,39,40],o.prototype._init=function(){var t,o;return this.editor=this._module,this.throttledValueChanged=this.editor.util.throttle(function(e){return function(t){return setTimeout(function(){return e.editor.trigger("valuechanged",t)},10)}}(this),300),this.throttledSelectionChanged=this.editor.util.throttle(function(e){return function(){return e.editor.trigger("selectionchanged")}}(this),50),e(document).on("selectionchange.simditor"+this.editor.id,function(e){return function(t){var o;if(e.focused&&!e.editor.clipboard.pasting)return(o=function(){return e._selectionTimer&&(clearTimeout(e._selectionTimer),e._selectionTimer=null),e.editor.selection._selection.rangeCount>0?e.throttledSelectionChanged():e._selectionTimer=setTimeout(function(){if(e._selectionTimer=null,e.focused)return o()},10)})()}}(this)),this.editor.on("valuechanged",function(t){return function(){var o;if(t.lastCaretPosition=null,o=t.editor.body.children().filter(function(e,o){return t.editor.util.isBlockNode(o)}),t.focused&&0===o.length&&(t.editor.selection.save(),t.editor.formatter.format(),t.editor.selection.restore()),t.editor.body.find("hr, pre, .simditor-table").each(function(o,n){var i,a;if(i=e(n),(i.parent().is("blockquote")||i.parent()[0]===t.editor.body[0])&&(a=!1,0===i.next().length&&(e("<p/>").append(t.editor.util.phBr).insertAfter(i),a=!0),0===i.prev().length&&(e("<p/>").append(t.editor.util.phBr).insertBefore(i),a=!0),a))return t.throttledValueChanged()}),t.editor.body.find("pre:empty").append(t.editor.util.phBr),!t.editor.util.support.onselectionchange&&t.focused)return t.throttledSelectionChanged()}}(this)),this.editor.body.on("keydown",e.proxy(this._onKeyDown,this)).on("keypress",e.proxy(this._onKeyPress,this)).on("keyup",e.proxy(this._onKeyUp,this)).on("mouseup",e.proxy(this._onMouseUp,this)).on("focus",e.proxy(this._onFocus,this)).on("blur",e.proxy(this._onBlur,this)).on("drop",e.proxy(this._onDrop,this)).on("input",e.proxy(this._onInput,this)),this.editor.util.browser.firefox&&(this.editor.hotkeys.add("cmd+left",function(e){return function(t){return t.preventDefault(),e.editor.selection._selection.modify("move","backward","lineboundary"),!1}}(this)),this.editor.hotkeys.add("cmd+right",function(e){return function(t){return t.preventDefault(),e.editor.selection._selection.modify("move","forward","lineboundary"),!1}}(this)),t=this.editor.util.os.mac?"cmd+a":"ctrl+a",this.editor.hotkeys.add(t,function(e){return function(t){var o,n,i,a;if(o=e.editor.body.children(),o.length>0)return n=o.first().get(0),i=o.last().get(0),a=document.createRange(),a.setStart(n,0),a.setEnd(i,e.editor.util.getNodeLength(i)),e.editor.selection.range(a),!1}}(this))),o=this.editor.util.os.mac?"cmd+enter":"ctrl+enter",this.editor.hotkeys.add(o,function(e){return function(t){return e.editor.el.closest("form").find("button:submit").click(),!1}}(this))},o.prototype._onFocus=function(e){if(!this.editor.clipboard.pasting)return this.editor.el.addClass("focus").removeClass("error"),this.focused=!0,setTimeout(function(e){return function(){var t,o;if(o=e.editor.selection._selection.getRangeAt(0),o.startContainer===e.editor.body[0]&&(e.lastCaretPosition?e.editor.undoManager.caretPosition(e.lastCaretPosition):(t=e.editor.body.children().first(),o=document.createRange(),e.editor.selection.setRangeAtStartOf(t,o))),e.lastCaretPosition=null,e.editor.triggerHandler("focus"),!e.editor.util.support.onselectionchange)return e.throttledSelectionChanged()}}(this),0)},o.prototype._onBlur=function(e){var t;if(!this.editor.clipboard.pasting)return this.editor.el.removeClass("focus"),this.editor.sync(),this.focused=!1,this.lastCaretPosition=null!=(t=this.editor.undoManager.currentState())?t.caret:void 0,this.editor.triggerHandler("blur")},o.prototype._onMouseUp=function(e){if(!this.editor.util.support.onselectionchange)return this.throttledSelectionChanged()},o.prototype._onKeyDown=function(e){var t,o;if(this.editor.triggerHandler(e)===!1)return!1;if(!this.editor.hotkeys.respondTo(e)){if(this.editor.keystroke.respondTo(e))return this.throttledValueChanged(),!1;if(t=e.which,!(j.call(this._modifierKeys,t)>=0||(o=e.which,j.call(this._arrowKeys,o)>=0)||this.editor.util.metaKey(e)&&86===e.which))return this.editor.util.support.oninput||this.throttledValueChanged(["typing"]),null}},o.prototype._onKeyPress=function(e){if(this.editor.triggerHandler(e)===!1)return!1},o.prototype._onKeyUp=function(t){var o,n;return this.editor.triggerHandler(t)!==!1&&(!this.editor.util.support.onselectionchange&&(n=t.which,j.call(this._arrowKeys,n)>=0)?void this.throttledValueChanged():void(8!==t.which&&46!==t.which||!this.editor.util.isEmptyNode(this.editor.body)||(this.editor.body.empty(),o=e("<p/>").append(this.editor.util.phBr).appendTo(this.editor.body),this.editor.selection.setRangeAtStartOf(o))))},o.prototype._onDrop=function(e){return this.editor.triggerHandler(e)!==!1&&this.throttledValueChanged()},o.prototype._onInput=function(e){return this.throttledValueChanged(["oninput"])},o}(t),w=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.pluginName="Keystroke",o.prototype._init=function(){return this.editor=this._module,this._keystrokeHandlers={},this._initKeystrokeHandlers()},o.prototype.add=function(e,t,o){return e=e.toLowerCase(),e=this.editor.hotkeys.constructor.aliases[e]||e,this._keystrokeHandlers[e]||(this._keystrokeHandlers[e]={}),this._keystrokeHandlers[e][t]=o},o.prototype.respondTo=function(t){var o,n,i,a;if(n=null!=(i=this.editor.hotkeys.constructor.keyNameMap[t.which])?i.toLowerCase():void 0)return!!(n in this._keystrokeHandlers&&(a="function"==typeof(o=this._keystrokeHandlers[n])["*"]?o["*"](t):void 0,a||this.editor.selection.startNodes().each(function(o){return function(i,r){var l,d;if(r.nodeType===Node.ELEMENT_NODE)return l=null!=(d=o._keystrokeHandlers[n])?d[r.tagName.toLowerCase()]:void 0,a="function"==typeof l?l(t,e(r)):void 0,a!==!0&&a!==!1&&void 0}}(this)),a))||void 0},o.prototype._initKeystrokeHandlers=function(){var t;return this.editor.util.browser.safari&&this.add("enter","*",function(t){return function(o){var n,i;if(o.shiftKey&&(n=t.editor.selection.blockNodes().last(),!n.is("pre")))return i=e("<br/>"),t.editor.selection.rangeAtEndOf(n)?(t.editor.selection.insertNode(i),t.editor.selection.insertNode(e("<br/>")),t.editor.selection.setRangeBefore(i)):t.editor.selection.insertNode(i),!0}}(this)),(this.editor.util.browser.webkit||this.editor.util.browser.msie)&&(t=function(t){return function(o,n){var i;if(t.editor.selection.rangeAtEndOf(n))return i=e("<p/>").append(t.editor.util.phBr).insertAfter(n),t.editor.selection.setRangeAtStartOf(i),!0}}(this),this.add("enter","h1",t),this.add("enter","h2",t),this.add("enter","h3",t),this.add("enter","h4",t),this.add("enter","h5",t),this.add("enter","h6",t)),this.add("backspace","*",function(e){return function(t){var o,n,i,a;return i=e.editor.selection.rootNodes().first(),n=i.prev(),n.is("hr")&&e.editor.selection.rangeAtStartOf(i)?(e.editor.selection.save(),n.remove(),e.editor.selection.restore(),!0):(o=e.editor.selection.blockNodes().last(),a=e.editor.util.browser.webkit,a&&e.editor.selection.rangeAtStartOf(o)?(e.editor.selection.save(),e.editor.formatter.cleanNode(o,!0),e.editor.selection.restore(),null):void 0)}}(this)),this.add("enter","li",function(t){return function(o,n){var i,a,r,l;if(i=n.clone(),i.find("ul, ol").remove(),t.editor.util.isEmptyNode(i)&&n.is(t.editor.selection.blockNodes().last())){if(a=n.parent(),n.next("li").length>0){if(!t.editor.util.isEmptyNode(n))return;a.parent("li").length>0?(r=e("<li/>").append(t.editor.util.phBr).insertAfter(a.parent("li")),l=e("<"+a[0].tagName+"/>").append(n.nextAll("li")),r.append(l)):(r=e("<p/>").append(t.editor.util.phBr).insertAfter(a),l=e("<"+a[0].tagName+"/>").append(n.nextAll("li")),r.after(l))}else a.parent("li").length>0?(r=e("<li/>").insertAfter(a.parent("li")),n.contents().length>0?r.append(n.contents()):r.append(t.editor.util.phBr)):(r=e("<p/>").append(t.editor.util.phBr).insertAfter(a),n.children("ul, ol").length>0&&r.after(n.children("ul, ol")));return n.prev("li").length?n.remove():a.remove(),t.editor.selection.setRangeAtStartOf(r),!0}}}(this)),this.add("enter","pre",function(t){return function(o,n){var i,a,r;return o.preventDefault(),o.shiftKey?(i=e("<p/>").append(t.editor.util.phBr).insertAfter(n),t.editor.selection.setRangeAtStartOf(i),!0):(r=t.editor.selection.range(),a=null,r.deleteContents(),!t.editor.util.browser.msie&&t.editor.selection.rangeAtEndOf(n)?(a=document.createTextNode("\n\n"),r.insertNode(a),r.setEnd(a,1)):(a=document.createTextNode("\n"),r.insertNode(a),r.setStartAfter(a)),r.collapse(!1),t.editor.selection.range(r),!0)}}(this)),this.add("enter","blockquote",function(e){return function(t,o){var n,i;if(n=e.editor.selection.blockNodes().last(),n.is("p")&&!n.next().length&&e.editor.util.isEmptyNode(n))return o.after(n),i=document.createRange(),e.editor.selection.setRangeAtStartOf(n,i),!0}}(this)),this.add("backspace","li",function(t){return function(o,n){var i,a,r,l,d,s,c,m,u;return a=n.children("ul, ol"),d=n.prev("li"),a.length>0&&d.length>0&&(u="",s=null,n.contents().each(function(t,o){if(1===o.nodeType&&/UL|OL/.test(o.nodeName))return!1;if(1!==o.nodeType||!/BR/.test(o.nodeName))return 3===o.nodeType&&o.nodeValue?u+=o.nodeValue:1===o.nodeType&&(u+=e(o).text()),s=e(o)}),c=t.editor.util.browser.firefox&&!s.next("br").length,s&&1===u.length&&c?(i=e(t.editor.util.phBr).insertAfter(s),s.remove(),t.editor.selection.setRangeBefore(i),!0):!(u.length>0)&&(m=document.createRange(),l=d.children("ul, ol"),l.length>0?(r=e("<li/>").append(t.editor.util.phBr).appendTo(l),l.append(a.children("li")),n.remove(),t.editor.selection.setRangeAtEndOf(r,m)):(t.editor.selection.setRangeAtEndOf(d,m),d.append(a),n.remove(),t.editor.selection.range(m)),!0))}}(this)),this.add("backspace","pre",function(t){return function(o,n){var i,a,r;if(t.editor.selection.rangeAtStartOf(n))return a=n.html().replace("\n","<br/>")||t.editor.util.phBr,i=e("<p/>").append(a).insertAfter(n),n.remove(),r=document.createRange(),t.editor.selection.setRangeAtStartOf(i,r),!0}}(this)),this.add("backspace","blockquote",function(e){return function(t,o){var n,i;if(e.editor.selection.rangeAtStartOf(o))return n=o.children().first().unwrap(),i=document.createRange(),e.editor.selection.setRangeAtStartOf(n,i),!0}}(this))},o}(t),N=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.pluginName="UndoManager",o.prototype._index=-1,o.prototype._capacity=20,o.prototype._startPosition=null,o.prototype._endPosition=null,o.prototype._init=function(){var e,t;return this.editor=this._module,this._stack=[],this.editor.util.os.mac?(t="cmd+z",e="shift+cmd+z"):this.editor.util.os.win?(t="ctrl+z",e="ctrl+y"):(t="ctrl+z",e="shift+ctrl+z"),this.editor.hotkeys.add(t,function(e){return function(t){return t.preventDefault(),e.undo(),!1}}(this)),this.editor.hotkeys.add(e,function(e){return function(t){return t.preventDefault(),e.redo(),!1}}(this)),this.throttledPushState=this.editor.util.throttle(function(e){return function(){return e._pushUndoState()}}(this),2e3),this.editor.on("valuechanged",function(e){return function(t,o){if("undo"!==o&&"redo"!==o)return e.throttledPushState()}}(this)),this.editor.on("selectionchanged",function(e){return function(t){return e.resetCaretPosition(),e.update()}}(this)),this.editor.on("focus",function(e){return function(t){if(0===e._stack.length)return e._pushUndoState()}}(this)),this.editor.on("blur",function(e){return function(t){return e.resetCaretPosition()}}(this))},o.prototype.resetCaretPosition=function(){return this._startPosition=null,this._endPosition=null},o.prototype.startPosition=function(){return this.editor.selection._range&&(this._startPosition||(this._startPosition=this._getPosition("start"))),this._startPosition},o.prototype.endPosition=function(){return this.editor.selection._range&&(this._endPosition||(this._endPosition=function(e){return function(){var t;return t=e.editor.selection.range(),t.collapsed?e._startPosition:e._getPosition("end")}}(this)())),this._endPosition},o.prototype._pushUndoState=function(){var e;if(this.editor.triggerHandler("pushundostate")!==!1&&(e=this.caretPosition(),e.start))return this._index+=1,this._stack.length=this._index,this._stack.push({html:this.editor.body.html(),caret:this.caretPosition()}),this._stack.length>this._capacity?(this._stack.shift(),this._index-=1):void 0},o.prototype.currentState=function(){return this._stack.length&&this._index>-1?this._stack[this._index]:null},o.prototype.undo=function(){var e;if(!(this._index<1||this._stack.length<2))return this.editor.hidePopover(),this._index-=1,e=this._stack[this._index],this.editor.body.get(0).innerHTML=e.html,this.caretPosition(e.caret),this.editor.body.find(".selected").removeClass("selected"),this.editor.sync(),this.editor.trigger("valuechanged",["undo"])},o.prototype.redo=function(){var e;if(!(this._index<0||this._stack.length<this._index+2))return this.editor.hidePopover(),this._index+=1,e=this._stack[this._index],this.editor.body.get(0).innerHTML=e.html,this.caretPosition(e.caret),this.editor.body.find(".selected").removeClass("selected"),this.editor.sync(),this.editor.trigger("valuechanged",["redo"])},o.prototype.update=function(){var e;if(e=this.currentState())return e.html=this.editor.body.html(),e.caret=this.caretPosition()},o.prototype._getNodeOffset=function(t,o){var n,i,a;return n=e.isNumeric(o)?e(t):e(t).parent(),a=0,i=!1,n.contents().each(function(e,n){return t!==n&&(o!==e||0!==e)&&(n.nodeType===Node.TEXT_NODE?!i&&n.nodeValue.length>0&&(a+=1,i=!0):(a+=1,i=!1),o-1!==e&&null)}),a},o.prototype._getPosition=function(t){var o,n,i,a,r,l,d;if(null==t&&(t="start"),d=this.editor.selection.range(),a=d[t+"Offset"],o=this.editor.selection[t+"Nodes"](),n=o.first()[0],n.nodeType===Node.TEXT_NODE){for(l=n.previousSibling;l&&l.nodeType===Node.TEXT_NODE;)n=l,a+=this.editor.util.getNodeLength(l),l=l.previousSibling;i=o.get(),i[0]=n,o=e(i)}else a=this._getNodeOffset(n,a);return r=[a],o.each(function(e){return function(t,o){return r.unshift(e._getNodeOffset(o))}}(this)),r},o.prototype._getNodeByPosition=function(t){var o,n,i,a,r,l,d,s;for(l=this.editor.body[0],s=t.slice(0,t.length-1),i=a=0,r=s.length;a<r;i=++a){if(d=s[i],n=l.childNodes,d>n.length-1){if(i!==t.length-2||!e(l).is("pre:empty")){l=null;break}o=document.createTextNode(""),l.appendChild(o),n=l.childNodes}l=n[d]}return l},o.prototype.caretPosition=function(e){var t,o,n,i,a;if(e){if(!e.start)return;return i=this._getNodeByPosition(e.start),a=e.start[e.start.length-1],e.collapsed?(t=i,o=a):(t=this._getNodeByPosition(e.end),o=e.start[e.start.length-1]),i&&t?(n=document.createRange(),n.setStart(i,a),n.setEnd(t,o),this.editor.selection.range(n)):void("undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("simditor: invalid caret state"))}return n=this.editor.selection.range(),e=this.editor.inputManager.focused&&null!=n?{start:this.startPosition(),end:this.endPosition(),collapsed:n.collapsed}:{}},o}(t),M=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.pluginName="Util",o.prototype._init=function(){if(this.editor=this._module,this.browser.msie&&this.browser.version<11)return this.phBr=""},o.prototype.phBr="<br/>",o.prototype.os=function(){var e;return e={},/Mac/.test(navigator.appVersion)?e.mac=!0:/Linux/.test(navigator.appVersion)?e.linux=!0:/Win/.test(navigator.appVersion)?e.win=!0:/X11/.test(navigator.appVersion)&&(e.unix=!0),/Mobi/.test(navigator.appVersion)&&(e.mobile=!0),e}(),o.prototype.browser=function(){var e,t,o,n,i,a,r,l,d,s,c;return c=navigator.userAgent,n=/(msie|trident)/i.test(c),e=/chrome|crios/i.test(c),s=/safari/i.test(c)&&!e,o=/firefox/i.test(c),t=/edge/i.test(c),n?{msie:!0,version:1*(null!=(i=c.match(/(msie |rv:)(\d+(\.\d+)?)/i))?i[2]:void 0)}:t?{edge:!0,webkit:!0,version:1*(null!=(a=c.match(/edge\/(\d+(\.\d+)?)/i))?a[1]:void 0)}:e?{webkit:!0,chrome:!0,version:1*(null!=(r=c.match(/(?:chrome|crios)\/(\d+(\.\d+)?)/i))?r[1]:void 0)}:s?{webkit:!0,safari:!0,version:1*(null!=(l=c.match(/version\/(\d+(\.\d+)?)/i))?l[1]:void 0)}:o?{mozilla:!0,firefox:!0,version:1*(null!=(d=c.match(/firefox\/(\d+(\.\d+)?)/i))?d[1]:void 0)}:{}}(),o.prototype.support=function(){return{onselectionchange:function(){var e,t;if(t=document.onselectionchange,void 0!==t)try{return document.onselectionchange=0,null===document.onselectionchange}catch(o){e=o}finally{document.onselectionchange=t}return!1}(),oninput:function(){return!/(msie|trident)/i.test(navigator.userAgent)}()}}(),o.prototype.reflow=function(t){return null==t&&(t=document),e(t)[0].offsetHeight},o.prototype.metaKey=function(e){var t;return t=/Mac/.test(navigator.userAgent),t?e.metaKey:e.ctrlKey},o.prototype.isEmptyNode=function(t){var o;return o=e(t),o.is(":empty")||!o.text()&&!o.find(":not(br, span, div)").length},o.prototype.isDecoratedNode=function(t){return e(t).is('[class^="simditor-"]')},o.prototype.blockNodes=["div","p","ul","ol","li","blockquote","hr","pre","h1","h2","h3","h4","h5","table"],o.prototype.isBlockNode=function(t){return t=e(t)[0],!(!t||3===t.nodeType)&&new RegExp("^("+this.blockNodes.join("|")+")$").test(t.nodeName.toLowerCase())},o.prototype.getNodeLength=function(t){switch(t=e(t)[0],t.nodeType){case 7:case 10:return 0;case 3:case 8:return t.length;default:return t.childNodes.length}},o.prototype.dataURLtoBlob=function(e){var t,o,n,i,a,r,l,d,s,c,m,u,p;if(l=window.Blob&&function(){var e;try{return Boolean(new Blob)}catch(t){return e=t,!1}}(),r=l&&window.Uint8Array&&function(){var e;try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return e=t,!1}}(),t=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,p=l||t,!(p&&window.atob&&window.ArrayBuffer&&window.Uint8Array))return!1;for(a=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),o=new ArrayBuffer(a.length),s=new Uint8Array(o),d=c=0,u=a.length;0<=u?c<=u:c>=u;d=0<=u?++c:--c)s[d]=a.charCodeAt(d);return m=e.split(",")[0].split(":")[1].split(";")[0],l?(i=r?s:o,new Blob([i],{type:m})):(n=new t,n.append(o),n.getBlob(m))},o.prototype.throttle=function(e,t){var o,n,i,a,r,l,d;return a=0,d=0,i=o=r=null,n=function(){return d=0,a=+new Date,r=e.apply(i,o),i=null,o=null},l=function(){var e;return i=this,o=arguments,e=new Date-a,d||(e>=t?n():d=setTimeout(n,t-e)),r},l.clear=function(){if(d)return clearTimeout(d),n()},l},o.prototype.formatHTML=function(t){var o,n,i,a,r,l,d,s,c;for(l=/<(\/?)(.+?)(\/?)>/g,s="",a=0,i=null,n="  ",d=function(e,t){return new Array(t+1).join(e)};null!==(r=l.exec(t));)r.isBlockNode=e.inArray(r[2],this.blockNodes)>-1,r.isStartTag="/"!==r[1]&&"/"!==r[3],r.isEndTag="/"===r[1]||"/"===r[3],o=i?i.index+i[0].length:0,(c=t.substring(o,r.index)).length>0&&e.trim(c)&&(s+=c),r.isBlockNode&&r.isEndTag&&!r.isStartTag&&(a-=1),r.isBlockNode&&r.isStartTag&&(i&&i.isBlockNode&&i.isEndTag||(s+="\n"),s+=d(n,a)),s+=r[0],r.isBlockNode&&r.isEndTag&&(s+="\n"),r.isBlockNode&&r.isStartTag&&(a+=1),i=r;return e.trim(s)},o}(t),F=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.pluginName="Toolbar",o.prototype.opts={toolbar:!0,toolbarFloat:!0,toolbarHidden:!1,toolbarFloatOffset:0},o.prototype._tpl={wrapper:'<div class="simditor-toolbar"><ul></ul></div>',separator:'<li><span class="separator"></span></li>'},o.prototype._init=function(){var t,o,n;if(this.editor=this._module,
this.opts.toolbar)return e.isArray(this.opts.toolbar)||(this.opts.toolbar=["bold","italic","underline","strikethrough","|","ol","ul","blockquote","code","|","link","image","|","indent","outdent"]),this._render(),this.list.on("click",function(e){return!1}),this.wrapper.on("mousedown",function(e){return function(t){return e.list.find(".menu-on").removeClass(".menu-on")}}(this)),e(document).on("mousedown.simditor"+this.editor.id,function(e){return function(t){return e.list.find(".menu-on").removeClass(".menu-on")}}(this)),!this.opts.toolbarHidden&&this.opts.toolbarFloat&&(this.wrapper.css("top",this.opts.toolbarFloatOffset),n=0,o=function(e){return function(){return e.wrapper.css("position","static"),e.wrapper.width("auto"),e.editor.util.reflow(e.wrapper),e.wrapper.width(e.wrapper.outerWidth()),e.wrapper.css("left",e.editor.util.os.mobile?e.wrapper.position().left:e.wrapper.offset().left),e.wrapper.css("position",""),n=e.wrapper.outerHeight(),e.editor.placeholderEl.css("top",n),!0}}(this),t=null,e(window).on("resize.simditor-"+this.editor.id,function(e){return t=o()}),e(window).on("scroll.simditor-"+this.editor.id,function(i){return function(a){var r,l,d;if(i.wrapper.is(":visible"))if(d=i.editor.wrapper.offset().top,r=d+i.editor.wrapper.outerHeight()-80,l=e(document).scrollTop()+i.opts.toolbarFloatOffset,l<=d||l>=r){if(i.editor.wrapper.removeClass("toolbar-floating").css("padding-top",""),i.editor.util.os.mobile)return i.wrapper.css("top",i.opts.toolbarFloatOffset)}else if(t||(t=o()),i.editor.wrapper.addClass("toolbar-floating").css("padding-top",n),i.editor.util.os.mobile)return i.wrapper.css("top",l-d+i.opts.toolbarFloatOffset)}}(this))),this.editor.on("destroy",function(e){return function(){return e.buttons.length=0}}(this)),e(document).on("mousedown.simditor-"+this.editor.id,function(e){return function(t){return e.list.find("li.menu-on").removeClass("menu-on")}}(this))},o.prototype._render=function(){var t,o,n,i;for(this.buttons=[],this.wrapper=e(this._tpl.wrapper).prependTo(this.editor.wrapper),this.list=this.wrapper.find("ul"),i=this.opts.toolbar,t=0,o=i.length;t<o;t++)if(n=i[t],"|"!==n){if(!this.constructor.buttons[n])throw new Error("simditor: invalid toolbar button "+n);this.buttons.push(new this.constructor.buttons[n]({editor:this.editor}))}else e(this._tpl.separator).appendTo(this.list);if(this.opts.toolbarHidden)return this.wrapper.hide()},o.prototype.findButton=function(e){var t;return t=this.list.find(".toolbar-item-"+e).data("button"),null!=t?t:null},o.addButton=function(e){return this.buttons[e.prototype.name]=e},o.buttons={},o}(t),b=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.pluginName="Indentation",o.prototype.opts={tabIndent:!0},o.prototype._init=function(){return this.editor=this._module,this.editor.keystroke.add("tab","*",function(e){return function(t){var o;if(o=e.editor.toolbar.findButton("code"),e.opts.tabIndent||o&&o.active)return e.indent(t.shiftKey)}}(this))},o.prototype.indent=function(t){var o,n,i,a,r;return i=this.editor.selection.startNodes(),n=this.editor.selection.endNodes(),o=this.editor.selection.blockNodes(),a=[],o=o.each(function(t,o){var n,i,r,l,d;for(n=!0,i=r=0,l=a.length;r<l;i=++r){if(d=a[i],e.contains(o,d)){n=!1;break}if(e.contains(d,o)){a.splice(i,1,o),n=!1;break}}if(n)return a.push(o)}),o=e(a),r=!1,o.each(function(e){return function(o,n){var i;if(i=t?e.outdentBlock(n):e.indentBlock(n))return r=i}}(this)),r},o.prototype.indentBlock=function(t){var o,n,i,a,r,l,d,s,c,m;if(o=e(t),o.length){if(o.is("pre")){if(l=this.editor.selection.containerNode(),!l.is(o)&&!l.closest("pre").is(o))return;this.indentText(this.editor.selection.range())}else if(o.is("li")){if(r=o.prev("li"),r.length<1)return;this.editor.selection.save(),m=o.parent()[0].tagName,n=r.children("ul, ol"),n.length>0?n.append(o):e("<"+m+"/>").append(o).appendTo(r),this.editor.selection.restore()}else if(o.is("p, h1, h2, h3, h4"))c=parseInt(o.css("margin-left"))||0,c=(Math.round(c/this.opts.indentWidth)+1)*this.opts.indentWidth,o.css("margin-left",c);else{if(!o.is("table")&&!o.is(".simditor-table"))return!1;if(d=this.editor.selection.containerNode().closest("td, th"),i=d.next("td, th"),i.length>0||(s=d.parent("tr"),a=s.next("tr"),a.length<1&&s.parent().is("thead")&&(a=s.parent("thead").next("tbody").find("tr:first")),i=a.find("td:first, th:first")),!(d.length>0&&i.length>0))return;this.editor.selection.setRangeAtEndOf(i)}return!0}},o.prototype.indentText=function(e){var t,o;return t=e.toString().replace(/^(?=.+)/gm,"  "),o=document.createTextNode(t||"  "),e.deleteContents(),e.insertNode(o),t?(e.selectNode(o),this.editor.selection.range(e)):this.editor.selection.setRangeAfter(o)},o.prototype.outdentBlock=function(t){var o,n,i,a,r,l,d,s,c,m;if(o=e(t),o&&o.length>0){if(o.is("pre")){if(a=this.editor.selection.containerNode(),!a.is(o)&&!a.closest("pre").is(o))return;this.outdentText(m)}else if(o.is("li"))n=o.parent(),i=n.parent("li"),this.editor.selection.save(),i.length<1?(m=document.createRange(),m.setStartBefore(n[0]),m.setEndBefore(o[0]),n.before(m.extractContents()),e("<p/>").insertBefore(n).after(o.children("ul, ol")).append(o.contents()),o.remove()):(o.next("li").length>0&&e("<"+n[0].tagName+"/>").append(o.nextAll("li")).appendTo(o),o.insertAfter(i),n.children("li").length<1&&n.remove()),this.editor.selection.restore();else if(o.is("p, h1, h2, h3, h4"))c=parseInt(o.css("margin-left"))||0,c=Math.max(Math.round(c/this.opts.indentWidth)-1,0)*this.opts.indentWidth,o.css("margin-left",0===c?"":c);else{if(!o.is("table")&&!o.is(".simditor-table"))return!1;if(d=this.editor.selection.containerNode().closest("td, th"),r=d.prev("td, th"),r.length>0||(s=d.parent("tr"),l=s.prev("tr"),l.length<1&&s.parent().is("tbody")&&(l=s.parent("tbody").prev("thead").find("tr:first")),r=l.find("td:last, th:last")),!(d.length>0&&r.length>0))return;this.editor.selection.setRangeAtEndOf(r)}return!0}},o.prototype.outdentText=function(e){},o}(t),d=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.pluginName="Clipboard",o.prototype.opts={pasteImage:!1,cleanPaste:!1},o.prototype._init=function(){return this.editor=this._module,this.opts.pasteImage&&"string"!=typeof this.opts.pasteImage&&(this.opts.pasteImage="inline"),this.editor.body.on("paste",function(e){return function(t){var o;if(!e.pasting&&!e._pasteBin)return e.editor.triggerHandler(t)!==!1&&(o=e.editor.selection.deleteRangeContents(),e.editor.body.html()?o.collapsed||o.collapse(!0):(e.editor.formatter.format(),e.editor.selection.setRangeAtStartOf(e.editor.body.find("p:first"))),!e._processPasteByClipboardApi(t)&&(e.editor.inputManager.throttledValueChanged.clear(),e.editor.inputManager.throttledSelectionChanged.clear(),e.editor.undoManager.throttledPushState.clear(),e.editor.selection.reset(),e.editor.undoManager.resetCaretPosition(),e.pasting=!0,e._getPasteContent(function(t){return e._processPasteContent(t),e._pasteInBlockEl=null,e._pastePlainText=null,e.pasting=!1})))}}(this))},o.prototype._processPasteByClipboardApi=function(e){var t,o,n,i;if(!this.editor.util.browser.edge&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items&&e.originalEvent.clipboardData.items.length>0&&(o=e.originalEvent.clipboardData.items[0],/^image\//.test(o.type))){if(t=o.getAsFile(),null==t||!this.opts.pasteImage)return;if(t.name||(t.name="Clipboard Image.png"),this.editor.triggerHandler("pasting",[t])===!1)return;return i={},i[this.opts.pasteImage]=!0,null!=(n=this.editor.uploader)&&n.upload(t,i),!0}},o.prototype._getPasteContent=function(t){var o;return this._pasteBin=e('<div contenteditable="true" />').addClass("simditor-paste-bin").attr("tabIndex","-1").appendTo(this.editor.el),o={html:this.editor.body.html(),caret:this.editor.undoManager.caretPosition()},this._pasteBin.focus(),setTimeout(function(n){return function(){var i;return n.editor.hidePopover(),n.editor.body.get(0).innerHTML=o.html,n.editor.undoManager.caretPosition(o.caret),n.editor.body.focus(),n.editor.selection.reset(),n.editor.selection.range(),n._pasteInBlockEl=n.editor.selection.blockNodes().last(),n._pasteBin.children("style").remove(),n._pasteBin.find("ul").each(function(t,o){e(o).before(e("<ol/>").append(e(o).find("li"))),e(o).remove()}),n._pasteBin.find("ol").find("li").children("p").each(function(t,o){e(o).after(e(o).html()),e(o).remove()}),n._pastePlainText=n.opts.cleanPaste||n._pasteInBlockEl.is("pre, table"),n._pastePlainText?i=n.editor.formatter.clearHtml(n._pasteBin.html(),!0):(i=e("<div/>").append(n._pasteBin.contents()),i.find("table colgroup").remove(),n.editor.formatter.format(i),n.editor.formatter.decorate(i),n.editor.formatter.beautify(i.children()),i.find("p").each(function(t,o){"\t\t\t\t"==e(o).html()&&e(o).html("<br>")}),i=i.contents()),n._pasteBin.remove(),n._pasteBin=null,t(i)}}(this),0)},o.prototype._processPasteContent=function(t){var o,n,i,a,r,l,d,s,c,m,u,p,f,g,h,v,b,y,_,w,x,k,C;if(this.editor.triggerHandler("pasting",[t])!==!1&&(o=this._pasteInBlockEl,t)){if(this._pastePlainText)if(o.is("table")){for(h=t.split("\n"),s=h.pop(),l=0,c=h.length;l<c;l++)g=h[l],this.editor.selection.insertNode(document.createTextNode(g)),this.editor.selection.insertNode(e("<br/>"));this.editor.selection.insertNode(document.createTextNode(s))}else for(t=e("<div/>").text(t),w=t.contents(),d=0,m=w.length;d<m;d++)b=w[d],this.editor.selection.insertNode(e(b)[0]);else if(o.is(this.editor.body))for(v=0,u=t.length;v<u;v++)b=t[v],this.editor.selection.insertNode(b);else{if(t.length<1)return;if(1===t.length)if(t.is("p")){if(a=t.contents(),1===a.length&&a.is("img")){if(n=a,/^data:image/.test(n.attr("src"))){if(!this.opts.pasteImage)return;return i=this.editor.util.dataURLtoBlob(n.attr("src")),i.name="Clipboard Image.png",C={},C[this.opts.pasteImage]=!0,void(null!=(x=this.editor.uploader)&&x.upload(i,C))}if(n.is('img[src^="webkit-fake-url://"]'))return}for(y=0,p=a.length;y<p;y++)b=a[y],this.editor.selection.insertNode(b)}else if(o.is("p")&&this.editor.util.isEmptyNode(o))o.replaceWith(t),this.editor.selection.setRangeAtEndOf(t);else if(t.is("ul, ol"))if(1===t.find("li").length)for(t=e("<div/>").text(t.text()),k=t.contents(),_=0,f=k.length;_<f;_++)b=k[_],this.editor.selection.insertNode(e(b)[0]);else o.is("li")?(o.parent().after(t),this.editor.selection.setRangeAtEndOf(t)):(o.after(t),this.editor.selection.setRangeAtEndOf(t));else o.after(t),this.editor.selection.setRangeAtEndOf(t);else o.is("li")&&(o=o.parent()),this.editor.selection.rangeAtStartOf(o)?r="before":this.editor.selection.rangeAtEndOf(o)?r="after":(this.editor.selection.breakBlockEl(o),r="before"),o[r](t),this.editor.selection.setRangeAtEndOf(t.last())}return this.editor.inputManager.throttledValueChanged()}},o}(t),E=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return $(i,t),i.connect(M),i.connect(y),i.connect(I),i.connect(N),i.connect(w),i.connect(p),i.connect(F),i.connect(b),i.connect(d),i.count=0,i.prototype.opts={textarea:null,placeholder:"",defaultImage:"images/image.png",params:{},upload:!1,indentWidth:40},i.prototype._init=function(){var t,a,r,l;if(this.textarea=e(this.opts.textarea),this.opts.placeholder=this.opts.placeholder||this.textarea.attr("placeholder"),!this.textarea.length)throw new Error("simditor: param textarea is required.");if(a=this.textarea.data("simditor"),null!=a&&a.destroy(),this.id=++i.count,this._render(),!o)throw new Error("simditor: simple-hotkeys is required.");if(this.hotkeys=o({el:this.body}),this.opts.upload&&n&&(l="object"==typeof this.opts.upload?this.opts.upload:{},this.uploader=n(l)),r=this.textarea.closest("form"),r.length&&(r.on("submit.simditor-"+this.id,function(e){return function(){return e.sync()}}(this)),r.on("reset.simditor-"+this.id,function(e){return function(){return e.setValue("")}}(this))),this.on("initialized",function(e){return function(){if(e.opts.placeholder&&e.on("valuechanged",function(){return e._placeholder()}),e.setValue(e.textarea.val().trim()||""),e.textarea.attr("autofocus"))return e.focus()}}(this)),this.util.browser.mozilla){this.util.reflow();try{return document.execCommand("enableObjectResizing",!1,!1),document.execCommand("enableInlineTableEditing",!1,!1)}catch(d){t=d}}},i.prototype._tpl='<div class="simditor">\n  <div class="simditor-wrapper">\n    <div class="simditor-placeholder"></div>\n    <div class="simditor-body" contenteditable="true">\n    </div>\n  </div>\n</div>',i.prototype._render=function(){var t,o,n,i;if(this.el=e(this._tpl).insertBefore(this.textarea),this.wrapper=this.el.find(".simditor-wrapper"),this.body=this.wrapper.find(".simditor-body"),this.placeholderEl=this.wrapper.find(".simditor-placeholder").append(this.opts.placeholder),this.el.data("simditor",this),this.wrapper.append(this.textarea),this.textarea.data("simditor",this).blur(),this.body.attr("tabindex",this.textarea.attr("tabindex")),this.util.os.mac?this.el.addClass("simditor-mac"):this.util.os.linux&&this.el.addClass("simditor-linux"),this.util.os.mobile&&this.el.addClass("simditor-mobile"),this.opts.params){o=this.opts.params,n=[];for(t in o)i=o[t],n.push(e("<input/>",{type:"hidden",name:t,value:i}).insertAfter(this.textarea));return n}},i.prototype._placeholder=function(){var e;return e=this.body.children(),0===e.length||1===e.length&&this.util.isEmptyNode(e)&&parseInt(e.css("margin-left")||0)<this.opts.indentWidth?this.placeholderEl.show():this.placeholderEl.hide()},i.prototype.setValue=function(e){return this.hidePopover(),this.textarea.val(e),this.body.get(0).innerHTML=e,this.formatter.format(),this.formatter.decorate(),this.util.reflow(this.body),this.inputManager.lastCaretPosition=null,this.trigger("valuechanged")},i.prototype.getValue=function(){return this.sync()},i.prototype.sync=function(){var t,o,n,i,a,r;for(o=this.body.clone(),this.formatter.undecorate(o),this.formatter.format(o),this.formatter.autolink(o),t=o.children(),a=t.last("p"),i=t.first("p");a.is("p")&&this.util.isEmptyNode(a);)n=a,a=a.prev("p"),n.remove();for(;i.is("p")&&this.util.isEmptyNode(i);)n=i,i=a.next("p"),n.remove();return o.find("img.uploading").remove(),r=e.trim(o.html()),this.textarea.val(r),r},i.prototype.focus=function(){var t,o;return this.body.is(":visible")&&this.body.is("[contenteditable]")?this.inputManager.lastCaretPosition?(this.undoManager.caretPosition(this.inputManager.lastCaretPosition),this.inputManager.lastCaretPosition=null):(t=this.body.children().last(),t.is("p")||(t=e("<p/>").append(this.util.phBr).appendTo(this.body)),o=document.createRange(),this.selection.setRangeAtEndOf(t,o)):void this.el.find("textarea:visible").focus()},i.prototype.blur=function(){return this.body.is(":visible")&&this.body.is("[contenteditable]")?this.body.blur():this.body.find("textarea:visible").blur()},i.prototype.hidePopover=function(){return this.el.find(".simditor-popover").each(function(t,o){if(o=e(o).data("popover"),o.active)return o.hide()})},i.prototype.destroy=function(){return this.triggerHandler("destroy"),this.textarea.closest("form").off(".simditor .simditor-"+this.id),this.selection.clear(),this.inputManager.focused=!1,this.textarea.insertBefore(this.el).hide().val("").removeData("simditor"),this.el.remove(),e(document).off(".simditor-"+this.id),e(window).off(".simditor-"+this.id),this.off()},i}(t),E.i18n={"zh-CN":{blockquote:"引用",bold:"加粗文字",code:"插入代码",color:"文字颜色",coloredText:"彩色文字",hr:"分隔线",image:"插入图片",externalImage:"外链图片",uploadImage:"上传图片",uploadFailed:"上传失败了",uploadError:"上传出错了",imageUrl:"图片地址",imageSize:"图片尺寸",imageAlt:"图片描述",restoreImageSize:"还原图片尺寸",uploading:"正在上传",indent:"向右缩进",outdent:"向左缩进",italic:"斜体文字",link:"插入链接",linkText:"链接文字",linkUrl:"链接地址",linkTarget:"打开方式",openLinkInCurrentWindow:"在当前窗口中打开",openLinkInNewWindow:"在新窗口中打开",removeLink:"移除链接",ol:"有序列表",ul:"无序列表",strikethrough:"删除线文字",table:"表格",deleteRow:"删除行",insertRowAbove:"在上面插入行",insertRowBelow:"在下面插入行",deleteColumn:"删除列",insertColumnLeft:"在左边插入列",insertColumnRight:"在右边插入列",deleteTable:"删除表格",title:"标题",normalText:"普通文本",underline:"下划线文字",alignment:"水平对齐",alignCenter:"居中",alignLeft:"居左",alignRight:"居右",selectLanguage:"选择程序语言",fontScale:"字体大小",fontScaleXLarge:"超大字体",fontScaleLarge:"大号字体",fontScaleNormal:"正常大小",fontScaleSmall:"小号字体",fontScaleXSmall:"超小字体",paintRow:"Paint Row",paintCell:"Paint Cell",dissolveRow:"Dissolve Row",dissolveCell:"Dissolve Cell",addBorder:"Add borders",removeBorder:"Delete borders",listDisc:"List Disc",listCircle:"List Circle",listSquare:"List Square",listDecimal:"List Decimal",listDecimal0:"List Decimal 0",listUpperRoman:"List Upper Roman",listLowerRoman:"List Lower Roman",listUpperAlpha:"List Upper Alpha",listLowerAlpha:"List Lower Alpha",listGreek:"List Greek",toggleList:"List on/off"},"en-US":{blockquote:"Block Quote",bold:"Bold",code:"Code",color:"Text Color",coloredText:"Colored Text",hr:"Horizontal Line",image:"Insert Image",externalImage:"External Image",uploadImage:"Upload Image",uploadFailed:"Upload failed",uploadError:"Error occurs during upload",imageUrl:"Url",imageSize:"Size",imageAlt:"Alt",restoreImageSize:"Restore Origin Size",uploading:"Uploading",indent:"Indent",outdent:"Outdent",italic:"Italic",link:"Insert Link",linkText:"Text",linkUrl:"Url",linkTarget:"Target",openLinkInCurrentWindow:"Open link in current window",openLinkInNewWindow:"Open link in new window",removeLink:"Remove Link",ol:"Ordered List",ul:"Unordered List",strikethrough:"Strikethrough",table:"Table",deleteRow:"Delete Row",insertRowAbove:"Insert Row Above",insertRowBelow:"Insert Row Below",deleteColumn:"Delete Column",insertColumnLeft:"Insert Column Left",insertColumnRight:"Insert Column Right",deleteTable:"Delete Table",title:"Title",normalText:"Text",underline:"Underline",alignment:"Alignment",alignCenter:"Align Center",alignLeft:"Align Left",alignRight:"Align Right",alignJustify:"Align Justify",selectLanguage:"Select Language",fontScale:"Font Size",fontScaleXLarge:"X Large Size",fontScaleLarge:"Large Size",fontScaleNormal:"Normal Size",fontScaleSmall:"Small Size",fontScaleXSmall:"X Small Size",paintRow:"Paint Row",paintCell:"Paint Cell",dissolveRow:"Dissolve Row",dissolveCell:"Dissolve Cell",addBorder:"Add borders",removeBorder:"Delete borders",listDisc:"List Disc",listCircle:"List Circle",listSquare:"List Square",listDecimal:"List Decimal",listDecimal0:"List Decimal 0",listUpperRoman:"List Upper Roman",listLowerRoman:"List Lower Roman",listUpperAlpha:"List Upper Alpha",listLowerAlpha:"List Lower Alpha",listGreek:"List Greek",toggleList:"List on/off"}},l=function(t){function o(e){this.editor=e.editor,this.title=this._t(this.name),o.__super__.constructor.call(this,e)}return $(o,t),o.prototype._tpl={item:'<li><a tabindex="-1" unselectable="on" class="toolbar-item" href="javascript:;"><span></span></a></li>',menuWrapper:'<div class="toolbar-menu"></div>',menuItem:'<li><a tabindex="-1" unselectable="on" class="menu-item" href="javascript:;"><span></span></a></li>',separator:'<li><span class="separator"></span></li>'},o.prototype.name="",o.prototype.icon="",o.prototype.title="",o.prototype.text="",o.prototype.htmlTag="",o.prototype.disableTag="",o.prototype.menu=!1,o.prototype.active=!1,o.prototype.disabled=!1,o.prototype.needFocus=!0,o.prototype.shortcut=null,o.prototype._init=function(){var t,o,n,i;for(this.render(),this.el.on("mousedown",function(e){return function(t){var o,n,i;return t.preventDefault(),n=e.needFocus&&!e.editor.inputManager.focused,!e.el.hasClass("disabled")&&!n&&(e.menu?(e.wrapper.toggleClass("menu-on").siblings("li").removeClass("menu-on"),e.wrapper.is(".menu-on")&&(o=e.menuWrapper.offset().left+e.menuWrapper.outerWidth()+5-e.editor.wrapper.offset().left-e.editor.wrapper.outerWidth(),o>0&&e.menuWrapper.css({left:"auto",right:0}),e.trigger("menuexpand")),!1):(i=e.el.data("param"),e.command(i),!1))}}(this)),this.wrapper.on("click","a.menu-item",function(t){return function(o){var n,i,a;return o.preventDefault(),n=e(o.currentTarget),t.wrapper.removeClass("menu-on"),i=t.needFocus&&!t.editor.inputManager.focused,!n.hasClass("disabled")&&!i&&(t.editor.toolbar.wrapper.removeClass("menu-on"),a=n.data("param"),t.command(a),!1)}}(this)),this.wrapper.on("mousedown","a.menu-item",function(e){return!1}),this.editor.on("blur",function(e){return function(){var t;if(t=e.editor.body.is(":visible")&&e.editor.body.is("[contenteditable]"),t&&!e.editor.clipboard.pasting)return e.setActive(!1),e.setDisabled(!1)}}(this)),null!=this.shortcut&&this.editor.hotkeys.add(this.shortcut,function(e){return function(t){return e.el.mousedown(),!1}}(this)),n=this.htmlTag.split(","),t=0,o=n.length;t<o;t++)i=n[t],i=e.trim(i),i&&e.inArray(i,this.editor.formatter._allowedTags)<0&&this.editor.formatter._allowedTags.push(i);return this.editor.on("selectionchanged",function(e){return function(t){if(e.editor.inputManager.focused)return e._status()}}(this))},o.prototype.iconClassOf=function(e){return e?"simditor-icon simditor-icon-"+e:""},o.prototype.setIcon=function(e){return this.el.find("span").removeClass().addClass(this.iconClassOf(e)).text(this.text)},o.prototype.render=function(){if(this.wrapper=e(this._tpl.item).appendTo(this.editor.toolbar.list),this.el=this.wrapper.find("a.toolbar-item"),this.el.attr("title",this.title).addClass("toolbar-item-"+this.name).data("button",this),this.setIcon(this.icon),this.menu)return this.menuWrapper=e(this._tpl.menuWrapper).appendTo(this.wrapper),this.menuWrapper.addClass("toolbar-menu-"+this.name),this.renderMenu()},o.prototype.renderMenu=function(){var t,o,n,i,a,r,l,d;if(e.isArray(this.menu)){for(this.menuEl=e("<ul/>").appendTo(this.menuWrapper),r=this.menu,d=[],n=0,i=r.length;n<i;n++)a=r[n],"|"!==a?(o=e(this._tpl.menuItem).appendTo(this.menuEl),t=o.find("a.menu-item").attr({title:null!=(l=a.title)?l:a.text,"data-param":a.param}).addClass("menu-item-"+a.name),a.icon?d.push(t.find("span").addClass(this.iconClassOf(a.icon))):d.push(t.find("span").text(a.text))):e(this._tpl.separator).appendTo(this.menuEl);return d}},o.prototype.setActive=function(e){if(e!==this.active)return this.active=e,this.el.toggleClass("active",this.active)},o.prototype.setDisabled=function(e){if(e!==this.disabled)return this.disabled=e,this.el.toggleClass("disabled",this.disabled)},o.prototype._disableStatus=function(){var e,t,o;return o=this.editor.selection.startNodes(),t=this.editor.selection.endNodes(),e=o.filter(this.disableTag).length>0||t.filter(this.disableTag).length>0,this.setDisabled(e),this.disabled&&this.setActive(!1),this.disabled},o.prototype._activeStatus=function(){var e,t,o,n,i;return i=this.editor.selection.startNodes(),o=this.editor.selection.endNodes(),n=i.filter(this.htmlTag),t=o.filter(this.htmlTag),e=n.length>0&&t.length>0&&n.is(t),this.node=e?n:null,this.setActive(e),this.active},o.prototype._status=function(){if(this._disableStatus(),!this.disabled)return this._activeStatus()},o.prototype.command=function(e){},o.prototype._t=function(){var e,t,n;return e=1<=arguments.length?q.call(arguments,0):[],n=o.__super__._t.apply(this,e),n||(n=(t=this.editor)._t.apply(t,e)),n},o}(t),E.Button=l,O=function(t){function o(e){this.button=e.button,this.editor=e.button.editor,o.__super__.constructor.call(this,e)}return $(o,t),o.prototype.offset={top:4,left:0},o.prototype.target=null,o.prototype.active=!1,o.prototype._init=function(){return this.el=e('<div class="simditor-popover"></div>').appendTo(this.editor.el).data("popover",this),this.render(),this.el.on("mouseenter",function(e){return function(t){return e.el.addClass("hover")}}(this)),this.el.on("mouseleave",function(e){return function(t){return e.el.removeClass("hover")}}(this))},o.prototype.render=function(){},o.prototype._initLabelWidth=function(){var t;if(t=this.el.find(".settings-field"),t.length>0)return this._labelWidth=0,t.each(function(t){return function(o,n){var i,a;if(i=e(n),a=i.find("label"),a.length>0)return t._labelWidth=Math.max(t._labelWidth,a.width())}}(this)),t.find("label").width(this._labelWidth)},o.prototype.show=function(t,o){if(null==o&&(o="bottom"),null!=t)return this.el.siblings(".simditor-popover").each(function(t,o){if(o=e(o).data("popover"),o.active)return o.hide()}),this.active&&this.target&&this.target.removeClass("selected"),this.target=t.addClass("selected"),this.active?(this.refresh(o),this.trigger("popovershow")):(this.active=!0,this.el.css({left:-9999}).show(),this._labelWidth||this._initLabelWidth(),this.editor.util.reflow(),this.refresh(o),this.trigger("popovershow"))},o.prototype.hide=function(){if(this.active)return this.target&&this.target.removeClass("selected"),this.target=null,this.active=!1,this.el.hide(),this.trigger("popoverhide")},o.prototype.refresh=function(e){var t,o,n,i,a,r;if(null==e&&(e="bottom"),this.active)return t=this.editor.el.offset(),a=this.target.offset(),i=this.target.outerHeight(),"bottom"===e?r=a.top-t.top+i:"top"===e&&(r=a.top-t.top-this.el.height()),n=this.editor.wrapper.width()-this.el.outerWidth()-10,o=Math.min(a.left-t.left,n),this.el.css({top:r+this.offset.top,left:o+this.offset.left})},o.prototype.destroy=function(){return this.target=null,this.active=!1,this.editor.off(".linkpopover"),this.el.remove()},o.prototype._t=function(){var e,t,n;return e=1<=arguments.length?q.call(arguments,0):[],n=o.__super__._t.apply(this,e),n||(n=(t=this.button)._t.apply(t,e)),n},o}(t),E.Popover=O,S=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.prototype.name="title",o.prototype.htmlTag="h1, h2, h3, h4, h5",o.prototype.disableTag="pre, table",o.prototype._init=function(){return this.menu=[{name:"normal",text:this._t("normalText"),param:"p"},"|",{name:"h1",text:this._t("title")+" 1",param:"h1"},{name:"h2",text:this._t("title")+" 2",param:"h2"},{name:"h3",text:this._t("title")+" 3",param:"h3"},{name:"h4",text:this._t("title")+" 4",param:"h4"},{name:"h5",text:this._t("title")+" 5",param:"h5"}],o.__super__._init.call(this)},o.prototype.setActive=function(e,t){if(o.__super__.setActive.call(this,e),e&&(t||(t=this.node[0].tagName.toLowerCase())),this.el.removeClass("active-p active-h1 active-h2 active-h3 active-h4 active-h5"),e)return this.el.addClass("active active-"+t)},o.prototype.command=function(t){var o;return o=this.editor.selection.rootNodes(),this.editor.selection.save(),o.each(function(o){return function(n,i){var a;if(a=e(i),!(a.is("blockquote")||a.is(t)||a.is(o.disableTag)||o.editor.util.isDecoratedNode(a)))return e("<"+t+"/>").append(a.contents()).replaceAll(a)}}(this)),this.editor.selection.restore(),this.editor.trigger("valuechanged")},o}(l),E.Toolbar.addButton(S),u=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.prototype.name="fontScale",o.prototype.icon="font",o.prototype.disableTag="pre",o.prototype.htmlTag="span",o.prototype.sizeMap={"x-large":"1.5em",large:"1.25em",small:".75em","x-small":".5em"},o.prototype._init=function(){return this.menu=[{name:"150%",text:this._t("fontScaleXLarge"),param:"5"},{name:"125%",text:this._t("fontScaleLarge"),param:"4"},{name:"100%",text:this._t("fontScaleNormal"),param:"3"},{name:"75%",text:this._t("fontScaleSmall"),param:"2"},{name:"50%",text:this._t("fontScaleXSmall"),param:"1"}],o.__super__._init.call(this)},o.prototype._activeStatus=function(){var e,t,o,n,i,a;return n=this.editor.selection.range(),a=this.editor.selection.startNodes(),o=this.editor.selection.endNodes(),i=a.filter('span[style*="font-size"]'),t=o.filter('span[style*="font-size"]'),e=a.length>0&&o.length>0&&i.is(t),this.setActive(e),this.active},o.prototype.command=function(t){var o,n,i;if(i=this.editor.selection.range(),!i.collapsed)return document.execCommand("styleWithCSS",!1,!0),document.execCommand("fontSize",!1,t),document.execCommand("styleWithCSS",!1,!1),this.editor.selection.reset(),this.editor.selection.range(),n=this.editor.selection.containerNode(),o=n[0].nodeType===Node.TEXT_NODE?n.closest('span[style*="font-size"]'):n.find('span[style*="font-size"]'),o.each(function(t){return function(o,n){var i,a;return i=e(n),a=n.style.fontSize,/large|x-large|small|x-small/.test(a)?i.css("fontSize",t.sizeMap[a]):"medium"===a?i.replaceWith(i.contents()):void 0}}(this)),this.editor.trigger("valuechanged")},o}(l),E.Toolbar.addButton(u),r=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.prototype.name="bold",o.prototype.icon="bold",o.prototype.htmlTag="b, strong",o.prototype.disableTag="pre",o.prototype.shortcut="cmd+b",o.prototype._init=function(){return this.editor.util.os.mac?this.title=this.title+" ( Cmd + b )":(this.title=this.title+" ( Ctrl + b )",this.shortcut="ctrl+b"),o.__super__._init.call(this)},o.prototype._activeStatus=function(){var e;return e=document.queryCommandState("bold")===!0,this.setActive(e),this.active},o.prototype.command=function(){return document.execCommand("bold"),this.editor.util.support.oninput||this.editor.trigger("valuechanged"),e(document).trigger("selectionchange")},o}(l),E.Toolbar.addButton(r),_=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.prototype.name="italic",o.prototype.icon="italic",o.prototype.htmlTag="i",o.prototype.disableTag="pre",o.prototype.shortcut="cmd+i",o.prototype._init=function(){return this.editor.util.os.mac?this.title=this.title+" ( Cmd + i )":(this.title=this.title+" ( Ctrl + i )",this.shortcut="ctrl+i"),o.__super__._init.call(this)},o.prototype._activeStatus=function(){var e;return e=document.queryCommandState("italic")===!0,this.setActive(e),this.active},o.prototype.command=function(){return document.execCommand("italic"),this.editor.util.support.oninput||this.editor.trigger("valuechanged"),e(document).trigger("selectionchange")},o}(l),E.Toolbar.addButton(_),R=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.prototype.name="underline",o.prototype.icon="underline",o.prototype.htmlTag="u",o.prototype.disableTag="pre",o.prototype.shortcut="cmd+u",o.prototype.render=function(){return this.editor.util.os.mac?this.title=this.title+" ( Cmd + u )":(this.title=this.title+" ( Ctrl + u )",this.shortcut="ctrl+u"),o.__super__.render.call(this)},o.prototype._activeStatus=function(){var e;return e=document.queryCommandState("underline")===!0,this.setActive(e),this.active},o.prototype.command=function(){return document.execCommand("underline"),this.editor.util.support.oninput||this.editor.trigger("valuechanged"),e(document).trigger("selectionchange")},o}(l),E.Toolbar.addButton(R),m=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.prototype.name="color",o.prototype.icon="tint",o.prototype.disableTag="pre",o.prototype.menu=!0,o.prototype.render=function(){var e;return e=1<=arguments.length?q.call(arguments,0):[],o.__super__.render.apply(this,e)},o.prototype.renderMenu=function(){return e('<ul class="color-list">\n  <li><a href="javascript:;" class="font-color font-color-1"></a></li>\n  <li><a href="javascript:;" class="font-color font-color-2"></a></li>\n  <li><a href="javascript:;" class="font-color font-color-3"></a></li>\n  <li><a href="javascript:;" class="font-color font-color-4"></a></li>\n  <li><a href="javascript:;" class="font-color font-color-5"></a></li>\n  <li><a href="javascript:;" class="font-color font-color-6"></a></li>\n  <li><a href="javascript:;" class="font-color font-color-7"></a></li>\n  <li><a href="javascript:;" class="font-color font-color-default"></a></li>\n</ul>').appendTo(this.menuWrapper),this.menuWrapper.on("mousedown",".color-list",function(e){return!1}),this.menuWrapper.on("click",".font-color",function(t){return function(o){var n,i,a,r,l,d;if(t.wrapper.removeClass("menu-on"),n=e(o.currentTarget),n.hasClass("font-color-default")){if(i=t.editor.body.find("p, li"),!(i.length>0))return;l=window.getComputedStyle(i[0],null).getPropertyValue("color"),a=t._convertRgbToHex(l)}else l=window.getComputedStyle(n[0],null).getPropertyValue("background-color"),a=t._convertRgbToHex(l);if(a)return r=t.editor.selection.range(),!n.hasClass("font-color-default")&&r.collapsed&&(d=document.createTextNode(t._t("coloredText")),
r.insertNode(d),r.selectNodeContents(d),t.editor.selection.range(r)),document.execCommand("styleWithCSS",!1,!0),document.execCommand("foreColor",!1,a),document.execCommand("styleWithCSS",!1,!1),t.editor.util.support.oninput?void 0:t.editor.trigger("valuechanged")}}(this))},o.prototype._convertRgbToHex=function(e){var t,o,n;return o=/rgb\((\d+),\s?(\d+),\s?(\d+)\)/g,(t=o.exec(e))?(n=function(e,t,o){var n;return n=function(e){var t;return t=e.toString(16),1===t.length?"0"+t:t},"#"+n(e)+n(t)+n(o)})(1*t[1],1*t[2],1*t[3]):""},o}(l),E.Toolbar.addButton(m),C=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.prototype.type="",o.prototype.disableTag="pre, table",o.prototype.command=function(t){var o,n,i;return n=this.editor.selection.blockNodes(),i="ul"===this.type?"ol":"ul",this.editor.selection.save(),o=null,n.each(function(t){return function(n,a){var r;if(r=e(a),!(r.is("blockquote, li")||r.is(t.disableTag)||t.editor.util.isDecoratedNode(r))&&e.contains(document,a))return r.is(t.type)?(r.children("li").each(function(o,n){var i,a;return a=e(n),i=a.children("ul, ol").insertAfter(r),e("<p/>").append(e(n).html()||t.editor.util.phBr).insertBefore(r)}),r.remove()):r.is(i)?e("<"+t.type+"/>").append(r.contents()).replaceAll(r):o&&r.prev().is(o)?(e("<li/>").append(r.html()||t.editor.util.phBr).appendTo(o),r.remove()):(o=e("<"+t.type+"><li></li></"+t.type+">"),o.find("li").append(r.html()||t.editor.util.phBr),o.replaceAll(r))}}(this)),this.editor.selection.restore(),this.editor.trigger("valuechanged")},o}(l),D=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $(t,e),t.prototype.type="ol",t.prototype.name="ol",t.prototype.icon="list-ol",t.prototype.htmlTag="ol",t.prototype.shortcut="cmd+/",t.prototype._init=function(){return this.editor.util.os.mac?this.title=this.title+" ( Cmd + / )":(this.title=this.title+" ( ctrl + / )",this.shortcut="ctrl+/"),t.__super__._init.call(this)},t}(C),E.Toolbar.addButton(D),OrderListStyleButton=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.prototype.name="ols",o.prototype.icon="list-ul",o.prototype.type="ol",o.prototype.htmlTag="ol",o.prototype.disableTag="pre, table",o.prototype.menu=!0,o.prototype.shortcut="cmd+/",o.prototype._init=function(){return e.extend(this.editor.formatter._allowedStyles,{ol:["list-style-type"]}),this.editor.util.os.mac?this.title=this.title+" ( Cmd + / )":(this.title=this.title+" ( ctrl + / )",this.shortcut="ctrl+/"),o.__super__._init.call(this)},o.prototype.renderMenu=function(){e('<div class="menu-create-list">\n</div>\n<div class="menu-edit-list">\n  <ul>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="listDisc">\n        <span>'+this._t("listDisc")+'</span>\n      </a>\n    </li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="listCircle">\n        <span>'+this._t("listCircle")+' </span>\n      </a>\n    </li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="listSquare">\n        <span>'+this._t("listSquare")+'</span>\n      </a>\n    </li>\n    <li><span class="separator"></span></li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="listDecimal">\n        <span>'+this._t("listDecimal")+' </span>\n      </a>\n    </li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="listDecimal0">\n        <span>'+this._t("listDecimal0")+' </span>\n      </a>\n    </li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="listUpperRoman">\n        <span>'+this._t("listUpperRoman")+' </span>\n      </a>\n    </li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="listLowerRoman">\n        <span>'+this._t("listLowerRoman")+'</span>\n      </a>\n    </li>\n    <li><span class="separator"></span></li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="listUpperAlpha">\n        <span>'+this._t("listUpperAlpha")+' </span>\n      </a>\n    </li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="listLowerAlpha">\n        <span>'+this._t("listLowerAlpha")+' </span>\n      </a>\n    </li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="listGreek">\n        <span>'+this._t("listGreek")+' </span>\n      </a>\n    </li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="toggleList">\n        <span>'+this._t("toggleList")+" </span>\n      </a>\n    </li>\n    </ul>\n</div>").appendTo(this.menuWrapper),this.createMenu=this.menuWrapper.find(".menu-create-list"),this.editMenu=this.menuWrapper.find(".menu-edit-list")},o.prototype.command=function(t){var o,n;if(n={listDisc:"disc",listCircle:"circle",listSquare:"square",listDecimal:"decimal",listDecimal0:"decimal-leading-zero",listUpperRoman:"upper-roman",listLowerRoman:"lower-roman",listUpperAlpha:"upper-alpha",listLowerAlpha:"lower-alpha",listGreek:"lower-greek"},o=this.editor.selection.containerNode(),n[t]){for(;!o.is("ol")&&!o.is("div.simditor-body");)o=o.parent();if(!o.is("div.simditor-body"))return o.css("list-style-type",n[t]),this.editor.trigger("valuechanged")}var i,a,r;return a=this.editor.selection.blockNodes(),r="ul"===this.type?"ol":"ul",this.editor.selection.save(),i=null,a.each(function(t){return function(o,n){var a;if(a=e(n),!(a.is("blockquote, li")||a.is(t.disableTag)||t.editor.util.isDecoratedNode(a))&&e.contains(document,n))return a.is(t.type)?(a.children("li").each(function(o,n){var i,r;return r=e(n),i=r.children("ul, ol").insertAfter(a),e("<p/>").append(e(n).html()||t.editor.util.phBr).insertBefore(a)}),a.remove()):a.is(r)?e("<"+t.type+"/>").append(a.contents()).replaceAll(a):i&&a.prev().is(i)?(e("<li/>").append(a.html()||t.editor.util.phBr).appendTo(i),a.remove()):(i=e("<"+t.type+"><li></li></"+t.type+">"),i.find("li").append(a.html()||t.editor.util.phBr),i.replaceAll(a))}}(this)),this.editor.selection.restore(),n[t]&&i&&i.css("list-style-type",n[t]),this.editor.trigger("valuechanged")},o}(l),E.Toolbar.addButton(OrderListStyleButton),a=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.prototype.name="blockquote",o.prototype.icon="quote-left",o.prototype.htmlTag="blockquote",o.prototype.disableTag="pre, table",o.prototype.command=function(){var t,o,n;return t=this.editor.selection.rootNodes(),t=t.filter(function(t,o){return!e(o).parent().is("blockquote")}),this.editor.selection.save(),n=[],o=function(t){return function(){if(n.length>0)return e("<"+t.htmlTag+"/>").insertBefore(n[0]).append(n),n.length=0}}(this),t.each(function(t){return function(i,a){var r;if(r=e(a),r.parent().is(t.editor.body))return r.is(t.htmlTag)?(o(),r.children().unwrap()):r.is(t.disableTag)||t.editor.util.isDecoratedNode(r)?o():n.push(a)}}(this)),o(),this.editor.selection.restore(),this.editor.trigger("valuechanged")},o}(l),E.Toolbar.addButton(a),s=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.prototype.name="code",o.prototype.icon="code",o.prototype.htmlTag="pre",o.prototype.disableTag="ul, ol, table",o.prototype._init=function(){return o.__super__._init.call(this),this.editor.on("decorate",function(t){return function(o,n){return n.find("pre").each(function(o,n){return t.decorate(e(n))})}}(this)),this.editor.on("undecorate",function(t){return function(o,n){return n.find("pre").each(function(o,n){return t.undecorate(e(n))})}}(this))},o.prototype.render=function(){var e;return e=1<=arguments.length?q.call(arguments,0):[],o.__super__.render.apply(this,e),this.popover=new c({button:this})},o.prototype._checkMode=function(){var t,o;return o=this.editor.selection.range(),(t=e(o.cloneContents()).find(this.editor.util.blockNodes.join(",")))>0||o.collapsed&&0===this.editor.selection.startNodes().filter("code").length?(this.inlineMode=!1,this.htmlTag="pre"):(this.inlineMode=!0,this.htmlTag="code")},o.prototype._status=function(){if(this._checkMode(),o.__super__._status.call(this),!this.inlineMode)return this.active?this.popover.show(this.node):this.popover.hide()},o.prototype.decorate=function(e){var t,o,n,i;if(t=e.find("> code"),t.length>0&&(o=null!=(n=t.attr("class"))&&null!=(i=n.match(/lang-(\S+)/))?i[1]:void 0,t.contents().unwrap(),o))return e.attr("data-lang",o)},o.prototype.undecorate=function(t){var o,n;return n=t.attr("data-lang"),o=e("<code/>"),n&&n!==-1&&o.addClass("lang-"+n),t.wrapInner(o).removeAttr("data-lang")},o.prototype.command=function(){return this.inlineMode?this._inlineCommand():this._blockCommand()},o.prototype._blockCommand=function(){var t,o,n,i;return t=this.editor.selection.rootNodes(),n=[],i=[],o=function(t){return function(){var o;if(n.length>0)return o=e("<"+t.htmlTag+"/>").insertBefore(n[0]).text(t.editor.formatter.clearHtml(n)),i.push(o[0]),n.length=0}}(this),t.each(function(t){return function(a,r){var l,d;return l=e(r),l.is(t.htmlTag)?(o(),d=e("<p/>").append(l.html().replace("\n","<br/>")).replaceAll(l),i.push(d[0])):l.is(t.disableTag)||t.editor.util.isDecoratedNode(l)||l.is("blockquote")?o():n.push(r)}}(this)),o(),this.editor.selection.setRangeAtEndOf(e(i).last()),this.editor.trigger("valuechanged")},o.prototype._inlineCommand=function(){var t,o,n;return n=this.editor.selection.range(),this.active?(n.selectNodeContents(this.node[0]),this.editor.selection.save(n),this.node.contents().unwrap(),this.editor.selection.restore()):(o=e(n.extractContents()),t=e("<"+this.htmlTag+"/>").append(o.contents()),n.insertNode(t[0]),n.selectNodeContents(t[0]),this.editor.selection.range(n)),this.editor.trigger("valuechanged")},o}(l),c=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.prototype.render=function(){var t,o,n,i,a;for(this._tpl='<div class="code-settings">\n  <div class="settings-field">\n    <select class="select-lang">\n      <option value="-1">'+this._t("selectLanguage")+"</option>\n    </select>\n  </div>\n</div>",this.langs=this.editor.opts.codeLanguages||[{name:"Bash",value:"bash"},{name:"C++",value:"c++"},{name:"C#",value:"cs"},{name:"CSS",value:"css"},{name:"Erlang",value:"erlang"},{name:"Less",value:"less"},{name:"Sass",value:"sass"},{name:"Diff",value:"diff"},{name:"CoffeeScript",value:"coffeescript"},{name:"HTML,XML",value:"html"},{name:"JSON",value:"json"},{name:"Java",value:"java"},{name:"JavaScript",value:"js"},{name:"Markdown",value:"markdown"},{name:"Objective C",value:"oc"},{name:"PHP",value:"php"},{name:"Perl",value:"parl"},{name:"Python",value:"python"},{name:"Ruby",value:"ruby"},{name:"SQL",value:"sql"}],this.el.addClass("code-popover").append(this._tpl),this.selectEl=this.el.find(".select-lang"),a=this.langs,o=0,i=a.length;o<i;o++)n=a[o],t=e("<option/>",{text:n.name,value:n.value}).appendTo(this.selectEl);return this.selectEl.on("change",function(e){return function(t){var o;return e.lang=e.selectEl.val(),o=e.target.hasClass("selected"),e.target.removeClass().removeAttr("data-lang"),e.lang!==-1&&e.target.attr("data-lang",e.lang),o&&e.target.addClass("selected"),e.editor.trigger("valuechanged")}}(this)),this.editor.on("valuechanged",function(e){return function(t){if(e.active)return e.refresh()}}(this))},o.prototype.show=function(){var e;return e=1<=arguments.length?q.call(arguments,0):[],o.__super__.show.apply(this,e),this.lang=this.target.attr("data-lang"),null!=this.lang?this.selectEl.val(this.lang):this.selectEl.val(-1)},o}(O),E.Toolbar.addButton(s),x=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.prototype.name="link",o.prototype.icon="link",o.prototype.htmlTag="a",o.prototype.disableTag="pre",o.prototype.render=function(){var e;return e=1<=arguments.length?q.call(arguments,0):[],o.__super__.render.apply(this,e),this.popover=new k({button:this})},o.prototype._status=function(){return o.__super__._status.call(this),this.active&&!this.editor.selection.rangeAtEndOf(this.node)?this.popover.show(this.node):this.popover.hide()},o.prototype.command=function(){var t,o,n,i,a,r;return a=this.editor.selection.range(),this.active?(r=document.createTextNode(this.node.text()),this.node.replaceWith(r),a.selectNode(r)):(t=e(a.extractContents()),i=this.editor.formatter.clearHtml(t.contents(),!1),o=e("<a/>",{href:"http://www.example.com",target:"_blank",text:i||this._t("linkText")}),this.editor.selection.blockNodes().length>0?a.insertNode(o[0]):(n=e("<p/>").append(o),a.insertNode(n[0])),a.selectNodeContents(o[0]),this.popover.one("popovershow",function(e){return function(){return i?(e.popover.urlEl.focus(),e.popover.urlEl[0].select()):(e.popover.textEl.focus(),e.popover.textEl[0].select())}}(this))),this.editor.selection.range(a),this.editor.trigger("valuechanged")},o}(l),k=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.prototype.render=function(){var t;return t='<div class="link-settings">\n  <div class="settings-field">\n    <label>'+this._t("linkText")+'</label>\n    <input class="link-text" type="text"/>\n    <a class="btn-unlink" href="javascript:;" title="'+this._t("removeLink")+'"\n      tabindex="-1">\n      <span class="simditor-icon simditor-icon-unlink"></span>\n    </a>\n  </div>\n  <div class="settings-field">\n    <label>'+this._t("linkUrl")+'</label>\n    <input class="link-url" type="text"/>\n  </div>\n  <div class="settings-field">\n    <label>'+this._t("linkTarget")+'</label>\n    <select class="link-target">\n      <option value="_blank">'+this._t("openLinkInNewWindow")+' (_blank)</option>\n      <option value="_self">'+this._t("openLinkInCurrentWindow")+" (_self)</option>\n    </select>\n  </div>\n</div>",this.el.addClass("link-popover").append(t),this.textEl=this.el.find(".link-text"),this.urlEl=this.el.find(".link-url"),this.unlinkEl=this.el.find(".btn-unlink"),this.selectTarget=this.el.find(".link-target"),this.textEl.on("keyup",function(e){return function(t){if(13!==t.which)return e.target.text(e.textEl.val()),e.editor.inputManager.throttledValueChanged()}}(this)),this.urlEl.on("keyup",function(e){return function(t){var o;if(13!==t.which)return o=e.urlEl.val(),!/https?:\/\/|^\//gi.test(o)&&o&&(o="http://"+o),e.target.attr("href",o),e.editor.inputManager.throttledValueChanged()}}(this)),e([this.urlEl[0],this.textEl[0]]).on("keydown",function(t){return function(o){var n;if(13===o.which||27===o.which||!o.shiftKey&&9===o.which&&e(o.target).hasClass("link-url"))return o.preventDefault(),n=document.createRange(),t.editor.selection.setRangeAfter(t.target,n),t.hide(),t.editor.inputManager.throttledValueChanged()}}(this)),this.unlinkEl.on("click",function(e){return function(t){var o,n;return n=document.createTextNode(e.target.text()),e.target.replaceWith(n),e.hide(),o=document.createRange(),e.editor.selection.setRangeAfter(n,o),e.editor.inputManager.throttledValueChanged()}}(this)),this.selectTarget.on("change",function(e){return function(t){return e.target.attr("target",e.selectTarget.val()),e.editor.inputManager.throttledValueChanged()}}(this))},o.prototype.show=function(){var e;return e=1<=arguments.length?q.call(arguments,0):[],o.__super__.show.apply(this,e),this.textEl.val(this.target.text()),this.urlEl.val(this.target.attr("href"))},o}(O),E.Toolbar.addButton(x),g=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.prototype.name="image",o.prototype.icon="picture-o",o.prototype.htmlTag="img",o.prototype.disableTag="pre, table",o.prototype.defaultImage="",o.prototype.needFocus=!1,o.prototype._init=function(){var t,n,i,a;if(this.editor.opts.imageButton)if(Array.isArray(this.editor.opts.imageButton))for(this.menu=[],a=this.editor.opts.imageButton,n=0,i=a.length;n<i;n++)t=a[n],this.menu.push({name:t+"-image",text:this._t(t+"Image")});else this.menu=!1;else null!=this.editor.uploader?this.menu=[{name:"upload-image",text:this._t("uploadImage")},{name:"external-image",text:this._t("externalImage")}]:this.menu=!1;return this.defaultImage=this.editor.opts.defaultImage,this.editor.body.on("click","img:not([data-non-image])",function(t){return function(o){var n,i;return n=e(o.currentTarget),i=document.createRange(),i.selectNode(n[0]),t.editor.selection.range(i),t.editor.util.support.onselectionchange||t.editor.trigger("selectionchanged"),!1}}(this)),this.editor.body.on("mouseup","img:not([data-non-image])",function(e){return!1}),this.editor.on("selectionchanged.image",function(t){return function(){var o,n,i;if(i=t.editor.selection.range(),null!=i)return o=e(i.cloneContents()).contents(),1===o.length&&o.is("img:not([data-non-image])")?(n=e(i.startContainer).contents().eq(i.startOffset),t.popover.show(n)):t.popover.hide()}}(this)),this.editor.on("valuechanged.image",function(t){return function(){var o;if(o=t.editor.wrapper.find(".simditor-image-loading"),o.length>0)return o.each(function(o,n){var i,a,r;if(a=e(n),i=a.data("img"),!(i&&i.parent().length>0)&&(a.remove(),i&&(r=i.data("file"),r&&(t.editor.uploader.cancel(r),t.editor.body.find("img.uploading").length<1))))return t.editor.uploader.trigger("uploadready",[r])})}}(this)),o.__super__._init.call(this)},o.prototype.render=function(){var e;if(e=1<=arguments.length?q.call(arguments,0):[],o.__super__.render.apply(this,e),this.popover=new h({button:this}),"upload"===this.editor.opts.imageButton)return this._initUploader(this.el)},o.prototype.renderMenu=function(){return o.__super__.renderMenu.call(this),this._initUploader()},o.prototype._initUploader=function(t){var o,n,i;return null==t&&(t=this.menuEl.find(".menu-item-upload-image")),null==this.editor.uploader?void this.el.find(".btn-upload").remove():(o=null,n=function(n){return function(){return o&&o.remove(),o=e("<input/>",{type:"file",title:n._t("uploadImage"),multiple:!0,accept:"image/*"}).appendTo(t)}}(this),n(),t.on("click mousedown","input[type=file]",function(e){return e.stopPropagation()}),t.on("change","input[type=file]",function(e){return function(t){return e.editor.inputManager.focused?(e.editor.uploader.upload(o,{inline:!0}),n()):(e.editor.one("focus",function(t){return e.editor.uploader.upload(o,{inline:!0}),n()}),e.editor.focus()),e.wrapper.removeClass("menu-on")}}(this)),this.editor.uploader.on("beforeupload",function(t){return function(o,n){var i;if(n.inline)return n.img?i=e(n.img):(i=t.createImage(n.name),n.img=i),i.addClass("uploading"),i.data("file",n),t.editor.uploader.readImageFile(n.obj,function(e){var o;if(i.hasClass("uploading"))return o=e?e.src:t.defaultImage,t.loadImage(i,o,function(){if(t.popover.active)return t.popover.refresh(),t.popover.srcEl.val(t._t("uploading")).prop("disabled",!0)})})}}(this)),i=e.proxy(this.editor.util.throttle(function(e,t,o,n){var i,a,r;if(t.inline&&(a=t.img.data("mask")))return i=a.data("img"),i.hasClass("uploading")&&i.parent().length>0?(r=o/n,r=(100*r).toFixed(0),r>99&&(r=99),a.find(".progress").height(100-r+"%")):void a.remove()},500),this),this.editor.uploader.on("uploadprogress",i),this.editor.uploader.on("uploadsuccess",function(t){return function(o,n,i){var a,r,l;if(n.inline&&(a=n.img,a.hasClass("uploading")&&a.parent().length>0)){if("object"!=typeof i)try{i=e.parseJSON(i)}catch(d){o=d,i={success:!1}}return i.success===!1?(l=i.msg||t._t("uploadFailed"),alert(l),r=t.defaultImage):r=i.file_path,t.loadImage(a,r,function(){var e;if(a.removeData("file"),a.removeClass("uploading").removeClass("loading"),e=a.data("mask"),e&&e.remove(),a.removeData("mask"),t.editor.trigger("valuechanged"),t.editor.body.find("img.uploading").length<1)return t.editor.uploader.trigger("uploadready",[n,i])}),t.popover.active?(t.popover.srcEl.prop("disabled",!1),t.popover.srcEl.val(i.file_path)):void 0}}}(this)),this.editor.uploader.on("uploaderror",function(t){return function(o,n,i){var a,r,l;if(n.inline&&"abort"!==i.statusText){if(i.responseText){try{l=e.parseJSON(i.responseText),r=l.msg}catch(d){o=d,r=t._t("uploadError")}alert(r)}if(a=n.img,a.hasClass("uploading")&&a.parent().length>0)return t.loadImage(a,t.defaultImage,function(){var e;return a.removeData("file"),a.removeClass("uploading").removeClass("loading"),e=a.data("mask"),e&&e.remove(),a.removeData("mask")}),t.popover.active&&(t.popover.srcEl.prop("disabled",!1),t.popover.srcEl.val(t.defaultImage)),t.editor.trigger("valuechanged"),t.editor.body.find("img.uploading").length<1?t.editor.uploader.trigger("uploadready",[n,l]):void 0}}}(this)))},o.prototype._status=function(){return this._disableStatus()},o.prototype.loadImage=function(t,o,n){var i,a,r;return r=function(e){return function(){var o,n;return o=t.offset(),n=e.editor.wrapper.offset(),i.css({top:o.top-n.top,left:o.left-n.left,width:t.width(),height:t.height()}).show()}}(this),t.addClass("loading"),i=t.data("mask"),i||(i=e('<div class="simditor-image-loading">\n  <div class="progress"></div>\n</div>').hide().appendTo(this.editor.wrapper),r(),t.data("mask",i),i.data("img",t)),a=new Image,a.onload=function(l){return function(){var d,s;if(t.hasClass("loading")||t.hasClass("uploading"))return s=a.width,d=a.height,t.attr({src:o,width:s,height:d,"data-image-size":s+","+d}).removeClass("loading"),t.hasClass("uploading")?(l.editor.util.reflow(l.editor.body),r()):(i.remove(),t.removeData("mask")),e.isFunction(n)?n(a):void 0}}(this),a.onerror=function(){return e.isFunction(n)&&n(!1),i.remove(),t.removeData("mask").removeClass("loading")},a.src=o},o.prototype.createImage=function(t){var o,n;return null==t&&(t="Image"),this.editor.inputManager.focused||this.editor.focus(),n=this.editor.selection.range(),n.deleteContents(),this.editor.selection.range(n),o=e("<img/>").attr("alt",t),n.insertNode(o[0]),this.editor.selection.setRangeAfter(o,n),this.editor.trigger("valuechanged"),o},o.prototype.command=function(e){var t;return t=this.createImage(),this.loadImage(t,e||this.defaultImage,function(e){return function(){return e.editor.trigger("valuechanged"),e.editor.util.reflow(t),t.click(),e.popover.one("popovershow",function(){return e.popover.srcEl.focus(),e.popover.srcEl[0].select()})}}(this))},o}(l),h=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.prototype.offset={top:6,left:-4},o.prototype.render=function(){var t;return t='<div class="link-settings">\n  <div class="settings-field">\n    <label>'+this._t("imageUrl")+'</label>\n    <input class="image-src" type="text" tabindex="1" />\n    <a class="btn-upload" href="javascript:;"\n      title="'+this._t("uploadImage")+'" tabindex="-1">\n      <span class="simditor-icon simditor-icon-upload"></span>\n    </a>\n  </div>\n  <div class=\'settings-field\'>\n    <label>'+this._t("imageAlt")+'</label>\n    <input class="image-alt" id="image-alt" type="text" tabindex="1" />\n  </div>\n  <div class="settings-field">\n    <label>'+this._t("imageSize")+'</label>\n    <input class="image-size" id="image-width" type="text" tabindex="2" />\n    <span class="times">×</span>\n    <input class="image-size" id="image-height" type="text" tabindex="3" />\n    <a class="btn-restore" href="javascript:;"\n      title="'+this._t("restoreImageSize")+'" tabindex="-1">\n      <span class="simditor-icon simditor-icon-undo"></span>\n    </a>\n  </div>\n</div>',this.el.addClass("image-popover").append(t),this.srcEl=this.el.find(".image-src"),this.widthEl=this.el.find("#image-width"),this.heightEl=this.el.find("#image-height"),this.altEl=this.el.find("#image-alt"),this.srcEl.on("keydown",function(e){return function(t){var o;if(13===t.which&&!e.target.hasClass("uploading"))return t.preventDefault(),o=document.createRange(),e.button.editor.selection.setRangeAfter(e.target,o),e.hide()}}(this)),this.srcEl.on("blur",function(e){return function(t){return e._loadImage(e.srcEl.val())}}(this)),this.el.find(".image-size").on("blur",function(t){return function(o){return t._resizeImg(e(o.currentTarget)),t.el.data("popover").refresh()}}(this)),this.el.find(".image-size").on("keyup",function(t){return function(o){var n;if(n=e(o.currentTarget),13!==o.which&&27!==o.which&&9!==o.which)return t._resizeImg(n,!0)}}(this)),this.el.find(".image-size").on("keydown",function(t){return function(o){var n,i,a;return i=e(o.currentTarget),13===o.which||27===o.which?(o.preventDefault(),13===o.which?t._resizeImg(i):t._restoreImg(),n=t.target,t.hide(),a=document.createRange(),t.button.editor.selection.setRangeAfter(n,a)):9===o.which?t.el.data("popover").refresh():void 0}}(this)),this.altEl.on("keydown",function(e){return function(t){var o;if(13===t.which)return t.preventDefault(),o=document.createRange(),e.button.editor.selection.setRangeAfter(e.target,o),e.hide()}}(this)),this.altEl.on("keyup",function(e){return function(t){if(13!==t.which&&27!==t.which&&9!==t.which)return e.alt=e.altEl.val(),e.target.attr("alt",e.alt)}}(this)),this.el.find(".btn-restore").on("click",function(e){return function(t){return e._restoreImg(),e.el.data("popover").refresh()}}(this)),this.editor.on("valuechanged",function(e){return function(t){if(e.active)return e.refresh()}}(this)),this._initUploader()},o.prototype._initUploader=function(){var t,o;return t=this.el.find(".btn-upload"),null==this.editor.uploader?void t.remove():(o=function(o){return function(){return o.input&&o.input.remove(),o.input=e("<input/>",{type:"file",title:o._t("uploadImage"),multiple:!0,accept:"image/*"}).appendTo(t)}}(this),o(),this.el.on("click mousedown","input[type=file]",function(e){return e.stopPropagation()}),this.el.on("change","input[type=file]",function(e){return function(t){return e.editor.uploader.upload(e.input,{inline:!0,img:e.target}),o()}}(this)))},o.prototype._resizeImg=function(t,o){var n,i,a;if(null==o&&(o=!1),i=1*t.val(),this.target&&(e.isNumeric(i)||i<0))return t.is(this.widthEl)?(a=i,n=this.height*i/this.width,this.heightEl.val(n)):(n=i,a=this.width*i/this.height,this.widthEl.val(a)),o?void 0:(this.target.attr({width:a,height:n}),this.editor.trigger("valuechanged"))},o.prototype._restoreImg=function(){var e,t;return t=(null!=(e=this.target.data("image-size"))?e.split(","):void 0)||[this.width,this.height],this.target.attr({width:1*t[0],height:1*t[1]}),this.widthEl.val(t[0]),this.heightEl.val(t[1]),this.editor.trigger("valuechanged")},o.prototype._loadImage=function(e,t){if(/^data:image/.test(e)&&!this.editor.uploader)return void(t&&t(!1));if(this.target.attr("src")!==e)return this.button.loadImage(this.target,e,function(o){return function(n){var i;if(n)return o.active&&(o.width=n.width,o.height=n.height,o.widthEl.val(o.width),o.heightEl.val(o.height)),/^data:image/.test(e)?(i=o.editor.util.dataURLtoBlob(e),i.name="Base64 Image.png",o.editor.uploader.upload(i,{inline:!0,img:o.target})):o.editor.trigger("valuechanged"),t?t(n):void 0}}(this))},o.prototype.show=function(){var e,t;return t=1<=arguments.length?q.call(arguments,0):[],o.__super__.show.apply(this,t),e=this.target,this.width=e.width(),this.height=e.height(),this.alt=e.attr("alt"),e.hasClass("uploading")?this.srcEl.val(this._t("uploading")).prop("disabled",!0):(this.srcEl.val(e.attr("src")).prop("disabled",!1),this.widthEl.val(this.width),this.heightEl.val(this.height),this.altEl.val(this.alt))},o}(O),E.Toolbar.addButton(g),v=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $(t,e),t.prototype.name="indent",t.prototype.icon="indent",t.prototype._init=function(){return this.title=this._t(this.name)+" (Tab)",t.__super__._init.call(this)},t.prototype._status=function(){},t.prototype.command=function(){return this.editor.indentation.indent()},t}(l),E.Toolbar.addButton(v),A=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $(t,e),t.prototype.name="outdent",t.prototype.icon="outdent",t.prototype._init=function(){return this.title=this._t(this.name)+" (Shift + Tab)",t.__super__._init.call(this)},t.prototype._status=function(){},t.prototype.command=function(){return this.editor.indentation.indent(!0)},t}(l),E.Toolbar.addButton(A),f=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.prototype.name="hr",o.prototype.icon="minus",o.prototype.htmlTag="hr",o.prototype._status=function(){},o.prototype.command=function(){var t,o,n,i;return i=this.editor.selection.rootNodes().first(),n=i.next(),n.length>0?this.editor.selection.save():o=e("<p/>").append(this.editor.util.phBr),t=e("<hr/>").insertAfter(i),o?(o.insertAfter(t),this.editor.selection.setRangeAtStartOf(o)):this.editor.selection.restore(),this.editor.trigger("valuechanged")},o}(l),E.Toolbar.addButton(f),P=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.prototype.name="table",o.prototype.icon="table",o.prototype.htmlTag="table",o.prototype.disableTag="pre, li, blockquote",o.prototype.menu=!0,o.prototype._init=function(){return o.__super__._init.call(this),e.merge(this.editor.formatter._allowedTags,["thead","th","tbody","tr","td","colgroup","col"]),e.extend(this.editor.formatter._allowedAttributes,{table:["class"],td:["rowspan","colspan","class"],col:["width"]}),e.extend(this.editor.formatter._allowedStyles,{td:["text-align"],th:["text-align"]}),this._initShortcuts(),this.editor.on("decorate",function(t){return function(o,n){return n.find("table").each(function(o,n){return t.decorate(e(n))})}}(this)),this.editor.on("undecorate",function(t){return function(o,n){return n.find("table").each(function(o,n){return t.undecorate(e(n))})}}(this)),this.editor.on("selectionchanged.table",function(e){return function(t){var o,n;if(e.editor.body.find(".simditor-table td, .simditor-table th").removeClass("active"),n=e.editor.selection.range())return o=e.editor.selection.containerNode(),n.collapsed&&o.is(".simditor-table")&&(o=e.editor.selection.rangeAtStartOf(o)?o.find("td:first"):o.find("td:last"),e.editor.selection.setRangeAtEndOf(o)),o.closest("td, th",e.editor.body).addClass("active")}}(this)),this.editor.on("blur.table",function(e){return function(t){return e.editor.body.find(".simditor-table td, .simditor-table th").removeClass("active")}}(this)),this.editor.keystroke.add("up","td",function(e){return function(t,o){return e._tdNav(o,"up"),!0}}(this)),this.editor.keystroke.add("up","th",function(e){return function(t,o){return e._tdNav(o,"up"),!0}}(this)),this.editor.keystroke.add("down","td",function(e){return function(t,o){return e._tdNav(o,"down"),!0}}(this)),this.editor.keystroke.add("down","th",function(e){return function(t,o){return e._tdNav(o,"down"),!0}}(this))},o.prototype._tdNav=function(e,t){var o,n,i,a,r,l,d;return null==t&&(t="up"),i="up"===t?"prev":"next",d="up"===t?["tbody","thead"]:["thead","tbody"],l=d[0],a=d[1],n=e.parent("tr"),o=this["_"+i+"Row"](n),o.length>0?(r=n.find("td, th").index(e),o.find("td, th").length-1<r&&(r=o.find("td th").length-1),this.editor.selection.setRangeAtEndOf(o.find("td, th").eq(r))):"up"==t?this.editor.selection.setRangeAtEndOf(n.parent().parent().parent().prev()):"down"!=t||this.editor.selection.setRangeAtEndOf(n.parent().parent().parent().next())},o.prototype._nextRow=function(e){var t;return t=e.next("tr"),t.length<1&&e.parent("thead").length>0&&(t=e.parent("thead").next("tbody").find("tr:first")),t},o.prototype._prevRow=function(e){var t;return t=e.prev("tr"),t.length<1&&e.parent("tbody").length>0&&(t=e.parent("tbody").prev("thead").find("tr")),t},o.prototype.initResize=function(t){var o,n,i;if(i=t.parent(".simditor-table"),o=t.find("colgroup"),o.length<1){o=e("<colgroup/>").prependTo(t);var a,r,l;r=0,t.find("tbody tr").each(function(t,o){a=e(o).find("td").length,a>r&&(l=e(o),r=a)}),l.find("td").each(function(t,n){var i;return i=e("<col/>").appendTo(o)}),this.refreshTableWidth(t)}return n=e("<div />",{"class":"simditor-resize-handle",
contenteditable:"false"}).appendTo(i),i.on("mousemove","td, th",function(t){var a,r,l,d,s,c;if(!i.hasClass("resizing"))return r=e(t.currentTarget),c=t.pageX-e(t.currentTarget).offset().left,c<5&&r.prev().length>0&&(r=r.prev()),r.next("td, th").length<1?void n.hide():(null!=(d=n.data("td"))?d.is(r):void 0)?void n.show():(l=r.parent().find("td, th").index(r),a=o.find("col").eq(l),(null!=(s=n.data("col"))?s.is(a):void 0)?void n.show():n.css("left",r.position().left+r.outerWidth()-5).data("td",r).data("col",a).show())}),i.on("mouseleave",function(e){return n.hide()}),i.on("mousedown",".simditor-resize-handle",function(t){var o,n,a,r,l,d,s,c,m,u,p;return o=e(t.currentTarget),a=o.data("td"),n=o.data("col"),l=a.next("td, th"),r=n.next("col"),u=t.pageX,c=1*a.outerWidth(),m=1*l.outerWidth(),s=parseFloat(o.css("left")),p=a.closest("table").width(),d=50,e(document).on("mousemove.simditor-resize-table",function(e){var t,i,a;return t=e.pageX-u,i=c+t,a=m-t,i<d?(i=d,t=d-c,a=m-t):a<d&&(a=d,t=m-d,i=c+t),n.attr("width",i/p*100+"%"),r.attr("width",a/p*100+"%"),o.css("left",s+t)}),e(document).one("mouseup.simditor-resize-table",function(t){return e(document).off(".simditor-resize-table"),i.removeClass("resizing")}),i.addClass("resizing"),!1})},o.prototype._initShortcuts=function(){return this.editor.hotkeys.add("ctrl+alt+up",function(e){return function(t){return e.editMenu.find(".menu-item[data-param=insertRowAbove]").click(),!1}}(this)),this.editor.hotkeys.add("ctrl+alt+down",function(e){return function(t){return e.editMenu.find(".menu-item[data-param=insertRowBelow]").click(),!1}}(this)),this.editor.hotkeys.add("ctrl+alt+left",function(e){return function(t){return e.editMenu.find(".menu-item[data-param=insertColLeft]").click(),!1}}(this)),this.editor.hotkeys.add("ctrl+alt+right",function(e){return function(t){return e.editMenu.find(".menu-item[data-param=insertColRight]").click(),!1}}(this))},o.prototype.decorate=function(e){return e.parent(".simditor-table").length>0&&this.undecorate(e),e.wrap('<div class="simditor-table"></div>'),this.initResize(e),e.parent()},o.prototype.undecorate=function(e){if(e.parent(".simditor-table").length>0)return e.parent().replaceWith(e)},o.prototype.renderMenu=function(){var t;return e('<div class="menu-create-table">\n</div>\n<div class="menu-edit-table">\n  <ul>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="deleteRow">\n        <span>'+this._t("deleteRow")+'</span>\n      </a>\n    </li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="insertRowAbove">\n        <span>'+this._t("insertRowAbove")+' ( Ctrl + Alt + ↑ )</span>\n      </a>\n    </li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="insertRowBelow">\n        <span>'+this._t("insertRowBelow")+' ( Ctrl + Alt + ↓ )</span>\n      </a>\n    </li>\n    <li><span class="separator"></span></li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="deleteCol">\n        <span>'+this._t("deleteColumn")+'</span>\n      </a>\n    </li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="insertColLeft">\n        <span>'+this._t("insertColumnLeft")+' ( Ctrl + Alt + ← )</span>\n      </a>\n    </li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="insertColRight">\n        <span>'+this._t("insertColumnRight")+' ( Ctrl + Alt + → )</span>\n      </a>\n    </li>\n    <li><span class="separator"></span></li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="paintRow">\n        <span>'+this._t("paintRow")+'</span>\n      </a>\n    </li>\n  <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="paintCell">\n        <span>'+this._t("paintCell")+'</span>\n      </a>\n    </li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="dissolveRow">\n        <span>'+this._t("dissolveRow")+'</span>\n      </a>\n    </li>\n  <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="dissolveCell">\n        <span>'+this._t("dissolveCell")+'</span>\n      </a>\n    </li>\n   <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="addBorder">\n        <span>'+this._t("addBorder")+'</span>\n      </a>\n    </li>\n   <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="removeBorder">\n        <span>'+this._t("removeBorder")+'</span>\n      </a>\n    </li>\n   <li><span class="separator"></span></li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="deleteTable">\n        <span>'+this._t("deleteTable")+"</span>\n      </a>\n    </li>\n  </ul>\n</div>").appendTo(this.menuWrapper),this.createMenu=this.menuWrapper.find(".menu-create-table"),this.editMenu=this.menuWrapper.find(".menu-edit-table"),t=this.createTable(6,6).appendTo(this.createMenu),this.createMenu.on("mouseenter","td, th",function(o){return function(n){var i,a,r,l;return o.createMenu.find("td, th").removeClass("selected"),i=e(n.currentTarget),a=i.parent(),l=a.find("td, th").index(i)+1,r=a.prevAll("tr").addBack(),a.parent().is("tbody")&&(r=r.add(t.find("thead tr"))),r.find("td:lt("+l+"), th:lt("+l+")").addClass("selected")}}(this)),this.createMenu.on("mouseleave",function(t){return e(t.currentTarget).find("td, th").removeClass("selected")}),this.createMenu.on("mousedown","td",function(o){return function(n){var i,a,r,l,d;if(o.wrapper.removeClass("menu-on"),o.editor.inputManager.focused)return a=e(n.currentTarget),r=a.parent(),l=r.find("td").index(a)+1,d=r.prevAll("tr").length+1,r.parent().is("tbody")&&(d+=1),t=o.createTable(d,l,!0),i=o.editor.selection.blockNodes().last(),o.editor.util.isEmptyNode(i)?i.replaceWith(t):i.after(t),o.decorate(t),o.editor.selection.setRangeAtStartOf(t.find("td:first")),o.editor.trigger("valuechanged"),!1}}(this))},o.prototype.createTable=function(t,o,n){var i,a,r,l,d,s,c,m,u,p;for(i=e("<table/>"),a=e("<tbody/>").appendTo(i),m=s=0,u=t;0<=u?s<u:s>u;m=0<=u?++s:--s)for(l=e("<tr/>"),l.appendTo(a),d=c=0,p=o;0<=p?c<p:c>p;d=0<=p?++c:--c)r=e("<td/>").appendTo(l),n&&r.append(this.editor.util.phBr);return i},o.prototype.refreshTableWidth=function(t){var o,n;n=t.width(),o=t.find("col");var i,a,r;return a=0,t.find("tbody tr").each(function(t,o){i=e(o).find("td").length,i>a&&(r=e(o),a=i)}),r.find("td").each(function(t,i){var a,r;return a=o.eq(t),r="function"==typeof e(i).outerWidth?100/o.length:0==e(i).outerWidth()?100/o.length:i.outerWidth()/n*100,a.attr("width",r+"%")})},o.prototype.setActive=function(e){return o.__super__.setActive.call(this,e),e?(this.createMenu.hide(),this.editMenu.show()):(this.createMenu.show(),this.editMenu.hide())},o.prototype._changeCellTag=function(t,o){return t.find("td, th").each(function(t,n){var i;return i=e(n),i.replaceWith("<"+o+">"+i.html()+"</"+o+">")})},o.prototype.deleteRow=function(e){var t,o,n;return o=e.parent("tr"),o.closest("table").find("tr").length<1?this.deleteTable(e):(t=this._nextRow(o),t.length>0||(t=this._prevRow(o)),n=o.find("td, th").index(e),o.parent().is("thead")&&(t.appendTo(o.parent()),this._changeCellTag(t,"th")),0==t.find("td, th").eq(n).length?this.deleteTable(e):(o.remove(),this.editor.selection.setRangeAtEndOf(t.find("td, th").eq(n))))},o.prototype.insertRow=function(t,o){var n,i,a,r,l,d,s,c,m;for(null==o&&(o="after"),a=t.parent("tr"),i=a.closest("table"),l=0,i.find("tr").each(function(t,o){return l=Math.max(l,e(o).find("td").length)}),s=a.find("td, th").index(t),n=e("<tr/>"),r="td","after"===o&&a.parent().is("thead")?a.parent().next("tbody").prepend(n):"before"===o&&a.parent().is("thead")?(a.before(n),a.parent().next("tbody").prepend(a),this._changeCellTag(a,"td"),r="th"):a[o](n),d=c=1,m=l;1<=m?c<=m:c>=m;d=1<=m?++c:--c)e("<"+r+"/>").append(this.editor.util.phBr).appendTo(n);return this.editor.selection.setRangeAtStartOf(n.find("td, th").eq(s))},o.prototype.deleteCol=function(t){var o,n,i,a,r,l;return i=t.parent("tr"),l=i.closest("table").find("tr").length<2,r=t.siblings("td, th").length<1,l&&r?this.deleteTable(t):1==i.find("td, th").length?this.deleteTable(t):(a=i.find("td, th").index(t),o=0!=t.next("td, th").length?t.next("td, th"):t,o.length>0||(o=i.prev("td, th")),n=i.closest("table"),n.find("col").eq(a).remove(),n.find("tr").each(function(t,o){return e(o).find("td, th").eq(a).remove()}),this.refreshTableWidth(n),this.editor.selection.setRangeAtEndOf(o))},o.prototype.insertCol=function(t,o){var n,i,a,r,l,d,s,c;return null==o&&(o="after"),l=t.parent("tr"),d=l.find("td, th").index(t),r=t.closest("table"),n=r.find("col").eq(d),r.find("tr").each(function(t){return function(n,i){var a,r;return r=e(i).parent().is("thead")?"th":"td",a=e("<"+r+"/>").append(t.editor.util.phBr),e(i).find("td, th").eq(d)[o](a)}}(this)),i=e("<col/>"),n[o](i),s=r.width(),c=Math.max(parseFloat(n.attr("width"))/2,50/s*100),n.attr("width",c+"%"),i.attr("width",c+"%"),this.refreshTableWidth(r),a="after"===o?t.next("td, th"):t.prev("td, th"),this.editor.selection.setRangeAtStartOf(a)},o.prototype.deleteTable=function(e){var t,o;if(o=e.closest(".simditor-table"),t=o.next("p"),t.html("<br>"),o.remove(),t.length>0)return this.editor.selection.setRangeAtStartOf(t)},o.prototype.paintCell=function(e){e.addClass("header")},o.prototype.paintRow=function(t){t.parent("tr").find("td").each(function(t,o){e(o).addClass("header"),e(o).css({"text-align":"center"})})},o.prototype.dissolveCell=function(e){e.removeClass("header")},o.prototype.dissolveRow=function(t){t.parent("tr").find("td").each(function(t,o){e(o).removeClass("header"),e(o).css({"text-align":"left"})})},o.prototype.addBorder=function(e){e.closest("table").removeClass("sin-bordes")},o.prototype.removeBorder=function(e){e.closest("table").addClass("sin-bordes")},o.prototype.command=function(e){var t;if(t=this.editor.selection.containerNode().closest("td, th"),t.length>0){if("deleteRow"===e)this.deleteRow(t);else if("insertRowAbove"===e)this.insertRow(t,"before");else if("insertRowBelow"===e)this.insertRow(t);else if("deleteCol"===e)this.deleteCol(t);else if("insertColLeft"===e)this.insertCol(t,"before");else if("insertColRight"===e)this.insertCol(t);else if("paintRow"===e)this.paintRow(t);else if("paintCell"===e)this.paintCell(t);else if("dissolveRow"===e)this.dissolveRow(t);else if("dissolveCell"===e)this.dissolveCell(t);else if("addBorder"===e)this.addBorder(t);else if("removeBorder"===e)this.removeBorder(t);else{if("deleteTable"!==e)return;this.deleteTable(t)}return this.editor.trigger("valuechanged")}},o}(l),E.Toolbar.addButton(P),T=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return $(o,t),o.prototype.name="strikethrough",o.prototype.icon="strikethrough",o.prototype.htmlTag="strike",o.prototype.disableTag="pre",o.prototype._activeStatus=function(){var e;return e=document.queryCommandState("strikethrough")===!0,this.setActive(e),this.active},o.prototype.command=function(){return document.execCommand("strikethrough"),this.editor.util.support.oninput||this.editor.trigger("valuechanged"),e(document).trigger("selectionchange")},o}(l),E.Toolbar.addButton(T),i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $(t,e),t.prototype.name="alignment",t.prototype.icon="align-left",t.prototype.htmlTag="p, h1, h2, h3, h4, td, th",t.prototype._init=function(){return this.menu=[{name:"left",text:this._t("alignLeft"),icon:"align-left",param:"left"},{name:"center",text:this._t("alignCenter"),icon:"align-center",param:"center"},{name:"right",text:this._t("alignRight"),icon:"align-right",param:"right"},{name:"justify",text:"Justify",icon:"align-justify",param:"justify"}],t.__super__._init.call(this)},t.prototype.setActive=function(e,o){return null==o&&(o="left"),"left"!==o&&"center"!==o&&"right"!==o&&"justify"!==o&&(o="left"),"left"===o?t.__super__.setActive.call(this,!1):t.__super__.setActive.call(this,e),this.el.removeClass("align-left align-center align-right align-justify"),e&&this.el.addClass("align-"+o),this.setIcon("align-"+o),this.menuEl.find(".menu-item").show().end().find(".menu-item-"+o).hide()},t.prototype._status=function(){return this.nodes=this.editor.selection.nodes().filter(this.htmlTag),this.nodes.length<1?(this.setDisabled(!0),this.setActive(!1)):(this.setDisabled(!1),this.setActive(!0,this.nodes.first().css("text-align")))},t.prototype.command=function(e){if("left"!==e&&"center"!==e&&"right"!==e&&"justify"!==e)throw new Error("simditor alignment button: invalid align "+e);return this.nodes.css({"text-align":"left"===e?"":e}),this.editor.trigger("valuechanged"),this.editor.inputManager.throttledSelectionChanged()},t}(l),E.Toolbar.addButton(i),E}),function(){"use strict";function e(){var e={user:{id:"",first_name:"",last_name:"",cargo:"",email:"",photo:""},userColor:"",visible:!1,menu:[],getMenu:function(){return this.menu},getUser:function(){return this.user},getVisible:function(){return this.visible},setMenu:function(e){this.menu=e},setUser:function(e){this.user=e},setVisible:function(e){this.visible=e}};return e}angular.module("app").factory("SideNavFactory",e)}(),function(){"use strict";function e(){function e(e,t,o,n,i,a,r,l){function d(){i.existUser()&&(o.setUser(i.getUser()),o.setMenu(i.getSession("menu"))),m.menu=o.getMenu(),i.setSession("menu",m.menu),m.active=n.path().replace("/",""),o.userColor=u[parseInt(Math.random()*u.length)],e(function(){angular.element("#sidenav").find(".md-button-href.active").parent().parent().prev().click()},1e3)}function s(t,o){var n;return function(){var i=m,a=Array.prototype.slice.call(arguments);e.cancel(n),n=e(function(){n=void 0,t.apply(i,a)},o||10)}}function c(e){return s(function(){t(e).toggle().then(function(){l.debug("toggle "+e+" is done")})},200)}var m=this,u=["info","success","danger","warning","primary"];m.user={},m.menu=[],m.toggleLeft=c("left"),m.send=function(e,t){if("undefined"==typeof t){if(i.exist("menu")){var o=a.getMenuOption(i.getSession("menu"),e);r.setParent(o[0]),r.setCurrent(o[1])}i.setSession("last_route",e),n.path(e)}m.reset()},m.reset=function(){angular.element("#toast-container-main").find("md-toast").fadeOut()},d(),m.getColor=function(){return o.userColor},m.getName=function(){var e=o.getUser();return e.first_name+" "+e.last_name},m.getEmail=function(){return o.getUser().email},m.getInitial=function(){var e=o.getUser().first_name;return e.length?e[0].toUpperCase():"?"},m.getMenu=function(){return o.getMenu()}}e.$inject=["$timeout","$mdSidenav","SideNavFactory","$location","Storage","Util","BreadcrumbFactory","$log"];var t={restrict:"E",templateUrl:"app/components/sidenav/sidenav.html",scope:{},controller:["$timeout","$mdSidenav","SideNavFactory","$location","Storage","Util","BreadcrumbFactory","$log",e],controllerAs:"vm",bindToController:!0,link:function(e,t){var o=t;o.on("click",".md-button-href",function(){o.find(".md-button-href").removeClass("active"),angular.element(this).addClass("active")}),o.on("click",".md-button-toggle",function(){if(o.hasClass("collapsed"))return!1;o.find(".sidenav-sublist").slideUp(300),o.find(".sidenav-list > li").removeClass("active");var e=angular.element(this);e.addClass("active"),e.next().is(":visible")||(e.next().slideToggle(300),e.closest("li").addClass("active"))})}};return t}angular.module("app").directive("acmeSidenav",e)}(),function(){"use strict";function e(e,t){function o(){if(n(),i(),a(),r.ngModel&&t.isDate(new Date(r.ngModel))){var e=new Date(r.ngModel);r.day=e.getDate(),r.month=e.getMonth()+1,r.year=e.getFullYear()}}function n(){for(var e=[],t=1;t<=31;t++)e.push({name:t,value:t});r.days=e}function i(){for(var e=[],o=0;o<12;o++)e.push({name:t.months[o],value:o+1});r.months=e}function a(){for(var e=parseInt(t.now("YYYY")),o=[],n=e-(r.yearIni||100),i=e-(r.yearEnd||0),a=i,l=n;a>=l;a--)o.push({name:a,value:a});r.years=o}var r=this;o(),e.$watch("vm.day",function(e,t){t=t,r.ngModel=new Date(r.year,r.month-1,e)}),e.$watch("vm.month",function(e,t){t=t,r.ngModel=new Date(r.year,e-1,r.day)}),e.$watch("vm.year",function(e,t){t=t,r.ngModel=new Date(e,r.month-1,r.day)}),e.$watch("vm.ngModel",function(e,o){if(e&&e!=o&&t.isDate(new Date(e))){var n=new Date(e);r.day=n.getDate(),r.month=n.getMonth()+1,r.year=n.getFullYear()}})}e.$inject=["$scope","Datetime"],angular.module("app").component("mdSelectDate",{templateUrl:"app/components/selectDate/selectDate.html",controller:["$scope","Datetime",e],controllerAs:"vm",bindings:{ngModel:"=",ngDisabled:"=",ngRequired:"=",ngLabel:"@",yearIni:"@",yearEnd:"@",year:"@",month:"@",day:"@"}})}(),function(){"use strict";function e(){function e(e){angular.isDefined(t.funcionAgregar)&&t.funcionAgregar(e)}var t=this;t.addItem=e,t.elementos=[{expanded:!0,titulo:"DOCUMENTOS",submenu:[{name:"Datos generales",tipo:"datosGenerales"},{name:"Encabezado",tipo:"encabezado"},{name:"Asunto",tipo:"inputt"},{name:"Documentos relacionados",tipo:"documentosRelacionados"},{name:"Documentos a anular",tipo:"documentosAnular"},{name:"Cc.:archivo",tipo:"ccArchivo"},{name:"Caja chica",tipo:"cajachica"},{name:"Certificacion comprometido",tipo:"certificacionComprometido"},{name:"Lista de contactos",tipo:"listaContactos"},{name:"Editor de texto",tipo:"editorTexto"}]},{expanded:!0,titulo:"TEXTOS",submenu:[{name:"Título",tipo:"titulo"},{name:"Subtítulo",tipo:"subtitulo"},{name:"Párrafo",tipo:"parrafo"},{name:"Lista",tipo:"lista"}]},{expanded:!0,titulo:"LAYOUTS",submenu:[{name:"Contenedor",tipo:"layout"},{name:"Espacio",tipo:"vacio"}]},{expanded:!0,titulo:"ELEMENTOS FORMULARIO",submenu:[{name:"Archivo",tipo:"archivo"},{name:"Campo de texto",tipo:"input"},{name:"Selección radio",tipo:"radio"},{name:"Selección simple",tipo:"select"},{name:"Selección multiple",tipo:"select_multiple"},{name:"Area de texto",tipo:"textarea"},{name:"Checkbox",tipo:"checkbox"},{name:"Calendario",tipo:"datepicker"},{name:"Deslizador",tipo:"slider"},{name:"Interruptor",tipo:"switch"},{name:"Palabras clave",tipo:"chips"}]}]}angular.module("app").component("paletteFormly",{templateUrl:"app/components/paletteFormly/paletteFormly.html",controller:e,controllerAs:"vm",bindings:{menu:"=",funcionAgregar:"=",options:"=",node:"@"}})}(),function(){"use strict";function e(){function e(e,t,o,n,i,a,r,l){var d=this;d.toggle=function(){angular.element("#sidenav-main").toggleClass("collapsed")},d.openMenu=function(e,t){e(t)},d.profile=function(){t.path("profile")},d.settings=function(){t.path("configuracion")},d.getFirstName=function(){return o.existUser()?o.getUser().first_name:n.getUser().first_name},d.getColor=function(){return n.userColor},d.getInitial=function(){var e=n.getUser().first_name;return e.length?e[0].toUpperCase():"?"},d.logout=function(){var t=r.localStorage.getItem("oauth2_state");t?a.get(l+"salir?codigo="+t).then(function(e){r.location.href=e.datos}):e.logout()},d.fullscreen=function(){angular.element("body").toggleClass("fullscreen"),i.fullscreen()}}e.$inject=["ExpirationTime","$location","Storage","SideNavFactory","Util","DataService","$window","restUrl"];var t={restrict:"E",templateUrl:"app/components/navbar/navbar.html",scope:{},controller:["ExpirationTime","$location","Storage","SideNavFactory","Util","DataService","$window","restUrl",e],controllerAs:"vm",bindToController:!0};return t}angular.module("app").directive("acmeNavbar",e)}(),function(){"use strict";function e(){}angular.module("app").component("menuCard",{templateUrl:"app/components/menuCard/menuCard.html",controller:[e],controllerAs:"vm",bindings:{items:"=",titleTable:"=",node:"@"}})}(),function(){"use strict";angular.module("app").constant("simditorConfig",{placeholder:"Ingrese contenido aquí...",toolbar:["underline","ols","|","indent","outdent","alignment","|","table","link","hr"],allowedTags:["br","u","p","li","div"],toolbarHidden:!0}).directive("ngSimditor",["$timeout","simditorConfig",function(e,t){return Simditor.locale="en-US",Simditor.i18n["en-US"]={bold:"Negrita",italic:"Itálica",underline:"Subrayar",color:"Color",indent:"Aumentar sangría",outdent:"Quitar sangría",alignment:"Alinear",table:"Tabla",link:"Enlace",hr:"Línea",deleteRow:"Eliminar fila",insertRowAbove:"Insertar fila arriba",insertRowBelow:"Insertar fila abajo",deleteColumn:"Eliminar columna",insertColumnLeft:"Insertar columna a la izquierda",insertColumnRight:"Insertar columna a la derecha",paintRow:"Pintar fila",paintCell:"Pintar celda",dissolveRow:"Despintar fila",dissolveCell:"Despintar celda",deleteTable:"Eliminar tabla",addBorder:"Agregar bordes",removeBorder:"Eliminar bordes",listDisc:"Circulos llenos",listCircle:"Circulos vacios",listSquare:"Cuadrados llenos",listDecimal:"1, 2, 3, 4...",listDecimal0:"01, 02, 03, 04...",listUpperRoman:"I, II, III, IV...",listLowerRoman:"i, ii, iii, iv...",listUpperAlpha:"A, B, C, D...",listLowerAlpha:"a, b, c, d...",listGreek:"Letras griegas",toggleList:"Añadir/quitar Lista"},{scope:{content:"=",disabled:"=",save:"@"},restrict:"E",template:'<textarea data-autosave="editor-content"></textarea>',replace:!0,link:function(o,n,i,a){var r=o,l=new Simditor(angular.extend({textarea:n},t));e(function(){l.body[0].contentEditable=!angular.isDefined(r.disabled)||!r.disabled,angular.isDefined(r.content)&&l.setValue(r.content)});var d=function(e){r.content=l.getValue()};l.on("valuechanged",d),l.on("focus",function(e){angular.element(n).prev().prev().prev().addClass("active-editor")}),l.on("blur",function(t){e(function(){angular.element(n).prev().prev().prev().removeClass("active-editor")},200)})}}}])}(),function(){"use strict";function e(e,t,o,n){function i(){l.ngModel?(l.model=l.ngModel,l.fecha_nacimiento=new Date(l.model.persona.fecha_nacimiento),l.complemento=l.model.persona.complemento,l.nro_documento=l.model.persona.nro_documento,l.tipo_documento=l.model.persona.tipo_documento):l.model={}}function a(){return"undefined"==typeof l.nro_documento||!o.isDate(l.fecha_nacimiento)}function r(){n.loading("Buscando datos en el SEGIP"),t.get(l.url+l.nro_documento+"?fecha_nacimiento="+o.format(l.fecha_nacimiento,"dd/MM/YYYY")).then(function(e){e?(l.model.persona=e,l.ngModel=l.model):(l.model.persona={},l.ngModel=l.model)})}var l=this;l.tipos=[{value:"CI",name:"Cedula de identidad"},{value:"PASAPORTE",name:"Pasaporte"}],l.tipo_documento="CI",l.search=r,l.isDisabled=a,i(),e.$watch("vm.tipo_documento",function(e){l.model.tipo_documento=e,l.ngModel=l.model}),e.$watch("vm.nro_documento",function(e){l.model.nro_documento=e,l.ngModel=l.model}),e.$watch("vm.complemento",function(e){l.model.complemento=e,l.ngModel=l.model}),e.$watch("vm.fecha_nacimiento",function(e){l.model.fecha_nacimiento=e,l.ngModel=l.model})}e.$inject=["$scope","DataService","Datetime","Message"],angular.module("app").component("documentoIdentidad",{templateUrl:"app/components/documentoIdentidad/documentoIdentidad.html",controller:["$scope","DataService","Datetime","Message",e],controllerAs:"vm",bindings:{ngModel:"=",ngDisabled:"=",onlyCi:"@",url:"="}})}(),function(){"use strict";function e(e,t,o,n,i,a,r,l,d){function s(){D()}function c(){angular.isFunction($.seleccionados)&&a(function(){$.seleccionados(C())})}function m(e){e._usuario_modificacion=$.usuario,t.put($.url+i.getId(e,$.fieldsData),angular.copy(e)),$.fields.indexOf("_usuario_modificacion")===-1&&delete e._usuario_modificacion}function u(){$.seleccionar?$.items.data.map(function(e){e.selected=!1}):$.items.data.map(function(e){e.selected=!0}),angular.isFunction($.seleccionados)&&$.seleccionados(C())}function p(e){e.stopPropagation()}function f(){$.fieldsData&&($.promise=k())}function g(e,t){var o=i.getId(t,$.fieldsData);o?w(e,!1,o):(t={},t._usuario_creacion=$.usuario,t._fecha_creacion=new Date,t._fecha_modificacion=new Date,x(e,!0,t))}function h(e){var n={};for(var a in e)n[a]=$.dataGrid[e[a]];t.save($.url,i.parseSave(n,$.fieldsData)).then(function(e){e&&o.show(e.tipoMensaje,e.mensaje)})}function v(){var e=$.dataGrid,t=0,n=$.headers.length,i=[],a={},r=[];for(var l in e){var d=l.split("_");d.shift(),d=d.join("_"),a[d]=e[l],t++,t%n==0&&(i.push(a),r.push(b(a)),a={})}Promise.all(r).then(function(e){for(var t in e)if(e[t]===!1)throw o.error("Se produjo un error al grabar todos los datos."),new Error("Error al grabar todos los datos");o.success("Se guardaron todos los datos")})}function b(e){return new Promise(function(o,n){t.save($.url,i.parseSave(e,$.fieldsData)).then(function(e){e?o(!0):n(!1)})["catch"](function(){n(!1)})})}function y(e,t){$.add(e,t)}function _(e,a){n.confirm("Se eliminará el registro de forma permanente, ¿Está seguro?.",function(){t["delete"]($.url,i.getId(a,$.fieldsData)).then(function(){o.success("El registro se eliminó correctamente."),$.getItems()})["catch"](function(){o.error()})},null,e)}function w(e,o,n){t.get($.url,n+($.include?"?include="+$.include:"")).then(function(t){t&&t.datos[i.getId(t,$.fieldsData,!0)]&&(t.datos._usuario_modificacion=$.usuario,t.datos._fecha_modificacion=new Date,x(e,o,i.filterItem(t.datos)))})}function x(e,a,r){var l={event:e,data:r,title:a?"Agregar":"Editar",add:a,fields:$.fieldsData,column:$.column||1,templateUrl:$.template||"app/components/crudTable/dialog.crudTable.html",done:function(e,n){"save"==e&&(delete r._fecha_creacion,delete r._fecha_modificacion,t.save($.url,i.parseSave(r,$.fieldsData)).then(function(e){e&&(o.show(e.tipoMensaje,"",null,0),n.hide(),$.getItems(),$.eventSave&&$.eventSave(e))}))}};$.dialogController&&(l.controller=$.dialogController),n.show(l)}function k(){if($.include&&($.query.include=$.include),$.queryExtra)for(var e in $.queryExtra)$.query[e]=$.queryExtra[e];if($.onlyFields){$.query.fields="";for(var o=0;o<$.fields.length;o++)$.query.fields+=$.fields[o]+",";$.query.fields=$.query.fields.substring(0,$.query.fields.length-1)}return $.estadoChecks&&($.busqueda_estado.length>0?$.query.estado=$.busqueda_estado.toString():delete $.query.estado),$.searchPro&&($.query.searchPro=1,$.query.tipoBus=$.tipo_busqueda,"todos"!=$.tipo_busqueda||"documento"!=$.tipo_busqueda?"campo"==$.tipo_busqueda&&($.query.campoSel=$.campo_seleccionado.name||$.headers[1].name):(delete $.query.tipoBus,delete $.query.campoSel,delete $.query.fFin),$.check_fechas?(l.isDate($.fecha_inicio)||($.fecha_inicio=new Date(l.subtractDays(new Date,365))),l.isDate($.fecha_final)||($.fecha_final=new Date),$.query.fIni=$.fecha_inicio,$.query.fFin=new Date(l.addDays($.fecha_final,1)),$.query.fIni.setHours(0),$.query.fFin.setHours(0)):(delete $.query.fIni,delete $.query.fFin)),t.list($.url,$.query).then(function(e){if(e){var t={},o=e.datos;t.count=o.total,t.results=o.resultado,t.data=O(o.resultado),$.items=t,angular.isFunction($.seleccionados)&&$.seleccionados(C())}})}function C(){var e=0,t=!1;return $.items.data.map(function(t){t.selected===!0&&e++}),e>0&&(t=!0),t}function D(){t.fields($.url).then(function(e){if(e){$.fieldsData=i.filterFields(e,$.fields),$.fieldsData=i.addPropertiesFormly($.fieldsData,$.formly);var o=["_usuario_creacion","_usuario_modificacion","_fecha_creacion","_fecha_modificacion"];for(var n in $.fieldsData){var a=$.fieldsData[n],r=o.indexOf(a.key);if(r!=-1)a.templateOptions.required=!1,a.templateOptions.disabled=!0,2==r&&(a.templateOptions.label="Fecha de creación"),3==r&&(a.templateOptions.label="Fecha de modificación");else if("ID"==a.templateOptions.label)a.templateOptions.required=!1;else if(0==a.key.indexOf("fid_")){var l={},d=a.templateOptions.options;for(var s in d)l[d[s].value]=d[s].name;a.templateOptions.fkeys=l}}A($.fieldsData,$.optionSelected),t.setFormly($.fieldsData),T($.fieldsData),$.editable&&($.types=i.getKeys($.fieldsData)),$.permission&&($.permissions=angular.merge($.permissions,$.permission)),$.condiciones&&($.query=angular.merge($.query,$.condiciones)),$.getItems()}})}function A(e,t){for(var o in e)if("select"==e[o].type){var n=i.searchField(t,e[o].key);n&&r.insert(e[o].templateOptions.options,0,{name:n.text||"Seleccione",value:n.value||""})}}function O(e){var t="undefined"!=typeof $.fields,o="undefined"!=typeof $.fks,n=[];for(var a in e){for(var r in e[a])if(t&&$.fields.indexOf(r)==-1)delete e[a][r];else if("undefined"==typeof $.editable)if("boolean"==typeof e[a][r])e[a][r]=e[a][r]?"check_circle_success":"check_circle_gray";else if(o&&$.fks.indexOf(r)!=-1)if("array"==i.toType(e[a][r])){var l=i.lengthOptions($.fieldsData,r);if(l>1&&l==e[a][r].length)e[a][r]="Todos";else{var d=[];e[a][r].map(function(e,t){d.push(i.getFkData($.fieldsData,r,e))}),e[a][r]=d.join(", ")}}else e[a][r]=i.getFkData($.fieldsData,r,e[a][r]);else"string"==typeof e[a][r]&&!/[a-zA-Z]+/g.test(e[a][r])&&/^-?[0-9.]+\-?[0-9]+\-?[0-9]*$/g.test(e[a][r])&&10==e[a][r].length?e[a][r]=i.formatDate(e[a][r]):"array"==i.toType(e[a][r])?e[a][r]=e[a][r][0]:"string"==typeof e[a][r]&&!/[a-zA-Z]+/g.test(e[a][r])&&/^(?:(?:([01]?\d|2[0-3]):)?([0-5]?\d):)?([0-5]?\d)$/g.test(e[a][r])&&8==e[a][r].length&&(e[a][r]=E(e[a][r]));n.push(I(e[a],$.fieldsData,a))}return n}function I(e,t,o){if("undefined"==typeof t||0==t.length)return e;var n={};for(var i in t){var a=t[i].key;if("undefined"!=typeof e[a])if($.editable){if("string"==typeof e[a]&&!/[a-zA-Z]+/g.test(e[a])&&/^-?[0-9.]+\-?[0-9]+\-?[0-9]*$/g.test(e[a])&&10==e[a].length){var r=e[a].split("-");$.dataGrid[o+"_"+a]=new Date(r[0],r[1]-1,r[2])}else $.dataGrid[o+"_"+a]=e[a];n[a]=o+"_"+a}else n[a]=e[a]}return n}function E(e){return e=e.split(":"),[e[0],e[1]].join(":")}function T(e){var t=[],o="undefined"==typeof $.order;for(var n in e)t.push({name:e[n].key,title:e[n].templateOptions.label,order:o||$.order&&$.order.indexOf(e[n].key)!=-1});$.headers=t}function P(e,o){t.pdf($.url+"print/"+i.getId(o,$.fieldsData)+"/").then(function(t){n.show({event:e,data:t.url,title:"Impresión",templateUrl:"app/components/crudTable/dialog.pdf.html",controller:["$scope","$mdDialog","data","title",S]})})}function S(e,t,o,n){var i=e;i.title=n,i.data=o,i.hide=t.hide,i.cancel=t.cancel}function F(){$.filter.show=!0,a(function(){angular.element("#crud-table-input").focus()},300)}function R(){$.filter.show=!1,$.query.filter="",$.tipo_busqueda="todos",$.filter.form.$dirty&&$.filter.form.$setPristine()}function N(e,t,o){o(e,i.getId(t,$.fieldsData))}var M,$=this,U=10;$.headers=[],$.items=null,$.item=null,$.tipo_busqueda="todos",$.campo_seleccionado={},$.busqueda_estado=[],$.prevent=p,$.estadoModificado=m,$.add=g,$.edit=y,$["delete"]=_,$.print=P,$.save=h,$.saveAll=v,$.removeFilter=R,$.showFilter=F,$.getItems=f,$.buttonEvent=N,$.dataGrid={},$.seleccionar=!1,$.seleccionarTodos=u,$.seleccionando=c,$.sw_cite=["/documentos","/impresion","/aprobacion","/en_curso","/firmar"].indexOf(d.current.url)!==-1,$.permissions={create:!0,read:!0,update:!0,"delete":!0,print:!1,filter:!0},$.limitOptions=[U,25,50],$.options={rowSelection:!1,multiSelect:!1,autoSelect:!0,decapitate:!1,largeEditDialog:!0,boundaryLinks:!0,limitSelect:!0,pageSelect:!1},$.query={order:$.fields.indexOf("_fecha_modificacion")?"-_fecha_modificacion":"",limit:U,page:1,filter:""},$.filter={options:{debounce:500}},s(),e.$watch("vm.query.filter",function(e,t){t||(M=$.query.page),e!==t&&($.query.page=1),e||($.query.page=M),$.getItems()})}angular.module("app").component("crudTable",{templateUrl:"app/components/crudTable/crudTable.html",controller:["$scope","DataService","Message","Modal","Util","$timeout","ArrayUtil","Datetime","$state",e],controllerAs:"vm",bindings:{url:"=",fields:"=",fks:"=",titleTable:"=",template:"=",permission:"=",column:"=",formly:"=",editable:"=",eventSave:"=",dialogController:"=",order:"=",optionSelected:"=",condiciones:"=",buttons:"=",buttonAgregar:"=",idShow:"=",include:"=",queryExtra:"=",usuario:"=",informacionBienes:"=",estadoSw:"=",onlyFields:"=",searchPro:"=",estadoChecks:"=",estadoOpciones:"=",items:"=?",habilitarSeleccion:"=",node:"@",
seleccionados:"="}})}(),function(){"use strict";angular.module("app").constant("charColors",{bo:{rojo:"rgba(211, 47, 47, 0.7)",azul:"rgba(48, 79, 254, 0.7)",amarillo:"rgba(255, 171, 0, 0.7)",celeste:"rgba(0, 184, 212, 0.7)",lila:"rgba(123, 31, 162, 0.7)",naranja:"rgba(230, 74, 25, 0.7)",verde:"rgba(104, 159, 56, 0.7)"},bg:{rojo:"rgba(211,47,47, 0.1)",azul:"rgba(48, 79, 254, 0.1)",amarillo:"rgba(255, 171, 0, 0.1)",celeste:"rgba(0, 184, 212, 0.1)",lila:"rgba(123, 31, 162, 0.1)",naranja:"rgba(230, 74, 25, 0.1)",verde:"rgba(104, 159, 56, 0.1)"}}).directive("chartGraph",["$timeout","$window",function(e,t){var o={line:{scales:{yAxes:[{ticks:{beginAtZero:!0}}],xAxes:[{ticks:{autoSkip:!1}}]},legend:{labels:{boxWidth:15}},tooltips:{mode:"x-axis"}},bar:{legend:{labels:{boxWidth:15}},scales:{yAxes:[{ticks:{beginAtZero:!0}}],xAxes:[{ticks:{autoSkip:!1}}]}}};return{scope:{ancho:"=",alto:"=",tipo:"=",datos:"=",actualizar:"=",reiniciar:"=",opciones:"="},restrict:"E",link:function(n,i,a,r){e(function(){function e(){return angular.isDefined(t.orientation)}function a(){e()&&(n.ancho>750&&(n.ancho=750),n.alto>320&&(n.alto=320)),i.parent().css("width",n.ancho||400),i.parent().css("height",n.alto||250),i.html('<div class="chart-graph" style="width:'+(n.ancho-25||400)+"px;height:"+(n.alto-25||250)+'px;"><canvas></canvas></div>'),r=i.children("div").children("canvas"),r.attr("width",n.ancho-20||400),r.attr("height",n.alto-20||250),l=new Chart(r,{type:n.tipo||"line",data:n.datos,options:n.opciones||o[n.tipo||"line"]})}var r,l;i.wrap("<div></div>"),i.parent().css("overflow","auto"),a(),n.$watch("actualizar",function(){angular.isDefined(n.actualizar)&&l.update()}),n.$watch("reiniciar",function(){angular.isDefined(n.reiniciar)&&a()})})}}}])}(),angular.module("app").directive("ngMostrarThumb",["$window",function(e){var t={support:!(!e.FileReader||!e.CanvasRenderingContext2D),extension:function(e){return e.slice(e.lastIndexOf(".")+1)}};return{restrict:"A",template:"<canvas/>",link:function(e,o,n){var i=e.$eval(n.ngMostrarThumb),a=o.find("canvas"),r=["jpg","png","jpeg","bmp","gif"],l=t.extension(i.ruta);if(r.indexOf(l)>-1){var d=new Image;d.src=i.ruta,t.extension(i.ruta),d.onload=function(){var e=i.width||this.width/this.height*i.height,t=i.height||this.height/this.width*i.width;a.attr({width:e,height:t}),a[0].getContext("2d").drawImage(d,0,0,e,t)}}}}}]),angular.module("app").directive("ngThumb",["$window",function(e){var t={support:!(!e.FileReader||!e.CanvasRenderingContext2D),isFile:function(t){return angular.isObject(t)&&t instanceof e.File},isImage:function(e){var t="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return"|jpg|png|jpeg|bmp|gif|".indexOf(t)!==-1}};return{restrict:"A",template:"<canvas/>",link:function(e,o,n){function i(e){var t=new Image;t.onload=a,t.src=e.target.result}function a(){var e=r.width||this.width/this.height*r.height,t=r.height||this.height/this.width*r.width;l.attr({width:e,height:t}),l[0].getContext("2d").drawImage(this,0,0,e,t)}if(t.support){var r=e.$eval(n.ngThumb);if(t.isFile(r.file)&&t.isImage(r.file)){var l=o.find("canvas"),d=new FileReader;d.onload=i,d.readAsDataURL(r.file)}}}}}]),function(){"use strict";function e(e,t,o,n,i,a){var r=this;r.uploader=new i({url:""}),r.restUrl=t,r.fotosEliminar=[],null==r.archivos?r.archivos=r.uploader.queue:r.uploader.queue=r.archivos,r.formatos=r.permitidos.replace(/(\||,)/g," ").toUpperCase();var l=r.uploader;l.filters.push({name:"fileFilter",fn:function(e){var t="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return r.permitidos.indexOf(t)!==-1}}),r.clickUp=function(){angular.element("#input_seleccionar").trigger("click")},r.esImagen=function(e){var t="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return"|jpg|png|jpeg|bmp|gif|".indexOf(t)!==-1},r.eliminar=function(e){a.confirm("Se eliminará la foto, ¿Está seguro?.",function(){var t=r.mostrar.indexOf(e);t>-1&&(r.mostrar.splice(t,1),r.fotosEliminar.push(e))})}}angular.module("app").component("cargadorArchivos",{templateUrl:"app/components/cargadorArchivos/cargadorArchivos.html",controller:["$scope","restUrl","DataService","Storage","FileUploader","Modal",e],controllerAs:"vm",bindings:{archivos:"=",permitidos:"=",anchoMiniatura:"=",altoMiniatura:"=",soloImagenes:"=",maxArchivosPermitidos:"=",mostrar:"="}})}(),function(){"use strict";function e(){var e={parent:"",current:"",setParent:function(e){this.parent=e},setCurrent:function(e){this.current=e},getParent:function(){return this.parent},getCurrent:function(){return this.current}};return e}angular.module("app").factory("BreadcrumbFactory",e)}(),function(){"use strict";function e(e,t,o,n){function i(){if(e.exist("menu")){var i=n.getMenuOption(e.getSession("menu"),t.path().replace("/",""));o.setParent(i[0]),o.setCurrent(i[1])}}function a(){return o.getParent()}function r(){return o.getCurrent()}var l=this;l.getParent=a,l.getCurrent=r,i()}e.$inject=["Storage","$location","BreadcrumbFactory","Util"],angular.module("app").component("breadcrumb",{templateUrl:"app/components/breadcrumb/breadcrumb.html",controller:["Storage","$location","BreadcrumbFactory","Util",e],bindings:{}})}(),function(){"use strict";function e(e,t,o,n,i){function a(t,n){return e.get(t+(n?"?"+o.serialize(n):"")).then(function(e){return e.data?e.data:void i.warn("list->respuesta sin datos")})["catch"](function(e){y(e)})}function r(t,o){return e[o.id?"put":"post"](t+(o.id?o.id+"/":""),o).then(function(e){return e.data?e.data:void i.warn("save->respuesta sin datos")})["catch"](function(e){y(e)})}function l(t,o){return e.put(t+(o.id?o.id+"/":""),o).then(function(e){return e.data?e.data:void i.warn("put->respuesta sin datos")})["catch"](function(e){y(e)})}function d(t,o){var n={headers:{"Content-Type":void 0}};return e.put(t,o,n).then(function(e){return e.data?e.data:void i.warn("putWithFiles->respuesta sin datos")})["catch"](function(e){y(e)})}function s(t,o){return e.patch(t+(o.id?o.id+"/":""),o).then(function(e){return e.data?e.data:void i.warn("patch->respuesta sin datos")})["catch"](function(e){y(e)})}function c(t,o){return e.post(t,o).then(function(e){return e.data?e.data:void i.warn("post->respuesta sin datos")})["catch"](function(e){y(e)})}function m(t,o){var n={headers:{"Content-Type":void 0}};return e.post(t,o,n).then(function(e){return e.data?e.data:void i.warn("postWithFiles->respuesta sin datos")})["catch"](function(e){y(e)})}function u(t,o){return e["delete"](t+o+"/").then(function(e){return e.data?e.data:void i.warn("remove->respuesta sin datos")})["catch"](function(e){y(e)})}function p(t,o){return e.get(t+(o?o+"/":"")).then(function(e){return e.data?e.data:void i.warn("get->respuesta sin datos")})["catch"](function(e){y(e)})}function f(t){return e({method:"OPTIONS",url:t}).then(function(e){return e.data?e.data:void i.warn("fields->respuesta sin datos")})["catch"](function(e){y(e)})}function g(t,o){return e.post(t,o||{},{responseType:"arraybuffer"}).then(function(e){if(e.data){var t=new Blob([e.data],{type:"application/pdf"}),o=URL.createObjectURL(t);return{data:e.data,url:n.trustAsResourceUrl(o)}}return null})["catch"](function(e){t.indexOf("/documento/firmar")==-1&&y(e)})}function h(t,o,n){return e.get(t,o||{}).then(function(e){if(e.data){var t=new Blob([e.data],{type:n||"text/plain"},(!1));t=t}return!0})["catch"](function(e){y(e)})}function v(e){_=e}function b(e){var t=[];if(e){if(e.detail||e.error||e.non_field_errors)return e.detail||e.error||e.non_field_errors;for(var n in e){var i=n;_&&_.filter(function(e){e.key==n&&(i=e.templateOptions.label)}),t.push("<strong>"+i+":</strong> "+("array"==o.toType(e[n])?e[n].join(", "):e[n]))}return t.join("<br>")}return null}function y(e){if(500===e.status)if(e.data.indexOf("SequelizeUniqueConstraintError:")!==-1){var o=e.data.substring(e.data.indexOf("«"),e.data.indexOf("»")),n=o.substring(1,o.lastIndexOf("_"));t.error("El campo "+n+" ya existe, y no debe duplicarse.")}else if(e.data.indexOf("SequelizeValidationError:")!==-1){var i=e.data.split(" ").splice(3).join(" "),a=i.indexOf("<br>");i=i.substring(0,a),t.error(i)}else t.error(x);else 404===e.status?t.error(k):403===e.status?t.error(C):401===e.status?t.error(D):412===e.status?t.show(e.data.tipoMensaje||"ERROR",e.data.mensaje||"No se pudo obtener una respuesta"):t.error(b(e.data)||w)}var _=null,w="No se pudo establecer conexión con el servidor.",x="Se produjo un error en el servidor, inténtelo más tarde.",k="No existe el recurso solicitado.",C="No tiene los permisos necesarios.",D="No se pudo realizar la operación.",A={list:a,all:a,"delete":u,save:r,get:p,put:l,patch:s,post:c,postWithFiles:m,putWithFiles:d,fields:f,option:f,pdf:g,file:h,setFormly:v};return A}e.$inject=["$http","Message","Util","$sce","$log"],angular.module("app").service("DataService",["$http","Message","Util","$sce","$log",e])}(),function(){"use strict";angular.module("app").filter("datetime",["Datetime",function(e){return function(t,o){if(o){if("literal"==o)return e.dateLiteral(t);if("year"==o)return e.now("YYYY");if("timeLiteral"==o)return e.timeLiteral(t);if("HH:mm"==o)return t=t.split(":"),[t[0],t[1]].join(":")}return t}}])}(),function(){"use strict";function e(e){e.theme("default").primaryPalette("teal").accentPalette("orange")}e.$inject=["$mdThemingProvider"],angular.module("app").config(e)}(),function(){"use strict";function e(e,t,o,n,i,a,r,l,d,s,c){function m(e){var t=n;for(var o in t)if(0==e.indexOf("/"+t[o])||0==e.indexOf("/"+t[o]+"/"))return!0;return!1}function u(){angular.element("body").removeClass("fullscreen")}l.init(),s.init(d);var p=angular.element("#container-main"),f=i.document;p.on("click",".btn-collapsed",function(){var e=angular.element(this);e.parent().parent().next().slideToggle(),e.toggleClass("rotate")});var g=angular.element("#toast-container-main");if(g.on("click",".md-toast-close",function(){angular.element(this).parent().parent().parent().fadeOut()}),e.existUser())c.init();else{var h=t.path();m(h)||(h.length&&e.setSession("path",h.replace("/","")),"verificar"!==e.getSession("path")&&t.path("login"))}angular.element(i.document).on("keyup",function(e){27==e.keyCode&&u()}),f.addEventListener("mozfullscreenchange",function(){f.mozFullScreen||u()},!1)}e.$inject=["Storage","$location","$log","PageNoLogin","$window","Datetime","$mdDialog","RouteValidator","formlyConfig","MyFormlyConfig","ExpirationTime"],angular.module("app").run(e)}(),function(){"use strict";function e(e,t){e.state("home",{url:"/",templateUrl:"app/modules/dashboard/main.html",controller:"MainController",controllerAs:"main"}).state("usuario",{url:"/usuario",templateUrl:"app/modules/admin/usuarios/modules.admin.usuarios.html",controller:"UsuariosController",controllerAs:"usuarios"}).state("menu",{url:"/menu",templateUrl:"app/modules/seguridad/menu/modules.seguridad.menu.html",controller:"MenuController",controllerAs:"menu"}).state("rol",{url:"/rol",templateUrl:"app/modules/seguridad/rol/modules.seguridad.rol.html",controller:"RolController",controllerAs:"rol"}).state("login",{url:"/login",templateUrl:"app/modules/admin/login/modules.admin.login.html",controller:"LoginController",controllerAs:"login"}).state("elegir",{url:"/elegir",templateUrl:"app/modules/admin/virtual/virtual.html",controller:"VirtualController",controllerAs:"virtual"}).state("verificar",{url:"/verificar",templateUrl:"app/modules/verificacion/modules.verificar.html",controller:"VerificarController",controllerAs:"verificar"}).state("profile",{url:"/profile",templateUrl:"app/modules/admin/profile/modules.admin.profile.html",controller:"ProfileController",controllerAs:"profile"}).state("contactos",{url:"/contactos",templateUrl:"app/modules/plantillasFormly/contactos/modules.plantillasFormly.contactos.html",controller:"ContactosController",controllerAs:"contactos"}).state("plantillas",{url:"/plantillas",templateUrl:"app/modules/plantillasFormly/plantillas/modules.plantillasFormly.plantillas.html",controller:"PlantillasController",controllerAs:"plantillas"}).state("plantilla",{url:"/plantilla/:idPlantilla",templateUrl:"app/modules/plantillasFormly/plantillas/plantilla/modules.plantillasFormly.plantillas.plantilla.html",controller:"PlantillaController",controllerAs:"plantilla"}).state("documentos",{url:"/documentos",templateUrl:"app/modules/plantillasFormly/documentos/modules.plantillasFormly.documentos.html",controller:"DocumentosController",controllerAs:"documentos"}).state("documento",{url:"/documento/:idDocumento",templateUrl:"app/modules/plantillasFormly/documentos/documento/modules.plantillasFormly.documentos.documento.html",controller:"DocumentoController",controllerAs:"documento"}).state("aprobacion",{url:"/aprobacion",templateUrl:"app/modules/plantillasFormly/aprobacion/modules.plantillasFormly.aprobacion.html",controller:"AprobacionController",controllerAs:"aprobacion"}).state("impresion",{url:"/impresion",templateUrl:"app/modules/plantillasFormly/impresion/modules.plantillasFormly.impresion.html",controller:"ImpresionController",controllerAs:"impresion"}).state("progreso",{url:"/progreso",templateUrl:"app/modules/plantillasFormly/progreso/modules.plantillasFormly.progreso.html",controller:"ProgresoController",controllerAs:"progreso"}).state("enCurso",{url:"/en_curso",templateUrl:"app/modules/plantillasFormly/enCurso/modules.plantillasFormly.enCurso.html",controller:"EnCursoController",controllerAs:"enCurso"}).state("firmar",{url:"/firmar",templateUrl:"app/modules/plantillasFormly/firmar/modules.plantillasFormly.firmar.html",controller:"FirmarController",controllerAs:"firmar"}).state("vistaPdf",{url:"/vista_pdf",templateUrl:"app/modules/plantillasFormly/vistaPdf/modules.plantillasFormly.vistaPdf.html",controller:"VistaPdfController",controllerAs:"vistaPdf"}).state("monitoreo",{url:"/monitoreo",templateUrl:"app/modules/plantillasFormly/monitoreo/modules.plantillasFormly.monitoreo.html",controller:"MonitoreoController",controllerAs:"monitoreo"}),t.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app").config(e)}(),function(){"use strict";angular.module("app").constant("moment",moment).constant("appName","app").constant("PageNoLogin",["login"]).constant("authUrl","https://intranet.agetic.gob.bo/plantillas/ws/autenticar").constant("restUrl","https://intranet.agetic.gob.bo/plantillas/ws/api/v1/").constant("backUrl","https://intranet.agetic.gob.bo/plantillas/ws")}(),function(){"use strict";function e(e,t,o,n,i,a,r,l,d){e.debugEnabled(!0),d.disableWarnings(),t.loginUrl=n,t.tokenName="token",t.tokenPrefix=i,t.storageType="sessionStorage",a.formatDate=function(e){return e?r(e).format("DD/MM/YYYY"):null},a.parseDate=function(e){var t=r(e,"DD/MM/YYYY",!0);return t.isValid()?t.toDate():new Date(NaN)},l.interceptors.push("HttpInterceptor"),l.defaults.headers.get||(l.defaults.headers.get={}),l.defaults.headers.get["Cache-Control"]="private, no-cache, no-store, must-revalidate",l.defaults.headers.get.Pragma="no-cache",l.defaults.headers.get["If-Modified-Since"]="Mon, 26 Jul 1997 05:00:00 GMT"}e.$inject=["$logProvider","$authProvider","restUrl","authUrl","appName","$mdDateLocaleProvider","moment","$httpProvider","$mdAriaProvider"],angular.module("app").config(e)}(),angular.module("app").run(["$templateCache",function(e){e.put("app/components/breadcrumb/breadcrumb.html","<ol class=breadcrumb><li ng-if=$ctrl.getParent()>{{$ctrl.getParent()}}</li><li class=active ng-if=$ctrl.getCurrent()>{{$ctrl.getCurrent()}}</li></ol>"),e.put("app/components/cargadorArchivos/cargadorArchivos.html",'<div layout=row layout-wrap><div flex><div ng-click=vm.clickUp() ng-show=vm.uploader.isHTML5 ng-if="vm.maxArchivosPermitidos > vm.uploader.queue.length"><div class=caja-up nv-file-drop="" nv-file-over="" nv-file-select="" uploader=vm.uploader><div layout=row layout-wrap layout-align="center center"><div flex=30 style=text-align:right><md-icon class=md-display-1>attach_file</md-icon></div><div flex=70 class=md-body-1>Suelte los archivos aquí o haga click para añadir archivos<br>Solo se permiten archivos en formato: {{vm.formatos}}</div></div></div></div><input id=input_seleccionar type=file nv-file-select="" uploader=vm.uploader multiple ng-show=!vm.uploader.isHTML5><table ng-if=!vm.soloImagenes><tbody><!-- TODO: Habilitar para los archivos antiguos (edicion y eliminacion)\n    <tr ng-show=\'item.mostrar\' ng-repeat="item in vm.noticia_adjuntos">\n                    <td><a ng-href=\'{{item.link}}\'> {{item.nombre_publico}}</a></td>\n                    <td>\n                        <md-button class="md-icon-button md-accent md-very-small" aria-label="Eliminar" ng-click="vm.eliminarAdjuntos(item)">\n                            <md-icon class="md-very-small">delete</md-icon>\n                        </md-button>\n                    </td>\n                </tr>--><tr ng-repeat="item in vm.uploader.queue"><td>{{item.file.name}}</td><td><md-button class="md-icon-button md-accent md-very-small" aria-label=Eliminar ng-click=item.remove()><md-icon class=md-very-small>delete</md-icon></md-button></td></tr></tbody></table><span ng-repeat="item in vm.uploader.queue" class=imagen ng-if=vm.soloImagenes>{{item.file.name}}<div ng-show="vm.uploader.isHTML5 && vm.esImagen(item.file)" ng-thumb="{ file: item._file, height: vm.altoMiniatura, width: vm.anchoMiniatura }"></div><md-button class="md-icon-button md-accent md-very-small" aria-label=Eliminar ng-click=item.remove()><md-icon class=md-very-small>delete</md-icon></md-button></span><span ng-repeat="item in vm.mostrar" class=imagen>{{item.nombre_publico}}<div ng-mostrar-thumb="{ ruta:\'{{vm.restUrl}}{{item.ruta}}\',height: vm.altoMiniatura, width: vm.anchoMiniatura }"></div><md-button class="md-icon-button md-accent md-very-small" aria-label=Eliminar ng-click=vm.eliminar(item)><md-icon class=md-very-small>delete</md-icon></md-button></span><md-progress-linear md-mode=determinate value={{vm.uploader.progress}}></md-progress-linear></div></div>'),e.put("app/components/crudTable/crudTable.html",'<md-card><md-toolbar class="md-table-toolbar md-default" ng-show=vm.filter.show><div class=md-toolbar-tools><md-icon>search</md-icon><form flex name=vm.filter.form ng-class="{\'flex-xs-70\': vm.searchPro, \'flex-sm-70\': vm.searchPro}"><div layout=column layout-gt-sm=row ng-class="{\'crud-table-searchpro\': vm.searchPro}"><input type=text ng-class="{\'crud-table-filter\': !vm.searchPro, \'flex\': vm.searchPro}" id=crud-table-input ng-model=vm.query.filter ng-model-options=vm.filter.options placeholder="Escriba su búsqueda aquí..." ng-if="!vm.searchPro || vm.tipo_busqueda==\'campo\' || vm.tipo_busqueda==\'todos\' || vm.tipo_busqueda==\'documento\'"><divider></divider><div class=date-pick ng-if=vm.check_fechas><md-datepicker ng-change=vm.getItems() ng-model=vm.fecha_inicio></md-datepicker><md-tooltip>Fecha inicio</md-tooltip></div><div class=date-pick ng-if=vm.check_fechas><md-datepicker ng-change=vm.getItems() ng-model=vm.fecha_final></md-datepicker><md-tooltip>Fecha fin</md-tooltip></div><div ng-if=vm.searchPro><md-checkbox ng-model=vm.check_fechas ng-change=vm.getItems() aria-label=check_fechas></md-checkbox><md-tooltip>Fechas</md-tooltip></div><divider></divider><label for=select-tipo ng-if=vm.searchPro>Tipo de búsqueda:</label><md-input-container flex class="select-tipo flex-gt-sm-10" ng-if=vm.searchPro><md-select ng-model=vm.tipo_busqueda ng-change="vm.query.filter=\'\'; vm.getItems();"><md-option class=opt-select-tipo ng-value="\'todos\'">Todos</md-option><md-option class=opt-select-tipo ng-value="\'campo\'">Campo</md-option><md-option class=opt-select-tipo ng-value="\'documento\'">En documento</md-option></md-select></md-input-container><md-input-container flex class="select-tipo flex-gt-sm-10" ng-if="vm.tipo_busqueda==\'campo\'" ng-init="vm.campo_seleccionado=vm.headers[1]"><md-select ng-model=vm.campo_seleccionado ng-change=vm.getItems()><md-option class=opt-select-tipo ng-value=h ng-repeat="h in vm.headers" ng-if="h.title!=\'ID\'">{{(h.title==\'Nombre\')? h.title+\'(CITE)\': h.title }}</md-option></md-select><md-tooltip>{{vm.campo_seleccionado.title}}</md-tooltip></md-input-container></div></form><md-button class=md-icon-button ng-click=vm.removeFilter()><md-icon>close</md-icon></md-button></div></md-toolbar><md-toolbar class=md-table-toolbar ng-show=!vm.filter.show><div class=md-toolbar-tools><md-icon>grid_on</md-icon><span>{{vm.titleTable}}</span><div flex></div><md-button class=md-icon-button ng-click=vm.showFilter() ng-if=vm.permissions.filter><md-tooltip>Filtrar registros</md-tooltip><md-icon>filter_list</md-icon></md-button><md-button class=md-icon-button ng-click=vm.saveAll() ng-if=vm.editable><md-tooltip>Guardar todo</md-tooltip><md-icon>playlist_add_check</md-icon></md-button><md-button class=md-icon-button ng-click=vm.getItems() id=btn-refresh-crudtable><md-tooltip>Actualizar</md-tooltip><md-icon>refresh</md-icon></md-button><md-button class="md-icon-button btn-collapsed"><md-tooltip>Ocultar/Ver</md-tooltip><md-icon>keyboard_arrow_down</md-icon></md-button></div></md-toolbar><md-card-content ng-class="{\'crud-table-content\': vm.searchPro && vm.filter.show}"><div class=btn-container ng-if=vm.permissions.create><md-button class="md-fab md-primary" ng-click=vm.add($event) aria-label=Add><md-tooltip>Agregar nuevo registro</md-tooltip><md-icon>add</md-icon></md-button></div><div class=btn-container ng-if="!vm.permissions.create && vm.buttonAgregar"><md-button class="md-fab md-primary" ng-click=vm.buttonAgregar.onclick($event) aria-label=Add><md-tooltip>{{ vm.buttonAgregar.tooltip || \'Agregar nuevo registro\' }}</md-tooltip><md-icon>{{vm.buttonAgregar.icon}}</md-icon></md-button></div><md-table-container><table md-table ng-model=selected md-progress=promise ng-if=vm.permissions.read><thead md-head md-order=vm.query.order md-on-reorder=vm.getItems><tr md-row><th md-cell ng-if=vm.habilitarSeleccion><md-checkbox class=md-primary ng-model=vm.seleccionar ng-click=vm.seleccionarTodos()></md-checkbox></th><th md-column ng-if="vm.permissions.update || vm.permissions.update || vm.permissions.print || vm.buttons.length > 0 || vm.permissions.delete">Acciones</th><th ng-repeat="header in vm.headers" md-column ng-if="$index > 0 && !vm.idShow[header.name]" md-order-by="{{header.order ? header.name : \'\'}}"><span ng-if=!vm.estadoChecks>{{header.title}}</span> <span ng-if=vm.estadoChecks><span ng-if="header.name==\'estado\'"><md-input-container class="select-sin-mb select-crud-estado" ng-click=vm.prevent($event)><label>{{header.title}}</label><md-select ng-model=vm.busqueda_estado multiple ng-change=vm.getItems()><md-option ng-value=op.v ng-repeat="op in vm.estadoOpciones">{{op.t}}</md-option></md-select></md-input-container></span><span ng-if="header.name!=\'estado\'">{{header.title}}</span></span></th><th md-column ng-if=vm.informacionBienes>Bienes</th></tr></thead><tbody md-body class="{{vm.editable ? \'formly-table-editable\' : \'\'}}"><tr md-row md-select=item ng-repeat="item in vm.items.data" class=seleccionado><td md-cell ng-if=vm.habilitarSeleccion><md-checkbox class=md-primary ng-model=item.selected ng-click=vm.seleccionando(item)></md-checkbox></td><td md-cell class="text-center md-table-options" ng-if="vm.permissions.update || vm.permissions.update || vm.permissions.print || vm.buttons.length > 0 || vm.permissions.delete"><md-button class="md-icon-button boton-extra" aria-label=Editar ng-click="vm.edit($event, item)" ng-if="vm.permissions.update && !vm.editable"><md-tooltip>Editar</md-tooltip><md-icon>mode_edit</md-icon></md-button><md-button class="md-icon-button boton-extra" aria-label=Editar ng-click=vm.save(item) ng-if="vm.permissions.update && vm.editable"><md-tooltip>Guardar registro</md-tooltip><md-icon>check</md-icon></md-button><md-button class="md-icon-button boton-extra" aria-label=Editar ng-click="vm.print($event, item)" ng-if=vm.permissions.print><md-tooltip>Imprimir</md-tooltip><md-icon>print</md-icon></md-button><span ng-repeat="button in vm.buttons"><span ng-if=button.multiple><span ng-if=button.opcion[item[button.key_item]]><md-button class=md-icon-button ng-class="button.opcion[item[button.key_item]].xclass || \'boton-extra\'" aria-label=button.opcion[item[button.key_item]].tooltip ng-click="vm.buttonEvent($event, item, button.opcion[item[button.key_item]].onclick)"><md-tooltip>{{button.opcion[item[button.key_item]].tooltip}}</md-tooltip><md-icon>{{button.opcion[item[button.key_item]].icon}}</md-icon></md-button></span><span ng-if="button.opcion[\'DEFAULT\'] && !button.opcion[item[button.key_item]]"><md-button class=md-icon-button ng-class="button.opcion[item[button.key_item]].xclass || \'boton-extra\'" aria-label="button.opcion[\'DEFAULT\'].tooltip" ng-click="vm.buttonEvent($event, item, button.opcion[\'DEFAULT\'].onclick)"><md-tooltip ng-if="button.opcion[\'DEFAULT\'].tooltip">{{button.opcion[\'DEFAULT\'].tooltip}}</md-tooltip><md-icon>{{button.opcion[\'DEFAULT\'].icon}}</md-icon></md-button></span></span><md-button class="md-icon-button boton-extra" aria-label=button.tooltip ng-click="vm.buttonEvent($event, item, button.onclick)" ng-if="!button.multiple && !button.tipo"><md-tooltip>{{button.tooltip}}</md-tooltip><md-icon>{{button.icon}}</md-icon></md-button><md-button class="md-icon-button (item[button.campo]==true?\'icono-activo\':\'\')" aria-label=button.tooltip ng-click="vm.buttonEvent($event, item, button.onclick)" ng-if="!button.multiple && button.tipo==\'icon\'"><md-icon>{{button.icon}}</md-icon></md-button>{{item[button.campo]}}</span><md-button class="md-icon-button boton-eliminar" aria-label=Eliminar ng-click="vm.delete($event, item)" ng-if="vm.permissions.delete && !item.id_documento"><md-tooltip>Eliminar</md-tooltip><md-icon>delete</md-icon></md-button><md-button class="md-icon-button boton-eliminar" aria-label=Eliminar ng-click="vm.delete($event, item)" ng-if="vm.permissions.delete && item.id_documento && (item.estado==\'NUEVO\' || item.estado==\'RECHAZADO\')"><md-tooltip>Eliminar</md-tooltip><md-icon>delete</md-icon></md-button><md-button class=md-icon-button aria-label="" ng-if="vm.permissions.delete && item.id_documento && (item.estado!=\'NUEVO\' && item.estado!=\'RECHAZADO\')"><md-icon></md-icon></md-button></td><td md-cell ng-repeat="(key, value) in item" ng-if="$index > 0 && !vm.idShow[key] && key !== \'selected\' "><div ng-if=vm.editable><div ng-switch on=vm.types[key].type><div ng-switch-when=input><md-input-container><label>{{vm.types[key].templateOptions.label}}</label><input ng-model=vm.dataGrid[value]></md-input-container></div><div ng-switch-when=textarea><md-input-container><label>{{vm.types[key].templateOptions.label}}</label><textarea ng-model=vm.dataGrid[value]></textarea></md-input-container></div><div ng-switch-when=select><md-input-container><md-select ng-model=vm.dataGrid[value]><label>{{vm.types[key].templateOptions.label}}</label><md-option ng-repeat="option in vm.types[key].templateOptions.options" value={{option.value}}>{{option.name}}</md-option></md-select></md-input-container></div><div ng-switch-when=checkbox><md-checkbox ng-model=vm.dataGrid[value] aria-label={{vm.types[key].templateOptions.label}}></md-checkbox></div><div ng-switch-when=datepicker><md-datepicker ng-model=vm.dataGrid[value] md-placeholder={{vm.types[key].templateOptions.label}}></md-datepicker></div><div ng-switch-default>{{value}}</div></div></div><div ng-if=!vm.editable><div ng-switch on=value><div ng-switch-when=check_circle_success><md-icon class=bg-success>check_circle</md-icon></div><div ng-switch-when=check_circle_gray><md-icon class=bg-gray>check_circle</md-icon></div><div ng-switch-default><div ng-if="key.indexOf(\'fecha\') != -1">{{value|date:\'dd/MM/yyyy\'}}</div><div ng-if="key.indexOf(\'fid_\') == 0">{{vm.fieldsData[vm.fields.indexOf(key)].templateOptions.fkeys[value] || value}}</div><div ng-if="key.indexOf(\'fecha\') == -1 && key.indexOf(\'fid_\') != 0"><div ng-if="!vm.estadoSw || (vm.estadoSw && key!=\'estado\' && key!=\'impreso\' )"><span ng-if="vm.sw_cite && key==\'nombre\'">{{value}}<tooltip doc=item></tooltip></span><div ng-if="!vm.sw_cite || key!=\'nombre\'">{{value}}</div></div><div ng-if="vm.estadoSw && key==\'estado\'"><md-switch ng-true-value="\'ACTIVO\'" ng-false-value="\'INACTIVO\'" ng-model=item.estado aria-label=estado ng-change=vm.estadoModificado(item)></md-switch></div><div ng-if="vm.estadoSw && key==\'impreso\'"><md-switch ng-true-value="\'SI\'" ng-false-value="\'NO\'" ng-model=item.impreso aria-label=impreso ng-change=vm.estadoModificado(item)></md-switch></div></div></div></div></div></td></tr></tbody></table></md-table-container><md-table-pagination md-label="{page: \'Página:\', rowsPerPage: \'Filas por página:\', of: \'de\'}" md-limit=vm.query.limit md-limit-options=vm.limitOptions md-page=vm.query.page md-total={{vm.items.count}} md-page-select=vm.options.pageSelect md-boundary-links=vm.options.boundaryLinks md-on-paginate=vm.getItems></md-table-pagination></md-card-content></md-card>'),e.put("app/components/crudTable/dialog.crudTable.html",'<md-dialog aria-label=Agregar/Editar ng-cloak class="formly-dialog formly-column-{{column}}"><form ng-submit="answer(\'save\')" id=data-form name=form novalidate><md-toolbar><div class=md-toolbar-tools><h2>{{title}}</h2><span flex></span><md-button class="md-icon-button md-toast-button-close" ng-click=cancel()><md-icon aria-label="Close dialog">close</md-icon></md-button></div></md-toolbar><md-dialog-content><div class=md-dialog-content><md-content layout-gt-sm=column layout-padding class=formly><formly-form model=data fields=fields options=options form=form></formly-form></md-content></div></md-dialog-content><md-dialog-actions layout=row><span flex></span><md-button class=md-raised ng-click=cancel()><md-icon>cancel</md-icon>Cancelar</md-button><md-button type=submit class="md-raised md-primary" ng-disabled=form.$invalid><md-icon>check</md-icon>Guardar</md-button></md-dialog-actions></form></md-dialog>'),e.put("app/components/crudTable/dialog.pdf.html",'<md-dialog aria-label=Imprimir ng-cloak class="formly-dialog formly-column-{{column}}" style="width: 960px"><md-toolbar><div class=md-toolbar-tools><h2>{{title}}</h2><span flex></span><md-button class="md-icon-button md-toast-button-close" ng-click=cancel()><md-icon aria-label="Close dialog">close</md-icon></md-button></div></md-toolbar><md-dialog-content><iframe src={{data}} style="width:100%; height:600px; border: none" id=iframe-pdf-crud></iframe></md-dialog-content></md-dialog>'),e.put("app/components/documentoIdentidad/documentoIdentidad.html",'<div class=doc-identidad><md-input-container class=doc-identidad-tipo ng-if="vm.onlyCi === undefined || !vm.onlyCi"><label>Tipo de documento</label><md-select ng-model=vm.tipo_documento required ng-disabled=vm.ngDisabled><md-option ng-repeat="option in vm.tipos" value={{option.value}}>{{option.name}}</md-option></md-select></md-input-container><div class="alert alert-info doc-identidad-cedula-info" ng-class="{display: vm.onlyCi}" ng-if="vm.tipo_documento == \'CI\' && !vm.ngDisabled"><md-icon>info_outline</md-icon>Ingrese número de documento, complemento y fecha de nacimiento para su búsqueda.</div><div layout=row class=form-horizontal><md-input-container><label>Número de documento</label><input ng-model=vm.nro_documento required ng-disabled=vm.ngDisabled></md-input-container><md-input-container ng-if="vm.tipo_documento == \'CI\'"><label>Complemento</label><input ng-model=vm.complemento ng-disabled=vm.ngDisabled></md-input-container><md-select-date ng-model=vm.fecha_nacimiento ng-label="Fecha de nacimiento:" ng-disabled=vm.ngDisabled ng-required=true></md-select-date><md-button class="md-raised md-primary doc-identidad-button" ng-click=vm.search() ng-disabled=vm.isDisabled() ng-if="!vm.ngDisabled && vm.tipo_documento == \'CI\'"><md-icon>search</md-icon>Buscar</md-button></div></div>'),e.put("app/components/menuCard/menuCard.html",'<md-card><md-toolbar class=md-table-toolbar ng-show=true><div class=md-toolbar-tools><md-icon>grid_on</md-icon><span>{{vm.titleTable}}</span><div flex></div><md-button class="md-icon-button btn-collapsed"><md-tooltip>Ocultar/Ver</md-tooltip><md-icon>keyboard_arrow_down</md-icon></md-button></div></md-toolbar><md-card-content><div class=menuCard-list ng-repeat="item in vm.items"><h4 class=menuCard-titulo ng-click="item.show=!item.show">{{item.name}}</h4><div class=menuCard-animated-hide ng-if=!item.show layout=row layout-padding layout-fill layout-wrap ng-cloak><a class=menuCard-link ng-repeat="xitem in item.data" ng-href=#/{{xitem.url}}><md-whiteframe md-whiteframe={{height}} layout layout-align="center center" ng-init="height = 1" ng-mouseenter="height = 3" ng-mouseleave="height = 1"><div layout=column layout-align="center center"><md-icon class=md-display-3>{{xitem.icono || \'details\'}}</md-icon><span class=text-center>{{xitem.name}}</span></div></md-whiteframe></a></div></div></md-card-content></md-card>'),
e.put("app/components/navbar/navbar.html",'<md-toolbar><div class=md-toolbar-tools><md-button class=md-icon-button ng-click=vm.toggle() aria-label="Menu collapse" show-gt-md><md-tooltip>Mostrar/ocultar menú</md-tooltip><i class=md-icon>menu</i></md-button><!-- <span class="navbar-user-name" flex>{{vm.getFirstName()}}</span> --> <span flex></span><md-button class="margin-0 md-icon-button btn-fullscreen" ng-click=vm.fullscreen() aria-label=Fullscreen show-gt-md id=btn-fullscreen><md-icon>fullscreen</md-icon><md-icon>fullscreen_exit</md-icon><md-tooltip class=tooltip-fullscreen><span class=exit>Salir </span>Pantalla completa</md-tooltip></md-button><md-menu><!-- <md-button aria-label="interactions menu" class="md-icon-button navbar-user-icon bg-{{vm.getColor()}}-user" ng-click="vm.openMenu($mdOpenMenu, $event)">\n                {{vm.getInitial()}}\n            </md-button> --><md-button class="margin-0 md-icon-button" aria-label=Más ng-click="vm.openMenu($mdOpenMenu, $event)"><md-tooltip>Más opciones</md-tooltip><md-icon>more_vert</md-icon></md-button><md-menu-content class=navbar-options><md-menu-item><md-button ng-click=vm.profile()><i class=md-icon>account_circle</i> Mi cuenta</md-button></md-menu-item><!-- <md-menu-item>\n                    <md-button ng-click="vm.settings()">\n                        <i class="md-icon">settings applications</i> Configuraciones\n                    </md-button>\n                </md-menu-item> --><!-- <md-menu-divider></md-menu-divider> --><md-menu-item style="width: 200px"><md-button ng-click=vm.logout()><i class=md-icon>power_setting_new</i> Salir</md-button></md-menu-item></md-menu-content></md-menu><md-button class=md-icon-button aria-label=More style="display: none"><i class=md-icon>more_vert</i></md-button></div></md-toolbar>'),e.put("app/components/paletteFormly/paletteFormly.html",'<div class=component-palette-formly md-autofocus><div class=md-accordion ng-repeat="data in vm.elementos"><div class=header-accordion ng-click="data.expanded = !data.expanded"><div layout layout-align="center center"><span class=titulo>{{ data.titulo }}</span> <span flex=""></span> <span ng-class="{expandCollapse:true, active: data.expanded}"></span><!-- <md-icon ng-class="{expandCollapse2:true, active: data.expanded}">keyboard_arrow_down</md-icon> --></div></div><div class=body-accordion ng-class="{dataContent:true, activeContent:data.expanded}"><md-list-item class=submenu ng-repeat="item in data.submenu"><div class=md-list-item-text layout=column flex dnd-draggable=item.tipo dnd-effect-allowed=move><div>{{ item.name }}</div></div><md-button class="md-fab md-primary md-mini button-mini" ng-click=vm.addItem(item.tipo)><md-tooltip>Añadir {{ item.name }}</md-tooltip><md-icon>add</md-icon></md-button></md-list-item></div></div></div>'),e.put("app/components/selectDate/selectDate.html",'<div layout=row class=select-date><label>{{vm.ngLabel}}:</label><md-input-container><label>Día</label><md-select ng-model=vm.day ng-required=vm.ngRequired ng-disabled=vm.ngDisabled><md-option ng-repeat="option in vm.days" value={{option.value}}>{{option.name}}</md-option></md-select></md-input-container><md-input-container><label>Mes</label><md-select ng-model=vm.month ng-required=vm.ngRequired ng-disabled=vm.ngDisabled><md-option ng-repeat="option in vm.months" value={{option.value}}>{{option.name}}</md-option></md-select></md-input-container><md-input-container><label>Año</label><md-select ng-model=vm.year ng-required=vm.ngRequired ng-disabled=vm.ngDisabled><md-option ng-repeat="option in vm.years" value={{option.value}}>{{option.name}}</md-option></md-select></md-input-container></div>'),e.put("app/components/sidenav/sidenav.html",'<md-sidenav class=md-sidenav-left md-component-id=left md-is-locked-open="$mdMedia(\'gt-sm\')" id=sidenav><md-toolbar class=sidenav-title><h1 class=md-toolbar-tools><i class="md-icon sidenav-title-icon">description</i> <span class=sidenav-title-text>PLANTILLAS</span></h1></md-toolbar><div class=sidenav-user><figure><img class=sidenav-user-photo src="" alt="Image User" hidden><div class="sidenav-user-default bg-{{vm.getColor()}}-user"><!-- <i class="md-icon">account_circle</i> --> {{vm.getInitial()}}</div></figure><h2 class=sidenav-user-name>{{vm.getName()}}<md-tooltip md-direction=bottom>{{vm.getName()}}</md-tooltip></h2><div class=sidenav-user-item>{{vm.getEmail()}}</div></div><ul class=sidenav-list><li ng-repeat="opcion in vm.getMenu()"><md-button type=button class="md-button-toggle md-button md-button md-ink-ripple" ng-click="vm.send(opcion.url, opcion.submenu.length)"><i class="md-icon md-icon-option">{{opcion.icon}}</i> <span class=md-icon-text>{{opcion.label}}</span> <i class="md-icon md-icon-arrow-down" ng-if=opcion.submenu.length>keyboard_arrow_down</i></md-button><ul class=sidenav-sublist ng-if=opcion.submenu.length><li ng-repeat="sub in opcion.submenu"><md-button type=button class="md-button md-button md-ink-ripple md-button-href {{vm.active == sub.url ? \'active\' : \'\'}}" data-url={{sub.url}} ng-click=vm.send(sub.url)><span class=md-icon-text>{{sub.label}}</span></md-button></li></ul></li></ul></md-sidenav><md-button ng-click=vm.toggleLeft() class=md-icon-button hide-gt-md><i class=md-icon>menu</i></md-button>'),e.put("app/components/visorImagenes/visorImagenes.dialog.html",'<md-dialog aria-label=Ver/Editar ng-cloak class="formly-dialog formly-column-{{column}}"><md-dialog-content class=md-dialog-content><div flex layout=row><img ng-src={{data}}></div></md-dialog-content></md-dialog>'),e.put("app/components/visorImagenes/visorImagenes.html",'<div layout=row layout-wrap ng-if="vm.imagenes.length > 0"><div flex><h4>{{vm.titulo}}</h4><span ng-repeat="item in vm.imagenes"><div class=contenedor-miniatura><img src={{vm.restUrl}}{{item.ruta}} alt={{item.nombre_publico}} class=miniatura style="width:{{vm.ancho}}px; height:{{vm.alto}}px" ng-click="vm.mostrarImagen(vm.restUrl + item.ruta)"><br><md-button class="md-icon-button md-accent md-very-small" aria-label=Eliminar ng-click=vm.eliminarImagen(item) ng-if=vm.eliminar><md-icon class=md-very-small>delete</md-icon></md-button></div></span></div></div>'),e.put("app/factories/Documento/dialog.progreso.html",'<md-dialog aria-label="Ver progreso" class="formly-dialog formly-column-{{column}} dialog-progreso" style="max-width: 800px; width: 100%"><md-toolbar><div class=md-toolbar-tools><h2><md-icon>dashboard</md-icon>Progreso del documento</h2><span flex></span><md-button class=md-icon-button aria-label=Cerrar ng-click=cerrar()><md-tooltip>Cerrar</md-tooltip><md-icon aria-label="Close dialog">close</md-icon></md-button></div></md-toolbar><md-dialog-content class=md-dialog-content><timeline><timeline-event ng-repeat="it in data.datos"><timeline-badge class=bg-{{it.bg_color}}><md-icon aria-label=description>{{it.icon}}</md-icon><md-tooltip>{{it.acc}}</md-tooltip></timeline-badge><timeline-panel ng-if="it.accion !== \'ANULADO\'"><timeline-heading><h3>{{it.nombres}}</h3></timeline-heading><p><span class=ap-text-{{it.bg_color}}>{{it.acc}} {{it.acc==\'Sin respuesta\'? \'desde \': \'\'}} </span>el {{it.fecha_mos}} a las {{it.hora_mos}}</p><p ng-if="it.accion==\'DERIVADO\' && it.derivado">A: <strong>{{it.derivado.nombres}}</strong></p><p ng-if=it.tipo_doc>Documento: {{it.tipo_doc}}</p><p ng-if=it.cite>CITE: <span class=ap-cursor-pointer ng-click=verDocumento(it.id_documento)>{{it.cite}}</span></p><p ng-if="it.accion==\'RECHAZADO\'">{{it.observacion}}</p><p ng-if="it.accion==\'DERIVADO\'">Proveído: {{it.observacion}}</p></timeline-panel><timeline-panel ng-if="it.accion==\'ANULADO\'"><timeline-heading><h3>Anulación</h3></timeline-heading><p><strong>Del documento: </strong><span class="ap-text-{{it.bg_color}} ap-cursor-pointer" ng-click=verDocumento(it.id_documento)>{{it.cite}}.</span><br><strong>Mediante: </strong><span class=ap-cursor-pointer ng-click=verDocumento(it.id_documento)>{{it.observacion}}.</span><br>El cual fue solicitado por <strong>{{it.nombres}}</strong> y aprobado por <strong>{{it.aprobado.nombres}}</strong> el {{it.fecha_mos}} a las {{it.hora_mos}}</p></timeline-panel></timeline-event></timeline></md-dialog-content><md-dialog-actions><div flex></div><md-button class=md-raised ng-click=cerrar()><md-icon>check</md-icon><span>Cerrar</span></md-button></md-dialog-actions></md-dialog>'),e.put("app/factories/Documento/dialogPDF.html",'<md-dialog aria-label="Documento PDF" class="formly-dialog formly-column-{{column}} dialog-pdf" style="max-width: 800px; width: 100%"><md-toolbar><div class=md-toolbar-tools><h2><md-icon>picture_as_pdf</md-icon>Vista previa</h2><span flex></span><md-button class=md-icon-button aria-label="Ver pdf" ng-click=verPdf() ng-show=data.flag_html><md-tooltip>Ver PDF</md-tooltip><md-icon aria-label="Close dialog">picture_as_pdf</md-icon></md-button><md-button class=md-icon-button aria-label="Ver html" ng-click=verHtml() ng-show=!data.flag_html><md-tooltip>Ver html</md-tooltip><md-icon aria-label="Close dialog">code</md-icon></md-button><md-button class=md-icon-button aria-label=Cerrar ng-click=cerrar()><md-tooltip>Cerrar</md-tooltip><md-icon aria-label="Close dialog">close</md-icon></md-button></div></md-toolbar><div class=dialog-firmas><div ng-repeat="(indice, item) in data.firmas" class="{{(item.firmo===true?\'firmado\':\'sin-firma\')}}">{{item.firmante}}<md-tooltip>{{item.firmante}}</md-tooltip></div></div><md-dialog-content class=md-dialog-content><div ng-show=data.flag_html bind-html-compile=data.html></div><iframe class=iframe-pdf src={{data.pdf}} style="width:100%; height:600px; border: none" ng-if="data.show_pdf && !data.flag_html" allowfullscreen></iframe><div id=canvasContainer ng-show=!data.flag_html></div></md-dialog-content><md-dialog-actions><span flex></span><md-button class=md-raised ng-click=cerrar()><md-icon>cancel</md-icon>Cancelar</md-button></md-dialog-actions></md-dialog>'),e.put("app/factories/Loading/Loading.html","<md-dialog class=\"{{data.tipo || 'loader-info' }} loader-padre\"><md-dialog-content><center><div class=loader-contenendor><div class=loader></div></div><p></p><h2>{{data.mensaje}}</h2><p></p></center></md-dialog-content></md-dialog>"),e.put("app/factories/Messages/layout.toast.html",'<md-toast class=md-toast-{{type}}><div class=md-toast-title><md-icon class=md-toast-icon>{{icon}}</md-icon>{{title}}<md-button class="md-toast-close md-icon-button" aria-label=Close><md-icon class=md-icon>close</md-icon></md-button></div><div class=md-toast-message ng-bind-html=message></div></md-toast>'),e.put("app/factories/Panel/defaultPanelTemplate.html","<md-card><md-content>Usando panel factory, introduzca su template</md-content></md-card>"),e.put("app/modules/dashboard/main.html","<div class=container>Mi dashboard</div>"),e.put("app/modules/firmador/modules.firmador.html",'<md-dialog aria-label="Firmar Digitalmente" class="formly-dialog formly-column-{{column}}" style="max-width: 700px; width: 100%"><md-toolbar><div class=md-toolbar-tools><h2><md-icon>done_all</md-icon>Firmar documentos</h2><span flex></span></div></md-toolbar><md-dialog-content class=md-dialog-content><div ng-if="iniciado === false">Iniciando...</div><div ng-if="iniciado === true"><div ng-if=!demofi_ejecutandose class="alert alert-warning" ng-if="data.certificado === null"><i class="fa fa-warning"></i> <span>Demofi no se está ejecutando en su equipo o no tiene agregado el certificado de seguridad en su navegador.</span><br><ul><li><span>Visite el siguiente enlace para su instalación y/o configuración. Presione <a target=_blank href=http://test.local.agetic.gob.bo/firmador/#>aquí</a>.<help message=helpMessage.demofi_no_instalado></help></span></li><li><span>Para verificar que el certificado de seguridad de Demofi se encuentra instalado. Presione <a href=# ng-click=verificarServidor()>aquí</a>.</span></li></ul></div></div><div layout=row ng-if=demofi_ejecutandose><div flex layout-align="center center"><img class=img-certificado src=assets/images/certificate.png></div><div flex=66><br><div ng-if=demofi_ejecutandose><span style="font-weight: bold">TOKEN: </span><span ng-if="tokens.length == 0">Conecte su token </span><span ng-repeat="tokenName in tokens"><span>{{tokenName}}</span></span></div><br><div flex-gt-xs><md-input-container><label>PIN:</label><md-icon>vpn_key</md-icon><input name=pin type=password class=form-control ng-model=formData.pin ng-disabled=!token_conectado required></md-input-container><md-button class="md-raised md-primary" ng-click=autenticar() ng-disabled="!token_conectado || autenticado "><md-icon>verified_user</md-icon>Autenticar</md-button></div><md-input-container><label>CERTIFICADO DIGITAL:</label><md-icon>content_copy</md-icon><md-select ng-model=formData.certificado_seleccionado required ng-disabled=!autenticado><md-option ng-repeat="(index, cer) in certificados" value={{cer}} ng-select="index == 1 && formData.uniqueValue">{{cer.nombreComunSubject}}</md-option></md-select></md-input-container></div></div><h4 ng-if="documentosParaFirmar.length > 0">Se firmarán los siguientes documentos:</h4><h4 ng-if="documentosParaFirmar.length == 0">No se seleccionaron documentos para firmar</h4><span class="chip {{yaFirmo ? doc.class : \'enCola\'}}" ng-repeat="doc in documentosParaFirmar">{{doc.nombre}}</span><h4 ng-if="yaFirmo ==true">Se firmaron <strong>{{firmados}}</strong> documentos de <strong>{{documentosParaFirmar.length}}</strong>.</h4></md-dialog-content><md-dialog-actions><div flex></div><md-button class="md-raised md-secondary" ng-click=cancelar()><md-icon>cancel</md-icon><span>{{yaFirmo==true? \'Listo\': \'Cancelar\'}}</span></md-button><md-button class="md-raised md-primary" ng-click=firmar() ng-disabled="(documentosParaFirmar.length == 0) || !token_conectado|| !autenticado || yaFirmo"><md-icon>check</md-icon><span>Firmar</span></md-button></md-dialog-actions></md-dialog>'),e.put("app/modules/verificacion/modules.verificar.html",'<div class=container><div class=logo-agetic><img src=assets/images/logo.png class=text-button alt=AGETIC ng-click=verificar.irInicio()></div><md-card><md-tabs class="md-accent verificar-contenedor {{(verificar.datosDocumento?\'ampliar\':\'\')}}" md-align-tabs=top md-selected=verificar.data.selectedIndex><md-tab name=verificar><md-tab-label><strong>Verificar</strong></md-tab-label><md-tab-body><md-button class="md-fab md-mini md-icon-button md-primary" aria-label=home ng-click=verificar.irInicio()><md-icon>home</md-icon><md-tooltip>Volver al inicio</md-tooltip></md-button><form name=form ng-submit=verificar.buscar()><div class=md-padding layout layout-xs=column layout-align=center><md-input-container><label>Cite</label><input ng-model=verificar.datos.cite required></md-input-container><md-input-container><label>Codigo</label><input ng-model=verificar.datos.codigo required></md-input-container><center><md-button type=submit class="md-raised md-primary" ng-disabled=form.$invalid>Verificar documento</md-button></center></div></form><div ng-if=verificar.datosDocumento layout layout-sm=column layout-xs=column class=visor-verificado flex-direction-sm=column><md-card flex-sm=50 flex-gt-sm=100 flex-gt-md=30 layout=row layout-sm layout-xs=4 layout-align="center center"><section style="width:100%; height:100%" ng-if=verificar.datosDocumento><md-toolbar class="md-hue-2 titulo-seccion-verificar" layout-align="center center"><div layout=row class=md-headline><h2 class=md-toolbar-tools><span md-colors="background: primary">Firmantes del documento</span></h2></div></md-toolbar><md-list layout-padding class=lista-firmantes><md-list-item class=md-2-line ng-repeat="usuario in verificar.datosDocumento.firmantes"><md-icon class="md-48 md-primary">fingerprint</md-icon><div class=md-list-item-text><h3>{{usuario.firmante}}</h3><!-- <p>{{usuario.fechaFirma || \'Fecha y hora no disponible\'}}</p> --></div><md-divider md-inset hide-sm></md-divider><md-divider hide-gt-sm></md-divider></md-list-item></md-list></section></md-card><md-card flex-sm=50 flex-gt-sm=100 flex-gt-md=70 layout layout-align="center center" layout-xs=4><section style="width:100%; height:100%"><md-toolbar class="md-hue-2 titulo-seccion-verificar" layout-align="center center"><div layout=row class=md-headline><h2 class=md-toolbar-tools><span class=titulo-card-verificar>Documento firmado digitalmente {{verificar.esMovil}}</span></h2></div></md-toolbar><iframe ng-if="verificar.pdf && (verificar.esMovil==false || !verificar.esMovil)" class=iframe-verificado-pdf src={{verificar.pdf}} allowfullscreen></iframe><div ng-if="verificar.pdf && verificar.esMovil==true" id=canvasContainerVerificado></div></section></md-card></div></md-tab-body></md-tab><!-- <md-tab name="historial">\n        <md-tab-label>\n          Historial\n        </md-tab-label>\n        <md-tab-body>\n          historial de mis verificaciones\n        </md-tab-body>\n      </md-tab> --></md-tabs></md-card></div>'),e.put("app/components/formlyComponents/archivo/archivo.html",'<div ng-if=!to.multiple><md-button class="md-raised md-warn" ng-click=vm.elegirPdf($event) ng-if=!model[options.key]>{{to.label}}</md-button><input ng-show=false type=file ng-model=model[options.key] base-sixty-four-input accept=.pdf on-after-validate=vm.onLoadModel><div ng-if=model[options.key]>Documento: {{ model[options.key].filename}} Peso: {{ vm.redondear(model[options.key].filesize/1024, 2)}} kb<md-icon ng-click=vm.showPdf(model[options.key].url) class=ap-cursor-pointer ng-if=model[options.key].url>picture_as_pdf<md-tooltip>Ver pdf</md-tooltip></md-icon><md-icon class="ap-text-warning ap-cursor-pointer" ng-click=vm.limpiarPdf() ng-if=!to.disabled>delete<md-tooltip>Eliminar</md-tooltip></md-icon><br></div></div><div ng-if=to.multiple><md-button class="md-raised md-warn" ng-click=vm.elegirPdf($event)>{{to.label}}</md-button><input ng-show=false type=file ng-model=model[options.key] base-sixty-four-input accept=.pdf on-after-validate=vm.onLoadModel multiple><div ng-repeat="pdf in model[options.key]">Documento: {{ pdf.filename}} Peso: {{ vm.redondear(pdf.filesize/1024, 2)}} kb<md-icon ng-click=vm.showPdf(pdf.url) class=ap-cursor-pointer ng-if=pdf.url>picture_as_pdf<md-tooltip>Ver pdf</md-tooltip></md-icon><md-icon class="ap-text-warning ap-cursor-pointer" ng-click=vm.limpiarPdf($index) ng-if=!to.disabled>delete</md-icon></div></div>'),e.put("app/components/formlyComponents/cajachica/cajachica.html",'<ng-form name=cajaChicaForm><div layout layout-align="start center"><md-button class="md-fab md-mini md-icon-button md-primary" aria-label=add ng-click=vm.addRow(model[options.key].tipo,1) ng-if="!to.disabled && model[options.key].tipo!=\'PAGADO\'"><md-icon>add</md-icon><md-tooltip>Agregar fila</md-tooltip></md-button><md-autocomplete ng-if="!to.disabled && model[options.key].tipo==\'PAGADO\'" flex=40 md-no-cache=true md-selected-item=vm.buscar.doc_seleccionado md-search-text=vm.buscar.doc md-items="item in vm.buscarDocumentos(vm.buscar.doc)" md-selected-item-change=vm.cargarPartidas(item.nombre) md-item-text=item.nombre md-min-length=0 placeholder="Seleccione un cite para añadir"><md-item-template><span>{{item.nombre}}</span></md-item-template><md-not-found>Escriba un cite válido.</md-not-found></md-autocomplete><md-autocomplete ng-if="(model[options.key].tipo==\'COMPROMETIDO\' || model[options.key].tipo==\'MODIFICADO\') && !to.disabled" flex=40 md-no-cache=true md-selected-item=vm.buscar.par_seleccionado md-search-text=vm.buscar.par md-items="item in vm.buscarPartidas(vm.buscar.par)" md-selected-item-change=vm.addRow(model[options.key].tipo) md-item-text=item.num_des md-min-length=0 ng-disabled=to.disabled placeholder="Partida ..."><md-item-template><span>{{item.num_des}}</span></md-item-template><md-not-found>No se encontraron coincidencias para "{{vm.buscar.par}}".</md-not-found></md-autocomplete><span flex></span><md-input-container md-no-float flex=25><input type=text placeholder="Buscar... " ng-model=vm.filter ng-disabled=false></md-input-container><md-input-container ng-if="to.tipo==\'GESTION\'" flex=10><md-select ng-model=model[options.key].tipo ng-change="model[options.key].rows=[]"><md-option value=INICIAL>INICIAR PARTIDAS</md-option><md-option value=MODIFICADO>MODIFICAR PARTIDAS</md-option></md-select></md-input-container></div><div layout layout-align="start center" class=alert ng-class="\'alert-\'+vm.alert.tipo" ng-show=vm.alert.show><md-icon>{{vm.alert.icono}}</md-icon><div flex>{{vm.alert.mensaje}}</div><md-icon class=ap-cursor-pointer ng-click="vm.alert.show=false" ng-if="vm.alert.time==0">close</md-icon></div><table class="table table-hover table-striped"><thead><tr><th ng-if=!to.disabled></th><th ng-if="to.tipo==\'PAGADO\'">Cite</th><th>Partida</th><th>{{to.tipo==\'COMPROMETIDO\' || to.tipo==\'PAGADO\'? \'Detalle\':\'Descripción\'}}</th><th ng-if="to.tipo==\'PAGADO\'">Comprometido</th><th>{{to.tipo==\'PAGADO\'? \'Pagado\':\'Monto\'}}</th></tr></thead><tbody><tr ng-repeat="row in model[options.key].rows | filter: vm.filter"><td class=buttons ng-if=!to.disabled layout-gt-sm><span ng-if="to.tipo==\'COMPROMETIDO\'"><md-checkbox ng-model=row.pago_multiple></md-checkbox><md-tooltip>Pagado múltiple</md-tooltip></span><md-button class=md-icon-button aria-label=getSaldo ng-click=vm.deleteRow($index)><md-icon>delete</md-icon><md-tooltip>Eliminar fila</md-tooltip></md-button><md-button class=md-icon-button aria-label=delete ng-click=vm.obtenerSaldo(row.id_comprometido) ng-if="to.tipo==\'PAGADO\' && row.pago_multiple"><md-icon>attach_money</md-icon><md-tooltip>Obtener saldo actual</md-tooltip></md-button></td><td ng-if="to.tipo==\'PAGADO\'"><md-input-container><textarea ng-model=row.cite.nombre disabled></textarea></md-input-container></td><td><md-input-container ng-if="model[options.key].tipo==\'INICIAL\'"><textarea ng-model=row.partida></textarea></md-input-container><md-input-container ng-if="model[options.key].tipo!=\'INICIAL\'"><textarea ng-model=row.partida.num_des disabled></textarea></md-input-container></td><td><md-input-container><textarea ng-model=row.descripcion ng-disabled="to.tipo==\'PAGADO\' || to.disabled"></textarea></md-input-container></td><td ng-if="to.tipo==\'PAGADO\'"><md-input-container><input type=text ng-model=row.comprometido disabled></md-input-container><!-- <div class="saldo" ng-if="row.saldo"> Saldo={{row.saldo}} </div> --></td><td><md-input-container><input type=text ng-model=row.monto ng-blur=vm.calcularTotal(row)></md-input-container></td></tr></tbody><tfoot><tr><td ng-if=!to.disabled></td><td ng-if="to.tipo==\'PAGADO\'"></td><td></td><td ng-if="to.tipo==\'PAGADO\'"></td><td>Total</td><td><md-input-container><input type=text ng-model=model[options.key].monto_total disabled></md-input-container></td></tr></tfoot></table></ng-form>'),e.put("app/components/formlyComponents/ccArchivo/ccArchivo.html",'<md-input-container class=md-block><textarea ng-model=model[options.key] style="font-size: 10px; line-height: 11px" rows=1></textarea></md-input-container>'),e.put("app/components/formlyComponents/certificacionComprometido/certificacionComprometido.html",'<ng-form name=certificacionComprometido><div class="ap-text-warning ap-text-center" ng-if=!to.showItem>Esta sección no se mostrará en el PDF hasta que se apruebe y se le asigne un "CITE".</div><div class=certificacion-comprometido><h3>{{to.label}}</h3><table class="table table-hover table-striped"><thead><tr><th>Partida</th><th>Saldo inicial</th><th>Monto comprometido</th><th>Saldo final</th></tr></thead><tbody><tr ng-repeat="row in model[options.key].rows"><td></td><td></td><td></td><td></td></tr></tbody></table></div></ng-form>'),e.put("app/components/formlyComponents/cite/cite.html","<div layout ng-if=\"!to.tipoMembrete || to.tipoMembrete=='sin membrete'\"><div flex layout layout-align=\"start end\" ng-if=\"(model[options.key] && model[options.key]['cite'])\">{{ model[options.key]['cite'] }}</div><div class=placeholder flex layout layout-align=\"start end\" ng-if=\"!(model[options.key] && model[options.key]['cite'])\">{{ to.labelCite }}</div><div flex layout layout-align=\"end end\" ng-if=\"(model[options.key] && model[options.key]['fecha'])\">{{ model[options.key]['fecha'] }}</div><div class=placeholder flex layout layout-align=\"end end\" ng-if=\"!(model[options.key] && model[options.key]['fecha'])\">{{ to.labelFecha }}</div></div><div ng-if=\"to.tipoMembrete=='externo'\"><div flex ng-if=\"(model[options.key] && model[options.key]['fecha'])\">{{ model[options.key]['fecha'] }}</div><div class=placeholder flex ng-if=\"!(model[options.key] && model[options.key]['fecha'])\">{{ to.labelFecha }}</div><div flex ng-if=\"(model[options.key] && model[options.key]['cite'])\">{{ model[options.key]['cite'] }}</div><div class=placeholder flex ng-if=\"!(model[options.key] && model[options.key]['cite'])\">{{ to.labelCite }}</div></div><br>"),e.put("app/components/formlyComponents/datosGenerales/datosGenerales.html",'<ng-form name=datosGeneralesForm><div class="ap-text-warning ap-text-center" ng-if=!to.showItem>Esta sección no se mostrará al imprimir en PDF.</div><div ng-class="{\'border-div\': !to.showItem}"><div layout ng-if=to.show.para><div ng-class="\'flex-\'+to.labelw" layout=column><div class=label flex layout layout-align="start start"><span class=ap-cursor-pointer ng-click="vm.openSelect($event, \'para\')"><span>PARA:</span></span></div><md-input-container class=input-search ng-show=vm.show_para><label>Usuarios</label><md-select ng-model="model[options.key][\'para\']" name=select_para required md-on-close="vm.buscar_para=\'\'; vm.show_para=false;" data-md-container-class=select-search><md-select-header class=select-header><input ng-model=vm.buscar_para placeholder="Buscar destinatario .." class="header-searchbox md-text"></md-select-header><md-optgroup label=usuarios><md-option ng-value=u ng-repeat="u in vm.usuarios_jefes | filter:vm.buscar_para">{{ u.nombres+\' \'+u.apellidos }}</md-option></md-optgroup></md-select></md-input-container><div flex></div></div><div flex><div>{{ model[options.key][\'para\'].nombres+\' \'+model[options.key][\'para\'].apellidos }}<md-icon class=ap-text-success ng-if="vm.usuarios_check[model[options.key][\'para\'].id_usuario]">check<md-tooltip>Aprobó</md-tooltip></md-icon></div><span>{{ model[options.key][\'para\'].cargo }}</span><div class=ap-ng-msg ng-messages=datosGeneralesForm.select_para.$error ng-show="datosGeneralesForm.$submitted || datosGeneralesForm.select_para.$touched"><div ng-message=required>Debe elegir una opción haciendo click en PARA:</div></div></div></div><div layout ng-if=to.show.via><div ng-class="\'flex-\'+to.labelw" layout=column><div class=label flex layout layout-align="start start"><span class=ap-cursor-pointer ng-click="vm.openSelect($event, \'via\')"><span>VÍA:</span></span></div><md-input-container class=input-search ng-show=vm.show_via><label>Usuarios</label><md-select ng-model="model[options.key][\'via\']" name=select_via md-on-close="vm.buscar_via=\'\'; vm.show_via=false;" data-md-container-class=select-search multiple><md-select-header class=select-header><input ng-model=vm.buscar_via type=search placeholder="Buscar .." class="header-searchbox md-text"></md-select-header><md-optgroup label=usuarios><md-option ng-value=u ng-repeat="u in vm.usuarios_jefes | filter:vm.buscar_via">{{ u.nombres+\' \'+u.apellidos }}</md-option></md-optgroup></md-select></md-input-container><div flex></div></div><div flex><div ng-repeat="p in model[options.key][\'via\']"><div>{{ p.nombres+\' \'+p.apellidos }}<md-icon class=ap-text-success ng-if=vm.usuarios_check[p.id_usuario]>check<md-tooltip>Aprobó</md-tooltip></md-icon></div><span>{{ p.cargo }}<md-icon class=ap-cursor-pointer ng-click="vm.moverUsuario($index,\'down\')" ng-if=" $index!=(model[options.key][\'via\'].length-1) && !to.disabled ">arrow_downward<md-tooltip>Bajar</md-tooltip></md-icon><md-icon class=ap-cursor-pointer ng-click="vm.moverUsuario($index,\'up\')" ng-if=" $index!=0 && !to.disabled ">arrow_upward<md-tooltip>Subir</md-tooltip></md-icon></span></div><div class=ap-ng-msg ng-messages=datosGeneralesForm.select_via.$error ng-show="datosGeneralesForm.$submitted || datosGeneralesForm.select_via.$touched"><div ng-message=required>Debe elegir una opción haciendo click en VÍA:</div></div></div></div><div layout ng-if=to.show.de><div ng-class="\'flex-\'+to.labelw" layout=column><div class=label flex layout layout-align="start start"><span class=ap-cursor-pointer ng-click="vm.openSelect($event, \'de\')"><span>DE:</span></span></div><md-input-container class=input-search ng-show=vm.show_de><label>Usuarios</label><md-select ng-model="model[options.key][\'de\']" name=select_de md-on-close="vm.buscar_de=\'\'; vm.show_de=false;" data-md-container-class=select-search multiple required><md-select-header class=select-header><input ng-model=vm.buscar_de type=search placeholder="Buscar .." class="header-searchbox md-text"></md-select-header><md-optgroup label=usuarios><md-option ng-value=u ng-repeat="u in vm.usuarios | filter:vm.buscar_de">{{ u.nombres+\' \'+u.apellidos }}</md-option></md-optgroup></md-select></md-input-container><div flex></div></div><div flex><div ng-repeat="p in model[options.key][\'de\']"><div>{{ p.nombres+\' \'+p.apellidos }}</div><span>{{ p.cargo }}</span></div><div class=ap-ng-msg ng-messages=datosGeneralesForm.select_de.$error ng-show="datosGeneralesForm.$submitted || datosGeneralesForm.select_de.$touched"><div ng-message=required>Debe elegir una opción haciendo click en De:</div></div></div></div><div layout ng-if=to.show.ref><div ng-class="\'flex-\'+to.labelw" layout=column><div class=label flex layout layout-align="start end"><span>{{to.labelRef}}</span></div><div flex></div></div><div flex><md-input-container style="width: 100%"><input name=ref ng-model="model[options.key][\'ref\']" required md-no-asterisk><div ng-messages=datosGeneralesForm.ref.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container></div></div></div><div class=separador></div></ng-form>'),e.put("app/components/formlyComponents/documentosAnular/documentosAnular.html",'<ng-form name=docsAnular><div layout><div ng-class="\'flex-\'+to.labelw" layout=column><div class=label flex layout layout-align="start start"><span class=ap-cursor-pointer ng-click="vm.openSelect($event, \'doc\')">{{to.label}} </span>&nbsp;&nbsp;&nbsp;</div><md-input-container class=input-search ng-show=vm.show_doc><label>Documentos</label><md-select ng-model=model[options.key] name=select_anular md-on-close=vm.closeSelectDoc() data-md-container-class=select-search multiple required><md-select-header class=select-header><input ng-model=vm.buscar_doc placeholder="Buscar ..." class="header-searchbox md-text"></md-select-header><md-optgroup label=documentos><md-option ng-value=d ng-repeat="d in vm.documentos">{{d.nombre}}</md-option></md-optgroup></md-select></md-input-container><div flex></div></div><div class=docs flex><div layout layout-wrap><div ng-repeat="d in model[options.key]"><md-icon class="ap-cursor-pointer md-mini" ng-click=vm.mostrarPdf(d.id_documento)>description</md-icon><span class=ap-cursor-pointer ng-click=vm.mostrarPdf(d.id_documento)>{{ d.nombre }} {{ ( $index != (model[options.key].length-1) )? \', \' : \'\' }}</span></div></div><div class=ap-ng-msg ng-messages=docsAnular.select_anular.$error ng-show="docsAnular.$submitted || docsAnular.select_anular.$touched"><div ng-message=required>Debe escojer al menos un documento para anular</div></div></div></div></ng-form>'),e.put("app/components/formlyComponents/documentosRelacionados/documentosRelacionados.html",'<ng-form name=docsRelForm><div layout><div ng-class="\'flex-\'+to.labelw" layout=column><div class=label flex layout layout-align="start start"><span class=ap-cursor-pointer ng-click="vm.openSelect($event, \'doc\')">{{to.label}} </span>&nbsp;&nbsp;&nbsp;</div><md-input-container class=input-search ng-show=vm.show_doc><label>Documentos</label><md-select ng-model=model[options.key] name=select_doc md-on-close=vm.closeSelectDoc() data-md-container-class=select-search multiple><md-select-header class=select-header><input ng-model=vm.buscar_doc placeholder="Buscar ..." class="header-searchbox md-text"></md-select-header><md-optgroup label=documentos><md-option ng-value=d ng-repeat="d in vm.documentos">{{d.nombre}}</md-option></md-optgroup></md-select></md-input-container><div flex></div></div><div class=docs flex><div layout layout-wrap><div ng-repeat="d in model[options.key]"><md-icon class="ap-cursor-pointer md-mini" ng-click=vm.mostrarPdf(d.id_documento)>description</md-icon><span class=ap-cursor-pointer ng-click=vm.mostrarPdf(d.id_documento)>{{ d.nombre }} {{ ( $index != (model[options.key].length-1) )? \', \' : \'\' }}</span></div></div><div class=ap-ng-msg ng-messages=docsRelForm.select_doc.$error ng-show="docsRelForm.$submitted || docsRelForm.select_doc.$touched"><div ng-message=required>Debe escojer una opción haciendo click en Documentos adjuntos:</div></div></div></div></ng-form>'),
e.put("app/components/formlyComponents/editorTexto/editorTexto.html","<ng-simditor content=model[options.key] disabled></ng-simditor>"),e.put("app/components/formlyComponents/encabezado/encabezado.html",'<ng-form name=cabeceraForm><div layout ng-if=to.show.para><div ng-class="\'flex-\'+to.labelw" layout=column><div class=label flex layout layout-align="start start"><span class=ap-cursor-pointer ng-click="vm.openSelect($event, \'para\')"><span>PARA:</span></span></div><md-input-container class=input-search ng-show=vm.show_para><label>Usuarios</label><md-select ng-model="model[options.key][\'para\']" name=select_para md-on-close="vm.buscar_para=\'\'; vm.show_para=false;" data-md-container-class=select-search multiple><md-select-header class=select-header><input ng-model=vm.buscar_para placeholder="Buscar destinatario .." class="header-searchbox md-text"></md-select-header><md-optgroup label=usuarios><md-option ng-value=u ng-repeat="u in vm.usuarios_jefes | filter:vm.buscar_para">{{ u.nombres+\' \'+u.apellidos }}</md-option></md-optgroup></md-select></md-input-container><div flex></div></div><div flex><div ng-repeat="p in model[options.key][\'para\']" ng-init="p.mostrar_cargo= (p.mostrar_cargo==undefined)? true : p.mostrar_cargo"><div>{{ p.nombres+\' \'+p.apellidos }} <span ng-if=!to.disabled><md-checkbox class=cargo ng-model=p.mostrar_cargo aria-label=cargo></md-checkbox><md-tooltip>{{(p.mostrar_cargo)? \'Ocultar \': \'Mostrar \'}}cargo</md-tooltip></span><md-icon class=ap-cursor-pointer ng-click="vm.moverUsuario($index,\'down\',\'para\')" ng-if=" $index!=(model[options.key][\'para\'].length-1) && !to.disabled ">arrow_downward<md-tooltip>Bajar</md-tooltip></md-icon><md-icon class=ap-cursor-pointer ng-click="vm.moverUsuario($index,\'up\',\'para\')" ng-if=" $index!=0 && !to.disabled ">arrow_upward<md-tooltip>Subir</md-tooltip></md-icon></div><span ng-if=p.mostrar_cargo>{{ p.cargo }}</span></div></div></div><div layout ng-if=to.show.via><div ng-class="\'flex-\'+to.labelw" layout=column><div class=label flex layout layout-align="start start"><span class=ap-cursor-pointer ng-click="vm.openSelect($event, \'via\')"><span>VÍA:</span></span></div><md-input-container class=input-search ng-show=vm.show_via><label>Usuarios</label><md-select ng-model="model[options.key][\'via\']" name=select_via md-on-close="vm.buscar_via=\'\'; vm.show_via=false;" data-md-container-class=select-search multiple><md-select-header class=select-header><input ng-model=vm.buscar_via type=search placeholder="Buscar .." class="header-searchbox md-text"></md-select-header><md-optgroup label=usuarios><md-option ng-value=u ng-repeat="u in vm.usuarios_jefes | filter:vm.buscar_via">{{ u.nombres+\' \'+u.apellidos }}</md-option></md-optgroup></md-select></md-input-container><div flex></div></div><div flex><div ng-repeat="p in model[options.key][\'via\']" ng-init="p.mostrar_cargo= (p.mostrar_cargo==undefined)? true : p.mostrar_cargo"><div>{{ p.nombres+\' \'+p.apellidos }} <span ng-if=!to.disabled><md-checkbox class=cargo ng-model=p.mostrar_cargo aria-label=cargo></md-checkbox><md-tooltip>{{(p.mostrar_cargo)? \'Ocultar \': \'Mostrar \'}}cargo</md-tooltip></span><md-icon class=ap-cursor-pointer ng-click="vm.moverUsuario($index,\'down\',\'via\')" ng-if=" $index!=(model[options.key][\'via\'].length-1) && !to.disabled ">arrow_downward<md-tooltip>Bajar</md-tooltip></md-icon><md-icon class=ap-cursor-pointer ng-click="vm.moverUsuario($index,\'up\',\'via\')" ng-if=" $index!=0 && !to.disabled ">arrow_upward<md-tooltip>Subir</md-tooltip></md-icon></div><span ng-if=p.mostrar_cargo>{{ p.cargo }}</span></div></div></div><div layout ng-if=to.show.de><div ng-class="\'flex-\'+to.labelw" layout=column><div class=label flex layout layout-align="start start"><span class=ap-cursor-pointer ng-click="vm.openSelect($event, \'de\')"><span>DE:</span></span></div><md-input-container class=input-search ng-show=vm.show_de><label>Usuarios</label><md-select ng-model="model[options.key][\'de\']" name=select_de md-on-close="vm.buscar_de=\'\'; vm.show_de=false;" data-md-container-class=select-search multiple><md-select-header class=select-header><input ng-model=vm.buscar_de type=search placeholder="Buscar .." class="header-searchbox md-text"></md-select-header><md-optgroup label=usuarios><md-option ng-value=u ng-repeat="u in vm.usuarios | filter:vm.buscar_de">{{ u.nombres+\' \'+u.apellidos }}</md-option></md-optgroup></md-select></md-input-container><div flex></div></div><div flex><div ng-repeat="p in model[options.key][\'de\']" ng-init="p.mostrar_cargo= (p.mostrar_cargo==undefined)? true : p.mostrar_cargo"><div>{{ p.nombres+\' \'+p.apellidos }} <span ng-if=!to.disabled><md-checkbox class=cargo ng-model=p.mostrar_cargo aria-label=cargo></md-checkbox><md-tooltip>{{(p.mostrar_cargo)? \'Ocultar \': \'Mostrar \'}}cargo</md-tooltip></span><md-icon class=ap-cursor-pointer ng-click="vm.moverUsuario($index,\'down\',\'de\')" ng-if=" $index!=(model[options.key][\'de\'].length-1) && !to.disabled ">arrow_downward<md-tooltip>Bajar</md-tooltip></md-icon><md-icon class=ap-cursor-pointer ng-click="vm.moverUsuario($index,\'up\',\'de\')" ng-if=" $index!=0 && !to.disabled ">arrow_upward<md-tooltip>Subir</md-tooltip></md-icon></div><span ng-if=p.mostrar_cargo>{{ p.cargo }}</span></div></div></div><div layout ng-if=to.show.ref><div ng-class="\'flex-\'+to.labelw" layout=column><div class=label flex layout layout-align="start end"><span>{{to.labelRef}}</span></div><div flex></div></div><div flex><md-input-container style="width: 100%"><input name=ref ng-model="model[options.key][\'ref\']" required md-no-asterisk><div ng-messages=cabeceraForm.ref.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container></div></div><div class=separador></div></ng-form>'),e.put("app/components/formlyComponents/inputt/inputt.html",'<div layout layout-align="start start"><div class=label ng-class="[to.alineacion||\'ap-text-right\',\'flex-\'+to.labelw]" ng-if="to.labelw>0">{{to.labelx}}</div><div class=label ng-class="[to.alineacion||\'ap-text-right\']" ng-if="to.labelw==0">{{to.labelx}}</div><md-input-container flex><textarea ng-model=model[options.key] ng-required=to.required md-no-asterisk ng-disabled=to.disabled> </textarea><div ng-messages=fc.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container></div>'),e.put("app/components/formlyComponents/listaContactos/listaContactos.html",'<ng-form name=listaContactosForm><div layout><div ng-class="\'flex-\'+to.labelw" layout=column><div class=label flex layout layout-align="start start"><span class=ap-cursor-pointer ng-click="vm.abrirSelector($event, \'contacto\')">{{to.label}} </span>&nbsp;&nbsp;&nbsp;</div><md-input-container class=input-search ng-show=vm.mostrarContacto><label>Contactos</label><md-select ng-model=model[options.key].lista name=seleccionarContacto md-on-close=vm.cerrarSelector() data-md-container-class=select-search multiple required><md-select-header class=select-header><input ng-model=vm.buscarContacto placeholder=Buscar... class="header-searchbox md-text"></md-select-header><md-optgroup label=contactos><md-option ng-value=d ng-repeat="d in vm.contactos"><div>{{d.grado}} {{d.nombres}} {{d.apellidos}}</div><div ng-if=d.cargo>{{d.cargo}} - {{d.sigla}}</div><div ng-if="!d.cargo || d.cargo === undefined">{{d.sigla}}</div></md-option></md-optgroup></md-select></md-input-container><div flex></div></div><div class=docs flex><div layout=column layout-wrap><div ng-repeat="d in model[options.key].lista" class="{{$index%2==0? \'par\':\'impar\'}}"><div>{{ d.nombres }} {{ d.apellidos }}</div><div>{{d.cargo}}</div><div>{{d.sigla}}</div></div></div><div class=ap-ng-msg ng-messages=listaContactosForm.seleccionarContacto.$error ng-show="listaContactosForm.$submitted || listaContactosForm.select_doc.$touched"><div ng-message=required>Debe escojer al menos un contacto</div></div></div></div></ng-form>'),e.put("app/components/formlyComponents/listas/listas.html",'<div layout><div flex ng-if="to.className==\'ap-text-right\' || to.className==\'ap-text-center\'"></div><div><span>{{to.label}}</span><ul ng-if="to.tipo==\'ul\'"><li ng-repeat="i in to.options">{{i}}</li></ul><ol ng-if="to.tipo==\'ol\'"><li ng-repeat="i in to.options">{{i}}</li></ol></div><div flex ng-if="to.className==\'ap-text-center\'"></div></div>'),e.put("app/components/formlyComponents/texto/texto.html","<h1 ng-if=\"to.tipo=='h1'\" ng-class=\"[to.className,{'no-margin-top': !to.mTop },{ 'no-margin-bot': !to.mBot }]\">{{to.label}}</h1><h2 ng-if=\"to.tipo=='h2'\" ng-class=\"[to.className,{'no-margin-top': !to.mTop },{ 'no-margin-bot': !to.mBot }]\">{{to.label}}</h2><h3 ng-if=\"to.tipo=='h3'\" ng-class=\"[to.className,{'no-margin-top': !to.mTop },{ 'no-margin-bot': !to.mBot }]\">{{to.label}}</h3><h4 ng-if=\"to.tipo=='h4'\" ng-class=\"[to.className,{'no-margin-top': !to.mTop },{ 'no-margin-bot': !to.mBot }]\">{{to.label}}</h4><h5 ng-if=\"to.tipo=='h5'\" ng-class=\"[to.className,{'no-margin-top': !to.mTop },{ 'no-margin-bot': !to.mBot }]\">{{to.label}}</h5><h6 ng-if=\"to.tipo=='h6'\" ng-class=\"[to.className,{'no-margin-top': !to.mTop },{ 'no-margin-bot': !to.mBot }]\">{{to.label}}</h6><p ng-if=\"to.tipo=='p'\" ng-class=\"[to.className,{'no-margin-top': !to.mTop },{ 'no-margin-bot': !to.mBot }]\">{{to.label}}</p>"),e.put("app/components/formlyComponents/vacio/vacio.html",'<div flex ng-style=to.style style="outline: 1px dashed #ddd"></div>'),e.put("app/modules/admin/login/login.dialog.html",'<md-dialog aria-label=Agregar/Editar ng-cloak class=login-dialog><form id=data-form name=form ng-submit="answer(\'login\')"><md-toolbar><div class=md-toolbar-tools><h2><md-icon>lock_outline</md-icon>Iniciar su sesión</h2><span flex></span></div></md-toolbar><md-dialog-content><div class=md-dialog-content><p class="bg-warning-user alert">Su sesión ha expirado, debe iniciarla de nuevo.</p><md-content layout-gt-sm=column layout-padding style="overflow: initial"><md-input-container><label>Nombre de usuario</label><md-icon>person</md-icon><input ng-model=data.username required></md-input-container><md-input-container><label>Contraseña</label><md-icon>lock</md-icon><input ng-model=data.password type=password required></md-input-container><md-button type=submit class="md-raised md-primary" ng-disabled=form.$invalid>Iniciar sesión</md-button></md-content></div></md-dialog-content></form></md-dialog>'),e.put("app/modules/admin/login/modules.admin.login.html",'<md-toolbar style="display: none"><div class=logo><img src=assets/images/logo.png></div></md-toolbar><div class=container><div class=logo-agetic><img src=assets/images/logo.png></div><md-card class="login-panel md-whiteframe-3dp"><md-card-content><br><div layout=row layout-align="center center"><img class=icon-image src=assets/images/icon_doc.png></div><br><div layout=row layout-align="center center" class=md-headline>Inicio de sesión con:</div><br><form name=form ng-submit=login.login()><md-input-container><label>Nombre de usuario</label><md-icon>person</md-icon><input ng-model=login.username required></md-input-container><md-input-container><label>Contraseña</label><md-icon>lock</md-icon><input ng-model=login.password type=password required></md-input-container><md-button type=submit class="md-raised md-primary" ng-disabled=form.$invalid>Iniciar con LDAP</md-button></form><!-- <br>\r\n            <div class="recuperar-pwd" >\r\n              <span ng-click="login.abrirDialog()">Recuperar contraseña</span>\r\n            </div> --><br></md-card-content></md-card></div>'),e.put("app/modules/admin/login/recuperar.dialog.html",'<md-dialog aria-label=Recuperar ng-cloak class="formly-dialog formly-column-{{column}}" style="max-width: 800px; width: 100%"><form ng-submit=recuperar() name=recuperarForm><md-toolbar><div class=md-toolbar-tools><h2><md-icon>autorenew</md-icon>Recuperar contraseña</h2><span flex></span> <span flex></span><md-button class=md-icon-button aria-label=Cerrar ng-click=cerrar($event)><md-tooltip>Cerrar</md-tooltip><md-icon aria-label="Close dialog">close</md-icon></md-button></div></md-toolbar><md-dialog-content class=md-dialog-content><div class=md-dialog-content><md-input-container class=md-block flex-gt-sm><label>Usuario</label><input name=usuario ng-model=usuario type=text required><div ng-messages=recuperarForm.usuario.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block flex-gt-sm><label>Correo electronico</label><input name=email ng-model=email type=email required><div ng-messages=recuperarForm.email.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block flex-gt-sm><label>Número de documento de identidad</label><input name=numero_documento ng-model=numero_documento type=text required><div ng-messages=recuperarForm.numero_documento.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container><div class=informacion-recuperar><strong>Usuario:</strong> <span>Es el usuario con el que fue registrado en el sistema.</span><br><strong>Correo electronico:</strong> <span>El mismo con el que fue registrado</span><br><strong>Numero de documento de indentidad:</strong> <span>Escriba solo el número</span></div></div></md-dialog-content><md-dialog-actions><span flex></span><md-button type=submit class="md-raised md-primary" ng-disabled=recuperarForm.$invalid><md-icon>check</md-icon><span>Recuperar</span></md-button><md-button class=md-raised ng-click=cerrar()><md-icon>cancel</md-icon>Cancelar</md-button></md-dialog-actions></form></md-dialog>'),e.put("app/modules/admin/profile/modules.admin.profile.html",'<div class=profile><div class=profile-user-bg><div class="profile-user-photo bg-{{profile.getColor()}}-user"><img src="" alt="" hidden><!-- <i class="md-icon">account_circle</i> --> {{profile.getInitial()}}</div><div class=profile-data><h2 class=profile-user-name>{{profile.getName()}}</h2><h3 class=profile-user-item>{{profile.getEmail()}}</h3><!-- <ul class="profile-user-data">\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<span class="profile-data-number">10</span>\r\n\t\t\t\t\t<span class="profile-data-details">Dato 1</span>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<span class="profile-data-number">20</span>\r\n\t\t\t\t\t<span class="profile-data-details">Dato 2</span>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<span class="profile-data-number">30</span>\r\n\t\t\t\t\t<span class="profile-data-details">Dato 3</span>\r\n\t\t\t\t</li>\r\n\t\t\t</ul> --></div></div><div class=profile-statistics layout=row><div class="profile-char text-left" flex ng-show=!profile.swEditarCuenta><div layout><md-button class=md-raised ng-click="profile.abrirEditar(\'editar_notificaciones\')"><md-icon>edit</md-icon>Editar notificaciones</md-button><!-- <md-button class="md-raised" ng-click="profile.abrirEditar(\'editar_cuenta\')">\r\n\t\t\t\t\t\t<md-icon>edit</md-icon>\r\n\t\t\t\t\t\tEditar cuenta\r\n\t\t\t\t</md-button>\r\n\t\t\t\t<md-button class="md-raised" ng-click="profile.abrirEditar(\'editar_contrasena\')">\r\n\t\t\t\t\t\t<md-icon>edit</md-icon>\r\n\t\t\t\t\t\tEditar Contraseña\r\n\t\t\t\t</md-button> --><div flex></div></div><p><strong>Nombre de usuario: </strong>{{profile.getData(\'username\')}}</p><p><strong>Número de documento: </strong>{{profile.getData(\'doc\')}}</p><p><strong>Nombre(s): </strong>{{profile.getData(\'first_name\')}}</p><p><strong>Apellido(s): </strong>{{profile.getData(\'last_name\')}}</p><p><strong>Correo electrónico: </strong>{{profile.getData(\'email\')}}</p><!-- <p><strong>Último login: </strong>{{profile.getData(\'last_login\')}}</p> --><p><strong>Activo desde: </strong>{{profile.getData(\'date_joined\')}}</p></div><div class=profile-char-edit flex ng-show="profile.swEditarCuenta==\'editar_notificaciones\'"><p>Recibir notificaciones vía:</p><md-radio-group layout ng-model=profile.ca.canal><md-radio-button value=SMS>SMS</md-radio-button><md-radio-button value=CORREO>CORREO ELECTRÓNICO</md-radio-button><md-radio-button value=SMS_CORREO>SMS Y CORREO ELECTRÓNICO</md-radio-button></md-radio-group><br><md-input-container ng-if="profile.ca.canal==\'SMS\' || profile.ca.canal==\'SMS_CORREO\'"><label>Nro. de celular</label><input ng-model=profile.ca.celular></md-input-container><md-input-container ng-if="profile.ca.canal==\'CORREO\' || profile.ca.canal==\'SMS_CORREO\'"><label>Correo electrónico</label><input ng-model=profile.ca.email disabled></md-input-container><p>De documentos que me:</p><div layout><md-checkbox ng-model=profile.ca.enviado ng-if=profile.getEsJefe()>envien</md-checkbox><md-checkbox ng-model=profile.ca.observado disabled>observen</md-checkbox><md-checkbox ng-model=profile.ca.aprobado>aprueben</md-checkbox><md-checkbox ng-model=profile.ca.derivado>deriven</md-checkbox></div><div layout><!-- <div flex></div> --><md-button class="md-raised md-primary" ng-click=profile.editarConfiguracion()><md-icon>check</md-icon>Guardar</md-button><md-button class=md-raised ng-click=profile.cancelarEditar()><md-icon>cancel</md-icon>Cancelar</md-button><div flex></div></div></div><div class=profile-char-edit flex ng-show="profile.swEditarCuenta==\'editar_cuenta\'"><form name=cuentaForm><div layout-gt-sm=row layout-align="center center"><h3>Modificar cuenta de usuario</h3></div><div layout-gt-sm=row><md-input-container flex-gt-sm><label>Número de documento</label><input name=numero_documento ng-model=profile.numero_documento required><div ng-messages=cuentaForm.numero_documento.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container flex-gt-sm><label>Nombre de usuario</label><input name=nombre_usuario ng-model=profile.nombre_usuario required><div ng-messages=cuentaForm.nombre_usuario.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container flex-gt-sm><label>Correo eletrónico</label><input name=email ng-model=profile.email required type=email><div ng-messages=cuentaForm.email.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container></div><div layout-gt-sm=row><md-input-container flex-gt-sm=50><label>Nombre(s)</label><input name=nombres ng-model=profile.nombres required><div ng-messages=cuentaForm.nombres.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container flex-gt-sm><label>Apellidos</label><input name=apellidos ng-model=profile.apellidos required><div ng-messages=cuentaForm.apellidos.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container></div><div layout><div flex></div><md-button class="md-raised md-primary" ng-click=profile.editarCuenta()><md-icon>check</md-icon>Guardar</md-button><md-button class=md-raised ng-click=profile.cancelarEditar()><md-icon>cancel</md-icon>Cancelar</md-button></div></form></div><div class=profile-char-edit flex ng-show="profile.swEditarCuenta==\'editar_contrasena\'"><form name=cuentaPassForm><div layout><div flex=0 flex-gt-sm=30></div><div flex-gt-sm=40 layout=column layout-align="center stretch"><h3>Modificar contraseña de usuario</h3><md-input-container flex><label>Contraseña actual</label><input name=contrasena ng-model=profile.contrasena required type=password><div ng-messages=cuentaPassForm.contrasena.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container flex><label>Contraseña nueva</label><input name=contrasena_nueva ng-model=profile.contrasena_nueva required type=password><div ng-messages=cuentaPassForm.contrasena_nueva.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container flex><label>Confirmar contraseña nueva</label><input name=contrasena_confirm ng-model=profile.contrasena_confirm required type=password><div ng-messages=cuentaPassForm.contrasena_confirm.$error><div ng-message=required>Debe llenar este campo</div></div></md-input-container><div layout><div flex></div><md-button class="md-raised md-primary" ng-click=profile.editarCuenta()><md-icon>check</md-icon>Guardar</md-button><md-button class=md-raised ng-click=profile.cancelarEditar()><md-icon>cancel</md-icon>Cancelar</md-button></div></div></div></form></div></div></div>'),e.put("app/modules/admin/usuarios/dialog.usuario.html",'<md-dialog ng-cloak class="formly-dialog formly-column-{{column}}" style="max-width: 800px; width: 100%"><form ng-submit=registrarUsuario() name=usuarioForm><md-toolbar><div class=md-toolbar-tools><h2><md-icon>business</md-icon>{{data.id_usuario == null ? "Nuevo usuario" : "Editar usuario"}}</h2><span flex></span> <span flex></span><md-button class=md-icon-button aria-label=Cerrar ng-click=cerrar($event)><md-tooltip>Cerrar</md-tooltip><md-icon>close</md-icon></md-button></div></md-toolbar><md-dialog-content class=md-dialog-content><div layout=row><md-card style=width:50%><md-card-header><md-card-header-text><span class=md-title>Datos personales</span></md-card-header-text></md-card-header><md-card-content><md-input-container class=md-block flex-gt-sm><label>Nro documento de identidad</label><input ng-model=data.numero_documento type=text required></md-input-container><md-input-container class=md-block flex-gt-sm><label>Nombre(s)</label><input ng-model=data.nombres type=text required></md-input-container><md-input-container class=md-block flex-gt-sm><label>Apellidos</label><input ng-model=data.apellidos type=text required></md-input-container><md-input-container class=md-block flex-gt-sm><label>Cargo</label><input ng-model=data.cargo type=text required></md-input-container><md-input-container class=md-block flex-gt-sm><label>Correo electronico</label><input ng-model=data.email type=email required></md-input-container></md-card-content></md-card><md-card style=width:50%><md-card-header><md-card-header-text><span class=md-title>Datos de usuario</span></md-card-header-text></md-card-header><md-card-content><md-input-container class=md-block flex-gt-sm><label>Nombre de usuario</label><input ng-model=data.usuario type=text required></md-input-container><md-input-container class=md-block flex-gt-sm><label>Estado</label><md-select ng-model=data.estado name=estado required><md-option ng-value="\'ACTIVO\'">ACTIVO</md-option><md-option ng-value="\'INACTIVO\'">INACTIVO</md-option></md-select><div ng-messages=usuarioForm.estado.$error ng-show=usuarioForm.estado.$dirty><div ng-message=required>Debe seleccionar un estado</div></div></md-input-container><md-input-container class=md-block flex-gt-sm><label>Unidad</label><md-select ng-model=data.fid_unidad name=unidad><md-option ng-value=u.id_unidad ng-repeat="u in data.unidades">{{u.abreviacion+\' - \'+u.nombre}}</md-option></md-select></md-input-container><h3>Roles</h3><md-input-container class=md-block flex-gt-sm ng-show=rol ng-repeat="rol in data.roles"><md-checkbox ng-model=rol.valor aria-label={{rol.nombre}}>{{rol.nombre}}</md-checkbox></md-input-container></md-card-content></md-card></div></md-dialog-content><md-dialog-actions layout=row><span flex></span><md-button type=submit class="md-raised md-primary" ng-disabled=usuarioForm.$invalid><md-icon>check</md-icon>Guardar</md-button><md-button class=md-raised ng-click=cerrar()><md-icon>cancel</md-icon>Cancelar</md-button></md-dialog-actions></form></md-dialog>'),e.put("app/modules/admin/usuarios/edit.dialog.html",'<md-dialog aria-label=Agregar/Editar ng-cloak><form id=data-form name=form ng-submit="answer(\'save\')"><md-toolbar><div class=md-toolbar-tools><h2>{{title}}</h2><span flex></span><md-button class=md-icon-button ng-click=cancel()><md-icon aria-label="Close dialog">close</md-icon></md-button></div></md-toolbar><md-dialog-content><div class=md-dialog-content><md-content layout-gt-sm=column layout-padding style="overflow: initial"><md-input-container><label>Nombre de usuario</label><input ng-model=data.username required></md-input-container><md-input-container ng-if=add><label>Contraseñssssa</label><input ng-model=data.password type=password required></md-input-container><md-input-container><label>Email</label><input ng-model=data.email type=email></md-input-container><md-input-container class=md-block flex-gt-sm><label>Nombre(s)</label><input ng-model=data.first_name></md-input-container><md-input-container class=md-block flex-gt-sm><label>Apellido(s)</label><input ng-model=data.last_name></md-input-container><input ng-model=data.id type=hidden> <input ng-model=data.is_active type=hidden></md-content></div></md-dialog-content><md-dialog-actions layout=row><span flex></span><md-button class=md-raised ng-click="answer(\'cancel\')"><md-icon>cancel</md-icon>Cancelar</md-button><md-button type=submit class="md-raised md-primary" ng-disabled=form.$invalid><md-icon>check</md-icon>Guardar</md-button></md-dialog-actions></form></md-dialog>'),e.put("app/modules/admin/usuarios/modules.admin.usuarios.html","<div class=container><crud-table url=usuarios.url title-table=usuarios.title fields=usuarios.fields usuario=usuarios.usuario template=usuarios.template dialog-controller=usuarios.dialogController permission=usuarios.permission></crud-table></div>"),e.put("app/modules/admin/virtual/virtual.html",'<div class=container><md-card-content><div layout layout-xs=column layout-sm=column layout-align="center center"><div class=contenedorVirtual ng-repeat="item in virtual.usuariosVirtuales"><div class=boton-circular layout-xs=row><md-tooltip>{{item.nombres}}</md-tooltip><img class=icon-circular-imagen src=assets/images/certificate.png ng-click=virtual.seleccionar(item)></div><div><div><strong>{{item.nombres}}</strong></div><div>{{item.cargo}}</div></div></div></div></md-card-content></div>'),e.put("app/modules/plantillasFormly/aprobacion/dialogPDF.html",'<md-dialog aria-label=Agregar/Editar ng-cloak class="formly-dialog formly-column-{{column}} dialog-aprobacion" style="max-width: 800px; width: 100%"><form name=obsForm><md-toolbar><div class=md-toolbar-tools><h2><md-icon>picture_as_pdf</md-icon>Documento creado por {{data.nombres +\' \'+ data.apellidos}}</h2><span flex></span><md-button class=md-icon-button aria-label="Ver pdf" ng-click=verPdf() ng-show=data.flag_html><md-tooltip>Ver PDF</md-tooltip><md-icon aria-label="Close dialog">picture_as_pdf</md-icon></md-button><md-button class=md-icon-button aria-label="Ver html" ng-click=verHtml() ng-show=!data.flag_html><md-tooltip>Ver html</md-tooltip><md-icon aria-label="Close dialog">code</md-icon></md-button><md-button class=md-icon-button aria-label=Cerrar ng-click=cerrar()><md-tooltip>Cerrar</md-tooltip><md-icon aria-label="Close dialog">close</md-icon></md-button></div></md-toolbar><md-dialog-content class=md-dialog-content><div layout=column ng-if="!data.es_para && !data.es_derivar"><md-input-container style="width=100%"><label>{{ (data.accion==\'derivar\')? \'Proveído\': \'Observaciones\'}}</label><textarea name=obs ng-model=data.observaciones md-maxlength=250 rows=2 required></textarea></md-input-container></div><div layout=column ng-if="!data.es_derivar && data.es_para"><md-tabs md-dynamic-height md-border-bottom md-selected=4 md-stretch-tabs=always md-pagination-wrapper><md-tab label="Aprobar y crear" md-on-select="data.accion=\'crear\'"><md-content class=md-padding></md-content></md-tab><md-tab label="Aprobar y derivar" md-on-select="data.accion=\'derivar\'"><md-content layout=column class=md-padding><md-input-container><label>Usuario</label><md-select name=user ng-model=data._usuario_seleccionado required><md-option ng-repeat="us in data.usuarios" ng-value=us.id_usuario>{{us.nombres+\' \'+us.apellidos}}<br>-{{us.cargo}}-</md-option></md-select></md-input-container><md-input-container style="width=100%"><label>Proveído</label><textarea name=obs ng-model=data.observaciones md-maxlength=250 rows=2 required></textarea></md-input-container></md-content></md-tab><md-tab label="Aprobar y cerrar" md-on-select="data.accion=\'cerrar\'"><md-content class=md-padding></md-content></md-tab><md-tab label=Observar md-on-select="data.accion=\'observar\'"><md-content layout=column class=md-padding><md-input-container style="width=100%"><label>Observaciones</label><textarea name=obs ng-model=data.observaciones md-maxlength=250 rows=2 required></textarea></md-input-container></md-content></md-tab></md-tabs></div><div layout=column ng-if=data.es_derivar><div>Proveído de {{ data.usuario_proveido}}<br>{{data.dc.observaciones}}<div><br></div></div><md-input-container><label>Usuario</label><md-select name=user ng-model=data._usuario_seleccionado required><md-option ng-repeat="us in data.usuarios" ng-value=us.id_usuario>{{us.nombres+\' \'+us.apellidos}}<br>-{{us.cargo}}-</md-option></md-select></md-input-container><md-input-container style="width=100%"><label>Proveído</label><textarea name=obs ng-model=data.observaciones md-maxlength=250 rows=2 required></textarea></md-input-container></div><div ng-if=data.sw_es_respuesta><div class="ap-text-center ap-text-warning">Referencias:</div><div class="ap-text-center ap-text-warning" ng-repeat="dg in data.docs_grupo" ng-if="dg.id_documento!=data.dc.id_documento">* {{dg.nombre_plantilla}} -- <span class=ap-cursor-pointer ng-click=verDocumento(dg.id_documento)>{{dg.nombre}}</span></div></div><div ng-show=data.flag_html bind-html-compile=data.html></div><iframe class=iframe-pdf src={{data.pdf}} style="width:100%; height:600px; border: none" ng-if="data.show_pdf && !data.flag_html" allowfullscreen></iframe><div id=canvasContainer ng-show="!data.show_pdf && !data.flag_html"></div></md-dialog-content><md-dialog-actions><span flex></span><div ng-if=data.es_derivar><md-button class="ap md-raised bt-bg-warning" ng-click=derivar() ng-disabled="obsForm.user.$invalid || obsForm.obs.$invalid"><md-icon>check</md-icon>Derivar</md-button><md-button class="ap md-raised bt-bg-success" ng-click=openSelect($event)><md-icon>error</md-icon>Crear documento</md-button><md-input-container style="transform: scale(0.01)" ng-show=data.show_select><md-select name=plantilla ng-model=data._plantilla_seleccionada required ng-change=crear() md-on-close="data.show_select=false;"><md-option ng-repeat="pla in data.plantillas_disponibles" ng-value=pla>{{pla.nombre}} ({{pla.abreviacion}})</md-option></md-select></md-input-container></div><div ng-if=!data.es_derivar><md-button class="ap md-raised" ng-class="{\'bt-bg-success\': data.es_para}" ng-click=openSelect($event) ng-if="data.es_para && data.accion==\'crear\'"><md-icon>error</md-icon>Crear documento</md-button><md-input-container style="transform: scale(0.01)" ng-show=data.show_select><md-select name=plantilla ng-model=data._plantilla_seleccionada required ng-change=crear(true) md-on-close="data.show_select=false;"><md-option ng-repeat="pla in data.plantillas_disponibles" ng-value=pla>{{pla.nombre}} ({{pla.abreviacion}})</md-option></md-select></md-input-container><md-button class="ap md-raised" ng-class="{\'bt-bg-warning\': data.es_para}" ng-click="aprobar(\'derivar\')" ng-disabled=obsForm.user.$invalid ng-if="data.es_para && data.accion==\'derivar\'"><md-icon>check</md-icon>Derivar</md-button><md-button class="ap md-raised" ng-class="{\'bt-bg-info\': data.es_para, \'bt-bg-success\': !data.es_para}" ng-click="aprobar(\'aprobar\')" ng-if="!data.es_para || data.accion==\'cerrar\'"><md-icon>check</md-icon>Aprobar</md-button><md-button class="ap md-raised bt-bg-danger" ng-click=observar() ng-disabled=obsForm.obs.$invalid ng-if="!data.es_para || data.accion==\'observar\'"><md-icon>error</md-icon>Observar</md-button></div><md-button class=md-raised ng-click=cerrar()><md-icon>cancel</md-icon>Cancelar</md-button></md-dialog-actions></form></md-dialog>'),e.put("app/modules/plantillasFormly/aprobacion/modules.plantillasFormly.aprobacion.html","<div class=container><crud-table url=aprobacion.url title-table=aprobacion.titulo fields=aprobacion.fields usuario=aprobacion.usuario permission=aprobacion.permission buttons=aprobacion.buttons query-extra=aprobacion.queryExtra only-fields=true estado-checks=true estado-opciones=aprobacion.estadoOpciones></crud-table><br><br></div>"),
e.put("app/modules/plantillasFormly/contactos/dialog.contactos.html",'<md-dialog ng-cloak class="formly-dialog formly-column-{{column}}" style="max-width: 800px; width: 100%"><form ng-submit=registrarContacto() name=contactoForm novalidate><md-toolbar><div class=md-toolbar-tools><h2><md-icon>business</md-icon>{{titulo}}</h2><span flex></span><md-button class=md-icon-button aria-label=Cerrar ng-click=cerrar()><md-tooltip>Cerrar</md-tooltip><md-icon>close</md-icon></md-button></div></md-toolbar><md-dialog-content><div layout><md-card flex><md-card-header><md-card-header-text><span class=md-title>Datos del contacto</span></md-card-header-text></md-card-header><md-card-content><md-input-container class=md-block><label>Grado</label><input ng-model=data.grado type=text><div ng-messages=contactoForm.grado.$error ng-show=contactoForm.grado.$dirty><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block><label>Nombres</label><input ng-model=data.nombres type=text required><div ng-messages=contactoForm.nombres.$error ng-show=contactoForm.nombres.$dirty><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block><label>Apellidos</label><input ng-model=data.apellidos type=text required><div ng-messages=contactoForm.apellidos.$error ng-show=contactoForm.apellidos.$dirty><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block><label>Cargo</label><input ng-model=data.cargo type=text><div ng-messages=contactoForm.cargo.$error ng-show=contactoForm.cargo.$dirty><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block><label>Teléfono/Celular</label><input ng-model=data.telefono type=text><div ng-messages=contactoForm.telefono.$error ng-show=contactoForm.telefono.$dirty><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block><label for=estado>Estado</label><md-select name=estado ng-model=data.estado placeholder=Estado required><md-option ng-value=item.id ng-repeat="item in estados">{{ item.name }}</md-option></md-select><div ng-messages=contactoForm.estado.$error ng-show=contactoForm.estado.$dirty><div ng-message=required>Debe seleccionar una opción</div></div></md-input-container></md-card-content></md-card><md-card flex><md-card-header><md-card-header-text><span class=md-title>Datos de la entidad</span></md-card-header-text></md-card-header><md-card-content><md-input-container class=md-block><label>Entidad</label><input ng-model=data.entidad type=text required><div ng-messages=contactoForm.entidad.$error ng-show=contactoForm.entidad.$dirty><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block><label for=tipo_entidad>Tipo de entidad</label><md-select name=tipo_entidad ng-model=data.tipo_entidad placeholder="Tipo de entidad" required><md-option ng-value=item.tipo_entidad ng-repeat="item in tiposEntidad" ng-click=habilitarOtro(item)>{{ item.tipo_entidad }}</md-option></md-select><div ng-messages=contactoForm.tipo_entidad.$error ng-show=contactoForm.tipo_entidad.$dirty><div ng-message=required>Debe seleccionar una opción</div></div></md-input-container><md-input-container class=md-block ng-if="otroEditar==true"><label>Tipo de entidad</label><input ng-model=data.otro_tipo type=text required><div ng-messages=contactoForm.otro_tipo.$error ng-show=contactoForm.otro_tipo.$dirty><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block><label>Sigla</label><input ng-model=data.sigla type=text><div ng-messages=contactoForm.sigla.$error ng-show=contactoForm.sigla.$dirty><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block><label>Dirección</label><input ng-model=data.direccion type=text required><div ng-messages=contactoForm.direccion.$error ng-show=contactoForm.direccion.$dirty><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block><label for=departamento>Departamento</label><md-select name=departamento ng-model=data.departamento placeholder=Departamento required><md-option ng-value=item.id ng-repeat="item in departamentos">{{ item.name }}</md-option></md-select><div ng-messages=contactoForm.departamento.$error ng-show=contactoForm.departamento.$dirty><div ng-message=required>Debe seleccionar una opción</div></div></md-input-container></md-card-content></md-card></div></md-dialog-content><md-dialog-actions layout layout-padding><span flex></span><md-button type=submit class="md-raised md-primary" ng-disabled=contactoForm.$invalid><md-icon>check</md-icon>Guardar</md-button><md-button type=button class=md-raised ng-click=cerrar()><md-icon>cancel</md-icon>Cancelar</md-button></md-dialog-actions></form></md-dialog>'),e.put("app/modules/plantillasFormly/contactos/modules.plantillasFormly.contactos.html","<div class=container><crud-table url=contactos.url title-table=contactos.titulo fields=contactos.fields usuario=contactos.usuario dialog-controller=contactos.dialogController permission=contactos.permission order=contactos.order template=contactos.template></crud-table></div>"),e.put("app/modules/plantillasFormly/documentos/documento.dialog.html",'<md-dialog aria-label="Elegir plantilla" class="formly-dialog formly-column-{{column}}" style="max-width: 600px; width: 100%"><md-toolbar><div class=md-toolbar-tools><h2><md-icon>dashboard</md-icon>Elegir documento</h2><span flex></span></div></md-toolbar><p style=margin-left:10px>Seleccione un documento y haga click en aceptar:</p><md-input-container style="margin-left:10px !important"><input ng-model=p.buscarPlantilla></md-input-container><md-dialog-content class=md-dialog-content><div flex layout><div flex></div><md-radio-group ng-model=plantilla_seleccionada><md-radio-button ng-repeat="p in plantillas_disponibles| filter:p.buscarPlantilla" ng-value=p.id_plantilla_formly class=md-primary>{{p.nombre}} ({{p.abreviacion}})</md-radio-button></md-radio-group><div flex></div></div></md-dialog-content><md-dialog-actions><div flex></div><md-button class="md-raised md-primary" ng-click=elegir()><md-icon>check</md-icon><span>Aceptar</span></md-button></md-dialog-actions></md-dialog>'),e.put("app/modules/plantillasFormly/documentos/modules.plantillasFormly.documentos.html","<div class=container><crud-table url=documentos.url title-table=documentos.titulo fields=documentos.fields usuario=documentos.usuario permission=documentos.permission buttons=documentos.buttons button-agregar=documentos.buttonAgregar only-fields=true estado-checks=true estado-opciones=documentos.estadoOpciones></crud-table><br><br></div>"),e.put("app/modules/plantillasFormly/enCurso/modules.plantillasFormly.enCurso.html","<div class=container><crud-table url=enCurso.url title-table=enCurso.titulo fields=enCurso.fields usuario=enCurso.usuario permission=enCurso.permission buttons=enCurso.buttons only-fields=true></crud-table><br><br></div>"),e.put("app/modules/plantillasFormly/firmar/modules.plantillasFormly.firmar.html",'<div class=container><div style="color:red; font-style:italic">NOTA(S):<ol><li>Se debe priorizar el uso del firmador FIRMATIC.</li><li>La opción de firma con DEMOFI estará activo sólo de manera temporal y para casos especiales, mientras se realiza la transición al nuevo firmador FIRMATIC.</li></ol></div><crud-table url=firmar.url title-table=firmar.titulo fields=firmar.fields usuario=firmar.usuario permission=firmar.permission buttons=firmar.buttons only-fields=true items=firmar.items seleccionados=firmar.obtenerSeleccionados habilitar-seleccion=firmar.habilitarSeleccion></crud-table><md-button class="md-raised md-primary" ng-click=firmar.firmarDocumentos() ng-disabled=!firmar.habilitarBotonFirma><md-icon>done_all</md-icon><md-tooltip md-direction=right>Firmar Digitalmente</md-tooltip>Firmar con DEMOFI</md-button><md-button class="md-raised md-primary" ng-click=firmar.firmarDocumentos2() ng-disabled=!firmar.habilitarBotonFirma><md-icon>done_all</md-icon><md-tooltip md-direction=right>Firmar Digitalmente</md-tooltip>Firmar con FIRMATIC</md-button><br></div>'),e.put("app/modules/plantillasFormly/impresion/modules.plantillasFormly.impresion.html","<div class=container><crud-table url=impresion.url title-table=impresion.titulo fields=impresion.fields usuario=impresion.usuario permission=impresion.permission buttons=impresion.buttons button-agregar=impresion.multiple query-extra=impresion.queryExtra estado-sw=true only-fields=true search-pro=true></crud-table><br><br></div>"),e.put("app/modules/plantillasFormly/impresion/multiple.dialog.html",'<md-dialog aria-label="Impresion multiple" class="formly-dialog formly-column-{{column}}" style="max-width: 600px; width: 100%"><md-toolbar><div class=md-toolbar-tools><h2><md-icon>print</md-icon>Impresion multiple</h2><span flex></span><md-button class="md-icon-button md-toast-button-close" ng-click=cancel()><md-icon aria-label="Close dialog">close</md-icon></md-button></div></md-toolbar><md-dialog-content class=md-dialog-content><form name=multipleForm ng-submit=obtenerDocumento()><div flex layout><md-input-container class=md-block flex-gt-sm><label>Escríba el cite de un documento multiple</label><input ng-model=cite type=text required></md-input-container><md-button class="md-fab md-mini md-primary" type=submit ng-disabled=multipleForm.$invalid><md-icon>search</md-icon></md-button><!-- <md-button class="md-fab md-mini md-primary" ng-click="obtenerDocumento()">\n          <md-icon>search</md-icon>\n        </md-button> --></div></form><iframe class=iframe-pdf src={{documentoAImprimir.url}} style="width:100%; height:600px; border: none" ng-if=documentoAImprimir.url allowfullscreen></iframe></md-dialog-content></md-dialog>'),e.put("app/modules/plantillasFormly/monitoreo/dialogPresupuestoPDF.html",'<md-dialog aria-label="Documento PDF" class="formly-dialog formly-column-{{column}} dialog-pdf" style="max-width: 800px; width: 100%"><md-toolbar><div class=md-toolbar-tools><h2><md-icon>picture_as_pdf</md-icon>Vista previa</h2><span flex></span><md-button class=md-icon-button aria-label="Ver pdf" ng-click=verPdf() ng-show=data.flag_html><md-tooltip>Ver PDF</md-tooltip><md-icon aria-label="Close dialog">picture_as_pdf</md-icon></md-button><md-button class=md-icon-button aria-label="Ver html" ng-click=verHtml() ng-show=!data.flag_html><md-tooltip>Ver html</md-tooltip><md-icon aria-label="Close dialog">code</md-icon></md-button><md-button class=md-icon-button aria-label=Cerrar ng-click=cerrar()><md-tooltip>Cerrar</md-tooltip><md-icon aria-label="Close dialog">close</md-icon></md-button></div></md-toolbar><md-dialog-content class=md-dialog-content><iframe class=iframe-pdf src={{data.pdf}} style="width:100%; height:600px; border: none" ng-if="data.show_pdf && !data.flag_html" allowfullscreen></iframe><div id=canvasContainer ng-show="!data.show_pdf && !data.flag_html"></div><div ng-if=false><p>Tu navegador web no puede visualizar archivos PDF. Pero tu puedes hacer <a ng-href={{data.pdf}} target=_blank>click aqui para descargar el PDF</a></p></div></md-dialog-content><md-dialog-actions><span flex></span><md-button class=md-raised ng-click=cerrar()><md-icon>cancel</md-icon>Cancelar</md-button></md-dialog-actions></md-dialog>'),e.put("app/modules/plantillasFormly/monitoreo/modules.plantillasFormly.monitoreo.html",'<div class="container container-monitoreo"><md-card><md-toolbar class=md-table-toolbar><div class=md-toolbar-tools><md-icon>grid_on</md-icon><span>Monitoreo</span><div flex></div><md-button class=md-icon-button ng-click=monitoreo.refrescarChart()><md-tooltip>Actualizar</md-tooltip><md-icon>refresh</md-icon></md-button><md-button class="md-icon-button btn-collapsed"><md-tooltip>Ocultar/Ver</md-tooltip><md-icon>keyboard_arrow_down</md-icon></md-button></div></md-toolbar><md-card-content><div layout=column layout-gt-sm style="margin-top: 15px"><div><md-input-container><label>Gráfico</label><md-select ng-model=monitoreo.grafico placeholder="Selecciona que grafico ver" ng-change=monitoreo.reiniciarChart()><md-option ng-value=g ng-repeat="g in monitoreo.graficos">{{g.nombre}}</md-option></md-select></md-input-container><md-input-container ng-if="monitoreo.grafico.cod==4 || monitoreo.grafico.cod==7 || monitoreo.grafico.cod==8"><label>Gestión</label><md-select ng-model=monitoreo.gestion ng-change=monitoreo.refrescarChart()><md-option ng-value=$index ng-repeat="a in monitoreo.gestiones">{{a.gestion}}</md-option></md-select></md-input-container><md-input-container ng-if="[4, 5, 6, 7, 8, 9].indexOf(monitoreo.grafico.cod) == -1"><label>Año</label><md-select ng-model=monitoreo.anio ng-change=monitoreo.refrescarChart()><md-option ng-value=$index ng-repeat="a in monitoreo.anios">{{a}}</md-option></md-select></md-input-container><md-input-container ng-if="monitoreo.grafico.cod === 9"><label>Año</label><md-select ng-model=monitoreo.anioContable ng-change=monitoreo.refrescarChart()><md-option ng-value=$index ng-repeat="a in monitoreo.aniosContables">{{a}}</md-option></md-select></md-input-container><md-input-container ng-if="monitoreo.grafico.cod!==4 && monitoreo.grafico.cod!=5 && monitoreo.grafico.cod!=6 && monitoreo.grafico.cod!=7 && monitoreo.grafico.cod!=8 && monitoreo.grafico.cod!=9"><label>Mes</label><md-select ng-model=monitoreo.mes ng-change=monitoreo.refrescarChart()><md-option ng-value=$index ng-repeat="m in monitoreo.meses">{{m}}</md-option></md-select></md-input-container><md-input-container ng-if="monitoreo.grafico.cod===9"><label>Tipo documento</label><md-select ng-model=monitoreo.tipoInformePago ng-change=monitoreo.refrescarChart()><md-option ng-value=$index ng-repeat="m in monitoreo.docsContables">{{m}}</md-option></md-select></md-input-container><md-input-container class=input-search ng-if="monitoreo.grafico.cod==3"><label>Usuarios</label><md-select ng-model=monitoreo.usuario ng-change=monitoreo.refrescarChart()><md-option ng-value=u.id_usuario ng-repeat="u in monitoreo.usuarios | filter:monitoreo.usuario_buscar">{{u.usuario}}</md-option></md-select></md-input-container><md-input-container class=input-search ng-if="monitoreo.grafico.cod==3"><label>Nombres</label><md-select ng-model=monitoreo.usuario ng-change=monitoreo.refrescarChart()><md-option ng-value=u.id_usuario ng-repeat="u in monitoreo.usuarios | filter:monitoreo.usuario_buscar">{{u.nombres}} {{u.apellidos}}</md-option></md-select></md-input-container><div class=paginador ng-if="[0, 4, 5, 6, 7, 8, 9].indexOf(monitoreo.grafico.cod) == -1 "><!-- <div class="paginador" ng-if="monitoreo.grafico.cod!=0 && monitoreo.grafico.cod!=4 && monitoreo.grafico.cod!=5 && monitoreo.grafico.cod!=6 && monitoreo.grafico.cod!=7 && monitoreo.grafico.cod!=8"> --><md-button ng-click="monitoreo.paginar(\'aa\')" ng-disabled="monitoreo.page<=1"><md-icon>first_page</md-icon></md-button><md-button ng-click="monitoreo.paginar(\'a\')" ng-disabled="monitoreo.page<=1"><md-icon>chevron_left</md-icon></md-button><md-input-container><label>Intervalo</label><input ng-model=monitoreo.page_text size=7 disabled></md-input-container><md-button ng-click="monitoreo.paginar(\'s\')" ng-disabled="monitoreo.page*20>=monitoreo.page_tot"><md-icon>chevron_right</md-icon></md-button><md-button ng-click="monitoreo.paginar(\'ss\')" ng-disabled="monitoreo.page*20>=monitoreo.page_tot"><md-icon>last_page</md-icon></md-button></div><md-input-container ng-if="monitoreo.grafico.cod==5"><label>Fecha Inicial</label><md-datepicker ng-model=monitoreo.fechaInicial md-placeholder="Fecha Inicial" ng-change=monitoreo.reiniciarChart()></md-datepicker></md-input-container><md-input-container ng-if="monitoreo.grafico.cod==5"><label>Fecha Final</label><md-datepicker ng-model=monitoreo.fechaFinal md-placeholder="Fecha Final" ng-change=monitoreo.reiniciarChart()></md-datepicker></md-input-container></div><div flex></div><div style=float:right ng-if="monitoreo.grafico.cod==4 "><md-button class="md-fab md-primary" ng-csv=monitoreo.filasPresupuesto() field-separator=| csv-header=monitoreo.cabeceraPresupuesto() filename=Presupuesto.csv><md-icon>library_books</md-icon><md-tooltip md-direction=left>Exportar a CSV</md-tooltip></md-button><md-button class="md-fab md-primary" ng-click=monitoreo.generarPDF()><md-icon>picture_as_pdf</md-icon><md-tooltip md-direction=left>Exportar a PDF</md-tooltip></md-button></div><div style=float:right ng-if="monitoreo.grafico.cod===9 "><md-button class="md-fab md-primary" ng-csv=monitoreo.filasPresupuesto() field-separator=| csv-header=monitoreo.cabeceraPresupuesto() filename="{{monitoreo.generarNombre(\'ABC\')}}.csv"><md-icon>library_books</md-icon><md-tooltip md-direction=left>Exportar a CSV</md-tooltip></md-button></div></div><div layout layout-align="center start" ng-if="[4, 5, 6, 7, 8, 9].indexOf(monitoreo.grafico.cod) == -1"><chart-graph ancho=1000 alto=500 tipo=monitoreo.chart.tipo datos=monitoreo.chart.datos actualizar=monitoreo.chart.actualizar reiniciar=monitoreo.chart.reiniciar></chart-graph></div><!--Presupuesto--><div ng-if="monitoreo.grafico.cod==4"><div flex style=float:right><md-checkbox ng-repeat="header in monitoreo.headers" ng-model=header.mostrar aria-label=Mostrar/Ocultar ng-if=!header.mostrar>{{header.title}}</md-checkbox></div><md-table-container><table md-table ng-model=selected md-progress=promise><thead md-head><tr md-row><th ng-repeat="header in monitoreo.headers" md-column ng-if=header.mostrar><span><md-checkbox ng-model=header.mostrar aria-label=Mostrar/Ocultar></md-checkbox><md-tooltip md-direction=bottom>Ocultar esta columna</md-tooltip><md-button ng-click="monitoreo.ordenarPor = header.name;  monitoreo.ordenInverso = !monitoreo.ordenInverso">{{header.title}}<md-icon ng-show="monitoreo.ordenarPor == header.name && !monitoreo.ordenInverso">keyboard_arrow_down</md-icon><md-icon ng-show="monitoreo.ordenarPor == header.name && monitoreo.ordenInverso">keyboard_arrow_up</md-icon></md-button></span><md-input-container class=md-block flex-gt-sm ng-show="header.name === \'numero\'"><input ng-model=monitoreo.busqueda.numero></md-input-container><md-input-container class=md-block flex-gt-sm ng-show="header.name === \'descripcion\'"><input ng-model=monitoreo.busqueda.descripcion></md-input-container><div style="height: 65px; width: 20px; border: 0px solid red" ng-show="header.name !== \'descripcion\' && header.name !== \'numero\'"></div></th></tr></thead><tbody md-body><tr md-row md-select=item ng-repeat="item in monitoreo.items | orderBy:monitoreo.ordenarPor:monitoreo.ordenInverso | filter:monitoreo.busqueda"><td md-cell ng-if="monitoreo.mostrarOcultar(\'numero\')" style="text-align: right">{{item.numero.replace(\',00\', \'\') }}</td><td md-cell ng-if="monitoreo.mostrarOcultar(\'descripcion\')">{{item.descripcion}}</td><td md-cell ng-if="monitoreo.mostrarOcultar(\'inicial\')" style="text-align: right">{{item.inicial}}</td><td md-cell ng-if="monitoreo.mostrarOcultar(\'comprometido\')" style="text-align: right">{{item.comprometido}}</td><td md-cell ng-if="monitoreo.mostrarOcultar(\'pagado\')" style="text-align: right">{{item.pagado}}</td><td md-cell ng-if="monitoreo.mostrarOcultar(\'modificado\')" style="text-align: right">{{item.modificado}}</td><td md-cell ng-if="monitoreo.mostrarOcultar(\'vigente\')" style="text-align: right">{{item.vigente}}</td><td md-cell ng-if="monitoreo.mostrarOcultar(\'saldo\')" style="text-align: right">{{item.saldo}}</td></tr></tbody></table></md-table-container></div><!--Documentos por estado y usuario--><div ng-if="monitoreo.grafico.cod==5"><md-table-container><table md-table ng-model=selected md-progress=promise><thead md-head><tr md-row><th md-column><md-button ng-click="monitoreo.ordenarPor = \'nombres\'; monitoreo.ordenInverso = !monitoreo.ordenInverso">Usuario<md-icon ng-show="monitoreo.ordenarPor == \'nombres\' && !monitoreo.ordenInverso">keyboard_arrow_down</md-icon><md-icon ng-show="monitoreo.ordenarPor == \'nombres\' && monitoreo.ordenInverso">keyboard_arrow_up</md-icon></md-button></th><th md-column><md-button ng-click="monitoreo.ordenarPor = \'CREADO\'; monitoreo.ordenInverso = !monitoreo.ordenInverso">Creados<md-icon ng-show="monitoreo.ordenarPor == \'CREADO\' && !monitoreo.ordenInverso">keyboard_arrow_down</md-icon><md-icon ng-show="monitoreo.ordenarPor == \'CREADO\' && monitoreo.ordenInverso">keyboard_arrow_up</md-icon></md-button></th><th md-column><md-button ng-click="monitoreo.ordenarPor=\'ENVIADO\'; monitoreo.ordenInverso = !monitoreo.ordenInverso">Enviados<md-icon ng-show="monitoreo.ordenarPor == \'ENVIADO\' && !monitoreo.ordenInverso">keyboard_arrow_down</md-icon><md-icon ng-show="monitoreo.ordenarPor == \'ENVIADO\' && monitoreo.ordenInverso">keyboard_arrow_up</md-icon></md-button></th><th md-column><md-button ng-click="monitoreo.ordenarPor=\'DERIVADO\'; monitoreo.ordenInverso = !monitoreo.ordenInverso">Derivados<md-icon ng-show="monitoreo.ordenarPor == \'DERIVADO\' && !monitoreo.ordenInverso">keyboard_arrow_down</md-icon><md-icon ng-show="monitoreo.ordenarPor == \'DERIVADO\' && monitoreo.ordenInverso">keyboard_arrow_up</md-icon></md-button></th><th md-column><md-button ng-click="monitoreo.ordenarPor=\'APROBADO\'; monitoreo.ordenInverso = !monitoreo.ordenInverso">Aprobados<md-icon ng-show="monitoreo.ordenarPor == \'APROBADO\' && !monitoreo.ordenInverso">keyboard_arrow_down</md-icon><md-icon ng-show="monitoreo.ordenarPor == \'APROBADO\' && monitoreo.ordenInverso">keyboard_arrow_up</md-icon></md-button></th><th md-column><md-button ng-click="monitoreo.ordenarPor=\'RECHAZADO\'; monitoreo.ordenInverso = !monitoreo.ordenInverso">Rechazados<md-icon ng-show="monitoreo.ordenarPor == \'RECHAZADO\' && !monitoreo.ordenInverso">keyboard_arrow_down</md-icon><md-icon ng-show="monitoreo.ordenarPor == \'RECHAZADO\' && monitoreo.ordenInverso">keyboard_arrow_up</md-icon></md-button></th><th md-column><md-button ng-click="monitoreo.ordenarPor=\'CERRADO\'; monitoreo.ordenInverso = !monitoreo.ordenInverso">Cerrados<md-icon ng-show="monitoreo.ordenarPor == \'CERRADO\' && !monitoreo.ordenInverso">keyboard_arrow_down</md-icon><md-icon ng-show="monitoreo.ordenarPor == \'CERRADO\' && monitoreo.ordenInverso">keyboard_arrow_up</md-icon></md-button></th><th md-column><md-button ng-click="monitoreo.ordenarPor=\'ELIMINADO\'; monitoreo.ordenInverso = !monitoreo.ordenInverso">Eliminados<md-icon ng-show="monitoreo.ordenarPor == \'ELIMINADO\' && !monitoreo.ordenInverso">keyboard_arrow_down</md-icon><md-icon ng-show="monitoreo.ordenarPor == \'ELIMINADO\' && monitoreo.ordenInverso">keyboard_arrow_up</md-icon></md-button></th></tr></thead><tbody md-body><tr md-row md-select=item ng-repeat="item in monitoreo.estados | orderBy:monitoreo.ordenarPor:monitoreo.ordenInverso "><td md-cell>{{item.nombres}} {{item.apellidos}}</td><td md-cell style="text-align: left; padding-left:20px; background-color: rgb({{255-item.CREADO}}, 255 ,{{255+item.CREADO}})">{{item.CREADO}}</td><td md-cell style="text-align: left; padding-left:20px; background-color: rgb({{255-item.ENVIADO}}, 255 , {{255+item.ENVIADO}})">{{item.ENVIADO}}</td><td md-cell style="text-align: left; padding-left:20px; background-color: rgb({{255-item.DERIVADO}}, 255 ,{{255+item.DERIVADO}})">{{item.DERIVADO}}</td><td md-cell style="text-align: left; padding-left:20px; background-color: rgb({{255-item.APROBADO}}, 255 ,{{255+item.APROBADO}})">{{item.APROBADO}}</td><td md-cell style="text-align: left; padding-left:20px; background-color: rgb({{255-item.RECHAZADO}}, 255 ,{{255+item.RECHAZADO}})">{{item.RECHAZADO}}</td><td md-cell style="text-align: left; padding-left:20px; background-color: rgb({{255-item.CERRADO}}, 255 ,{{255+item.CERRADO}})">{{item.CERRADO}}</td><td md-cell style="text-align: left; padding-left:20px; background-color: rgb({{255-item.ELIMINADO}}, 255 ,{{255+item.ELIMINADO}})">{{item.ELIMINADO}}</td></tr></tbody></table></md-table-container></div><!--Documentos pendientes por usuario--><div ng-if="monitoreo.grafico.cod==6"><md-table-container><table md-table ng-model=selected md-progress=promise><thead md-head><tr md-row><th md-column><md-button ng-click="monitoreo.ordenarPor=\'nombres\'; monitoreo.ordenInverso = !monitoreo.ordenInverso">Usuario<md-icon ng-show="monitoreo.ordenarPor == \'nombres\' && !monitoreo.ordenInverso">keyboard_arrow_down</md-icon><md-icon ng-show="monitoreo.ordenarPor == \'nombres\' && monitoreo.ordenInverso">keyboard_arrow_up</md-icon></md-button></th><th md-column><md-button ng-click="monitoreo.ordenarPor=\'ENVIADO\'; monitoreo.ordenInverso = !monitoreo.ordenInverso">Enviados<md-icon ng-show="monitoreo.ordenarPor == \'ENVIADO\' && !monitoreo.ordenInverso">keyboard_arrow_down</md-icon><md-icon ng-show="monitoreo.ordenarPor == \'ENVIADO\' && monitoreo.ordenInverso">keyboard_arrow_up</md-icon></md-button></th><th md-column><md-button ng-click="monitoreo.ordenarPor=\'RECHAZADO\'; monitoreo.ordenInverso = !monitoreo.ordenInverso">Rechazados<md-icon ng-show="monitoreo.ordenarPor == \'RECHAZADO\' && !monitoreo.ordenInverso">keyboard_arrow_down</md-icon><md-icon ng-show="monitoreo.ordenarPor == \'RECHAZADO\' && monitoreo.ordenInverso">keyboard_arrow_up</md-icon></md-button></th><th md-column><md-button ng-click="monitoreo.ordenarPor=\'DERIVADO\'; monitoreo.ordenInverso = !monitoreo.ordenInverso">Derivados<md-icon ng-show="monitoreo.ordenarPor == \'DERIVADO\' && !monitoreo.ordenInverso">keyboard_arrow_down</md-icon><md-icon ng-show="monitoreo.ordenarPor == \'DERIVADO\' && monitoreo.ordenInverso">keyboard_arrow_up</md-icon></md-button></th><th md-column><md-button ng-click="monitoreo.ordenarPor=\'total\'; monitoreo.ordenInverso = !monitoreo.ordenInverso">Total pendientes<md-icon ng-show="monitoreo.ordenarPor == \'total\' && !monitoreo.ordenInverso">keyboard_arrow_down</md-icon><md-icon ng-show="monitoreo.ordenarPor == \'total\' && monitoreo.ordenInverso">keyboard_arrow_up</md-icon></md-button></th></tr></thead><tbody md-body><tr md-row md-select=item ng-repeat="item in monitoreo.pendientes | orderBy:monitoreo.ordenarPor:monitoreo.ordenInverso "><td md-cell>{{item.nombres}} {{item.apellidos}}</td><td md-cell>{{item.ENVIADO}}</td><td md-cell>{{item.RECHAZADO}}</td><td md-cell>{{item.DERIVADO}}</td><td md-cell>{{item.total}}</td></tr></tbody></table></md-table-container></div><!--Comprometido--><div ng-if="monitoreo.grafico.cod==7"><md-table-container><table md-table ng-model=selected md-progress=promise><thead md-head><tr md-row><th md-column><md-button ng-click="monitoreo.ordenarPor=\'numero\'; monitoreo.ordenInverso = !monitoreo.ordenInverso">Número<md-icon ng-show="monitoreo.ordenarPor == \'numero\' && !monitoreo.ordenInverso">keyboard_arrow_down</md-icon><md-icon ng-show="monitoreo.ordenarPor == \'numero\' && monitoreo.ordenInverso">keyboard_arrow_up</md-icon></md-button><md-input-container class=md-block flex-gt-sm><input ng-model=monitoreo.busqueda.numero></md-input-container></th><th md-column><md-button ng-click="monitoreo.ordenarPor=\'descripcion\'; monitoreo.ordenInverso = !monitoreo.ordenInverso">Descripción<md-icon ng-show="monitoreo.ordenarPor == \'descripcion\' && !monitoreo.ordenInverso">keyboard_arrow_down</md-icon><md-icon ng-show="monitoreo.ordenarPor == \'descripcion\' && monitoreo.ordenInverso">keyboard_arrow_up</md-icon></md-button><md-input-container class=md-block flex-gt-sm><input ng-model=monitoreo.busqueda.descripcion></md-input-container></th><th md-column><md-button ng-click="monitoreo.ordenarPor=\'monto\'; monitoreo.ordenInverso = !monitoreo.ordenInverso">Monto<md-icon ng-show="monitoreo.ordenarPor == \'monto\' && !monitoreo.ordenInverso">keyboard_arrow_down</md-icon><md-icon ng-show="monitoreo.ordenarPor == \'monto\' && monitoreo.ordenInverso">keyboard_arrow_up</md-icon></md-button><div style="height: 65px; width: 20px; border: 0px solid red"></div></th><th md-column><md-button ng-click="monitoreo.ordenarPor=\'cite\'; monitoreo.ordenInverso = !monitoreo.ordenInverso">Documento relacionado<md-icon ng-show="monitoreo.ordenarPor == \'cite\' && !monitoreo.ordenInverso">keyboard_arrow_down</md-icon><md-icon ng-show="monitoreo.ordenarPor == \'cite\' && monitoreo.ordenInverso">keyboard_arrow_up</md-icon></md-button><div style="height: 65px; width: 20px; border: 0px solid red"></div></th><th md-column><md-button ng-click="monitoreo.ordenarPor=\'_fecha_creacion\'; monitoreo.ordenInverso = !monitoreo.ordenInverso">Fecha del comprometido<md-icon ng-show="monitoreo.ordenarPor == \'_fecha_creacion\' && !monitoreo.ordenInverso">keyboard_arrow_down</md-icon><md-icon ng-show="monitoreo.ordenarPor == \'_fecha_creacion\' && monitoreo.ordenInverso">keyboard_arrow_up</md-icon></md-button><md-input-container class=md-block flex-gt-sm><input ng-model=monitoreo.busqueda._fecha_creacion></md-input-container></th></tr></thead><tbody md-body><tr md-row md-select=item ng-repeat="item in monitoreo.comprometido | orderBy:monitoreo.ordenarPor:monitoreo.ordenInverso | filter:monitoreo.busqueda"><td md-cell style="text-align: right">{{item.numero}}</td><td md-cell>{{item.descripcion}}</td><td md-cell style="text-align: right">{{item.monto}}</td><td md-cell><md-button ng-click=monitoreo.vistaPrevia(item.id_documento)>{{item.cite}}</md-button></td><td md-cell>{{item._fecha_creacion |date:\'dd/MM/yyyy\'}}</td></tr></tbody></table></md-table-container></div><!--Pagado--><div ng-if="monitoreo.grafico.cod==8"><md-table-container><table md-table ng-model=selected md-progress=promise><thead md-head><tr md-row><th md-column><md-button ng-click="monitoreo.ordenarPor=\'numero\'; monitoreo.ordenInverso = !monitoreo.ordenInverso">Número<md-icon ng-show="monitoreo.ordenarPor == \'numero\' && !monitoreo.ordenInverso">keyboard_arrow_down</md-icon><md-icon ng-show="monitoreo.ordenarPor == \'numero\' && monitoreo.ordenInverso">keyboard_arrow_up</md-icon></md-button><md-input-container class=md-block flex-gt-sm><input ng-model=monitoreo.busqueda.numero></md-input-container></th><th md-column><md-button ng-click="monitoreo.ordenarPor=\'descripcion\'; monitoreo.ordenInverso = !monitoreo.ordenInverso">Descripción<md-icon ng-show="monitoreo.ordenarPor == \'descripcion\' && !monitoreo.ordenInverso">keyboard_arrow_down</md-icon><md-icon ng-show="monitoreo.ordenarPor == \'descripcion\' && monitoreo.ordenInverso">keyboard_arrow_up</md-icon></md-button><md-input-container class=md-block flex-gt-sm><input ng-model=monitoreo.busqueda.descripcion></md-input-container></th><th md-column><md-button ng-click="monitoreo.ordenarPor=\'monto\'; monitoreo.ordenInverso = !monitoreo.ordenInverso">Monto<md-icon ng-show="monitoreo.ordenarPor == \'monto\' && !monitoreo.ordenInverso">keyboard_arrow_down</md-icon><md-icon ng-show="monitoreo.ordenarPor == \'monto\' && monitoreo.ordenInverso">keyboard_arrow_up</md-icon></md-button><div style="height: 65px; width: 20px; border: 0px solid red"></div></th><th md-column><md-button ng-click="monitoreo.ordenarPor=\'cite_ref\'; monitoreo.ordenInverso = !monitoreo.ordenInverso">Documento relacionado<md-icon ng-show="monitoreo.ordenarPor == \'cite_ref\' && !monitoreo.ordenInverso">keyboard_arrow_down</md-icon><md-icon ng-show="monitoreo.ordenarPor == \'cite_ref\' && monitoreo.ordenInverso">keyboard_arrow_up</md-icon></md-button><div style="height: 65px; width: 20px; border: 0px solid red"></div></th><th md-column><md-button ng-click="monitoreo.ordenarPor=\'_fecha_creacion\'; monitoreo.ordenInverso = !monitoreo.ordenInverso">Fecha del comprometido<md-icon ng-show="monitoreo.ordenarPor == \'_fecha_creacion\' && !monitoreo.ordenInverso">keyboard_arrow_down</md-icon><md-icon ng-show="monitoreo.ordenarPor == \'_fecha_creacion\' && monitoreo.ordenInverso">keyboard_arrow_up</md-icon></md-button><md-input-container class=md-block flex-gt-sm><input ng-model=monitoreo.busqueda._fecha_creacion></md-input-container></th></tr></thead><tbody md-body><tr md-row md-select=item ng-repeat="item in monitoreo.pagado | orderBy:monitoreo.ordenarPor:monitoreo.ordenInverso | filter:monitoreo.busqueda"><td md-cell style="text-align: right">{{item.numero}}</td><td md-cell>{{item.descripcion}}</td><td md-cell style="text-align: right">{{item.monto}}</td><td md-cell><md-button ng-click=monitoreo.vistaPrevia(item.id_documento)>{{item.cite_ref}}</md-button></td><td md-cell>{{item._fecha_creacion |date:\'dd/MM/yyyy\'}}</td></tr></tbody></table></md-table-container></div><div ng-if="monitoreo.grafico.cod===9"><div class=infoContable><div><strong>IPV</strong>: Informe de pago de viáticos</div><div><strong>IPBS</strong>: Informe de pago de bienes y servicios</div><div><strong>IPSPCL-A</strong>: Informe de pago de servicios personales y consultorias de linea</div></div><div flex style=float:right><md-checkbox ng-repeat="header in monitoreo.headers" ng-model=header.mostrar aria-label=Mostrar/Ocultar ng-if=!header.mostrar>{{header.title}}</md-checkbox></div><md-table-container><table md-table ng-model=selected md-progress=promise><thead md-head><tr md-row><th ng-repeat="header in monitoreo.headers" md-column ng-if=header.mostrar><span><md-checkbox ng-model=header.mostrar aria-label=Mostrar/Ocultar></md-checkbox><md-tooltip md-direction=bottom>Ocultar esta columna</md-tooltip><md-button ng-click="monitoreo.ordenarPor = header.name;  monitoreo.ordenInverso = !monitoreo.ordenInverso">{{header.title}}<md-icon ng-show="monitoreo.ordenarPor == header.name && !monitoreo.ordenInverso">keyboard_arrow_down</md-icon><md-icon ng-show="monitoreo.ordenarPor == header.name && monitoreo.ordenInverso">keyboard_arrow_up</md-icon></md-button></span><md-input-container class=md-block flex-gt-sm ng-show="header.name === \'cite\'"><input ng-model=monitoreo.busqueda.cite></md-input-container><md-input-container class=md-block flex-gt-sm ng-show="header.name === \'detalle\'"><input ng-model=monitoreo.busqueda.detalle></md-input-container><div style="height: 65px; width: 20px; border: 0px solid red" ng-show="header.name !== \'detalle\' && header.name !== \'cite\'"></div></th></tr></thead><tbody md-body><tr md-row md-select=item ng-repeat="item in monitoreo.items | orderBy:monitoreo.ordenarPor:monitoreo.ordenInverso | filter:monitoreo.busqueda"><td md-cell ng-if="monitoreo.mostrarOcultar(\'cite\')" style="text-align: right">{{item.cite}}</td><td md-cell ng-if="monitoreo.mostrarOcultar(\'detalle\')">{{item.detalle}}</td><td md-cell ng-if="monitoreo.mostrarOcultar(\'c31\')" style="text-align: right">{{item.c31}}</td><td md-cell ng-if="monitoreo.mostrarOcultar(\'importe\')" style="text-align: right">{{item.importe}}</td></tr></tbody></table></md-table-container></div><br><br></md-card-content></md-card></div>'),
e.put("app/modules/plantillasFormly/plantillas/modules.plantillasFormly.plantillas.html","<div class=container><crud-table url=plantillas.url title-table=plantillas.titulo fields=plantillas.fields usuario=plantillas.usuario permission=plantillas.permission buttons=plantillas.buttons query-extra=plantillas.queryExtra button-agregar=plantillas.buttonAgregar estado-sw=plantillas.estadoSw only-fields=true></crud-table></div>"),e.put("app/modules/plantillasFormly/vistaPdf/modules.plantillasFormly.vistaPdf.html",'<div class=container><div layout layout-align="center start"><md-card flex-gt-sm=50 flex><md-toolbar><div class=md-toolbar-tools><h2><md-icon>picture_as_pdf</md-icon>Vista previa</h2><span flex></span><md-button class=md-icon-button aria-label="Ver pdf" ng-click=vistaPdf.verPdf() ng-show=vistaPdf.flag_html><md-tooltip>Ver PDF</md-tooltip><md-icon aria-label="Close dialog">picture_as_pdf</md-icon></md-button><md-button class=md-icon-button aria-label="Ver html" ng-click=vistaPdf.verHtml() ng-show=!vistaPdf.flag_html><md-tooltip>Ver html</md-tooltip><md-icon aria-label="Close dialog">code</md-icon></md-button></div></md-toolbar><md-card-content><div ng-show=vistaPdf.flag_html bind-html-compile=vistaPdf.html></div><iframe class=iframe-pdf src={{vistaPdf.pdf}} style="width:100%; height:600px; border: none" ng-if="vistaPdf.show_pdf && !vistaPdf.flag_html" allowfullscreen></iframe><div id=canvasContainer ng-show="!vistaPdf.show_pdf && !vistaPdf.flag_html"></div></md-card-content></md-card></div></div>'),e.put("app/modules/seguridad/menu/modules.seguridad.menu.html","<div class=container><crud-table url=menu.url title-table=menu.titulo fields=menu.fields usuario=menu.usuario></crud-table></div>"),e.put("app/modules/seguridad/rol/dialog.rol.html",'<md-dialog ng-cloak class="formly-dialog formly-column-{{column}}" style="max-width: 800px; width: 100%"><form ng-submit=registrarRol() name=rolForm novalidate><md-toolbar><div class=md-toolbar-tools><h2><md-icon>business</md-icon>{{data.id_rol == null ? "Agregar" : "Editar"}}</h2><span flex></span><md-button class=md-icon-button aria-label=Cerrar ng-click=cerrar()><md-tooltip>Cerrar</md-tooltip><md-icon>close</md-icon></md-button></div></md-toolbar><md-dialog-content><div layout><md-card flex><md-card-header><md-card-header-text><span class=md-title>Datos del rol</span></md-card-header-text></md-card-header><md-card-content><md-input-container class=md-block><label>Nombre</label><input ng-model=data.nombre type=text required><div ng-messages=rolForm.nombre.$error ng-show=rolForm.nombre.$dirty><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block><label>Descripcion</label><input ng-model=data.descripcion type=text required><div ng-messages=rolForm.descripcion.$error ng-show=rolForm.descripcion.$dirty><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block><label>Peso</label><input ng-model=data.peso type=text required><div ng-messages=rolForm.peso.$error ng-show=rolForm.peso.$dirty><div ng-message=required>Debe llenar este campo</div></div></md-input-container><md-input-container class=md-block><label for=estado>Estado</label><md-select name=estado ng-model=data.estado placeholder=Estado required><md-option ng-value=item.id ng-repeat="item in estados">{{ item.name }}</md-option></md-select><div ng-messages=rolForm.estado.$error ng-show=rolForm.estado.$dirty><div ng-message=required>Debe seleccionar una opción</div></div></md-input-container><md-input-container class=md-block><label for=fecha_creacion>Fecha de creación</label><md-datepicker ng-model=data._fecha_creacion disabled></md-datepicker></md-input-container><md-input-container class=md-block><label for=fecha_creacion>Fecha de modificación</label><md-datepicker ng-model=data._fecha_modificacion disabled></md-datepicker></md-input-container></md-card-content></md-card><md-card flex><md-card-header><md-card-header-text><span class=md-title>Menus del rol</span></md-card-header-text></md-card-header><md-card-content><div ng-repeat="m in menus"><h3 ng-if="m.fid_menu_padre===null">{{m.nombre}}</h3><md-input-container class=md-block ng-if="m.fid_menu_padre!==null"><md-checkbox ng-model=m.checked aria-label={{m.nombre}}>{{m.nombre}}</md-checkbox></md-input-container></div></md-card-content></md-card></div></md-dialog-content><md-dialog-actions layout layout-padding><span flex></span><md-button type=submit class="md-raised md-primary" ng-disabled=rolForm.$invalid><md-icon>check</md-icon>Guardar</md-button><md-button type=button class=md-raised ng-click=cerrar()><md-icon>cancel</md-icon>Cancelar</md-button></md-dialog-actions></form></md-dialog>'),e.put("app/modules/seguridad/rol/modules.seguridad.rol.html","<div class=container><crud-table url=rol.url title-table=rol.titulo fields=rol.fields usuario=rol.usuario id-show=rol.idShow dialog-controller=rol.dialogController template=rol.template></crud-table></div>"),e.put("app/modules/plantillasFormly/documentos/documento/dialogError.html",'<md-dialog aria-label=Error class=formly-dialog-error style="max-width: 800px; width: 100%"><md-toolbar><div class=md-toolbar-tools><h2><md-icon>error</md-icon>Error</h2><span flex></span> <span flex></span><md-button class=md-icon-button aria-label=Cerrar ng-click=cerrar()><md-tooltip>Cerrar</md-tooltip><md-icon aria-label="Close dialog">close</md-icon></md-button></div></md-toolbar><md-dialog-content class=md-dialog-content><div ng-if="data.tipo==\'formu\'">Debe completar los datos de todos los campos requeridos del documento para poder enviarlo.<br><br>Los campos requeridos tienen un (*) y se muestran con una linea roja.</div><div ng-if="data.tipo==\'timeZone\'">Esta plantilla tiene fechas para llenar y la zona horaria de su ordenador no es la correcta.<br><br>Por favor configure la zona horaria a UTC-4, La Paz - Bolivia, para evitar futuros errores de impresión.<br><br>Si usted no sabe configurar la zona horaria, puede pedir ayuda al personal de soporte técnico.</div><br></md-dialog-content><md-dialog-actions><span flex></span><md-button class=md-raised ng-click=cerrar()><md-icon>check</md-icon>Aceptar</md-button></md-dialog-actions></md-dialog>'),e.put("app/modules/plantillasFormly/documentos/documento/modules.plantillasFormly.documentos.documento.html",'<div class=container-plantilla><section layout><md-content flex><div class="header botones" layout layout-align="start center"><md-button class="md-fab md-primary" ng-click=documento.guardarDocumento() ng-if=!documento.sw_enviado><md-icon>save</md-icon><md-tooltip md-direction=right>Guardar documento</md-tooltip></md-button><md-button class="md-fab md-primary" ng-click=documento.volverAtras() ng-if=documento.sw_enviado><md-icon>reply</md-icon><md-tooltip md-direction=right>Volver atras</md-tooltip></md-button><md-button class="md-fab md-primary" ng-click=documento.vistaPrevia()><md-icon>remove_red_eye</md-icon><md-tooltip md-direction=right>Vista previa</md-tooltip></md-button><!-- <md-button class="md-fab md-primary" ng-click="documento.firmar()" >\r\n                    <md-icon>done_all</md-icon>\r\n                    <md-tooltip md-direction="right"> Firmar Digitalmente</md-tooltip>\r\n                </md-button> --><md-button class="md-fab md-primary" ng-click=documento.copearDocumento() ng-if="documento.id_documento!=0"><md-icon>content_copy</md-icon><md-tooltip md-direction=right>Duplicar documento sin cite</md-tooltip></md-button><!-- <p>\r\n                  {{documento.enviarEjecutandose}} <br>\r\n                  bbb\r\n                  {{!documento.enviarEjecutandose}} <br>\r\n                  aaa\r\n                </p> --><md-button class="md-fab md-primary" ng-click=documento.guardarDocumento(true) ng-if=!documento.sw_enviado ng-disabled="documento.enviarEjecutandose ==1? true:false"><md-icon>send</md-icon><md-tooltip md-direction=right>{{ (documento.id_documento==0)? \'Guardar y enviar documento\' : \'Enviar documento\' }}</md-tooltip></md-button><div flex></div><md-input-container><label for=documento-nombre>Nombre del documento</label><input ng-model=documento.doc.nombre size=50 maxlength=250 ng-disabled=documento.sw_enviado required></md-input-container><div flex><md-button class="md-fab md-warning" ng-click=documento.verObservaciones($event) ng-if=documento.sw_rechazado><md-icon>find_in_page</md-icon><md-tooltip md-direction=right>Ver observaciones</md-tooltip></md-button></div><div flex ng-if=!documento.sw_enviado></div></div><div class=documento-edit><div class="header header-doc" ng-if="documento.sw_grupo && documento.docs_grupo.length > 0"><div class="ap-text-center ap-text-warning">Referencias:</div><div class="ap-text-center ap-text-warning" ng-repeat="dg in documento.docs_grupo" ng-if="dg.id_documento!=documento.id_documento">* {{dg.nombre_plantilla}} -- <span class=ap-cursor-pointer ng-click=documento.verDocumento(dg.id_documento)>{{dg.nombre}}</span></div></div><div class=pagina ng-if=documento.load><form name=documento.formu novalidate><img class=img-membrete ng-src={{documento.url_img}} ng-if=documento.url_img><formly-form class=view-formly-form model=documento.model_actual fields=documento.form_actual></formly-form></form></div></div></md-content></section></div>'),e.put("app/modules/plantillasFormly/documentos/documento/observacion.panel.html",'<md-card style="max-width: 400px"><md-card-title><md-card-title-text><span class=md-headline>Observaciones</span><!-- <span class="md-subhead">Extra Large</span> --></md-card-title-text></md-card-title><md-card-content>{{ observacion }}</md-card-content><md-card-actions layout=row layout-align="end center"><md-button ng-click=closePanel()>Aceptar</md-button></md-card-actions></md-card>'),e.put("app/modules/plantillasFormly/plantillas/plantilla/item.panel.html",'<md-card class=animated style="max-width: 400px; min-width: 300px"><md-card-title><md-card-title-text><span class=md-headline>{{titulos[item.val.element[0].type] || item.val.element[0].type}}</span><!-- <span class="md-subhead">Extra Large</span> --></md-card-title-text></md-card-title><md-card-content ng-switch on=item.val.element[0].type style="max-height: 280px; overflow-y: auto; padding-top: 10px"><div class="container container-elementos"><div ng-switch-when=input layout=column><md-input-container><label>Nombre</label><input type=text ng-model=item.val.element[0].templateOptions.label></md-input-container><md-checkbox ng-model=item.val.element[0].templateOptions.required aria-label=Requerido>Requerido ?</md-checkbox><label>Validación</label><md-select ng-model=item.val.element[0].templateOptions.pattern><md-option ng-value=v.pattern ng-repeat="v in validaciones">{{ v.name }}</md-option></md-select></div><div ng-switch-when=radio layout=column><md-input-container><label>Nombre</label><input type=text ng-model=item.val.element[0].templateOptions.label></md-input-container><md-checkbox ng-model=item.val.element[0].templateOptions.required aria-label=Requerido>Requerido ?</md-checkbox><md-checkbox ng-model=item.val.element[0].templateOptions.vertical aria-label=vertical>Orientacion vertical ?</md-checkbox><label>Opciones</label><md-chips ng-model=item.val.element[0].opciones></md-chips></div><div ng-switch-when=select layout=column><md-input-container><label>Nombre</label><input type=text ng-model=item.val.element[0].templateOptions.label></md-input-container><md-checkbox ng-model=item.val.element[0].templateOptions.required aria-label=Requerido>Requerido ?</md-checkbox><md-checkbox ng-model=item.val.element[0].templateOptions.showItem>Mostrar en PDF</md-checkbox><label>Opciones</label><md-chips ng-model=item.val.element[0].opciones></md-chips></div><div ng-switch-when=textarea layout=column><md-input-container><label>Nombre</label><input type=text ng-model=item.val.element[0].templateOptions.label></md-input-container><md-input-container><label>Altura</label><input type=number ng-model=item.val.element[0].templateOptions.rows></md-input-container><md-checkbox ng-model=item.val.element[0].templateOptions.required aria-label=Requerido>Requerido ?</md-checkbox><md-checkbox ng-model=item.val.element[0].templateOptions.interlineado aria-label=Interlineado-de-parrafos>Quitar interlineado de parrafos ?</md-checkbox><!-- <label>Alineación</label>\n                <md-radio-group layout layout-wrap class="radio-parrafo" ng-model="item.val.element[0].className">\n                    <md-radio-button ng-value="\'ap-text-left\'"> <md-icon>format_align_left</md-icon> </md-radio-button>\n                    <md-radio-button ng-value="\'ap-text-center\'"> <md-icon>format_align_center</md-icon> </md-radio-button>\n                    <md-radio-button ng-value="\'ap-text-right\'"> <md-icon>format_align_right</md-icon> </md-radio-button>\n                    <md-radio-button ng-value="\'ap-text-justify\'"> <md-icon>format_align_justify</md-icon> </md-radio-button>\n                </md-radio-group> --></div><div ng-switch-when=checkbox layout=column><md-input-container><label>Nombre</label><input type=text ng-model=item.val.element[0].templateOptions.label></md-input-container></div><div ng-switch-when=switch layout=column><md-input-container><label>Nombre</label><input type=text ng-model=item.val.element[0].templateOptions.label></md-input-container></div><div ng-switch-when=datepicker layout=column><md-input-container><label>Nombre</label><input type=text ng-model=item.val.element[0].templateOptions.label></md-input-container><md-checkbox ng-model=item.val.element[0].templateOptions.required aria-label=Requerido>Requerido ?</md-checkbox></div><div ng-switch-when=slider layout=column><md-input-container><label>Nombre</label><input type=text ng-model=item.val.element[0].templateOptions.label></md-input-container><md-input-container><label>Step</label><input type=text ng-model=item.val.element[0].templateOptions.step></md-input-container><md-input-container><label>Min</label><input type=number ng-model=item.val.element[0].templateOptions.min></md-input-container><md-input-container><label>Max</label><input type=number ng-model=item.val.element[0].templateOptions.max></md-input-container><md-checkbox ng-model=item.val.element[0].templateOptions.discrete aria-label=Discreto>Discreto ?</md-checkbox></div><div ng-switch-when=chips layout=column><md-input-container><label>Nombre</label><input type=text ng-model=item.val.element[0].templateOptions.label></md-input-container><md-input-container><label>Placeholder</label><input type=text ng-model=item.val.element[0].templateOptions.placeholder></md-input-container><md-input-container><label>2do Placeholder</label><input type=text ng-model=item.val.element[0].templateOptions.secondaryPlaceholder></md-input-container><md-checkbox ng-model=item.val.element[0].templateOptions.required aria-label=Requerido>Requerido ?</md-checkbox></div><div ng-switch-when=texto layout=column><!-- <label ng-if="item.val.element[0].templateOptions.tipo!==\'p\'">Tipo</label>\n                <md-radio-group layout layout-wrap class="radio-parrafo" ng-model="item.val.element[0].templateOptions.tipo" ng-if="item.val.element[0].templateOptions.tipo!==\'p\'">\n                    <md-radio-button ng-value="\'h1\'"> h1 </md-radio-button>\n                    <md-radio-button ng-value="\'h2\'"> h2 </md-radio-button>\n                    <md-radio-button ng-value="\'h3\'"> h3 </md-radio-button>\n                    <md-radio-button ng-value="\'h4\'"> h4 </md-radio-button>\n                    <md-radio-button ng-value="\'h5\'"> h5 </md-radio-button>\n                    <md-radio-button ng-value="\'h6\'"> h6 </md-radio-button>\n                </md-radio-group> --><label>Alineación</label><md-radio-group layout layout-wrap class=radio-parrafo ng-model=item.val.element[0].templateOptions.className><md-radio-button ng-value="\'ap-text-left\'"><md-icon>format_align_left</md-icon></md-radio-button><md-radio-button ng-value="\'ap-text-center\'"><md-icon>format_align_center</md-icon></md-radio-button><md-radio-button ng-value="\'ap-text-right\'"><md-icon>format_align_right</md-icon></md-radio-button><md-radio-button ng-value="\'ap-text-justify\'" ng-if="item.val.element[0].templateOptions.tipo===\'p\'"><md-icon>format_align_justify</md-icon></md-radio-button></md-radio-group><label>Espacios</label><div layout layout-wrap class=radio-parrafo><md-checkbox ng-model=item.val.element[0].templateOptions.mTop>Espacio superior</md-checkbox><md-checkbox ng-model=item.val.element[0].templateOptions.mBot>Espacio inferior</md-checkbox></div><md-input-container ng-if="item.val.element[0].templateOptions.tipo!==\'p\'"><label>Texto</label><input ng-model=item.val.element[0].templateOptions.label></md-input-container><md-input-container ng-if="item.val.element[0].templateOptions.tipo===\'p\'"><label>Texto</label><textarea ng-model=item.val.element[0].templateOptions.label rows=3 md-no-resize=true max-rows=3>\n                    </textarea></md-input-container></div><div ng-switch-when=lista layout=column><md-input-container class=ap-input-ns><label>Texto</label><input ng-model=item.val.element[0].templateOptions.label></md-input-container><label>Tipo de lista</label><md-radio-group layout layout-wrap class=radio-parrafo ng-model=item.val.element[0].templateOptions.tipo><md-radio-button ng-value="\'ol\'">Lista ordenada</md-radio-button><md-radio-button ng-value="\'ul\'">Lista no ordenada</md-radio-button></md-radio-group><label>Alineación</label><md-radio-group layout layout-wrap class=radio-parrafo ng-model=item.val.element[0].templateOptions.className><md-radio-button ng-value="\'ap-text-left\'"><md-icon>format_align_left</md-icon></md-radio-button><md-radio-button ng-value="\'ap-text-center\'"><md-icon>format_align_center</md-icon></md-radio-button><md-radio-button ng-value="\'ap-text-right\'"><md-icon>format_align_right</md-icon></md-radio-button></md-radio-group><label>Elementos</label><md-chips ng-model=item.val.element[0].opciones></md-chips><br></div><div ng-switch-when=inputt layout=column><md-input-container class=ap-input-ns><label>Texto</label><input ng-model=item.val.element[0].templateOptions.labelx></md-input-container><md-checkbox ng-model=item.val.element[0].templateOptions.required aria-label=Requerido>Requerido ?</md-checkbox><label>Alineación</label><md-radio-group layout layout-wrap class=radio-parrafo ng-model=item.val.element[0].templateOptions.alineacion><md-radio-button ng-value="\'ap-text-left\'"><md-icon>format_align_left</md-icon></md-radio-button><md-radio-button ng-value="\'ap-text-center\'"><md-icon>format_align_center</md-icon></md-radio-button><md-radio-button ng-value="\'ap-text-right\'"><md-icon>format_align_right</md-icon></md-radio-button></md-radio-group><label>Espacio de texto = {{item.val.element[0].templateOptions.labelw}}</label><md-slider flex min=0 max=80 ng-model=item.val.element[0].templateOptions.labelw step=5 aria-label=remdes-width></md-slider><br></div><div ng-switch-when=cite layout=column><!-- <md-input-container class="ap-input-ns">\n                    <label>Texto cite</label>\n                    <input ng-model="item.val.element[0].templateOptions.labelCite">\n                </md-input-container>\n                <md-input-container class="ap-input-ns">\n                    <label>Texto fecha</label>\n                    <input ng-model="item.val.element[0].templateOptions.labelFecha">\n                </md-input-container> --><md-input-container><label>Tipo de membrete</label><md-select ng-model=item.val.element[0].templateOptions.tipoMembrete><md-option ng-value="\'sin membrete\'">Sin membrete</md-option><md-option ng-value="\'externo\'">Membrete externo</md-option><md-option ng-value="\'legal\'">Membrete legal</md-option></md-select></md-input-container><br><md-input-container><label>Tipo de hoja</label><md-select ng-model=item.val.element[0].templateOptions.tipoHoja ng-click=controlTipoHoja><md-option ng-value="\'Letter\'">Carta</md-option><md-option ng-value="\'Oficio\'">Oficio</md-option><md-option ng-value="\'A4\'">A4</md-option><md-option ng-value="\'Externo\'">Nota Externa</md-option><md-option ng-value="\'Legal\'">Nota Legal</md-option></md-select></md-input-container><!-- <br> --><!-- <label>Tipo de membrete</label>\n                <md-radio-group layout layout-wrap class="radio-parrafo" ng-model="item.val.element[0].templateOptions.tipoMembrete">\n                    <md-radio-button ng-value="\'sin membrete\'"> Sin membrete </md-radio-button>\n                    <md-radio-button ng-value="\'externo\'"> membrete externo </md-radio-button>\n                </md-radio-group> --><!-- <md-checkbox ng-model="item.val.element[0].templateOptions.tipoMembrete" aria-label="Vertical"> Vertical </md-checkbox> --><label>Tipo de cite</label><md-radio-group layout layout-wrap ng-model=item.val.element[0].templateOptions.tipo><md-radio-button flex value=general>General</md-radio-button><md-radio-button flex value=unidad>Unidad</md-radio-button></md-radio-group><label>Numeración de pagina</label><md-radio-group layout layout-wrap ng-model=item.val.element[0].templateOptions.numeracionPagina><md-radio-button flex value=true>Si</md-radio-button><md-radio-button flex value=false>No</md-radio-button></md-radio-group><!-- <label>¿Se puede generar de manera multiple?</label>\n                <md-radio-group layout layout-wrap ng-model="item.val.element[0].templateOptions.generacionMultiple">\n                  <md-radio-button flex value="true"> Si </md-radio-button>\n                  <md-radio-button flex value="false"> No </md-radio-button>\n                </md-radio-group> --></div><div ng-switch-when=layout layout=column><label>Número de elementos</label><md-radio-group layout layout-wrap class=radio-parrafo ng-model="item.val.element[0].elementAttributes[\'num-cols\']"><md-radio-button ng-value="\'2\'">2</md-radio-button><md-radio-button ng-value="\'3\'">3</md-radio-button><md-radio-button ng-value="\'4\'">4</md-radio-button></md-radio-group></div><div ng-switch-when=vacio layout=column><md-input-container class=ap-input-ns><label>Altura en cm (0, 30)</label><input ng-model=item.val.element[0].templateOptions.height></md-input-container></div><div ng-switch-when=datosGenerales layout=column><md-checkbox ng-model=item.val.element[0].templateOptions.aprobarPorDireccion>Aprobar por dirección</md-checkbox><div layout layout-wrap class=radio-parrafo><md-checkbox ng-model=item.val.element[0].templateOptions.show.via>Via</md-checkbox><md-checkbox ng-model=item.val.element[0].templateOptions.show.ref>Ref</md-checkbox><md-checkbox ng-model=item.val.element[0].templateOptions.showItem>Mostrar en PDF</md-checkbox></div><md-input-container class=ap-input-ns><label>Texto referencia</label><input ng-model=item.val.element[0].templateOptions.labelRef></md-input-container></div><div ng-switch-when=encabezado layout=column><div layout layout-wrap class=radio-parrafo><md-checkbox ng-model=item.val.element[0].templateOptions.show.via>Via</md-checkbox><md-checkbox ng-model=item.val.element[0].templateOptions.show.ref>Ref</md-checkbox></div><md-input-container class=ap-input-ns><label>Texto referencia</label><input ng-model=item.val.element[0].templateOptions.labelRef></md-input-container></div><div ng-switch-when=documentosRelacionados layout=column><md-input-container class=ap-input-ns><label>Texto</label><input ng-model=item.val.element[0].templateOptions.label></md-input-container><!-- <label>Espacio de texto = {{item.val.element[0].templateOptions.labelw-5}}</label>\n                    <md-slider flex min="5" max="80" ng-model="item.val.element[0].templateOptions.labelw" step="5" aria-label="remdes-width">\n                </md-slider> --></div><div ng-switch-when=documentosAnular layout=column><md-input-container class=ap-input-ns><label>Texto</label><input ng-model=item.val.element[0].templateOptions.label></md-input-container></div><div ng-switch-when=archivo layout=column><md-input-container class=ap-input-ns><label>Texto</label><input ng-model=item.val.element[0].templateOptions.label></md-input-container><md-checkbox ng-model=item.val.element[0].templateOptions.multiple>Multiple ?</md-checkbox></div><div ng-switch-when=cajachica layout=column><md-input-container><label>Acción</label><md-select ng-model=item.val.element[0].templateOptions.tipo><md-option value=GESTION>GESTION PARTIDAS</md-option><md-option value=COMPROMETIDO>COMPROMETIDO</md-option><md-option value=PAGADO>PAGADO</md-option></md-select></md-input-container><!-- <md-checkbox ng-model="item.val.element[0].templateOptions.show.cite"> Cite ?  </md-checkbox>\n                <md-checkbox ng-model="item.val.element[0].templateOptions.show.pagado"> Pagado ?  </md-checkbox>\n\n                <label>Partidas</label>\n                <md-chips ng-model="item.val.element[0].templateOptions.partidas"></md-chips>\n                <label>Acciones</label>\n                <md-chips ng-model="item.val.element[0].templateOptions.acciones"></md-chips> --><!-- <md-input-container class="ap-input-ns">\n                    <label>Texto</label>\n                    <input ng-model="item.val.element[0].templateOptions.label">\n                </md-input-container> --><!-- <md-checkbox ng-model="item.val.element[0].templateOptions.multiple"> Multiple ?  </md-checkbox> --></div><div ng-switch-when=certificacionComprometido layout=column><md-input-container class=ap-input-ns><label>Titulo</label><input ng-model=item.val.element[0].templateOptions.label></md-input-container></div><div ng-switch-when=listaContactos layout=column><md-input-container class=ap-input-ns><label>Título</label><input ng-model=item.val.element[0].templateOptions.label></md-input-container></div><div ng-switch-default layout=column>Falta codigo para este</div></div></md-card-content><md-card-actions layout=row layout-align="end center"><md-button class=md-primary ng-click=xeditItem()>Aceptar</md-button><!-- <md-button ng-click="xremoveItem()"> Eliminar </md-button> --><md-button ng-click=xcancelEditItem()>Cancelar</md-button></md-card-actions></md-card>'),e.put("app/modules/plantillasFormly/plantillas/plantilla/modules.plantillasFormly.plantillas.plantilla.html",'<div class=container-plantilla><section layout><md-content flex class=documento><div class=header-plantillas layout layout-align="start center"><md-button class="md-fab md-primary" ng-click=plantilla.guardarPlantilla()><md-icon>save</md-icon><md-tooltip md-direction=right>{{ (plantilla.id_plantilla==0)? \'Guardar plantilla\' : \'Modificar plantilla\' }}</md-tooltip></md-button><md-menu><md-button aria-label="open menu" class="md-fab md-primary" md-menu-origin ng-click=$mdOpenMenu($event)><md-icon>location_searching</md-icon><md-tooltip md-direction=right>Ver json de estructura</md-tooltip></md-button><md-menu-content class=menu-content-json width=4 style="max-width: 400px"><h3>Cuerpo json del formulario</h3><pre>{{plantilla.data | json}}</pre></md-menu-content></md-menu><md-button class="md-fab md-primary" ng-click=plantilla.vistaPrevia() ng-if=!plantilla.vista_previa><md-icon>visibility</md-icon><md-tooltip md-direction=right>Vista previa</md-tooltip></md-button><md-button class="md-fab md-primary" ng-click="plantilla.vista_previa=false" ng-if=plantilla.vista_previa><md-icon>visibility_off</md-icon><md-tooltip md-direction=right>Cancelar vista previa</md-tooltip></md-button><md-menu ng-if=plantilla.vista_previa><md-button aria-label="open menu" class="md-fab md-primary" md-menu-origin ng-click=$mdOpenMenu($event)><md-icon>location_searching</md-icon><md-tooltip md-direction=right>Ver json de valores</md-tooltip></md-button><md-menu-content class=menu-content-json width=4 style="max-width: 400px"><h3>Cuerpo json de valores</h3><pre>{{plantilla.form_model | json}}</pre></md-menu-content></md-menu><md-button class="md-fab md-primary" ng-click=plantilla.verPdf() ng-if=plantilla.vista_previa><md-icon>picture_as_pdf</md-icon><md-tooltip md-direction=right>Ver pdf</md-tooltip></md-button><div flex=10 ng-if=!plantilla.vista_previa></div><md-input-container><label for=plantilla-nombre>Nombre de la plantilla</label><input ng-model=plantilla.nombre size=50 ng-disabled=plantilla.existe_documento required></md-input-container><!-- <md-input-container>\n                    <label for="plantilla-abreviacion">Abreviación</label>\n                    <input ng-model="plantilla.abreviacion" required ng-disabled="plantilla.existe_documento" ng-keyup="plantilla.abreviacion=plantilla.abreviacion.toUpperCase()">\n                </md-input-container> --><div flex><!-- <md-button class="md-fab md-primary" ng-click="plantilla.togglePalette($event)" >\n                        <md-icon>\n                            reorder\n                        </md-icon>\n                        <md-tooltip>\n                            Abrir paleta\n                        </md-tooltip>\n                    </md-button> --></div></div><div class=pagina ng-if=plantilla.vista_previa><form name=plantilla.formu_prueba novalidate><img class=img-membrete ng-src={{plantilla.url_img}} ng-if=plantilla.url_img><formly-form class=view-formly-form model=plantilla.form_model fields=plantilla.form_previo></formly-form></form></div><div class=pagina ng-if=!plantilla.vista_previa><img class=img-membrete ng-src={{plantilla.url_img}} ng-if=plantilla.url_img><md-card-content class=lista dnd-list=plantilla.items dnd-drop="plantilla.dropCallback(index, item)"><p class=content-drop ng-if="plantilla.items.length == 0">Arrastre alg&uacute;n elemento en esta secci&oacute;n o haga clic en el bot&oacute;n \'+\' de alg&uacute;n elemento</p><div class=div-{{item.val.element[0].type}} ng-repeat="item in plantilla.items" ng-show=!item.notvisualize><div class=column layout layout-align="center center" ng-switch on=item.val.element[0].type><div flex ng-switch-when=layout><div ng-class="\'sublista-\'+item.val.element[0].elementAttributes[\'num-cols\']" dnd-list=item.val.element[0].fieldGroup dnd-drop="plantilla.dropLayoutCallback(index, item, $index)"><div ng-class="\'div-li-\'+item.val.element[0].elementAttributes[\'num-cols\']" ng-if="item.val.element[0].fieldGroup.length==0" class=layout-drop>&nbsp;&nbsp;&nbsp;Puede arrastrar alg&uacute;n elemento en esta secci&oacute;n</div><div ng-class="\'div-li-\'+item.val.element[0].elementAttributes[\'num-cols\']" ng-repeat="subitem in item.val.element[0].fieldGroup" ng-mouseover="layoutIndex=$parent.$index"><div layout layout-align="center center" ng-switch on=subitem.val.element[0].type ng-show=!subitem.notvisualize><!-- <pre>{{subitem | json}}</pre> --><div flex ng-switch-when=layout>No puede añadir contenedores dentro de contenedores</div><div flex ng-switch-default><formly-form class=view-formly-form model=subitem.val.model fields=subitem.val.element></formly-form></div><div layout=column><md-icon class="ap-text-success ap-cursor-pointer" dnd-draggable=subitem.val.element[0] dnd-effect-allowed=move dnd-dragstart="plantilla.startLayoutCallback($index, subitem, layoutIndex)" dnd-dragend=plantilla.endLayoutCallback(layoutIndex) ng-click="plantilla.openMenu(subitem, $event, $index, layoutIndex)"><md-tooltip>Click para editar o puede arrastrar</md-tooltip>blur_on</md-icon><md-icon class="ap-cursor-pointer ap-text-error" ng-click="plantilla.removeItem(item, $index, layoutIndex)"><md-tooltip>Eliminar</md-tooltip>delete</md-icon></div></div></div></div></div><div flex ng-switch-default><formly-form class=view-formly-form model=item.val.model fields=item.val.element></formly-form></div><div layout=column><md-icon class=ap-cursor-pointer dnd-draggable=item.val.element[0] dnd-effect-allowed=move dnd-dragstart="plantilla.startCallback($index, item)" dnd-dragend=plantilla.endCallback() ng-click="plantilla.openMenu(item, $event, $index)"><md-tooltip>Click para editar o puede arrastrar</md-tooltip>blur_on</md-icon><md-icon class="ap-cursor-pointer ap-text-error" ng-click="plantilla.removeItem(item, $index)" ng-if="item.val.element[0].type!=\'cite\'"><md-tooltip>Eliminar</md-tooltip>delete</md-icon></div></div></div></md-card-content></div><div flex></div><br><br><br><br><br><br><br><br><br><br><br></md-content><md-sidenav class="md-sidenav-right ap-sidenav-right md-whiteframe-1dp" md-component-id=right md-disable-backdrop md-is-locked-open="$mdMedia(\'gt-sm\')"><md-content><!-- <md-card-title-text>\n                    <span class="md-headline">Paleta</span>\n                </md-card-title-text> --><palette-formly funcion-agregar=plantilla.funcionAgregar></palette-formly></md-content></md-sidenav></section></div>');
}]);
//# sourceMappingURL=../maps/scripts/app-f27eedfa14.js.map
