<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
      integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
      crossorigin=""/>
    <style>
      #bolivia { height: 700px; }
    </style>
  </head>
  <body>
    <div id="bolivia"></div>
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
      integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
      crossorigin=""></script>
    <script>
      var ents_layer;
      function getColor(d) {
              return d > 1000 ? '#800026' :
                         d > 500  ? '#BD0026' :
                         d > 200  ? '#E31A1C' :
                         d > 100  ? '#FC4E2A' :
                         d > 50   ? '#FD8D3C' :
                         d > 20   ? '#FEB24C' :
                         d > 10   ? '#FED976' :
                                    '#FFEDA0';
      }
      function style(feature) {
              return {
                          fillColor: getColor(feature.properties["snis-ents-por-municipio-por-edad_Cardiovascular-tot-60+"]),
                          weight: 2,
                          opacity: 1,
                          color: 'white',
                          dashArray: '3',
                          fillOpacity: 0.7
                      };
      }
      function highlightFeature(e) {
              var layer = e.target;

              layer.setStyle({
                          weight: 5,
                          color: '#666',
                          dashArray: '',
                          fillOpacity: 0.7
                      });

              if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
                          layer.bringToFront();
                      }
      }

      function resetHighlight(e) {
              ents_layer.resetStyle(e.target);
      }

      function zoomToFeature(e) {
              map.fitBounds(e.target.getBounds());
      }
      function onEachFeature(feature, layer) {
              layer.on({
                          mouseover: highlightFeature,
                          mouseout: resetHighlight,
                          click: zoomToFeature
                      });
      }
      var bolivia = L.map('bolivia').setView([-16.394,-63.545], 6);
      L.tileLayer('https://a.tile.openstreetmap.org/{z}/{x}/{y}.png', {
              attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>',
              maxZoom: 18
      }).addTo(bolivia);
      var xmlhttp = new XMLHttpRequest();
      xmlhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          var myObj = JSON.parse(this.responseText);
          ents_layer = L.geoJSON(myObj, {
            style: style,
            onEachFeature: onEachFeature
          }).addTo(bolivia);
        }
      };
      xmlhttp.open("GET", "data/ents.test.geojson", true);
      xmlhttp.send();
    </script>
  </body>
</html>
